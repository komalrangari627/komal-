"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="002fde64-7ae2-5d96-89ab-c3a61d8b1315")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[6658],{832968:(e,n,o)=>{o.d(n,{K:()=>l,P:()=>d});var t=o(7378),c=o(601108),r=o(566371),a=o(218868),s=o(51387),i=o(807901);function d(e){let{planType:n,planId:o}=(0,i.jb)(),d=(0,t.useMemo)(()=>e.map(e=>e.assetKey).join(","),[e]),l=(0,t.useMemo)(()=>e.map(({component:e,assetKey:n})=>({type:e.type,key:n,library_key:e.library_key})),[d]),p=(0,c.k)().dt_component_browser_bulk_mapping||(0,c.k)().dt_component_browser_inline_suggestions||(0,c.k)().dt_component_browser_suggestions_debug,m=(0,t.useMemo)(()=>({assets:l,plan_parent_id:o,plan_parent_type:n,num_results_per_asset:5}),[d,o,n]),u=l.length>0&&p,_=(0,t.useMemo)(()=>u?(0,a.af)():"",[m,u]),[g]=(0,r.IT)((0,s.Mo)({...m,query_id:_,session_id:_}),{enabled:u});return{suggestions:g.data?.results??{},searchSessionId:_,isLoadingSuggestions:"loading"===g.status}}function l(e){let[n]=(0,r.IT)((0,s.wP)(e),{enabled:!!e});return{ingestionStatus:n.data?.ingestion_status,hasLoaded:"loaded"===n.status,errors:n.errors}}},358099:(e,n,o)=>{function t(e){return"key"in e?e.key:"component_key"in e?e.component_key:null}o.d(n,{I:()=>t,W:()=>c});let c={all:{value:"all"},notConnected:{value:"notConnected"},connected:{value:"connected"},ignored:{value:"ignored"},suggestionsAvailable:{value:"suggestionsAvailable"}}},436658:(e,n,o)=>{o.d(n,{rI:()=>q,Wq:()=>x,IN:()=>E,Hf:()=>S,WA:()=>K});var t=o(7378),c=o(514228),r=o(150583),a=o(601108),s=o(27355),i=o(901889),d=o(566371),l=o(99656),p=o(303541),m=o(302958),u=o(576487),_=o(303587),g=o(832968),f=o(51387),h=o(358099),y=o(286262),b=o(341273),k=o(929976),v=o(386952),C=o(372672),w=o(410317),I=o(928537),P=o(232926),F=o(340571),L=o(516028);function E({displayedComponent:e,filteredComponents:n,componentBrowserListRowData:o,setComponentBrowserListRowData:a,suggestions:_,entrypoint:g}){let b=(0,C.iZ)(),{Sprig:E}=(0,l.A)(),[S,K]=(0,t.useState)(-1),q=(0,t.useRef)([]),[x,M]=(0,t.useState)(null),V=(0,t.useCallback)(e=>{M(e)},[]);(0,t.useEffect)(()=>{q.current=q.current.slice(0,o.length)},[o.length]);let N=(0,v._6)(),A=(0,c.wA)(),O=(0,d.gY)(f.RL),B=(0,d.gY)(f.S6),D=(0,d.gY)(f.K5),R=(0,d.gY)(f.LO),T=(0,d.gY)(f._E),W=function(){let e=(0,L._G)(),n=(0,F.OG)(e),o=n?.selectedRepositories?.[0],{directories:c}=(0,P.v)({libraryKey:e,repositoryId:o?.id||""}),r=(0,i.hC)();return(0,t.useCallback)(({suggestions:n,path:o,componentName:t,trackingProps:a,libraryKey:s})=>{let i=!!n&&n.length>0,d=n?n.findIndex(e=>e.src_path===o&&e.name===t):-1,l=!!n&&-1===d&&n.some(e=>e.src_path===o),p=s===e&&c&&!c.some(e=>o.startsWith(e));r("component_browser.code_connect_component_connected",{componentName:t,sourcePath:o,location:a.location,source:a.source,componentHasSuggestions:i,pickedSuggestionIndex:d,pickedSuggestionPathButWrongComponent:l,componentNotInSpecifiedDirectories:p,sessionId:a.sessionId})},[c,e,r])}(),H=(0,s.Xr)(w.mO),Y=(0,i.hC)(),j=(0,t.useCallback)(e=>{if(void 0!==e)for(let o=e+1;o<q.current.length;o++){let e=n[o],t=e?.component.code_connect_info.v1.state==="ignored";if(e&&!t&&(!e.selectedFile||!e.selectedComponent)){let e=q.current[o];if(e){e.focus();break}}}},[q,n]),G=(0,t.useCallback)(e=>{let{codeConnectId:n,row:o}=e,t=o?.sourceIndex;if(o&&void 0!==t){let c={...o,component:{...o.component,code_connect_info:{...o.component.code_connect_info,v1:{...o.component.code_connect_info.v1,state:"not_connected",id:void 0}}}};n?(a(e=>{let n=[...e];return n[t]={...c,isLoading:!0},n}),B({codeConnectId:n}).then(()=>{let n="connected"!==o.component.code_connect_info.v1.state,r=n?(0,p.t)("dev_handoff.component_browser.removed_ignore_message",{componentName:o.component.name}):(0,p.t)("dev_handoff.component_browser.disconnected_message",{componentName:o.component.name}),s=(0,h.I)(o.component);s&&H(e=>{if(!e)return{status:{},loadingStatus:"loaded"};let{[s]:n,...o}=e.status;return{...e,status:o}}),Y(n?"component_browser.code_connect_component_ignore_removed":"component_browser.code_connect_component_disconnected",{nodeId:o.component.node_id,location:e.trackingProps.location}),a(e=>{let n=[...e];return n[t]={...c,isLoading:!1},n}),A(m.F.enqueue({message:r,type:"Disconnect component"})),e.callback?.()}).catch(n=>{r.vF.error("Error deleting code connect map",n),a(e=>{let n=[...e];return n[t]={...o,isLoading:!1},n}),A(m.F.enqueue({message:n.message,type:"Disconnect component error",error:!0})),e.callback?.(n)})):a(e=>{let n=[...e];return n[t]={...c,isLoading:!1},n})}},[B,A,a,Y,H]),J=(0,t.useCallback)(e=>{let{row:n,sourceIndex:o,trackingProps:t}=e,c=n.selectedFile,s=n.selectedComponent,i=c?.metadata?.path??"",d=n.component.node_id,l=c?.metadata,u=(0,h.I)(n.component);if(u&&H(e=>e?{...e,status:{...e.status,[u]:"connected"}}:{status:{[u]:"connected"},loadingStatus:"loaded"}),!c||!i)return;let g={...n,component:{...n.component,code_connect_info:{...n.component.code_connect_info,v1:{...n.component.code_connect_info.v1,author_name:b?.name,author_id:b?.id,state:"connected",type:"component_browser",figmadoc:JSON.stringify([{repository:l?.repository,name:s?.title}])}}},inputValue:""};a(e=>{let n=[...e];return n[o]={...g,isLoading:!0},n}),O({library_key:n.component.library_key,node_id:d,template:"",component_name:s?.title,source_path:i,status:"connected",repository:l?.repository,origin:t.location,entrypoint:t.entrypoint}).then(e=>{let c=e.data.meta.code_connect_id;a(e=>{let n=[...e];return n[o]={...g,isLoading:!1,component:{...g.component,code_connect_info:{...g.component.code_connect_info,v1:{...g.component.code_connect_info.v1,id:c,type:"component_browser",figmadoc:JSON.stringify([{repository:l?.repository,name:s?.title}])}}}},n}),A(m.F.enqueue({message:(0,p.t)("dev_handoff.component_browser.connected_message",{componentName:n.component.name}),type:"Connected component"})),W({suggestions:_[n.assetKey],path:i,componentName:s?.title??"",trackingProps:t,libraryKey:n.component.library_key}),E("track",y.I)}).catch(e=>{r.vF.error("Error creating code connect map",e),a(e=>{let t=[...e];return t[o]={...n,isLoading:!1},t}),A(m.F.enqueue({message:e.message,type:"Connect component error",error:!0}))})},[E,O,A,a,b,H,_,W]),X=(0,t.useCallback)(e=>{let{sourceIndex:n,value:t}=e,c=o[n];c&&a(e=>{let o=[...e];return o[n]={...c,inputValue:t},o})},[o,a]),z=(0,t.useCallback)(e=>{let{row:n,sourceIndex:o,trackingProps:t,save:c=!0}=e,s=n.selectedFile,i=n.selectedComponent,d=s?.metadata?.path??"",l=n.component.node_id,u=n.component.code_connect_info.v1.id;if(!s||!d||(a(e=>{let t=[...e];return t[o]={...n,inputValue:""},t}),!c||!u))return;let _={...n,component:{...n.component,code_connect_info:{...n.component.code_connect_info,v1:{...n.component.code_connect_info.v1,author_name:b?.name,author_id:b?.id,state:"connected",type:"component_browser"}}},isLoading:!0,inputValue:""};a(e=>{let n=[...e];return n[o]={..._},n}),D({code_connect_id:u,library_key:n.component.library_key,node_id:l,template:"",component_name:i?.title,source_path:d,status:"connected"}).then(()=>{a(e=>{let n=[...e];return n[o]={..._,isLoading:!1,component:{..._.component,code_connect_info:{..._.component.code_connect_info,v1:{..._.component.code_connect_info.v1,id:u,type:"component_browser"}}}},n}),A(m.F.enqueue({message:(0,p.t)("dev_handoff.component_browser.updated_message",{componentName:n.component.name})})),Y("component_browser.code_connect_component_updated",{componentName:i?.title??"",sourcePath:d,location:t.location,source:t.source,entrypoint:t.entrypoint})}).catch(e=>{r.vF.error("Error updating code connect map",e),a(e=>{let t=[...e];return t[o]={...n,isLoading:!1},t}),A(m.F.enqueue({message:e.message,error:!0}))})},[D,A,a,Y,b]),Z=(0,t.useCallback)(e=>{let{currentRowIndex:n,sourceIndex:t,selectedComponent:c,action:r,save:s=!0}=e,i=o[t];if(i){if("create"===r){let o={...i,selectedComponent:c,inputValue:""};Y("component_browser.code_component_connection_data_entered",{nodeId:i?.component.node_id,field:"code_component",location:e.trackingProps.location,source:e.trackingProps.source,entrypoint:e.trackingProps.entrypoint,value:e.selectedComponent?.title,sessionId:e.trackingProps.sessionId}),a(e=>{let n=[...e];return n[t]=o,n}),i.selectedFile&&s&&(i.component.code_connect_info.v1.id?z({row:{...i,selectedComponent:c},sourceIndex:t,trackingProps:e.trackingProps}):J({row:{...i,selectedComponent:c},sourceIndex:t,trackingProps:e.trackingProps}),void 0!==n&&j(n))}else"delete"===r&&i&&z({save:s,sourceIndex:t,row:{...i,selectedComponent:null,inputValue:""},trackingProps:e.trackingProps})}},[o,J,z,a,Y,j]),Q=(0,t.useCallback)(e=>{let{sourceIndex:n,selectedFile:t,currentRowIndex:c,save:r=!0}=e,s=o[n];if(Y("component_browser.code_component_connection_data_entered",{nodeId:s?.component.node_id,field:"code_file",location:e.trackingProps.location,source:e.trackingProps.source,entrypoint:e.trackingProps.entrypoint,value:e.selectedFile?.title,sessionId:e.trackingProps.sessionId}),s){if(t){if(a(e=>{let o=[...e];return o[n]={...s,inputValue:"",selectedFile:t,isLoading:!1},o}),!r)return;J({row:{...s,selectedFile:t},sourceIndex:n,trackingProps:e.trackingProps})}else G({currentRowIndex:c,codeConnectId:s.component.code_connect_info.v1.id,row:{...s,inputValue:"",selectedFile:null,selectedComponent:null},trackingProps:e.trackingProps})}},[o,J,G,Y,a]),U=(0,t.useCallback)(e=>{let{row:n,sourceIndex:o,trackingProps:t,currentRowIndex:c}=e;n.selectedFile||n.selectedComponent?n.selectedFile&&!n.selectedComponent?Z({sourceIndex:o,selectedComponent:n.inputValue?{title:n.inputValue??""}:null,action:"create",trackingProps:t}):J({row:n,sourceIndex:o,trackingProps:t}):(Q({sourceIndex:o,selectedFile:{title:n.inputValue??"",metadata:{path:n.inputValue??"",isCustomLink:!1,repository:{id:"",name:""}}},trackingProps:t}),j(c)),j(c)},[J,Z,Q,j]),$=(0,t.useCallback)(e=>{let{selectedComponents:n,bulkSuggestions:o,trackingProps:t,ignore:c}=e,s=[];n.forEach(e=>{let n=e.component.code_connect_info?.v1?.state;if("connected"===n||"ignored"===n)return;let t=(o[e.assetKey]||[])[0];t&&s.push({component:e,asset:{library_key:e.component.library_key,node_id:e.component.node_id,component_name:t.name||"",source_path:t.src_path||"",status:c?"ignored":"connected"},bestSuggestion:t})});let i=[];a(e=>{let n=[...e];return i=s.map(({component:e})=>n[e.sourceIndex]??e),s.forEach(({component:e,bestSuggestion:o})=>{let t=e.sourceIndex;void 0!==t&&n[t]&&(n[t]={...n[t],isLoading:!0,selectedFile:o?{title:o.src_path,metadata:{path:o.src_path,isCustomLink:!1,repository:{id:"",name:""}}}:null,selectedComponent:o&&o.name?{title:o.name}:null,inputValue:"",component:{...n[t].component,code_connect_info:{...n[t].component.code_connect_info,v1:{...n[t].component.code_connect_info.v1,state:c?"ignored":"connected",author_name:b?.name,author_id:b?.id}}}})}),n});let d={current:i};R({assets_to_map:s.map(e=>e.asset)}).then(e=>{let{success_count:n,successful_asset_mappings:o}=e.data.meta;a(n=>{let o=[...n];return e.data.meta.successful_asset_mappings.forEach(e=>{let n=o.findIndex(n=>n.assetKey===e.asset_key);-1!==n&&o[n]&&(o[n]={...o[n],isLoading:!1,component:{...o[n].component,code_connect_info:{...o[n].component.code_connect_info,v1:{...o[n].component.code_connect_info.v1,id:e.code_connect_id}}}})}),o});let i=async()=>{a(e=>{let n=[...e];return d.current.forEach(e=>{let o=n.findIndex(n=>n.assetKey===e.assetKey);-1!==o&&(n[o]=e)}),n});let e=[];for(let n of o)try{let o=d.current.find(e=>e.assetKey===n.asset_key);o&&("not_connected"===o.component.code_connect_info.v1.state||!o.component.code_connect_info.v1.state)&&e.push(n.code_connect_id)}catch(e){r.vF.error("Error preparing for bulk undo",e)}if(e.length>0)try{await T({code_connect_ids:e})}catch(e){A(m.F.enqueue({message:c?(0,p.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.error_undo_ignored"):(0,p.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.error_undo_connected"),error:!0}))}};A(m.F.enqueue({message:c?(0,p.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.confirmation_ignored",{count:n}):(0,p.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.confirmation_connected",{count:n}),icon:u.zX.CHECK_WITH_CIRCLE,button:{text:(0,p.t)("general.undo"),action:()=>{i()}}})),Y(c?"component_browser.code_connect_components_bulk_ignored":"component_browser.code_connect_components_bulk_connected",{componentCount:s.length,location:t.location,source:t.source})}).catch(e=>{r.vF.error("Error connecting/ignoring components",e),a(e=>{let n=[...e];return s.forEach(({component:e},o)=>{let t=e.sourceIndex;void 0!==t&&n[t]&&i[o]&&(n[t]=i[o])}),n}),A(m.F.enqueue({message:c?(0,p.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.error_ignored"):(0,p.t)("dev_handoff.component_browser.bulk_mapping.selected_components_bell.error_connected"),error:!0}))})},[R,a,A,b,Y,T]),ee=e=>{let{row:n}=e,o=n.sourceIndex,t=n.component.node_id,c={...n,component:{...n.component,code_connect_info:{...n.component.code_connect_info,v1:{...n.component.code_connect_info.v1,state:"ignored"}}},selectedComponent:null,selectedFile:null,inputValue:""};a(e=>{let n=[...e];return n[o]=c,n}),O({library_key:n.component.library_key,node_id:t,status:"ignored",origin:e.trackingProps.location,entrypoint:e.trackingProps.entrypoint}).then(t=>{let r=t.data.meta.code_connect_id,s=(0,h.I)(n.component);s&&H(e=>e?{...e,status:{...e.status,[s]:"ignored"}}:{status:{[s]:"ignored"},loadingStatus:"loaded"}),a(e=>{let n=[...e];return n[o]={...c,component:{...c.component,code_connect_info:{...c.component.code_connect_info,v1:{...c.component.code_connect_info.v1,id:r,author_name:b?.name,author_id:b?.id}}}},n}),Y("component_browser.code_connect_component_ignored",{nodeId:n.component.node_id,location:e.trackingProps.location,entrypoint:e.trackingProps.entrypoint}),A(m.F.enqueue({message:(0,p.t)("dev_handoff.component_browser.ignored_message",{componentName:n.component.name}),type:"Ignored component"})),e.callback?.()}).catch(t=>{r.vF.error("Error ignoring code connect map",t),a(e=>{let t=[...e];return t[o]=n,t}),A(m.F.enqueue({message:t.message,type:"Ignore component error",error:!0})),e.callback?.(t)})},en=(0,t.useCallback)(n=>{let o=n?.component;if(e?.assetKey===n?.assetKey){let e={...N,componentKey:void 0};A(k.sf(e));return}if(K(-1),"componentBrowserLibrary"===N.view){let e={...N,componentKey:o&&(0,h.I)(o)||void 0};A(k.sf(e))}else if("fullscreen"===N.view){let e={...N,showDevModeComponentBrowser:!0,devModeComponentBrowserBackButtonTargetNodeId:o?.node_id,componentKey:o&&(0,h.I)(o)||void 0};A(k.sf(e))}},[N,A,e?.assetKey]),eo=(0,t.useCallback)(()=>{if(!e){n[0]&&en(n[0]);return}let o=n.findIndex(n=>(0,h.I)(n.component)===(0,h.I)(e.component));if(-1===o){-1!==S&&n[S]?en(n[S]):n[0]&&en(n[0]);return}let t=n[o+1];t&&en(t)},[e,n,en,S]),et=(0,t.useCallback)(()=>{if(!e){let e=n[n.length-1];e&&en(e);return}let o=n.findIndex(n=>(0,h.I)(n.component)===(0,h.I)(e.component));if(-1===o){let e=n[S-1];-1!==S&&e?en(e):n[0]&&en(n[0]);return}let t=n[o-1];t&&en(t)},[e,n,en,S]),ec=(0,t.useCallback)(({filepath:e,componentName:n,item:o,currentRowIndex:t,sourceIndex:c})=>{U({row:{...o,selectedFile:{title:e,metadata:{path:e,isCustomLink:!1,repository:{id:"",name:""}}},selectedComponent:n?{title:n}:null},currentRowIndex:t,sourceIndex:c,trackingProps:{location:"list_view",source:"ai_codebase_suggestion",entrypoint:g,sessionId:"todo"}})},[U,g]);return{onDeleteMapping:G,onMoreActionsMenuItemClick:e=>{let{event:n,currentRowIndex:o,row:t}=e;switch(n){case I.d.OpenInSidebar:en(t);break;case I.d.HasCodeEquivalent:case I.d.Disconnect:G({currentRowIndex:o,codeConnectId:t.component.code_connect_info.v1.id,row:{...t,selectedFile:null,selectedComponent:null},trackingProps:{location:"list_view",entrypoint:g}});break;case I.d.Ignore:ee({currentRowIndex:o,row:t,trackingProps:{location:"list_view",entrypoint:g}})}},onFileChanged:Q,onComponentChanged:Z,onConnectMapping:e=>{let{currentRowIndex:n,row:o}=e,t=o.sourceIndex,c=o.component,s=o.selectedFile,i=s?.metadata?.path??"",d=o.selectedComponent,l=o.component.node_id,u=s?.metadata?.repository;if(s&&i){let _={...o,component:{...c,code_connect_info:{...c.code_connect_info,v1:{...c.code_connect_info.v1,state:"connected",author_name:b?.name,author_id:b?.id}}},selectedFile:s,selectedComponent:d,inputValue:""};a(e=>{let n=[...e];return n[t]={..._,isLoading:!0},n}),O({library_key:o.component.library_key,node_id:l,template:"",component_name:d?.title,source_path:i,status:"connected",origin:e.trackingProps.location,entrypoint:e.trackingProps.entrypoint,repository:u}).then(c=>{let r=c.data.meta.code_connect_id;a(e=>{let n=[...e];return n[t]={..._,isLoading:!1,component:{..._.component,code_connect_info:{..._.component.code_connect_info,v1:{..._.component.code_connect_info.v1,id:r,figmadoc:JSON.stringify([{repository:u,name:d?.title}])}}}},n}),A(m.F.enqueue({message:(0,p.t)("dev_handoff.component_browser.connected_message",{componentName:o.component.name}),type:"Connected component"})),Y("component_browser.code_connect_component_connected",{componentName:d?.title??"",sourcePath:i,location:e.trackingProps.location,source:e.trackingProps.source,entrypoint:e.trackingProps.entrypoint,sessionId:e.trackingProps.searchSessionId}),j(n),e.callback?.()}).catch(n=>{r.vF.error("Error creating code connect map",n),a(e=>{let n=[...e];return n[t]={...o,isLoading:!1},n}),A(m.F.enqueue({message:n.message,type:"Connect component error",error:!0})),e.callback?.(n)})}},onIgnoreMapping:ee,onBulkConfirmSuggestions:$,onDisplayedComponentChanged:en,onDisplayNextComponent:eo,onDisplayPreviousComponent:et,updateConnection:z,onConfirmConnection:U,onConfirmSuggestion:ec,onValueChange:X,inputRefs:q,onActiveRowChange:V,activeRowKey:x}}function S({componentKey:e,componentsAndStateGroups:n,defaultFilter:o,filterIcons:c=!0}){let[i,d]=(0,t.useState)([]),[l,p]=(0,t.useState)(""),[m,u]=(0,t.useState)(o),[y,k]=(0,t.useState)("insertions"),v=(0,t.useMemo)(()=>i.findIndex(n=>(0,h.I)(n.component)===e),[i,e]),C=(0,t.useMemo)(()=>i[v]??null,[i,v]),w=(0,f.bV)(),I=(0,s.md)(_.a),{suggestions:P,searchSessionId:F,isLoadingSuggestions:L}=(0,g.P)(i),[E,S,K,q]=(0,t.useMemo)(()=>{let e=[],n=[],o=[],t=[];return i.forEach(r=>{(0,a.k)().dt_component_browser_icons_flow&&c&&("icons"===I&&!r.component.isIcon||"icons"!==I&&r.component.isIcon)||(e.push(r),"connected"===r.component.code_connect_info.v1.state&&n.push(r),"not_connected"===r.component.code_connect_info.v1.state&&o.push(r),"ignored"===r.component.code_connect_info.v1.state&&t.push(r))}),[e,n,o,t]},[i,I,c]),x=(0,t.useMemo)(()=>K.filter(e=>e.assetKey in P),[P,K]),V=(0,t.useMemo)(()=>({all:E.length,connected:S.length,notConnected:K.length,ignored:q.length,suggestionsAvailable:x.length}),[E.length,S.length,K.length,q.length,x.length]),N=(0,t.useMemo)(()=>{let e=[];return"all"===m?e=E:"connected"===m?e=S:"notConnected"===m?e=K:"ignored"===m?e=q:"suggestionsAvailable"===m&&(e=x),l&&(e=e.filter(e=>e.component.name.toLocaleLowerCase().includes(l.toLocaleLowerCase()))),[...e].sort((e,n)=>{if("alphabetically"===y){if(e.component.name<n.component.name)return -1;if(e.component.name>n.component.name)return 1}else if("insertions"===y){let o=e.component.insertions||0,t=n.component.insertions||0;if(o>t)return -1;if(o<t)return 1;if(e.component.name<n.component.name)return -1;if(e.component.name>n.component.name)return 1}return 0}).map((e,n)=>({...e,currentRowIndex:n}))},[m,l,y,E,S,K,q,x]);(0,t.useEffect)(()=>{if(!n)return;let{components:e}=n;d(function(e){let n=[];return e.forEach((e,o)=>{let t=e.code_connect_info.v1.figmadoc;if(!t){n.push(M(e,o));return}try{let c=JSON.parse(t)[0];n.push({component:e,assetKey:(0,b.A)(e),sourceIndex:o,isLoading:!1,selectedFile:c?.source?{title:c.source,metadata:{path:c.source,isCustomLink:!1,repository:{id:"",name:""}}}:null,selectedComponent:c?.component?{title:c.component}:null,inputValue:""})}catch(t){r.vF.error("Error parsing figmadoc",t),n.push(M(e,o))}}),n}(e.map(e=>({...e,isIcon:w.has(e.node_id)}))))},[n,w,d]);let A=(0,t.useCallback)(e=>i.findIndex(n=>(0,h.I)(n.component)===(0,h.I)(e)),[i]);return{paginationInfo:{notConnectedComponents:K.length,connectedComponents:S.length,ignoredComponents:q.length,suggestionsAvailableComponents:x.length},connectedComponents:S,notConnectedComponents:K,ignoredComponents:q,suggestionsAvailableComponents:x,searchQuery:l,setSearchQuery:p,dropdownFilter:m,setDropdownFilter:u,sortBy:y,setSortBy:k,displayedComponent:C,displayedComponentIndex:v,filteredComponents:N,componentBrowserListRowData:i??[],setComponentBrowserListRowData:d,getIndexOfComponent:A,suggestions:P,searchSessionId:F,isLoadingSuggestions:L,componentCounts:V}}function K({libraryKey:e,componentKey:n,defaultFilter:o,entrypoint:c}){let r=function({libraryKey:e,componentKey:n,defaultFilter:o}){let[c,r]=(0,d.IT)((0,f.t2)(e),{enabled:!0});return{...S({componentKey:n,componentsAndStateGroups:(0,t.useMemo)(()=>{var e;return c.data?q((e=c.data).components||[],e.state_groups||[]):null},[c.data]),defaultFilter:o}),status:c.status,refetch:r.refetch}}({libraryKey:e,componentKey:n,defaultFilter:o});return{...E({displayedComponent:r.displayedComponent,filteredComponents:r.filteredComponents,componentBrowserListRowData:r.componentBrowserListRowData,setComponentBrowserListRowData:r.setComponentBrowserListRowData,suggestions:r.suggestions,entrypoint:c}),...r}}function q(e,n){let o=[],t={},c={};return n.forEach(e=>{c[e.node_id]={...e,updated_at:e.updated_at||"",variants:[]},t[e.key]={...e,updated_at:e.updated_at||"",variants:[]}}),e.forEach(e=>{let n=e.containing_frame?.containingStateGroup?.nodeId,r=n&&c[n]?.key;r&&t[r]?t[r].variants.push(e):o.push(e)}),Object.values(t).forEach(e=>{o.push(e)}),{components:o}}function x(e,n){if(1===e.length)return e[0]??"";let o=e.pop();if(o){if(o.length>=20)return o;let e=20-(o?.length??0);return n.slice(0,e)+".../"+o}return""}function M(e,n){return{component:e,assetKey:(0,b.A)(e),sourceIndex:n,isLoading:!1,selectedFile:null,selectedComponent:null,inputValue:""}}},928537:(e,n,o)=>{o.d(n,{d:()=>t,x:()=>c});var t=(e=>(e.OpenInSidebar="open-in-sidebar",e.Disconnect="disconnect",e.HasCodeEquivalent="has-code-equivalent",e.Ignore="ignore",e))(t||{});let c=443==o.j?["design","decorator","file","status","actions"]:null},286262:(e,n,o)=>{o.d(n,{I:()=>t,s:()=>c});let t="code_connect_library_created_connection",c="code_connect_library_loaded"},341273:(e,n,o)=>{o.d(n,{A:()=>r,k:()=>c});var t=o(633080);function c(e,n){let o=new Set;for(let t of e)n.has(t)&&o.add(t);return Array.from(o)}function r(e){return e.type===t.PW.COMPONENT?e.component_key:e.key}}}]);

//# debugId=002fde64-7ae2-5d96-89ab-c3a61d8b1315

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/03584d68094ef67d664086eefa3ab23602f30257/6658-03a7f6740df8c5ca.min.js.map