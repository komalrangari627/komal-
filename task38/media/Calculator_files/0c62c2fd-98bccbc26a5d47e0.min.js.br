"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="71899a6a-dd95-51af-bca1-e90c2c7cb454")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[8717],{722541:(e,t,r)=>{r.d(t,{JP:()=>l,O6:()=>o,R3:()=>a,Rg:()=>i,Xq:()=>n,b:()=>s,j:()=>c,zu:()=>d});let a="ready_for_dev_signals_upsell--tooltipContainer--MfMyF pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",s="ready_for_dev_signals_upsell--closeButton--IqINb",i="ready_for_dev_signals_upsell--tooltipHeader--vN9FE",n="ready_for_dev_signals_upsell--tooltipPageIdNodeHeader--9D-dA ready_for_dev_signals_upsell--tooltipHeader--vN9FE",o="ready_for_dev_signals_upsell--tooltipBody--LCLlM",l="ready_for_dev_signals_upsell--tooltipFooter--bN45f",d="ready_for_dev_signals_upsell--tooltipBodyText--fXjaC",c="ready_for_dev_signals_upsell--videoContainer--Hcl5T"},214758:(e,t,r)=>{r.d(t,{As:()=>m,Dq:()=>c,KE:()=>h,Nr:()=>E,Nz:()=>g,Pl:()=>p,Sp:()=>a,VC:()=>b,VQ:()=>I,YW:()=>x,aY:()=>i,ge:()=>w,hi:()=>v,iB:()=>u,jE:()=>T,jG:()=>y,l$:()=>s,mB:()=>j,n6:()=>n,oG:()=>l,q8:()=>N,sR:()=>f,sl:()=>_,vu:()=>o,wH:()=>d});let a="legacy_pages_panel--pageChangesCount--ZvU4X",s="legacy_pages_panel--pagesList--20gAo",i="legacy_pages_panel--pendingPagesList--Kqq9Y legacy_pages_panel--pagesList--20gAo",n="legacy_pages_panel--pageIcon--2SeMV",o="legacy_pages_panel--active--4gxmS",l="legacy_pages_panel--pageRow--RXLs9 legacy_pages_panel--pageRowBase--2BLqh",d="legacy_pages_panel--selected--ZWcge",c="legacy_pages_panel--hoverByMouse--QLchE",u="legacy_pages_panel--hoverState--Jq0dh",m="legacy_pages_panel--pageRowButton--ZYdDc",_="legacy_pages_panel--pageRowActive--wbZe-",p="legacy_pages_panel--activePageBrand--X-F3Y",f="legacy_pages_panel--pageRowActiveUI2--Lwdqd",g="legacy_pages_panel--renameableNode--JPw8y",h="legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",x="legacy_pages_panel--disabledNodeText--2HBBi legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",b="legacy_pages_panel--renameableNodeTextEnd--iOsDL legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",v="legacy_pages_panel--renameableNodeTextEndDisabled--fFOaW legacy_pages_panel--renameableNodeTextEnd--iOsDL legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",y="legacy_pages_panel--scrollContainer--YR8Lw",w="legacy_pages_panel--leftPanelWidth--fUkeU",j="legacy_pages_panel--pageRowDividerContainer--eWfpW legacy_pages_panel--pageRowBase--2BLqh",T="legacy_pages_panel--pageRowDivider--0c9dh",E="legacy_pages_panel--offlineContainer--zrR3y",I="legacy_pages_panel--offlineIcon--sLbbs",N="legacy_pages_panel--pageRowRight--N3-uE"},50742:(e,t,r)=>{r.d(t,{IK:()=>n,Vi:()=>l,cJ:()=>a,iZ:()=>o,pf:()=>i,yF:()=>s});let a="pages_list--pagesRowWrapper--Plig-",s="pages_list--divider--idUOu",i="pages_list--withInsertBefore---ui-o",n="pages_list--withInsertAfter--7QoMA",o="pages_list--withInsertBeforeTop--IQT63",l="pages_list--withInsertAfterBottom--yG3xD"},669330:(e,t,r)=>{r.d(t,{w:()=>s});var a=r(992467);let s=r(435571).A.createLazyComponent(()=>Promise.all([r.e(5885),r.e(9420),r.e(2677)]).then(r.bind(r,921966)).then(e=>e.EduReviewPage),{loading:()=>null,error:a.H4.NONE,componentName:"EduReviewPage"})},492296:(e,t,r)=>{r.d(t,{G:()=>i});var a=r(992467),s=r(858013);let i=r(435571).A.createLazyComponent(()=>Promise.all([r.e(5885),r.e(9420),r.e(2677)]).then(r.bind(r,708832)).then(e=>e.OrgSelfServeBillingRemodelPage),{loading:s.Z_,error:a.H4.NONE,componentName:"OrgSelfServeBillingRemodelPage"})},27771:(e,t,r)=>{r.d(t,{z:()=>s});var a=r(992467);let s=r(435571).A.createLazyComponent(()=>Promise.all([r.e(5885),r.e(9420),r.e(2677)]).then(r.bind(r,104815)).then(e=>e.PromoReviewPage),{loading:()=>null,error:a.H4.NONE,componentName:"PromoReviewPage"})},180986:(e,t,r)=>{r.d(t,{q:()=>s});var a=r(992467);let s=r(435571).A.createLazyComponent(()=>Promise.all([r.e(5885),r.e(9420),r.e(2677)]).then(r.bind(r,93177)).then(e=>e.TeamUpgradePageBillingRemodel),{loading:()=>null,error:a.H4.NONE,componentName:"TeamUpgradePageBillingRemodel"})},463766:(e,t,r)=>{r.d(t,{m:()=>T});var a=r(486106),s=r(7378),i=r(514228),n=r(165054),o=r(162641),l=r(589278),d=r(307841),c=r(638694),u=r(422062);if(443==r.j)var m=r(398386);var _=r(929976),p=r(386952),f=r(191312),g=r(642025),h=r(465071),x=r(846003),b=r(650409),v=r(548208),y=r(844131),w=r(447644),j=r(710166);function T(){let e=(0,i.wA)(),t=(0,h.S2)(),r=(0,h.px)(),T=(0,d.RR)(),E=(0,p._6)(),I=(0,i.d4)(e=>(0,g.getPermissionsStateMemoized)(e)),N=(0,i.d4)(e=>e.teams),C=(0,h.j_)(r),S="loaded"===C.status&&(0,u.pO)({isAdminOrg:C.data,permissions:I,teams:N,view:E}),k=(0,x.vS)(E),R="loaded"===t.status&&"loaded"===r.status&&r.data.permission!==f.Xn.ADMIN;return(s.useEffect(()=>{S?e(_.sf({view:"resourceUnavailable",resourceType:k})):R&&e(_.sf(y.o0))},[e,k,R,S]),"loaded"!==t.status||"loaded"!==r.status||R||S)?(0,a.jsx)("div",{className:l.s.wFull.pl32.py24.bb1.colorBorder.bSolid.$,children:(0,a.jsx)(o.Wi,{className:l.s.w200.h32.$,dataTestId:"srpv-loading"})}):(T||(t.data.key.type===f.OL.ORG?e(_.sf({view:"orgAdminSettings",orgAdminSettingsViewTab:b.J7.DASHBOARD})):e(_.sf({view:"teamAdminConsole",teamId:t.data.key.parentId??"",teamAdminConsoleViewTab:v.Iv.DASHBOARD}))),(0,a.jsx)(m.r,{containerClass:j.nF,scrollableContainerClass:j.lF,content:(0,a.jsx)(w.l,{plan:t.data,isOrgAdmin:t.data.type===f.OL.ORG}),toolbar:(0,a.jsx)(c.g,{}),errorBoundaryConfig:{figmaTeam:n.e.MONETIZATION_EXPANSION,boundaryKeySuffix:"SeatRequestsPageView"}}))}},322783:(e,t,r)=>{r.r(t),r.d(t,{ConfirmDowngradeEditorsModal:()=>l});var a=r(486106),s=r(930338),i=r(303541),n=r(831799),o=r(519092);function l(e){let{team:t,editors:r}=e,{id:l}=t,d=r.length,c=r.filter(e=>e.id).map(e=>e.id).join(),u=(0,i.t)("team_view.downgrade_editor_modal.downgrade_user_team_permissions",{username:(0,s.EJ)(e.editors[0].name||e.editors[0].email,20)}),m=(0,i.t)("team_view.downgrade_editor_modal.downgrade_multiple_users_team_permissions",{numSelectedUsers:d});return(0,a.jsx)(n.fu,{name:"Team Admin Downgrade Editors Modal",properties:{editorCount:d,editorIds:c,teamId:l},children:(0,a.jsx)(o.Dd,{title:d>1?m:u,confirmText:(0,i.t)("team_view.downgrade_editor_modal.downgrade"),onConfirm:e.onConfirm,children:(0,a.jsxs)("p",{children:[d>1&&(0,i.t)("team_view.downgrade_editor_modal.are_you_sure_you_want_to_downgrade",{numSelectedUsers:d}),(0,i.tx)("team_view.downgrade_editor_modal.downgrading_their_team_permission_will_change_all_permissions_to_can_view")]})})})}},361817:(e,t,r)=>{r.r(t),r.d(t,{ConfirmTeamUserPaidStatusUpdateModal:()=>c});var a=r(486106),s=r(637027),i=r(303541),n=r(831799),o=r(191312),l=r(814802),d=r(519092);function c(e){let{team:t,members:r,paidStatus:c}=e,{id:u}=t;if(![o.Zf.FULL,o.Zf.RESTRICTED].includes(c))return(0,a.jsx)(a.Fragment,{});let m=r.length,_=r.filter(e=>e.id).map(e=>e.id).join(),p=c===o.Zf.RESTRICTED,f=e.paidStatusType===l.j4.WHITEBOARD,g=f?r.every(e=>!e.whiteboard_editor_upgrade):r.every(e=>!e.design_editor_upgrade),h=c===o.Zf.RESTRICTED&&g,x=r[0].name||r[0].email;return(0,a.jsx)(n.fu,{name:"Team Admin Restrict TeamUser Modal",properties:{memberCount:m,memberIds:_,teamId:u},children:(0,a.jsxs)(d.Dd,{title:p?h?f?(0,i.tx)("team_view.downgrade_figjam_access_from_viewer_to_viewer_restricted"):(0,i.tx)("team_view.downgrade_design_access_from_viewer_to_viewer_restricted"):f?(0,i.tx)("team_view.remove_figjam_edit_status.seat_rename"):(0,i.tx)("team_view.remove_design_edit_status.seat_rename"):f?(0,i.tx)("team_view.grant_figjam_edit_status.seat_rename"):(0,i.tx)("team_view.grant_design_edit_status.seat_rename"),confirmText:p?h?(0,i.t)("team_view.change"):(0,i.t)("team_view.remove.seat_rename"):(0,i.t)("team_view.grant.seat_rename"),onConfirm:e.onConfirm,children:[c===o.Zf.RESTRICTED&&(h?f?(0,i.tx)("team_view.downgrade_figjam_from_viewer_to_viewer_restricted_description.seat_rename",{memberNameOrEmail:x,numMembers:m}):(0,i.tx)("team_view.downgrade_design_from_viewer_to_viewer_restricted_description.seat_rename",{memberNameOrEmail:x,numMembers:m}):f?(0,i.tx)("team_view.downgrade_figjam_description.seat_rename",{memberNameOrEmail:x,numMembers:m}):(0,i.tx)("team_view.downgrade_design_description.seat_rename",{memberNameOrEmail:x,numMembers:m})),c===o.Zf.FULL&&(0,a.jsxs)(a.Fragment,{children:[(()=>{if(!p)return f?(0,i.tx)("team_view.change_to_editor_figjam_description.seat_rename",{numMembers:m,memberNameOrEmail:x}):(0,i.tx)("team_view.change_to_editor_design_description.seat_rename",{numMembers:m,memberNameOrEmail:x})})(),(0,a.jsx)("p",{className:"confirm_team_user_paid_status_update_modal--spacing--D5LgW",children:(0,a.jsx)(s.N_,{target:"_blank",className:"confirm_team_user_paid_status_update_modal--link--cb35L",href:"https://help.figma.com/hc/articles/360039960434#Account_Types",trusted:!0,children:(0,i.tx)("team_view.learn_more.seat_rename")})})]})]})})}},586544:(e,t,r)=>{r.r(t),r.d(t,{MemberEditAccessModal:()=>N});var a=r(486106),s=r(7378),i=r(514228),n=r(656233),o=r(815945),l=r(989992),d=r(288654),c=r(347284),u=r(303541),m=r(156213),_=r(831799),p=r(217457),f=r(207203),g=r(143028),h=r(43951),x=r(557142),b=r(519092);let v="edit_access_modal--column--MYvAz",y="edit_access_modal--resource--qhm-x",w="edit_access_modal--resourceTitle--79DdK edit_access_modal--resource--qhm-x",j="edit_access_modal--greyResource--pdVfB edit_access_modal--resource--qhm-x",T=(e,t)=>{if("file"===e.resource_type){let r=t[e.resource_id_or_key];if(r)return{name:r.name,id_or_key:r.key}}else{let r=t[e.resource_id_or_key];if(r)return{name:r.name,id_or_key:r.id}}},E=(0,o.xx)((e,t)=>{let r={privateResourceCount:0,editableResources:[]};return e&&0!==e.length&&(e.forEach(e=>{let a=T(e,t);a?r.editableResources.push(a):r.privateResourceCount++}),(0,n.v7)(r.editableResources,e=>e.name)),r}),I=e=>({privateResourceCount:e.file_edit_roles_count,editableResources:[]});function N(e){let t=(0,i.wA)(),r=function(e,t){let r=(0,d.Rs)(h.DLq,{teamId:e,userId:t});return s.useMemo(()=>r.transform(e=>{let t=e.teamUserDescendedRoles;if(!t)return{team_user:void 0,team_role:void 0,edit_roles:{whiteboard_files:[],design_files:[],folders:[]},file_edit_roles_count:0,name:"",id:""};let r=t[0];if(!r.teamUser)return{team_user:void 0,team_role:void 0,edit_roles:{whiteboard_files:[],design_files:[],folders:[]},file_edit_roles_count:0,name:"",id:""};let a=r.teamUser,s=r.teamUser.teamRole;return{...g.W.toSinatra(a.user),team_user:{id:a.id,user_id:a.user.id,team_id:r.teamId,active_seat_type:(0,p.TA)(a.activeSeatTypeUpgrade?.billableProduct)},team_role:s?(0,f.Pe)(s,a.user):void 0,file_edit_roles_count:r.fileEditRolesCount,edit_roles:{whiteboard_files:[],design_files:[],folders:r.projectEditRoles?.map(e=>f.Pe(e,a.user))||[]}}}),[r])}(e.teamId,e.userId),n=(0,i.d4)(e=>e.folders),o=s.useMemo(()=>r.transform(e=>E(e?.edit_roles?.folders,n)),[n,r]),y=s.useMemo(()=>r.transform(e=>e?I(e):{privateResourceCount:0,editableResources:[]}),[r]),j=(0,i.d4)(t=>t.teams[e.teamId]),T=l.Qw.all([r,o,y]);if("loaded"!==T.status)return null;let[N,C,k]=T.data;if(!N)return console.error("Member not found"),null;let R=!!N.team_role&&N.team_role?.level>=x.e6.EDITOR,A=C.editableResources.length+C.privateResourceCount,O=k.editableResources.length+k.privateResourceCount;return(0,a.jsx)(_.fu,{name:"Member Edit Access Modal",properties:{teamId:j.id,userId:N.id,folderCount:A,fileCount:O},children:(0,a.jsxs)(b.OJ,{title:(0,u.t)("team_view.member_edit_access_modal.title",{memberName:N.name??""}),maxWidth:432,minWidth:432,containerClassName:"edit_access_modal--modalStyle--20dSp",onClose:()=>{t(m.Ce())},children:[(0,a.jsxs)("div",{className:"edit_access_modal--headerContainer--ZoKpu edit_access_modal--resourceContainer--vZA5E",children:[(0,a.jsx)("div",{className:v,children:(0,a.jsx)("div",{className:w,children:(0,u.tx)("team_view.member_edit_access_modal.projects_title_v2")})}),(0,a.jsx)("div",{className:v,children:(0,a.jsx)("div",{className:w,children:(0,u.tx)("team_view.member_edit_access_modal.files_title_v2")})})]}),(0,a.jsx)(c.P,{className:"edit_access_modal--scrollContainer--WzCWr",hideScrollbar:!0,children:(0,a.jsxs)("div",{className:"edit_access_modal--resourceContainer--vZA5E",children:[(0,a.jsx)("div",{className:v,children:(0,a.jsx)(S,{hasTeamEditPermissions:R,resources:C,resourceType:"project"})}),(0,a.jsx)("div",{className:v,children:(0,a.jsx)(S,{hasTeamEditPermissions:R,resources:k,resourceType:"file"})})]})})]})})}let C=e=>"file"===e?(0,u.tx)("team_view.member_edit_access_modal.none_files"):(0,u.tx)("team_view.member_edit_access_modal.none_projects");function S(e){let t;let{hasTeamEditPermissions:r,resourceType:s}=e;if(r)return"project"===s?(0,a.jsx)("div",{className:j,children:(0,u.tx)("team_view.member_edit_access_modal.all_projects")}):(0,a.jsx)("div",{className:j,children:(0,u.tx)("team_view.member_edit_access_modal.all_files")});let i=e.resources;if(0===i.privateResourceCount&&0===i.editableResources.length)return(0,a.jsx)("div",{className:j,children:C(s)});if(i.privateResourceCount>0){let e=(0,a.jsx)("span",{});0===i.editableResources.length&&"project"===s?e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_projects",{numProjects:i.privateResourceCount}):0===i.editableResources.length&&"file"===s?e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_files",{numFiles:i.privateResourceCount}):i.editableResources.length>0&&"project"===s?e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_projects_list_end",{numProjects:i.privateResourceCount}):i.editableResources.length>0&&"file"===s&&(e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_files_list_end",{numFiles:i.privateResourceCount})),t=(0,a.jsx)("div",{className:y,children:e})}return(0,a.jsxs)(a.Fragment,{children:[i.editableResources.map(e=>(0,a.jsx)("div",{className:y,children:e.name},e.id_or_key)),t]})}},204732:(e,t,r)=>{r.d(t,{JC:()=>u,Oe:()=>d,T3:()=>_,VY:()=>n,ay:()=>m,dZ:()=>c,vW:()=>o,wu:()=>i,y$:()=>l});var a=r(992467),s=r(662580);r(463766);let i=s.A.createLazyComponent(()=>Promise.all([r.e(3555),r.e(7485),r.e(1556),r.e(7021),r.e(7492),r.e(1577),r.e(4452),r.e(3591),r.e(1881),r.e(6048)]).then(r.bind(r,116649)).then(e=>e.BillingGroupDashboardSettingsPageView),{loading:()=>null,error:a.H4.NONE,componentName:"BillingGroupDashboardSettingsPageView"}),n=s.A.createLazyComponent(()=>Promise.all([r.e(3555),r.e(7485),r.e(1556),r.e(7021),r.e(7492),r.e(1577),r.e(4452),r.e(3591),r.e(1881),r.e(6048)]).then(r.bind(r,771449)).then(e=>e.LicenseGroupAdminSettingsPageView),{loading:()=>null,error:a.H4.NONE,componentName:"LicenseGroupAdminSettingsPageView"}),o=s.A.createLazyComponent(()=>Promise.all([r.e(3555),r.e(7485),r.e(1556),r.e(7021),r.e(7492),r.e(1577),r.e(4452),r.e(3591),r.e(1881),r.e(6048)]).then(r.bind(r,221808)).then(e=>e.OrgAdminSettingsPageView),{loading:()=>null,error:a.H4.NONE,componentName:"OrgAdminSettingsPageView"}),l=s.A.createLazyComponent(()=>Promise.all([r.e(3555),r.e(7485),r.e(1556),r.e(7021),r.e(7492),r.e(1577),r.e(4452),r.e(3591),r.e(1881),r.e(6048)]).then(r.bind(r,372460)).then(e=>e.WorkspaceAdminSettingsPageView),{loading:()=>null,error:a.H4.NONE,componentName:"WorkspaceAdminSettingsPageView"}),d=s.A.createLazyComponent(()=>Promise.all([r.e(3555),r.e(7485),r.e(1556),r.e(7021),r.e(7492),r.e(1577),r.e(4452),r.e(3591),r.e(1881),r.e(6048)]).then(r.bind(r,114536)).then(e=>e.OrgDomainManagementPageView),{loading:()=>null,error:a.H4.NONE,componentName:"OrgDomainManagementPageView"}),c=s.A.createLazyComponent(()=>Promise.all([r.e(3555),r.e(7485),r.e(1556),r.e(7021),r.e(7492),r.e(1577),r.e(4452),r.e(3591),r.e(1881),r.e(6048)]).then(r.bind(r,135180)).then(e=>e.AbandonedDraftFilesPageView),{loading:()=>null,error:a.H4.NONE,componentName:"AbandonedDraftFilesPageView"}),u=s.A.createLazyComponent(()=>Promise.all([r.e(3555),r.e(7485),r.e(1556),r.e(7021),r.e(7492),r.e(1577),r.e(4452),r.e(3591),r.e(1881),r.e(6048)]).then(r.bind(r,227609)).then(e=>e.TeamAdminConsoleView),{loading:()=>null,error:a.H4.NONE,componentName:"TeamAdminConsoleView"}),m=s.A.createLazyComponent(()=>Promise.all([r.e(3555),r.e(7485),r.e(1556),r.e(7021),r.e(7492),r.e(1577),r.e(4452),r.e(3591),r.e(1881),r.e(6048)]).then(r.bind(r,226029)).then(e=>e.AdminSidebar),{loading:()=>null,error:a.H4.NONE,componentName:"AdminSidebar"}),_=s.A.createLazyComponent(()=>Promise.all([r.e(3555),r.e(7485),r.e(1556),r.e(7021),r.e(7492),r.e(1577),r.e(4452),r.e(3591),r.e(1881),r.e(6048)]).then(r.bind(r,400325)).then(e=>e.OrgIdpManagementPageView),{loading:()=>null,error:a.H4.NONE,componentName:"OrgIdpManagementPageView"})},216477:(e,t,r)=>{r.r(t),r.d(t,{BlockConnectedFileMoveModal:()=>p});var a=r(486106),s=r(437088),i=r(438674),n=r(38914),o=r(272243),l=r(288654),d=r(589278),c=r(303541),u=r(831799),m=r(43951),_=r(615608);function p(e){let t=s.hS({open:e.open,onClose:e.onClose}),r=(0,l.Rs)(m.s0Z,{fileKey:e.fileKey}),p=r?.data?.file?.project?.name,f=r?.data?.file?.plan?.name;return(0,a.jsx)(u.fu,{name:"Block Connected File Move Modal",children:(0,a.jsx)(n.bL,{manager:t,width:"md",children:(0,a.jsxs)(o.vo,{children:[(0,a.jsx)(o.Y9,{children:(0,a.jsx)(o.hE,{children:p?(0,c.tx)("resource_connection.block_file_move.unable_to_move_out_of_project_name",{projectName:p}):(0,c.tx)("resource_connection.block_file_move.unable_to_move_out_of_this_project")})}),(0,a.jsx)(o.nB,{className:_.Yw,children:(0,a.jsx)("div",{className:d.s.mt4.mb4.$,children:(0,c.tx)("resource_connection.block_file_move.learn_more_about_what_you_can_do_in_connected_projects",{learnMore:(0,a.jsx)(i.N,{href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects",children:(0,c.tx)("resource_connection.request_modal.learn_more")}),hostPlanName:f??""})})})]})})})}},872565:(e,t,r)=>{r.r(t),r.d(t,{FileMoveDropdown:()=>ta,FileMoveHiddenDiv:()=>ts,FileMoveModal:()=>e3,FileMoveModalComponent:()=>e5,FileMoveSearch:()=>e7,TeamSection:()=>e9,TeamsDisplay:()=>tt,getCurrentFolderId:()=>e8,getTargetAttribute:()=>e4,isSubscribedLG:()=>e2});var a=r(486106),s=r(7378),i=r(514228),n=r(465776),o=r(601108),l=r(805353),d=r.n(l),c=r(449184),u=r(783094),m=r(63728),_=r(288654),p=r(723791),f=r(566371),g=r(485103),h=r(236327),x=r(637027),b=r(991924),v=r(408237),y=r(858013),w=r(347284),j=r(714743),T=r(589278),E=r(303541),I=r(304671),N=r(199513),C=r(628874),S=r(316062),k=r(277163);function R(e){let t=(0,i.wA)(),r=s.useCallback(r=>{r.stopPropagation(),e.team.canEdit&&((0,c.sx)("New Folder",{trackingContext:e.trackingContextName}),t((0,N.SX)({where:S.Ah.FolderListView,team:{...(0,C.Ws)(e.team),canEdit:e.team.canEdit}})))},[t,e.team,e.trackingContextName]);return e.team.canEdit?(0,a.jsx)(k.f,{data_tooltip:(0,E.t)("sidebar.new_project"),data_onboarding_key:"new-project-icon",innerText:"Creates new project",onClick:r,isBackgroundTransparent:e.isBackgroundTransparent}):null}var A=r(929976),O=r(586954),F=r(404751),P=r(156213),L=r(831799),D=r(217457),M=r(191312),B=r(349248),U=r(35887),W=r(557142),$=r(528509),G=r(875422),V=r(43951),z=r(193867),H=r(598018),K=r(965813),Y=r(698965),q=r(833838),J=r(129884),X=r(696396),Q=r(181241);let Z=new class{constructor(){this.TeamRestrictionsListsSchemaValidator=(0,Q.vh)()}getTeamRestrictionsLists(e){return this.TeamRestrictionsListsSchemaValidator.validate(async({xr:t})=>await t.get("/api/team_restrictions_lists",{team_ids:e.teamIds}))}};var ee=r(826900),et=r(519092),er=r(92662),ea=r(714362),es=r(910117);function ei(e){return(0,a.jsxs)("div",{className:"page_move--fileCreateNameContainer--JBcti",children:[(0,a.jsx)("div",{className:"page_move--fileCreateNameSvgContainer--nm5eH",children:(0,a.jsx)(er.v,{})}),(0,a.jsx)(x.ks,{value:e.newFileName,onChange:e.onChange,maxLength:255,autoFocus:!0,placeholder:(0,E.t)("page_move.add_new_file_name"),className:"page_move--fileCreateNameInput--0yBR8"})]})}var en=r(490799),eo=(e=>(e.SHARE_DRAFT="share_draft",e.MOVE_DRAFT="move_draft",e.CREATE_FILE="create_file",e))(eo||{});function el({planName:e,planType:t,planId:r,fileKey:s,upgradeReason:i}){return(0,a.jsx)(L.fu,{name:"Viewer Upgrade Awareness Banner",properties:{entryPoint:i,fileKey:s,orgId:t===q.O.ORG?r:void 0,teamId:t===q.O.ORG?void 0:r},children:(0,a.jsx)("div",{className:i===eo.MOVE_DRAFT?T.s.pt8.pb4.px8.$:void 0,children:(0,a.jsx)(en._,{dataTestId:"viewer-upgrade-banner",color:en.S.INFORMATION,text:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:T.s.fontSemiBold.$,children:(0,E.tx)("viewer_upgrade_awareness.you_re_working_in_drafts_on_a_free_seat")}),(0,a.jsx)("p",{children:function(e,t,r){switch(r){case eo.SHARE_DRAFT:if(t===q.O.ORG){if(e)return(0,E.tx)("viewer_upgrade_awareness.sharing_a_draft_will_move_you_to_a_paid_seat_org",{planName:e});return(0,E.tx)("viewer_upgrade_awareness.sharing_a_draft_will_move_you_to_a_paid_seat_in_your_organization")}if(e)return(0,E.tx)("viewer_upgrade_awareness.sharing_a_draft_will_move_you_to_a_paid_seat_team",{planName:e});return(0,E.tx)("viewer_upgrade_awareness.sharing_a_draft_will_move_you_to_a_paid_seat_in_your_team");case eo.MOVE_DRAFT:if(t===q.O.ORG){if(e)return(0,E.tx)("viewer_upgrade_awareness.moving_a_draft_will_change_you_to_a_paid_seat_org",{planName:e});return(0,E.tx)("viewer_upgrade_awareness.moving_a_draft_will_change_you_to_a_paid_seat_in_your_organization")}if(e)return(0,E.tx)("viewer_upgrade_awareness.moving_a_draft_will_change_you_to_a_paid_seat_team",{planName:e});return(0,E.tx)("viewer_upgrade_awareness.moving_a_draft_will_change_you_to_a_paid_seat_in_your_team")}}(e,t,i)})]})})})})}var ed=r(784221),ec=r(915765),eu=r(687776),em=r(350402),e_=r(345997),ep=r(81982),ef=r(163189),eg=r(633080);let eh="32px",ex=(0,u.hG)(eh),eb=e=>e?.id||O.iK,ev=new ep.KH({keys:["folder.path","team.name"],threshold:.3,tokenize:!0}),ey=(e,t,r,a,s)=>!(e.orgId!==s&&t?.orgId!==s||!e.canEdit||t&&(0,e_.S$)(e,t,r)&&!(0,$.VA)(e))&&(!a||!!(0,e_.XX)(t)),ew=(e,t,r)=>!r||!!(0,e_.XX)(e),ej=(e,t=!1)=>{let r=[];Object.keys(e.folders).forEach(a=>{let s=e.folders[a],i=s.teamId?e.teams[s.teamId]:null;ey(s,i,e.user,t,e.orgId)&&((0,$.VA)(s)&&(s={...s,path:(0,eg.Tb)()}),r.push(s))}),ev.set(r.map(t=>{let r=t.teamId&&e.teams[t.teamId]&&{name:e.teams[t.teamId].name},a={path:t.path,teamId:t.teamId,id:t.id,subscription:!!t.subscription,...(0,eu.VI)(t)};return r?{folder:a,team:r}:{folder:a}}))},eT=({folders:e,roles:t,user:r,orgUsers:a,teams:s,orgId:i,implicitTeamRolesTeamIds:n},l,d,c)=>{let u=Object.create(null),m=0,_=0,p=(0,$.gj)(r&&r.id,e,t.byFolderId,r&&i?a[i][r.id]:null);for(let e in u[O.HK]=[],u[O.iK]=[],t.byTeamId)ew(s[e],r,l)&&(_++,u[e]=[]);n&&n.forEach(e=>{ew(s[e],r,l)&&(_++,u[e]=[])}),Object.keys(e).forEach(t=>{let a={...e[t]},n=ey(a,a.teamId?s[a.teamId]:null,r,l,i);if((0,o.k)().file_move_show_all_resources){if(n&&(!d||a.subscription||(0,$.VA)(a))){let e=a.teamId?s[a.teamId]:null;u[p&&a.id===p.id?O.HK:eb(e)].push(a),m++}}else if(n&&(a.subscription||(0,$.VA)(a))){let e=a.teamId?s[a.teamId]:null;u[p&&a.id===p.id?O.HK:eb(e)].push(a),m++}});let f=m+_;return c(O.CU({indexCount:f})),c(O.xH()),u},eE=(e,t,r,a,s)=>{let i=Object.create(null),n=Object.create(null),o=[],l=0,d=0;if(s){let t=e.indexOf(s);t>-1&&(e.splice(t,1),e.splice(1,0,s))}return e.forEach(e=>{if(n[e]=l,d+=8,e!==O.iK&&e!==O.HK){let t={type:K.b.NEW_FOLDER_TEAM,id:e,positionTop:d};o.push(t),d+=ex,l+=1}let r=t[e];l+=r.length,r.sort((e,t)=>""===e.path?-1:""===t.path?1:e.path.toLowerCase()<t.path.toLowerCase()?-1:1);let c=Array.from(r);a&&s&&e===s&&c.forEach((e,t)=>{e.id===a&&(r.splice(t,1),r.unshift(e))}),r.forEach(e=>{let t={type:K.b.FOLDER_ROW,id:e.id,positionTop:d};d+=ex,o.push(t)}),i[e]=r,d+=9}),[i,n,o]},eI=(e,t,r)=>{let a=Object.create(null),s=Object.create(null),i=0,n=0,o=t.orgId&&t.user?t.orgUsers[t.orgId][t.user.id]:null,l=(0,$.gj)(t.user?t.user.id:null,t.folders,t.roles.byFolderId,o);for(let r of e){let e=r.item.folder,o=l&&e.id===l.id?0:r.score,d=e.teamId?t.teams[e.teamId]:null,c=l&&e.id===l.id?O.HK:eb(d);!(c in a)&&(a[c]=[],c!==O.iK&&c!==O.HK&&n++),a[c].push(e),null==s[c]?s[c]=o:s[c]=Math.min(s[c],o),i++}let d=i+n;return r(O.CU({indexCount:d})),[s,a]},eN=e=>(t,r)=>{if(t===O.iK)return 1;let a=e[t],s=e[r];return a?s&&a.name.toLowerCase()<s.name.toLowerCase()?-1:1:-1},eC=e=>(t,r)=>e[t]-e[r],eS=async(e,t,r,a,s=!1,i=!1,o,l,d,c)=>{var u,m;let _=e.getState(),p=null,f=null;t.type===K.A.FILE?(p=t.file.parent_org_id||null,f=t.file.team_id):t.type===K.A.REPO?(p=t.repo.parent_org_id||null,f=t.repo.team_id):t.type===K.A.FILE_IMPORT&&(p=t.orgId);let g=[];if(r){let e=eI(await ev.search(r),a,o);m=e[0],(g=Object.keys(u=e[1])).length&&g.sort(eC(m))}else u=eT(a,s,!!c,e.dispatch),a.user?(g.push(O.HK),g=g.concat((0,H.n$)(Object.values(a.teams),a.fileBrowserPreferences?.orderedTeamIds||[])),u[O.iK].length>0&&g.push(O.iK)):(g=Object.keys(u)).sort(eN(a.teams));let h=(()=>{switch(t.type){case K.A.FILE:return[t.file.editor_type];case K.A.REPO:return[M._Y.DESIGN];case K.A.FILE_IMPORT:return t.files.map(e=>(0,ef.NU)(e));default:(0,n.xb)(t)}})(),x=new Set(Object.values(u).flat().filter(e=>h.every(t=>!!t&&(0,eu.d6)(e,t))).map(e=>e.id)),b=g.filter(e=>{if(e===O.iK)return null===u||u[e].length>0;let t=a.teams;if(e!==O.HK){let r=t[e]?.orgId||null;if(p||r){if(r!==p)return!1}else if(f&&e===O.iK)return!1}return!t[e]?.deletedAt&&!!u[e]?.some(e=>x.has(e.id))}),[v,y,w]=eE(b,u,i,l,d);e.dispatch(O.OT({rows:w})),e.dispatch(O.t3({indexOffsets:y})),e.dispatch(O.Pb({foldersByTeamId:v})),e.dispatch(O.Mi({teamIds:b})),r||e.dispatch(O.w3({userTeamCount:b.length})),_.fileMove.isSearchResult!==i&&e.dispatch(O.EN({isSearchResult:i}));let j=O.HK in y&&w[0].type===K.b.FOLDER_ROW;r&&j?e.dispatch(O.Dp({indexAt:0})):r&&!j&&e.dispatch(O.Dp({indexAt:1}))},ek=(e,t,r,a=!1,s,i,n)=>{eS(e,t,"",r,a,!1,e.dispatch,i,n,s)},eR=(0,ec.s)((e,t,r,a,s=!1)=>{eS(e,t,r,a,s,!!r,e.dispatch)},200),eA=(0,em.nF)((e,t)=>{ej(t.userResources,t.modalData.isPublishing),ek(e,t.modalData,t.userResources,t.modalData.isPublishing,!1,t.currentFolderId,t.currentFolderTeamId)}),eO=(0,em.nF)((e,t)=>{eR(e,t.modalData,t.query,t.userResources),e.dispatch(O.hq(t))});var eF=r(876459),eP=r(573154),eL=r(976345),eD=r(272488),eM=r(475472),eB=r(805373);let eU="file_move--main--fz-As",eW="file_move--iconContainer--2ExyP",e$="file_move--folderRowWrapper--R5vx1",eG="file_move--folderRow--ZBYjx",eV="file_move--horizontalDivider--g43mL";var ez=r(367542);function eH(e){let t=(0,i.d4)(e=>e.user),[r,n]=(0,s.useState)(""),o=e.dispatch,[l,d]=(0,s.useState)(!0);return(0,a.jsx)("form",{onSubmit:t=>{t.preventDefault(),(0,c.sx)("Create Team Inline",{trackingContext:e.trackingContextName}),r?(o((0,eM.KQ)({teamName:r,orgAccess:M.bU.PUBLIC,dontRedirect:!0})),d(!0),n("")):o(eP.s.error((0,E.t)("flash.team_name_cannot_be_empty")))},children:(0,a.jsx)("div",{className:"file_move--teamCreateRow--GglhU file_move--folderRow--ZBYjx",children:l?(0,a.jsxs)("button",{type:"button",className:"file_move--rowButton--CSDNV",onClick:()=>{null!=t&&!e.orgId&&(0,eD.e5)({userId:t.id,teams:Object.values(e.teams),rolesByTeamId:e.rolesByTeamId})?(o(P.Ce()),o(eL.Dw({openInNewTab:!eF.eD}))):(d(!1),o(O.xH()))},children:[(0,a.jsx)(j.B,{className:"file_move--newProjectIconFileMove--V9037 sidebar--icon--wMzUY",svg:ez.A}),(0,a.jsx)("span",{className:"file_move--newFolderNameCustomSections--OqBS9 sidebar--sectionNameCustomSections--9e7LZ sidebar--sectionTextCustomSections---1KFn sidebar--sectionContentCustomSections--wI9mZ ellipsis--ellipsis--Tjyfa",children:(0,E.tx)("file_browser.inline_team_creation.button_text")})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:eW,children:(0,a.jsx)(eB.pw,{size:16,shape:"SQUARE",color:"#E5E5E5"})}),(0,a.jsx)("div",{className:"file_move--newTeamTitleText--cax1f file_move--teamTitleText--4XOM- ellipsis--ellipsis--Tjyfa",children:(0,a.jsx)(x.ks,{value:r||"",onChange:e=>{n(e.target.value)},onBlur:()=>{d(!0)},className:"file_move--newTeamInput--0kCF4",maxLength:e.teamNameMaxWidth,placeholder:(0,E.t)("file_browser.inline_team_creation.placeholder"),autoFocus:!0})})]})})})}var eK=r(7452),eY=r(578888),eq=r(992724),eJ=r(90724),eX=r(8108),eQ=r(391205),eZ=r(763016);let e0=(0,u.hG)(eh),e1="FileMoveModalContent";function e4(e){return"folder"===e.view||(0,z.K)(e)?"_self":"_blank"}function e2(e){return!!e.subscription||(0,$.VA)(e)}function e8(e){switch(e.type){case K.A.FILE:let t=e.file;return t?.folder_id||null;case K.A.REPO:let r=e.repo;return r?.folder_id||null;case K.A.FILE_IMPORT:return null;default:(0,n.xb)(e)}}function e5(e){let t=null;e.type===K.A.FILE?t=e.file.parent_org_id||null:e.type===K.A.REPO?t=e.repo.parent_org_id||null:e.type===K.A.FILE_IMPORT&&(t=e.orgId);let r=(0,i.d4)(e=>e.orgById),n=t?r[t]:null,o=(0,i.d4)(e=>e.fileMove),l=(0,i.d4)(e=>!!e.creatingNewFolder),d=(0,i.d4)(e=>e.dropdownShown),u=(0,i.d4)(e=>e.selectedView),m=e8(e),f=(0,I.R)(),h=(0,_.Rs)(V.Y9I,{projectId:m},{enabled:!!m}),x=(0,_.Rs)(V.G0Y,{orgId:t});"errors"===x.status&&(console.error("Loading AccessibleFolders from LiveGraph: "),console.error(x.errors));let b="loaded"===x.status&&("loaded"===h.status||e.type===K.A.FILE_IMPORT)?{fetched:x,transformed:function(e,t,r,a){let s={id:e.currentUser.id,student_validated_at:e.currentUser.studentValidatedAt&&e.currentUser.studentValidatedAt.toString()},i={},n={},o={},l={byFolderId:{},byTeamId:{}},d=(0,B.Um)(e.currentUser),c=[],u=e=>{n[e.id]={...e,canEdit:!0,canRename:!!e.path}};e.currentUser.allOrgUsers&&e.currentUser.allOrgUsers.forEach(e=>{o[e.orgId]={[e.userId]:{...e,type:U.Wd.ORG_USER,account_type:e.accountType,design_paid_status:e.accountType,id:e.id,org_id:e.orgId,user_id:e.userId,user:{id:e.user.id,email:e.user.email||void 0,img_url:e.user.imgUrl,name:e.user.name||void 0,handle:e.user.handle},permission:e.permission,drafts_folder_id:e.draftsFolderId,created_at:e.createdAt.toString(),updated_at:e.updatedAt?.toString()||"",disabled_at:e.disabledAt&&e.disabledAt.toString(),whiteboard_paid_status:e.whiteboardPaidStatus||M.El.STARTER,show_figjam_user_onboarding:null,has_shown_figjam_admin_launch_onboarding:null,has_shown_figjam_admin_onboarding:null,ecc_upgrading_locked:null,dev_mode_paid_status:e.devModePaidStatus||M.El.RESTRICTED,...a?{active_seat_type:(0,D.TA)(e.activeSeatTypeUpgrade?.billableProduct)}:void 0}},e.draftsProject&&(u(e.draftsProject),e.draftsProject.ownerRole&&(l.byFolderId[e.draftsProject.id]={[s.id]:(0,B.aU)(e.draftsProject.ownerRole,d,null,null)}))}),e.currentUser.teamEditRoles&&e.currentUser.teamEditRoles.forEach(e=>{if(!e.team)return;let{id:t,projects:r}=e.team;i[t]={...e.team,canView:e.level>=W.e6.VIEWER,canEdit:e.level>=W.e6.EDITOR,canAdmin:e.level>=W.e6.ADMIN,currentTeamUser:e.team.currentTeamUser,licenseGroup:null},l.byTeamId[t]={[s.id]:(0,B.aU)(e,d,null,null)},r&&r.forEach(e=>u(e))});let m=e&&e.org?e.org:null;if(m){if(t){let e=(0,p.oA)(t.project);e&&e.canEdit&&u(e)}m.teams&&m.teams.forEach(e=>{let{id:t,orgEditProjects:r}=e;if(!i[t]){let r=e.canEdit,a=e.canAdmin,s=e.licenseGroup;i[t]={...e,canView:!1,canEdit:r??!1,canAdmin:a??!1,licenseGroup:s||null},c.push(t)}let a=(0,p.oA)(r);a&&a.forEach(e=>{u(e)})})}return e.currentUser.teamRoles?.forEach(e=>{if(!e.team)return;let{id:t}=e.team;i[t]||(i[t]={...e.team,canEdit:!1,canAdmin:!1,canView:!1,currentTeamUser:e.team.currentTeamUser,licenseGroup:null},l.byTeamId[t]={[s.id]:B.aU(e,d,null,null)})}),e.currentUser.projectEditRoles&&e.currentUser.projectEditRoles.forEach(e=>{e.project&&(u(e.project),l.byFolderId[e.project.id]={[s.id]:(0,B.aU)(e,d,null,null)})}),e.currentUser.draftsProject&&(u(e.currentUser.draftsProject),e.currentUser.draftsProject.ownerRole&&(l.byFolderId[e.currentUser.draftsProject.id]={[s.id]:(0,B.aU)(e.currentUser.draftsProject.ownerRole,d,null,null)})),{org:m,user:s,teams:i,folders:n,roles:l,orgUsers:o,orgId:r,fileBrowserPreferences:e.currentUser.fileBrowserPreferences,implicitTeamRolesTeamIds:c}}(x.data,e.type!==K.A.FILE_IMPORT?h.data:null,t,f)}:null,v=null===b?{loaded:!1}:{loaded:!0,userResources:b.transformed},y=null==m||null===b?null:b.transformed.folders[m],w=y?y.teamId:null,j=(0,i.wA)();s.useEffect(()=>{v.loaded&&j(eA({modalData:e,userResources:v.userResources,currentFolderId:m,currentFolderTeamId:w}))},[b&&b.fetched]);let T=[];if(v.loaded&&!t)for(let e in v.userResources.teams){let t=v.userResources.teams[e];"ok"!==t.subscription&&T.push(t.id)}let E=function(e){let[t,r]=s.useState((0,p.Xm)()),a=e.join(",");return s.useEffect(()=>{if(0===a.length){r((0,p.gB)({}));return}r((0,p.Xm)());let e=!1;return(async()=>{let t=await Z.getTeamRestrictionsLists({teamIds:a});e||r((0,p.gB)(t.data.meta))})(),()=>{e=!0}},[a]),t}(T);if("loaded"===E.status&&v.loaded)for(let e in v.userResources.teams){let t=v.userResources.teams[e];E.data[e]&&(t.restrictionsList=E.data[e])}return(0,g.oY)("loaded"===x.status,e=>{(0,c.sx)("file_move_modal_latency",{latency_ms:e},{forwardToDatadog:!0})}),(0,a.jsx)(e3,{creatingNewFolder:l,currentOrg:n,dispatch:j,dropdownShown:d,fileMove:o,fileMoveData:e,isBillingRemodelEnabled:f,modalId:e._modalId,selectedView:u,userResources:v})}function e6(e){let t=null!=e.orgId,r=e.subscription===M.Qh.INCOMPLETE||e.subscription===M.Qh.OK;return{id:e.id,subscription:e.subscription,starter_team:!t&&!r,pro_team:r,org_team:t,student_team:!!e.studentTeamAt,deleted_at:e.deletedAt?.toString()||null}}class e3 extends s.PureComponent{constructor(){super(...arguments),this.state={newFileName:""},this.FILE_MOVE_DROPDOWN="file-move-dropdown",this.setScrollContainer=e=>{this.scrollContainer=e},this.scrollContainerRef=s.createRef(),this.isMovePageToNewFile=(0,o.k)().move_page_to_new_file&&this.props.fileMoveData.isMovePageToNewFile,this.onScroll=()=>{clearTimeout(this.previousTimeOutKey),this.props.fileMove.upDownKeyPressed&&this.props.dispatch(O.Ww({canFocus:!1})),this.previousTimeOutKey=setTimeout(()=>{this.props.fileMove.canMouseFocus||this.props.dispatch(O.Ww({canFocus:!0}))},200)},this.onkeydown=e=>{if(!this.props.userResources.loaded||this.props.creatingNewFolder||this.props.fileMove.folderRenaming||this.props.fileMove.isSearchFocused)return;let t=document.getElementById(e1);if((0,ee.NB)(t))return;let{userResources:r}=this.props.userResources;switch(e.keyCode){case m.Uz.ESCAPE:this.onClose();break;case m.Uz.UP_ARROW:this.props.dispatch(O.zv());break;case m.Uz.DOWN_ARROW:this.props.fileMove.indexCount&&this.props.dispatch(O.TL({upperBound:this.props.fileMove.indexCount}));break;case m.Uz.ENTER:{if(-1===this.props.fileMove.focusedIndex)return;let e=this.props.fileMove.folderRows[this.props.fileMove.focusedIndex];if(e.type===K.b.NEW_FOLDER_TEAM){let t=e.id,a=r.teams[t];this.props.dispatch((0,N.SX)({where:this.props.modalId.type,team:{...(0,C.Ws)(a),canEdit:!0}}))}else if(e.type===K.b.FOLDER_ROW){let t=r.folders[e.id];if(!t)break;this.move(t)}}}},this.onClose=()=>{this.props.fileMoveData.displayBanner?this.props.dispatch(P.Lo()):this.props.dispatch(P.Ce())},this.openOrgView=e=>{this.props.dispatch(A.sf({view:"org",orgId:e,orgViewTab:Y.X.HOME}))},this.onOrgViewLinkClick=()=>{this.props.dispatch(P.Ce()),this.props.currentOrg&&this.openOrgView(this.props.currentOrg.id)},this.moveToSelectedFolder=()=>{let e=this.getFocusedFolder();if(!e)return;let t=()=>{this.move(e)};if(this.isMovePageToNewFile&&this.props.fileMoveData.type!==K.A.FILE_IMPORT){var r,a,s;this.onClose();let t=this.props.fileMoveData.type===K.A.FILE?this.props.fileMoveData.fileKey:this.props.fileMoveData.repoId;r=this.props.fileMoveData.page_id,a=e.id,s=this.state.newFileName,(0,ea.ED)("startMovePagesJob","Send request to start move pages job."),es.Ay.post(`/api/files/${t}/move_pages`,{folder_id:a,page_ids:r,file_name:s}).catch(e=>{(0,ea.x1)("startMovePagesJob","Error with starting move pages job.",{err:e})}).then(()=>{(0,ea.ED)("startMovePagesJob","Move pages job successfully started.")});return}let i=this.props.fileMoveData;if(i.type===K.A.FILE&&i.file.is_team_template&&(0,$.VA)(e)){this.props.dispatch(P.to({type:ed.X0,data:{title:(0,E.tx)("templates.confirmation.move_to_drafts.title",{count:1}),content:(0,E.tx)("templates.confirmation.move_to_drafts.description"),confirmText:(0,E.tx)("templates.confirmation.move_to_drafts.button_v2"),destructive:!1,onConfirm:t}}));return}t()},this.move=d()(e=>{let t=this.props.fileMoveData;switch(t.type){case K.A.FILE:this.moveFile(e,t.file);break;case K.A.REPO:this.moveRepo(e,t.repo);break;case K.A.FILE_IMPORT:for(let r of t.files)this.props.dispatch((0,G.z)({name:r.name,blob:new Blob([r.contents]),folderId:e.id}));break;default:(0,n.xb)(t)}},2e3,{leading:!0,trailing:!1}),this.closeModal=()=>{this.props.dispatch(P.ES(this.props.modalId))},this.moveFile=(e,t)=>{if(e&&e.id!==t.folder_id){if(this.props.userResources.loaded){let r=this.props.userResources.userResources.teams[e.teamId||""]||null;this.closeModal(),this.props.dispatch(F.z({files:[t],folder:e,team:r,fromFileModal:!0,onFinishCallback:this.props.fileMoveData.afterFileMove?.callback}))}}else this.onClose()},this.moveRepo=(e,t)=>{if(e&&e.id!==t.folder_id){if(this.props.userResources.loaded){let r=this.props.userResources.userResources.teams[e.teamId||""]||null;this.closeModal(),this.props.dispatch(F.z({files:[],repos:[t],folder:e,team:r,fromFileModal:!0}))}}else this.onClose()},this.getModalTitle=()=>{let e=this.props.fileMoveData;if(this.isMovePageToNewFile)return(0,E.t)("file_browser.file_move.move_pages_to_new_file");if(e.type===K.A.FILE_IMPORT)return 1===e.files.length?(0,E.t)("file_browser.file_move.modal_header_import_file",{fileName:e.files[0].name}):(0,E.t)("file_browser.file_move.modal_header_import_files");{let t=e.type===K.A.FILE?e.file.name:e.repo.name;return(0,E.t)("file_browser.file_move.modal_header_move_file",{fileName:t})}},this.getFocusedFolder=()=>{if(!this.props.userResources.loaded)return null;let{userResources:e}=this.props.userResources,t=this.props.fileMove.folderRows[this.props.fileMove.focusedIndex];return t&&t.type===K.b.FOLDER_ROW?e.folders[t.id]:null},this.onFileMoveContextMenu=(e,t)=>{e.stopPropagation(),e.preventDefault(),this.props.fileMove.folderRenaming||this.props.dispatch(A.j7({type:this.FILE_MOVE_DROPDOWN,data:{folderId:t.id,position:{top:e.clientY,left:e.clientX,right:"auto",bottom:"auto"}}}))},this.handleInputChange=e=>{this.setState({newFileName:e.currentTarget.value})},this.renderViewerUpgradeAwarenessBanner=(e,t,r)=>{if(!this.props.userResources.loaded)return null;let{userResources:s}=this.props.userResources;if(!(0,$.VA)(t)||(0,$.VA)(r))return null;let i=this.props.fileMoveData.type===K.A.FILE?this.props.fileMoveData.fileKey:"";if(s.orgId){if(s.org?.k12GoogleOrg)return null;let t=s.orgUsers[s.orgId],r=t&&s.user?t[s.user.id]:null,n=!1;if(e===M._Y.DESIGN?n=r?.design_paid_status===M.El.STARTER:e===M._Y.WHITEBOARD&&(n=r?.whiteboard_paid_status===M.El.STARTER),n)return(0,a.jsx)(el,{planName:this.props.currentOrg?.name,planType:q.O.ORG,planId:s.orgId,fileKey:i,upgradeReason:eo.MOVE_DRAFT})}else{let t=r?.teamId,n=t?s.teams[t]:null;if(n&&e6(n).pro_team){let t=!1;if(e===M._Y.DESIGN?t=n.currentTeamUser?.designPaidStatus===M.Zf.STARTER:e===M._Y.WHITEBOARD&&(t=n.currentTeamUser?.whiteboardPaidStatus===M.Zf.STARTER),t)return(0,a.jsx)(el,{planName:n.name,planType:q.O.TEAM,planId:n.id,fileKey:i,upgradeReason:eo.MOVE_DRAFT})}}return null}}componentDidMount(){document.addEventListener("keydown",this.onkeydown),this.componentMountedAt=new Date}componentWillUnmount(){document.removeEventListener("keydown",this.onkeydown)}componentDidUpdate(e,t){!e.userResources.loaded&&this.props.userResources.loaded&&(this.props.fileMoveData.autoSelect&&this.props.dispatch(O.qb({fileMove:this.props.fileMove})),this.props.dispatch(O.YG({isSearchFocused:!0})));let r=this.props.fileMove.focusedIndex;if(this.props.fileMove.upDownKeyPressed&&e.fileMove.focusedIndex!==r){if(!this.scrollContainerRef.current||-1===r)return;let e=this.props.fileMove.folderRows[r].positionTop,t=this.scrollContainer.getScrollTop(),a=this.scrollContainerRef.current.clientHeight;e<t?0===r?this.scrollContainer.scrollToTop():this.scrollContainer.scrollTo(e):e+e0>t+a&&(null!=this.props.fileMove.indexCount&&r===this.props.fileMove.indexCount-1?this.scrollContainer.scrollToBottom():this.scrollContainer.scrollTo(e-a+e0))}this.props.fileMove.upDownKeyPressed&&this.props.dispatch(O.qM())}renderDropdown(){if(!this.props.userResources.loaded)return;let{userResources:e}=this.props.userResources,t=this.props.dropdownShown;if(!(t&&t.type===this.FILE_MOVE_DROPDOWN&&t.data&&t.data.folderId))return null;let r=e.folders[t.data.folderId];return r?(0,a.jsx)(ta,{folder:r,dropdownShown:this.props.dropdownShown,selectedView:this.props.selectedView,dispatch:this.props.dispatch}):null}render(){let e,t,r;let s=this.props.fileMoveData.modalWidth||288,i=this.getModalTitle();if(!this.props.userResources.loaded)return(0,a.jsx)(et.OJ,{title:i,fixedTop:!0,minWidth:s,maxWidth:s,onClose:this.onClose,truncateTitleText:!0,children:(0,a.jsx)("div",{className:eU,children:(0,a.jsx)(y.a_,{className:"file_move--spinner--eDfAF"})})});let{userResources:o}=this.props.userResources,l=e8(this.props.fileMoveData),d=null==l?null:o.folders[l],c=this.getFocusedFolder();e=this.isMovePageToNewFile?null!=c&&0!==this.state.newFileName.length:this.props.fileMoveData.type===K.A.FILE_IMPORT?null!=c:null!=c&&null!=d&&c.id!==d.id;let u=0===this.props.fileMove.teamOrder.length,m=!this.props.fileMove.folderSearchQuery&&this.props.fileMove.userTeamCount&&this.props.fileMove.userTeamCount<=1&&this.props.fileMoveData.type!==K.A.FILE_IMPORT,_=this.props.fileMoveData;switch(_.type){case K.A.FILE:t={fileKey:_.fileKey,fileTeamId:_.file&&_.file?.team_id,fileMoveModalEmptyState:m,orgId:this.props.currentOrg&&this.props.currentOrg?.id},r=_.file.editor_type??M._Y.DESIGN;break;case K.A.REPO:t={repoId:_.repoId,fileMoveModalEmptyState:m,orgId:this.props.currentOrg&&this.props.currentOrg?.id},r=M._Y.DESIGN;break;case K.A.FILE_IMPORT:t={},r=null;break;default:(0,n.xb)(_)}return(0,a.jsx)(L.fu,{name:X.e0.FILE_MOVE_MODAL,properties:t,children:(0,a.jsxs)(et.OJ,{title:i,fixedTop:!0,minWidth:s,maxWidth:s,onClose:this.onClose,truncateTitleText:!0,children:[m?(0,a.jsx)("div",{className:"file_move--mainZeroState--HWbCa file_move--main--fz-As",id:e1,children:(0,a.jsxs)("div",{className:"file_move--zeroStateModal--yrur1",children:[(0,a.jsx)("div",{style:{paddingTop:"100px"},children:(0,E.tx)("file_browser.file_move.zero_state")}),this.props.currentOrg&&(0,a.jsx)("div",{className:T.s.pt20.$,children:(0,a.jsx)(x.$$,{onClick:this.onOrgViewLinkClick,children:this.props.currentOrg.bigma_enabled?(0,E.t)("file_browser.file_move.view_workspaces"):(0,E.t)("file_browser.file_move.view_teams")})})]})}):(0,a.jsxs)("div",{className:eU,id:e1,children:[this.isMovePageToNewFile?(0,a.jsx)(ei,{newFileName:this.state.newFileName,onChange:this.handleInputChange}):(0,a.jsxs)(a.Fragment,{children:[r&&d&&c&&!this.props.isBillingRemodelEnabled&&this.renderViewerUpgradeAwarenessBanner(r,d,c),(0,a.jsx)("div",{className:"file_move--searchWrapperNew--fSvPz",children:(0,a.jsx)(e7,{fileMoveData:this.props.fileMoveData,folderCount:this.props.fileMove.indexCount,focusedIndex:this.props.fileMove.focusedIndex,getFocusedFolder:this.getFocusedFolder,searchQuery:this.props.fileMove.folderSearchQuery,moveFolder:this.move,dispatch:this.props.dispatch,userResources:o})})]}),(0,a.jsx)("div",{className:eV}),this.props.fileMoveData.displayBanner&&!this.isMovePageToNewFile&&(0,a.jsxs)(a.Fragment,{children:[this.props.fileMoveData.displayBanner,(0,a.jsx)("div",{className:eV})]}),this.props.fileMove.folderSearchQuery&&!this.isMovePageToNewFile&&u?(0,a.jsx)("div",{className:"file_move--emptyModal--o-ei-",children:(0,E.tx)("search.file_move.no_results_found",{folderSearchQuery:this.props.fileMove.folderSearchQuery})}):(0,a.jsx)(w.P,{width:s,className:"file_move--teamSectionBody--jIFZO",ref:this.setScrollContainer,scrollContainerRef:this.scrollContainerRef,onScroll:this.onScroll,children:(0,a.jsx)(tt,{componentMountedAt:this.componentMountedAt,creatingNewFolder:this.props.creatingNewFolder,currentFolderId:l,dispatch:this.props.dispatch,fileEditorType:r,fileMove:this.props.fileMove,folders:o.folders,indexOffsets:this.props.fileMove.indexOffsets,onDoubleClick:this.moveToSelectedFolder,onFileMoveContextMenu:this.onFileMoveContextMenu,orgId:o.orgId,rolesByTeamId:o.roles.byTeamId,selectedView:this.props.selectedView,teamNameMaxWidth:s-88,teams:o.teams})}),(0,a.jsxs)("div",{className:"file_move--footer--pBClJ",children:[(0,a.jsx)(x.nR,{onClick:this.onClose,children:(0,E.tx)("modal.cancel")}),(0,a.jsx)(x.vd,{disabled:!e,onClick:this.moveToSelectedFolder,children:this.props.fileMoveData.moveText||(0,E.t)("file_browser.file_move.move")})]})]}),this.renderDropdown(),(0,a.jsx)(ts,{fileMove:this.props.fileMove,creatingNewFolder:this.props.creatingNewFolder})]})})}}e3.displayName="FileMoveModal";class e7 extends s.PureComponent{constructor(e){super(e),this.onFocus=()=>{this.props.dispatch(O.xH()),this.props.dispatch(O.YG({isSearchFocused:!0}))},this.onBlur=()=>{this.props.dispatch(O.YG({isSearchFocused:!1}))},this.onChange=e=>{e.stopPropagation(),this.props.dispatch(eO({modalData:this.props.fileMoveData,query:e.currentTarget.value,userResources:this.props.userResources}))},this.onSearchKeyDown=e=>{e.stopPropagation();let t=this.searchInputRef.current;switch(e.keyCode){case m.Uz.DOWN_ARROW:t&&t.blur(),null!=this.props.folderCount&&this.props.dispatch(O.TL({upperBound:this.props.folderCount}));break;case m.Uz.UP_ARROW:t&&t.blur(),this.props.dispatch(O.zv());break;case m.Uz.ESCAPE:if(!t)break;t.value?(t.value="",this.props.dispatch(eO({modalData:this.props.fileMoveData,query:"",userResources:this.props.userResources}))):this.props.dispatch(P.Ce()),this.props.dispatch(O.xH());break;case m.Uz.TAB:t&&t.blur(),this.props.dispatch(O.xH());break;case m.Uz.ENTER:{t&&t.blur();let e=this.props.getFocusedFolder();e&&this.props.moveFolder(e)}}},this.searchInputRef=s.createRef()}componentDidMount(){let e=this.searchInputRef.current;e&&e.focus()}render(){return(0,a.jsxs)("div",{className:"file_move--searchContainer--VZId9",children:[(0,a.jsx)("div",{className:eW,children:(0,a.jsx)(j.B,{svg:eJ.A})}),(0,a.jsx)(v.L,{ref:this.searchInputRef,placeholder:(0,E.t)("file_browser.file_move.search_placeholder"),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onSearchKeyDown,className:this.props.searchQuery?"file_move--searchInputNew--No-wL":"file_move--searchInputEmptyNew--Gv7eB file_move--searchInputNew--No-wL",value:this.props.searchQuery,onChange:this.onChange})]})}}function e9(e){let{team:t,teamId:r}=e,[i,{onMouseOver:n,onMouseOut:o}]=(()=>{let[e,t]=(0,s.useState)(!1),r=(0,s.useCallback)(()=>t(!0),[t]),a=(0,s.useCallback)(()=>t(!1),[t]);return(0,s.useMemo)(()=>[e,{onMouseOver:r,onMouseOut:a}],[e,r,a])})(),l=(0,_.Rs)(V.bel,{teamId:t?.id??""},{enabled:!!t?.id}),d=l.data?.team?.teamFileCounts||H.Cz,c=e.fileNotInTeam&&e.fileEditorType&&t&&!(0,H.aW)(t,{type:H.sK.ADD_FILE,editorType:e.fileEditorType,teamFileCounts:d});return(0,a.jsx)(a.Fragment,{children:e.showTitle&&(0,a.jsxs)("div",{className:"file_move--teamTitleNew--1hv9- text--fontPos12--YsUAh text--_fontBase--QdLsd",onMouseOver:n,onMouseLeave:o,children:[(r===O.iK||r===O.HK)&&(0,a.jsx)("div",{className:eW,children:(0,a.jsx)(j.B,{svg:eQ.A})}),(0,a.jsxs)("div",{className:"file_move--teamTitleRow--hMU87",children:[(0,a.jsxs)("div",{className:"file_move--teamName--Jmsoa",children:[(0,a.jsx)("div",{className:"file_move--teamTitleText--4XOM- ellipsis--ellipsis--Tjyfa",style:{maxWidth:e.teamNameMaxWidth},children:r===O.iK||r===O.HK?(0,E.t)("file_browser.shared_projects"):t.name}),c&&(0,a.jsx)("div",{className:"file_move--warningIcon--MVFCa",children:(0,a.jsx)(j.B,{svg:eY.A,"data-tooltip-type":J.Ib.TEXT,"data-tooltip":(0,E.t)("file_browser.file_move.paywall_team_tooltip")})})]}),i&&t&&!c&&(0,a.jsx)("div",{className:"file_move--newProjButton--7b5Xq",children:(0,a.jsx)(R,{team:t,isBackgroundTransparent:!0,trackingContextName:X.e0.FILE_MOVE_MODAL})})]})]})})}function te(e){let t=(0,s.useRef)(null),[r,n]=(0,s.useState)(!1),o=(0,i.wA)();return(0,s.useEffect)(()=>{!r&&e.isTeamNew&&t.current&&e.hasFolderSection&&(o(O.Dp({indexAt:e.firstFolderFocusedIndex})),t.current.scrollIntoView(),n(!0))},[e.isTeamNew,e.hasFolderSection,e.firstFolderFocusedIndex,r,t,o]),(0,a.jsx)("div",{className:e.className,ref:t,children:e.children})}function tt(e){let{fileMove:t,teams:r,selectedView:s}=e,i=Object.values(r).map(e=>e6(e));return(0,a.jsxs)("div",{children:[null!=t.teamOrder&&t.teamOrder.map(s=>{let i=s!==O.HK,n=s!==O.iK&&s!==O.HK,o=(t.foldersByTeamId?.[s]||[]).length>0;if(!(i||n||o))return null;let l=r[s];if(!l&&!(s===O.iK||s===O.HK)||s===O.HK&&!e.orgId)return null;let d=l?new Date(r[s].createdAt):void 0,c=d&&d>e.componentMountedAt,u=t.indexOffsets[s]+1,m=!!e.currentFolderId&&s!==e.folders[e.currentFolderId]?.teamId;return(0,a.jsxs)(te,{className:"file_move--teamSection--mI5yE",isTeamNew:c,firstFolderFocusedIndex:u,hasFolderSection:o,children:[(0,a.jsx)(e9,{team:l,teamId:s,showTitle:i,isACustomTeam:n,fileNotInTeam:m,teamNameMaxWidth:e.teamNameMaxWidth,indexOffsets:e.indexOffsets,fileEditorType:e.fileEditorType}),o&&(t.foldersByTeamId[s]||[]).map((r,i)=>{let o=i+e.indexOffsets[s];return n&&(o+=1),(0,a.jsx)(tr,{currentFolderId:e.currentFolderId,focusedFolderIndex:t.focusedIndex,folder:r,folderBeingRenamed:t.folderRenaming,folders:e.folders,index:o,isSearchingFolders:!!t.isSearchResult,onDoubleClick:e.onDoubleClick,onFileMoveContextMenu:e.onFileMoveContextMenu,trackingContextName:X.e0.FILE_MOVE_MODAL},`${r.teamId} ${r.id}`)})]},`Team Section ${s}`)}),!e.orgId&&(0,a.jsx)(eH,{teamNameMaxWidth:e.teamNameMaxWidth,trackingContextName:X.e0.FILE_MOVE_MODAL,orgId:e.orgId,selectedView:s,teams:i,rolesByTeamId:e.rolesByTeamId,dispatch:e.dispatch})]})}function tr(e){let t=(0,i.wA)(),r=(0,f.gY)(N.mq),s=(a,s)=>{(0,c.sx)("Rename Folder",{trackingContext:e.trackingContextName}),r({folderId:a.id,folderName:s}),t(O.Mn())},n=(t,r)=>{e.onFileMoveContextMenu(r,t)},o=e.folderBeingRenamed===e.folder.id,l=e.focusedFolderIndex===e.index,d=e.folderBeingRenamed?e$:l?"file_move--folderRowWrapperFocusedNew--XWjyz file_move--folderRowWrapper--R5vx1":e$,{folder:u}=e;return(0,a.jsx)("div",{className:d,onMouseDown:()=>{t(O.Dp({indexAt:e.index}))},onContextMenu:e=>n(u,e),onDoubleClick:()=>{o||e.onDoubleClick()},children:o?(0,a.jsx)("div",{className:eG,children:(0,a.jsx)(b.p,{className:"file_move--renameInput--WL-5T",placeholderValue:(0,$.CI)(u),submit:e=>s(u,e),cancel:()=>{t(O.Mn())}},`input ${u.id}`)}):((t,r)=>{let s=e2(t)&&e.isSearchingFolders,i=e.focusedFolderIndex&&e.focusedFolderIndex>-1?r:e.currentFolderId===t.id,n=(0,$.jd)(t)?eZ.A:eq.A;return(0,a.jsxs)("div",{className:eG,children:[(0,a.jsx)("div",{className:eW,children:(0,a.jsx)(j.B,{svg:i?eK.A:n})}),(0,a.jsx)("span",{className:"file_move--folderName--YbDNz ellipsis--ellipsis--Tjyfa",children:(0,$.CI)(t)}),(0,a.jsx)("div",{className:eW,children:s&&(0,a.jsx)(j.B,{svg:eX.A})})]})})(u,l)},`${u.teamId} ${u.id}`)}e7.displayName="FileMoveSearch";class ta extends s.PureComponent{constructor(){super(...arguments),this.renameFolder=()=>{this.props.dispatch(O.JG({folderId:this.props.folder.id}))}}render(){let e=this.props.folder,t=e.canRename,r=e4(this.props.selectedView);return(0,a.jsxs)(h.ms,{className:"file_move--fileMoveContextMenu--47Rjw",style:this.props.dropdownShown.data.position,children:[(0,a.jsx)(h.c$,{disabled:!t,onClick:this.renameFolder,children:(0,E.tx)("file_browser.file_move.context_menu_rename")}),(0,a.jsx)(h.wv,{}),(0,a.jsx)(h.c$,{href:(0,S.EE)(e.id,e.orgId),target:r,children:(0,E.tx)("file_browser.file_move.context_menu_show_in_files")})]})}}ta.displayName="FileMoveDropdown";class ts extends s.PureComponent{constructor(){super(...arguments),this.hiddenDivRef=e=>{this.hiddenDiv=e}}componentDidUpdate(){!this.props.fileMove||this.props.fileMove.folderRenaming||this.props.fileMove.isSearchFocused||this.props.creatingNewFolder||null==this.hiddenDiv||this.hiddenDiv.focus()}render(){return(0,a.jsx)("div",{ref:this.hiddenDivRef,tabIndex:0})}}ts.displayName="FileMoveHiddenDiv"},929665:(e,t,r)=>{r.r(t),r.d(t,{MoveDraftToProjectInterstitialModal:()=>h});var a=r(486106),s=r(514228),i=r(536384),n=r.n(i),o=r(17223),l=r(637027),d=r(303541),c=r(142086),u=r(156213),m=r(985254),_=r(831799),p=r(918700),f=r(289198),g=r(871493);function h(e){let t=(0,s.wA)(),r=()=>{t(m.b({dismissed_move_draft_to_project_interstitial_modal:!0})),t(u.Lo())};return(0,a.jsx)(_.fu,{name:"MoveDraftToProjectInterstitialModal",children:(0,a.jsxs)(p.d_,{title:(0,d.t)("file_browser.draft_to_project.title.plan_spaces"),titleClassName:f.wN,className:f.KP,size:320,popStack:!0,disableClickOutsideToHide:!0,children:[(0,a.jsx)(o.Jn,{className:n()(g.J_,g.BQ),onClick:r}),(0,a.jsxs)("span",{children:[(0,d.tx)("file_browser.draft_to_project.body.plan_spaces"),(0,a.jsx)("br",{})]}),(0,a.jsxs)("div",{className:n()(f.v0,f.hF),children:[(0,a.jsx)("a",{target:"_blank",href:"https://help.figma.com/hc/articles/13838684089751-Starter-plan-permissions#drafts",children:(0,a.jsx)(l.tM,{children:(0,d.tx)("general.learn_more")})}),(0,a.jsx)(l.vd,{className:f.pL,onClick:()=>{r(),(0,c.h)(e.file,e.repo,t,e.afterFileMove,e.bannerToDisplay)},children:(0,d.tx)("file_browser.draft_to_project.move")})]})]})})}},774631:(e,t,r)=>{r.d(t,{cx:()=>i,jS:()=>n});var a=r(992467),s=r(658244);r(200830);let i=s.A.createLazyComponent(()=>Promise.all([r.e(4096),r.e(7006),r.e(8029),r.e(4694),r.e(7485),r.e(7037),r.e(1556),r.e(7021),r.e(7222),r.e(5885),r.e(1250),r.e(6658),r.e(1577),r.e(3700),r.e(6618),r.e(4452),r.e(6268),r.e(8594),r.e(9420),r.e(8717)]).then(r.bind(r,200830)).then(e=>e.default),{loading:()=>null,error:a.H4.NONE,componentName:"FileBrowserOverlays"}),n=s.A.createLazyComponent(()=>Promise.all([r.e(4096),r.e(7006),r.e(8029),r.e(4694),r.e(7485),r.e(7037),r.e(1556),r.e(7021),r.e(7222),r.e(5885),r.e(1250),r.e(6658),r.e(1577),r.e(3700),r.e(6618),r.e(4452),r.e(6268),r.e(8594),r.e(9420),r.e(8717)]).then(r.bind(r,244865)).then(e=>e.MakeFileCreationTooltip),{loading:()=>null,error:a.H4.NONE,componentName:"MakeFileCreationTooltip"})},213092:(e,t,r)=>{r.r(t),r.d(t,{EduUpgradeModal:()=>x});var a=r(486106),s=r(7378),i=r(514228),n=r(637027),o=r(303541),l=r(718426),d=r(307841),c=r(976345),u=r(156213),m=r(482142),_=r(831799),p=r(212807),f=r(345997),g=r(519092);function h({handleClose:e}){let t=(0,i.wA)(),r=s.useCallback(()=>{e(),t((0,c.Dw)({isEduTeam:!0}))},[t,e]);return(0,a.jsx)(n.Ph,{className:"edu_upgrade_modal--createTeamLink--CbJUX edu_upgrade_modal--link--Toy9f",onClick:r,trusted:!0,children:(0,o.tx)("edu.or_create_a_new_team")})}function x(){let e=(0,p.FC)(),t=(0,i.wA)(),r=(0,d.sx)(),x=s.useCallback(()=>{t(u.Ce())},[t]),b=s.useCallback(e=>{x(),t(m.Vm({teamId:e.id}))},[t,x]),v=s.useMemo(()=>(0,f.Kg)(e),[e]);return s.useLayoutEffect(()=>{0!==v.length||r||(x(),t((0,c.Dw)({isEduTeam:!0})))},[t,v.length,x,r]),(0,a.jsx)(_.fu,{name:"Edu Team Upgrade Modal",children:(0,a.jsx)(g.OJ,{title:(0,o.t)("edu.upgrade_teams.headline"),onClose:x,children:(0,a.jsxs)("div",{className:"edu_upgrade_modal--container--i-0VV",children:[(0,a.jsxs)("p",{className:"edu_upgrade_modal--bodyText--BXu7I",children:[(0,o.tx)("edu.upgrade_teams.body",{link:(0,a.jsx)(n.Ph,{className:"edu_upgrade_modal--link--Toy9f",href:"/pricing",target:"_blank",trusted:!0,children:(0,o.tx)("edu.upgrade_teams.body_link_text")})}),v.length>1&&(0,a.jsxs)(a.Fragment,{children:[" ",(0,o.tx)("edu.upgrade_teams.body_multiple_teams")]})]}),(0,a.jsx)(l.I,{eligibleTeams:v,selectTeam:b,showEditorCount:!1,customUpgradeText:(0,o.t)("general.next")}),!r&&(0,a.jsx)(h,{handleClose:x})]})})})}},621155:(e,t,r)=>{r.d(t,{O:()=>a});let a="make-file-creation-tooltip-target"},244865:(e,t,r)=>{r.r(t),r.d(t,{MakeFileCreationTooltip:()=>C});var a=r(486106),s=r(7378),i=r(207101),n=r(169182),o=r(303541),l=r(596856),d=r(61705),c=r(272488),u=r(370443),m=r(640017),_=r(621515),p=r(191312),f=r(268271),g=r(129046),h=r(425180),x=r(6204),b=r(621155),v=r(601108),y=r(27355),w=r(989992),j=r(920142),T=r(545877),E=r(539601),I=r(358013);let N=(0,T.r1)("has_created_figma_make_file");function C({newFileFrom:e}){let t=function(){let e=(0,I.E)(),t=(0,v.k)().marketing_promo_modal_figmake_launch,r=(0,y.md)((0,E.eC)(x.CBZ.lifecycle)),a=(0,y.md)(N),s=(0,y.md)((0,E.eC)(x.qiY.lifecycle));return w.Qw.all([e,r,a,s]).transform(([e,r,a,s])=>{if(t){if(!r.lifecycleState||0===r.lifecycleState.count)return!1;let e=new Date(r.lifecycleState.updatedAt);if((0,j.A)(e).isAfter((0,j.A)().subtract(14,"day")))return!1}return!(a||(s.lifecycleState?.count??0)>0&&(0,j.A)(s.lifecycleState?.updatedAt).isAfter((0,j.A)().subtract(3,"day")))&&e})}(),r=(0,c.Np)(),T="dark"===(0,m.DP)(),{show:C,isShowing:S,complete:k}=(0,_.e)({overlay:x.TUm,priority:f.N.SECONDARY_MODAL,experiment:{check:r,predicate:e=>e,postCheck:()=>!0}},[t]),R=(0,d.$)({isDraftsFolder:!0,editorType:p._Y.FIGMAKE,newFileFrom:e,contextClicked:"make_file_creation_tooltip"});(0,i.h)(()=>{C({canShow:e=>e})});let A=(0,l.S)();return s.useEffect(()=>{A&&k()},[A,k]),(0,a.jsx)(h.rq,{clickOutsideToHide:!0,description:(0,o.tx)("file_browser.make_file_creation_promos.description"),disableHighlight:!1,forceEditorTheme:"seascape",isShowing:S,media:(0,a.jsx)(g.w,{src:(0,n.ck)(T?"1a369818117cc7e77826ee246da5938968f29e43":"fcba05f6d2193657ef692fedecfcdf36b4eae871"),aspectRatio:726/540}),onClose:k,primaryCta:{label:(0,o.tx)("file_browser.make_file_creation_promos.cta"),type:"button",onClick:R,ctaTrackingDescriptor:u.c.TRY_FIGMA_MAKE},targetKey:b.O,title:(0,o.tx)("file_browser.make_file_creation_promos.title"),trackingContextName:"Figma Make File Creation Tooltip"})}},358013:(e,t,r)=>{r.d(t,{E:()=>d});var a=r(514228),s=r(687776),i=r(334471),n=r(191312),o=r(465071);if(443==r.j)var l=r(442612);function d(){let e=(0,a.d4)(e=>e.user?.drafts_folder_id),t=(0,s.nt)(e),r=(0,i.h)(t.data),d=(0,o.No)(),c=(0,o.YY)(d).unwrapOr(!1);return t.transform(e=>{let t=r.find(({editorType:e})=>e===n._Y.FIGMAKE),a=c&&(0,l.W)();return!!t?.canCreate&&!a})}},621339:(e,t,r)=>{r.r(t),r.d(t,{DowngradeSurveyModal:()=>F,DowngradeSurveyModalAdmin:()=>P,DowngradeSurveyModalLeaveTeam:()=>L});var a=r(486106),s=r(514228),i=r(11),n=r(303541),o=r(240735),l=r(7378),d=r(449184),c=r(637027),u=r(156213),m=r(386952),_=r(519092);function p({id:e,label:t,children:r,onChange:s}){let[i,n]=l.useState(!1);return(0,a.jsxs)("fieldset",{name:e,children:[(0,a.jsxs)("div",{className:"survey_option--inputContainer---R-Fh",children:[(0,a.jsx)(c.tB,{id:e,checked:i,onChange:e=>{n(!i),s&&s(e)}}),(0,a.jsx)("label",{className:"survey_option--label--NqXEk",htmlFor:e,children:t})]}),i&&r&&(0,a.jsx)("div",{className:"survey_option--subContainer--Omjmy",children:r})]})}var f=r(656233),g=r(536384),h=r.n(g),x=r(236327),b=r(306088),v=r(318279);function y(e){let[t,r]=l.useState(""),s=e=>{r(e.target.value)};return e.textarea?(0,a.jsx)(v.v,{value:t,onChange:s,...e}):(0,a.jsx)(c.ks,{id:e.id,className:"survey_text_input--input--Q1W-9",placeholder:e.placeholder,maxLength:100,value:t,onChange:s})}let w="downgrade_survey_modal_component_v2--surveyQuestions--E5X6t",j="downgrade_survey_modal_component_v2--researchContact--qGc3V",T="downgrade_survey_modal_component_v2--hiddenInput--04h5p",E="downgrade_survey_modal_component_v2--radio--xvUsz",I=[{id:"brl",shorthand:"BRL"},{id:"cad",shorthand:"CAD"},{id:"eur",shorthand:"EUR"},{id:"gbp",shorthand:"GBP"},{id:"jpy",shorthand:"JPY"}];function N({id:e,shorthand:t}){return(0,a.jsxs)("div",{className:"downgrade_survey_modal_component_v2--currencyContainer--CoFln",children:[(0,a.jsx)("p",{children:(0,n.tx)(`downgrade_survey.survey_option.too_expensive.${e}`)}),(0,a.jsx)("p",{className:"downgrade_survey_modal_component_v2--currencyShorthand--xhQpy",children:t})]})}let C=[{id:"too_expensive",value:"Too expensive",children:(0,a.jsx)(function(){let e="other_currency",[t,r]=l.useState(""),s=e=>{r(e.currentTarget.id)},i=[...I.map(({id:e,shorthand:t})=>(0,a.jsx)(x.c$,{id:e,onClick:s,children:(0,a.jsx)(N,{id:e,shorthand:t})},e)),(0,a.jsx)(x.wv,{},"separator"),(0,a.jsx)(x.c$,{id:e,onClick:s,children:(0,n.tx)("downgrade_survey.survey_option.too_expensive.other_currency")},e)];return(0,a.jsx)("fieldset",{children:(0,a.jsx)(p,{id:"currency_conversion",label:(0,n.t)("downgrade_survey.survey_option.too_expensive.currency_conversion"),children:(0,a.jsxs)("fieldset",{className:h()({"downgrade_survey_modal_component_v2--currencySelector__other--khpqx":t===e}),children:[(0,a.jsx)(x.Ve,{label:t.length?(0,n.t)(`downgrade_survey.survey_option.too_expensive.${t}`):(0,n.t)("downgrade_survey.survey_option.too_expensive.currency_selector"),options:i}),(0,a.jsx)("input",{id:"currency",className:T,readOnly:!0,value:t}),t===e&&(0,a.jsx)(y,{id:"currency_input",placeholder:(0,n.t)("downgrade_survey.survey_option.too_expensive.specify_currency")})]})})})},{}),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")),r=t.find(e=>"currency_conversion"===e.id),a=t.find(e=>"currency"===e.id),s=a?.value,i=t.find(e=>"currency_input"===e.id),n=i?.value||s||void 0;return{currencyConversion:r?.checked,currency:n}}},{id:"billing_structure_unclear",value:"Billing structure is unclear"},{id:"no_longer_using_figma_products",value:"No longer using Figma's products",children:(0,a.jsx)(function(){return(0,a.jsxs)("fieldset",{children:[(0,a.jsx)("legend",{className:"downgrade_survey_modal_component_v2--additionalQuestion--HfKNO",children:(0,n.tx)("downgrade_survey.survey_option.no_longer_using_figma_products.other_products")}),(0,a.jsx)(y,{id:"other_products",placeholder:(0,n.t)("downgrade_survey.survey_option.no_longer_using_figma_products.text_area")})]})},{}),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")).find(e=>"other_products"===e.id);return{products:t?.value||void 0}}},{id:"project_inactive",value:"Project is over or no longer active"},{id:"accidental_upgrade",value:"Did not mean to upgrade"},{id:"switching_plans",value:"Switching to a different plan",children:(0,a.jsx)(function(){let[e,t]=l.useState("");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(b.z,{value:e,onChange:e=>t(e),children:[(0,a.jsx)(b.Z,{className:E,value:"Starter plan",children:(0,n.tx)("downgrade_survey.survey_option.switching_plans.starter_plan")}),(0,a.jsx)(b.Z,{className:E,value:"Organization plan",children:(0,n.tx)("downgrade_survey.survey_option.switching_plans.organization_plan")}),(0,a.jsx)(b.Z,{className:E,value:"Enterprise plan",children:(0,n.tx)("downgrade_survey.survey_option.switching_plans.enterprise_plan")}),(0,a.jsx)(b.Z,{className:E,value:"Education plan",children:(0,n.tx)("downgrade_survey.survey_option.switching_plans.education_plan")})]}),(0,a.jsx)("input",{id:"new_plan",className:T,readOnly:!0,value:e})]})},{}),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")).find(e=>"new_plan"===e.id);return{newPlan:t?.value||void 0}}}],S={id:"other",value:"Other",children:(0,a.jsx)(function(){return(0,a.jsx)(y,{className:"downgrade_survey_modal_component_v2--otherTextArea--pS5MZ",placeholder:(0,n.t)("downgrade_survey.survey_option.other.text_area"),textarea:!0})},{}),getSubOptions:e=>({explanation:e.getElementsByTagName("textarea")[0].value||void 0})},k=(0,f.k4)(C).concat(S);var R=r(639088),A=r(249555);function O({onSubmit:e}){let[t,r]=l.useState([]),i=e=>{let{id:a}=e.currentTarget;t.includes(a)?r(t.filter(e=>e!==a)):r([...t,a])},o=(0,s.wA)(),f=(0,m._6)().teamId;return(0,a.jsx)(_.OJ,{title:(0,n.t)("downgrade_survey.header"),fixedTop:!0,minWidth:370,maxWidth:370,onClose:()=>{o(u.Ce())},dataTestId:"downgrade-survey-modal",isCloseHidden:!0,disableClickOutsideToHide:!0,children:(0,a.jsxs)("form",{className:"downgrade_survey_modal_component_v2--modalBody--tYceI",onSubmit:r=>{r.preventDefault();let a=Array.from(r.currentTarget.getElementsByClassName(w)[0].getElementsByTagName("fieldset")),s=t.map(e=>{let t=a.find(t=>t.name===e),{value:r,getSubOptions:s}=k.find(t=>t.id===e);return{reason:r,...s&&s(t)}}),i=r.currentTarget.getElementsByClassName(j)[0].getElementsByTagName("input")[0].checked;(0,d.sx)("Team Downgrade Survey",{teamId:f,canContact:i,selectedOptions:s.map(e=>JSON.stringify(e))}),e?.(),o(u.Ce())},children:[(0,a.jsxs)("div",{className:"downgrade_survey_modal_component_v2--exitSurvey--9HRcF",children:[(0,a.jsxs)("fieldset",{className:w,children:[(0,a.jsx)("legend",{children:(0,n.tx)("downgrade_survey.what_made_you_cancel_your_plan")}),!t.length&&(0,a.jsx)("p",{className:A.Q,children:(0,n.tx)("downgrade_survey.select_one")}),k.map(({id:e,children:t})=>(0,a.jsx)(p,{id:e,label:(0,n.t)(`downgrade_survey.survey_option.${e}`),onChange:i,children:t},e))]}),(0,a.jsxs)("fieldset",{className:j,children:[(0,a.jsx)("legend",{children:(0,n.tx)("downgrade_survey.research_contact")}),(0,a.jsx)(p,{id:"research",label:(0,n.t)("downgrade_survey.allow_research_contact")})]})]}),(0,a.jsx)("div",{className:"downgrade_survey_modal_component_v2--buttonRow--Y15LH",children:(0,a.jsx)(c.vd,{type:"submit",disabled:!t.length,className:R.pL,autoFocus:!1,children:(0,n.tx)("downgrade_survey.continue")})})]})})}function F({context:e}){let t=(0,s.wA)(),r=(0,s.d4)(e=>e.modalShown?.data.teamId),l=(0,s.d4)(e=>e.teams[r]),d="admin"===e?(0,n.t)("downgrade_survey.go_back"):(0,n.t)("downgrade_survey.do_not_leave_team"),c="leave-team"===e?()=>{(0,i.us)("User entered leave team survey"),t(o.yH({team:l,userInitiated:!0}))}:void 0;return(0,a.jsx)(O,{cancelText:d,onSubmit:c})}function P(){return(0,a.jsx)(F,{context:"admin"})}function L(){return(0,a.jsx)(F,{context:"leave-team"})}},390613:(e,t,r)=>{r.r(t),r.d(t,{FolderBatchAbandonedDraftDeleteConfirmModal:()=>u});var a=r(486106),s=r(514228),i=r(449184),n=r(566371),o=r(573154),l=r(303541),d=r(199513),c=r(918700);function u({folders:e}){let t=(0,s.wA)(),r=(0,n.gY)(d.U),u=e=>{e.forEach(e=>{(0,i.sx)("Folder Batch Abandoned Draft Delete Confirmation Click",{folderId:e.id,teamId:e.teamId,orgId:e.orgId})}),r({folderIds:e.map(e=>e.id)}).catch(()=>{t(o.s.error((0,l.t)("file_browser.api_folder.error_when_deleting")))})};return(0,a.jsx)(c.yX,{confirmationTitle:(0,l.t)("file_browser.delete_project.title"),destructive:!0,confirmText:(0,l.t)("file_browser.batch_delete_project.generic_confirm_label"),onConfirm:()=>{u(e)},children:(0,l.tx)("file_browser.batch_delete_projects.confirm_text_trash_section",{numProjects:e.length})})}},146061:(e,t,r)=>{r.r(t),r.d(t,{FolderMoveModal:()=>M});var a=r(486106),s=r(7378),i=r(514228);r(82433);var n=r(536384),o=r.n(n),l=r(612521),d=r(288654),c=r(723791),u=r(637027),m=r(490799),_=r(347284),p=r(714743),f=r(303541),g=r(277163),h=r(156213),x=r(831799),b=r(864281),v=r(199513),y=r(212807),w=r(43951),j=r(349248),T=r(165519),E=r(630077),I=r(247093),N=r(696396),C=r(519092),S=r(915131),k=r(552876),R=r(761565);let A="folder_move--iconContainer--nXjIY file_move--iconContainer--2ExyP",O="folder_move--warningContainer--MXpOB";var F=r(555288),P=r(7452),L=r(663128),D=r(254490);function M(e){let t,r;let n=(0,i.wA)(),o=(0,R.s)(),g=(0,i.d4)(e=>e.currentUserOrgId),A=(0,i.d4)(e=>null!=g?e.orgById[g]:null),P=(0,d.Rs)(w.AbW,{currentOrgId:g,currentTeamId:null,folderId:e.folderId}),D=(0,i.d4)(t=>t.folders[e.folderId]),[M,W]=(0,s.useState)(void 0),[$,G]=(0,s.useState)(void 0),V="loaded"===P.status?{...P.data.currentUser}:null,z=b.h.useTrackingContext({trigger:T.b.FOLDER_MOVE_MODAL}),H={},K=[],Y=(0,y.FC)();if(V){let e=[];(V.teamRoles??[]).forEach(t=>{if(t.team?.orgId===g&&!t.team?.deletedAt&&!t.pending){if(t.team?.id===D?.team_id){r=t;return}e.push(t),t.team?.workspace?.id?(H[t.team.workspace?.id]=H[t.team.workspace?.id]??[],H[t.team.workspace?.id].push(t)):t.team&&K.push(t)}});let a=V.baseOrgUser?.workspaceUsers;t=a?.find(e=>e?.isMainWorkspace)?.workspaceId}let q=()=>{n(h.Ce())},J=(e,t)=>{W(e),G(t)},X=(0,s.useCallback)(()=>{if(M&&!$){let e=(0,E.bL)(M?.id,M.orgId);l.Ay.redirect(e,"_blank")}},[M,$]),Q=(0,s.useCallback)(e=>{if(!A)return;let t={workspaceId:e??I.O,onSubmitReturnToPrevView:!1};n(h.to({type:S.Uc,data:t}))},[A,n]),Z=e=>(0,a.jsx)(a.Fragment,{children:e.map(e=>(0,a.jsx)(U,{team:e.team,selectedTeamId:M?.id,onSelectTeam:J,permissionsState:Y},e.id))}),ee=e=>(0,a.jsx)(U,{team:e.team,selectedTeamId:M?.id,isCurrentTeam:!0,permissionsState:Y,onSelectTeam:J},e.id);if(!D)return null;let et=Object.keys(H).length>0,er=M&&r&&r.team.id===M.id;return(0,a.jsx)(x.fu,{name:N.e0.FILE_MOVE_MODAL,properties:z,children:(0,a.jsx)(C.OJ,{title:(0,f.t)("file_browser.folder_move.modal_header",{folderName:D.name}),fixedTop:!0,minWidth:288,maxWidth:288,onClose:q,truncateTitleText:!0,children:(0,a.jsxs)("div",{className:"folder_move--main--TkW9w file_move--main--fz-As",children:[(0,a.jsx)(_.P,{className:"folder_move--teamSectionBody--LACBL file_move--teamSectionBody--jIFZO",children:(0,a.jsx)("div",{className:"folder_move--teamSection---S02k file_move--teamSection--mI5yE",children:et?(function(e,t,r){let a=t?.team?.workspace?.id??null,s=[a];return r&&r!==a&&e[r]&&s.push(r),Object.keys(e).filter(e=>e!==a&&e!==r).sort((t,r)=>{let a=e[t][0]?.team?.workspace?.name?.toLocaleUpperCase()??"",s=e[r][0]?.team?.workspace?.name?.toLocaleUpperCase()??"";return a<s?-1:a>s?1:0}).forEach(e=>{s.push(e)}),null!==a&&s.push(null),s})(H,r,t).map(e=>{if(null===e){if(K.length>0)return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(B,{headerName:(0,f.t)("sidebar.workspaces.other_teams"),onCreateNewTeamClick:Q,workspaceId:null}),null!=r&&r.team?.workspace?.id==null&&ee(r),Z(K)]},"other_teams_key")}else if(H[e]){let t=H[e],i=t?t[0].team?.workspace??null:null;return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(B,{headerName:i?.name??"",onCreateNewTeamClick:Q,workspaceId:i?.id??null}),null!=r&&r.team?.workspace?.id===e&&ee(r),Z(t)]},e)}}):(0,a.jsxs)(a.Fragment,{children:[A&&(0,a.jsx)(B,{headerName:A.name,onCreateNewTeamClick:Q,workspaceId:null},"org_teams_header"),null!=r&&ee(r),Z(K)]})})}),(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf xv42yna",children:[M&&!$&&(0,a.jsx)("div",{className:O,children:(0,a.jsxs)("div",{className:"folder_move--warningBanner--Tnfff",children:[(0,a.jsx)("div",{className:"folder_move--warningSectionIcon--gOcDL",children:(0,a.jsx)(p.B,{svg:L.A})}),(0,a.jsxs)("div",{children:[(0,f.tx)("file_browser.folder_move.move_project_no_edit_access_warning"),(0,a.jsxs)("div",{className:"folder_move--warningCTALink--f74xo",onClick:X,role:"link",tabIndex:0,children:[(0,f.tx)("file_browser.folder_move.view_team"),(0,a.jsx)("div",{className:"folder_move--arrowRightIcon--xIk7X",children:(0,a.jsx)(p.B,{svg:F.A})})]})]})]})}),(o||(0,k.aI)())&&!A&&M&&$&&"loaded"===P.status&&P.data?.project?.hasPublishedSite.status==="loaded"&&(0,c.oA)(P.data?.project?.hasPublishedSite)&&(0,a.jsx)("div",{className:O,children:(0,a.jsx)(m._,{dataTestId:"project-move-site-unpublish-banner",color:m.S.ERROR,text:(0,f.t)("file_browser.file_move.sites_unpublished_on_project_move_warning")})}),(0,a.jsxs)("div",{className:"folder_move--footer--jcEsZ file_move--footer--pBClJ",children:[(0,a.jsx)(u.nR,{onClick:q,children:(0,f.tx)("modal.cancel")}),(0,a.jsx)(u.vd,{onClick:()=>{null!=M&&D?n((0,v.Nr)({folder:(0,j.Bp)(D),team:M,onSuccess:q})):q()},disabled:void 0===M||!$||!!er,children:(0,f.tx)("file_browser.folder_move.move_project")})]})]})]})})})}function B(e){let[t,r]=(0,s.useState)(!1);return(0,a.jsxs)("div",{className:"folder_move--teamsHeaderRow--qZfbl text--fontPos12--YsUAh text--_fontBase--QdLsd",onMouseMove:()=>r(!0),onMouseLeave:()=>r(!1),children:[(0,a.jsx)("div",{children:e.headerName}),t&&(0,a.jsx)(g.f,{data_tooltip:(0,f.t)("file_browser.inline_team_creation.button_text"),data_onboarding_key:"new-team-button",innerText:(0,f.t)("file_browser.inline_team_creation.button_text"),onClick:()=>{e.onCreateNewTeamClick(e.workspaceId)}})]})}function U(e){let{team:t}=e,r=t?.canEdit??!1;if(null==t)return(0,a.jsx)(a.Fragment,{});let s=o()("folder_move--teamTitle--PwZow file_move--teamTitle--1IL8S text--fontPos12--YsUAh text--_fontBase--QdLsd",e.isCurrentTeam&&!e.selectedTeamId||e.selectedTeamId===e.team?.id?"folder_move--selectedTeamTitle---C1u4":"");return(0,a.jsxs)("div",{className:s,onClick:()=>{e.onSelectTeam&&e.onSelectTeam(t,r)},role:"button",tabIndex:0,children:[(0,a.jsx)("div",{className:A,children:(0,a.jsx)(p.B,{svg:e.isCurrentTeam?P.A:D.A})}),(0,a.jsx)("div",{className:"folder_move--teamTitleRow--6MpKM file_move--teamTitleRow--hMU87",children:(0,a.jsx)("div",{className:"folder_move--teamName--fvmi0 file_move--teamName--Jmsoa",children:t.name})}),e.selectedTeamId===t.id&&!r&&(0,a.jsx)("div",{className:A,children:(0,a.jsx)(p.B,{svg:L.A})})]})}},304711:(e,t,r)=>{r.r(t),r.d(t,{FolderPermanentlyDeleteConfirmModal:()=>x});var a=r(486106),s=r(514228),i=r(437088),n=r(38914),o=r(272243),l=r(521428),d=r(449184),c=r(566371),u=r(589278),m=r(573154),_=r(303541),p=r(53773),f=r(199513),g=r(528509),h=r(98916);function x(e){var t;let r=(0,s.wA)(),x=i.hS({open:e.open,onClose:e.onClose}),b=(0,c.gY)(f.Q4),v=(0,h.x)(e.folder.id,!0),y=(0,a.jsx)("span",{className:u.s.fontBold.$,children:(0,g.CI)(e.folder)}),w=(0,_.t)("file_browser.delete_project.delete_project"),j="loaded"!==v.status?(0,_.tx)("file_browser.delete_project.generic_confirm_text_permanently_delete_folder",{folderName:y}):0===(t=v.data)?(0,_.tx)("file_browser.delete_project.zero_file_confirm_text_permanently_delete_folder",{folderName:y}):(0,_.tx)("file_browser.delete_project.plural_files_confirm_text_permanently_delete_folder",{folderName:y,numFiles:(0,p.t)(t)}),T="loaded"===v.status&&0===v.data?(0,_.tx)("file_browser.delete_project.once_deleted_this_project_can_no_longer_be_restored"):(0,_.tx)("file_browser.delete_project.once_deleted_this_project_and_its_files_can_no_longer_be_restored");return(0,a.jsx)(n.bL,{manager:x,width:"lg",children:(0,a.jsxs)(o.vo,{children:[(0,a.jsx)(o.Y9,{children:(0,a.jsx)(o.hE,{children:(0,_.tx)("file_browser.trash_project.delete_project_forever")})}),(0,a.jsxs)(o.nB,{children:[(0,a.jsx)("div",{className:u.s.mb16.$,children:j}),(0,a.jsx)("div",{children:T})]}),(0,a.jsx)(o.wi,{children:(0,a.jsxs)(o.jk,{children:[(0,a.jsx)(l.$n,{variant:"secondary",onClick:e.onClose,children:(0,_.tx)("modal.cancel")}),(0,a.jsx)(l.$n,{variant:"destructive",onClick:()=>{(0,d.sx)("Folder Permanently Delete Confirmation Click",{folderId:e.folder.id,teamId:e.folder.teamId,orgId:e.folderOrgId}),b({folderId:e.folder.id}).catch(()=>{r(m.s.error((0,_.t)("file_browser.api_folder.error_when_permanently_deleting_folder")))}),e.onClose()},children:w})]})})]})})}},402658:(e,t,r)=>{r.r(t),r.d(t,{FolderTrashConfirmModal:()=>T});var a=r(486106),s=r(514228),i=r(465776),n=r(437088),o=r(272243),l=r(443820),d=r(38914),c=r(128376),u=r(521428),m=r(449184),_=r(566371),p=r(490799),f=r(589278),g=r(573154),h=r(303541),x=r(544879),b=r(53773),v=r(156213),y=r(199513),w=r(528509),j=r(98916);function T(e){let{folder:t}=e,r=n.hS({open:e.open,onClose:e.onClose}),s=(0,j.N)(t.id),i="loaded"===s.status?(0,a.jsx)(E,{...e,numFiles:s.data.fileCount,hasPublishedSite:s.data.publishedSiteCount>0}):(0,a.jsx)(o.nB,{padding:{top:"1rem",bottom:"1rem"},children:(0,a.jsx)("div",{className:f.s.flex.justifyCenter.$,"data-testid":"loading-spinner-container",children:(0,a.jsx)(l.k,{})})});return(0,a.jsx)(d.bL,{manager:r,width:"lg",height:"fixed",children:(0,a.jsxs)(o.vo,{children:[(0,a.jsx)(o.Y9,{children:(0,a.jsx)(o.hE,{children:(0,h.t)("file_browser.trash_project.move_project_to_trash")})}),i]})})}function E(e){let t=(0,s.wA)(),r=(0,c.X)(),{folder:n,numFiles:l,hasPublishedSite:d}=e,j=(0,a.jsx)("span",{className:f.s.fontBold.$,children:(0,h.tx)("file_browser.tool_bar.trash")}),T=(e=>{switch(e){case 0:return(0,h.t)("file_browser.trash_project.generic_confirm_label");case 1:return(0,h.t)("file_browser.trash_project.one_file_confirm_label");default:return(0,h.t)("file_browser.trash_project.plural_files_confirm_label",{numFiles:(0,b.t)(e)})}})(l),E=(0,a.jsx)("span",{className:f.s.fontBold.$,children:(0,w.CI)(n)}),I=(e=>{switch(e){case 0:return(0,h.tx)("file_browser.trash_project.zero_file_confirm_text_trash_folder",{folderName:E});case 1:return(0,h.tx)("file_browser.trash_project.one_file_confirm_text_trash_folder",{folderName:E});default:return(0,h.tx)("file_browser.trash_project.plural_files_confirm_text_trash_folder",{folderName:E,numFiles:(0,b.t)(e)})}})(l),N=(0,_.gY)(y.Ct),C=e=>{(0,m.sx)("Folder Trash Confirmation Click",{folderId:e.id,teamId:e.teamId,orgId:e.orgId}),N({folderId:e.id}).catch(()=>{t(g.s.error((0,h.t)("file_browser.api_folder.error_when_moving_to_trash")))}),t(v.Ce())};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.nB,{children:[e.folderState&&(0,a.jsx)("div",{className:f.s.mb12.$,children:(0,a.jsx)(p._,{dataTestId:"trash-folder-warning-banner",color:p.S.ERROR,text:(e=>{switch(e){case x.cm.PENDING_ASSET_TRANSFER:return(0,h.tx)("file_browser.trash_project.warning.pending_asset_transfer");case x.cm.PENDING_RESOURCE_CONNECTION:return(0,h.tx)("file_browser.trash_project.warning.pending_resource_connection");case x.cm.ACTIVE_RESOURCE_CONNECTION:return(0,h.tx)("file_browser.trash_project.warning.active_resource_connection");default:(0,i.xb)(e)}})(e.folderState)})}),(0,a.jsx)("div",{className:f.s.mb12.$,children:I}),d&&(0,a.jsx)("div",{className:f.s.mb12.$,children:(0,h.tx)("file_browser.trash_project.published_site_warning")}),(0,a.jsx)("div",{children:(0,h.tx)("file_browser.trash_project.description_restore",{trashStyled:j})})]}),(0,a.jsx)(o.wi,{children:(0,a.jsxs)(o.jk,{children:[(0,a.jsx)(u.$n,{variant:"secondary",onClick:()=>{e.onClose()},ref:r,children:(0,h.t)("modal.cancel")}),(0,a.jsx)(u.$n,{variant:"destructive",onClick:()=>C(n),children:T})]})})]})}},471581:(e,t,r)=>{r.r(t),r.d(t,{TeamChangePaymentModal:()=>j});var a=r(486106),s=r(7378),i=r(514228),n=r(536384),o=r.n(n),l=r(455826),d=r(637027),c=r(858013),u=r(589278),m=r(303541),_=r(156213),p=r(795870),f=r(658324),g=r(191312),h=r(193867),x=r(548208),b=r(519092),v=r(724099),y=r(559083);function w({currency:e,customerInfo:t,defaultCountry:r,estimatedChargeCents:n,isReactivating:w,canSeeBillingAddressExp:j}){let T=w?(0,m.t)("change_payment.success.successfully_reactivated_subscription"):(0,m.t)("change_payment.success.successfully_updated_your_payment_method"),E=(0,i.d4)(e=>(0,h.Np)(e,{view:"teamAdminConsole",teamId:t.teamId,teamAdminConsoleViewTab:x.Iv.SETTINGS})),{createPaymentElement:I,unmountPaymentElement:N,savePayment:C,billingAddress:S,updateBillingAddress:k,nameOnPaymentMethod:R,setNameOnPaymentMethod:A,paymentMethodType:O,error:F}=(0,p.lo)({setupIntentParams:{redirect_url:E,subtotal_estimate:n,success_message:T,currency:e},paymentFlowSource:p.wn.PRO_CHANGE_PAYMENT,customerInfo:t,defaultCountry:r,currency:e,canSeeBillingAddressExp:j,isCheckout:!1}),[P,L]=s.useState(!1),[D,M]=s.useState(!1),[B,U]=s.useState(window.innerHeight),W=(0,i.wA)(),$=F?.code===p.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,G=()=>W(_.Ce());(0,l.P)(({height:e})=>{U(e)});let V=async e=>{if(e&&e.preventDefault(),M(!0),await C(),w&&t.teamId)try{await (0,f.jL)({planType:g.OL.TEAM,planId:t.teamId})}catch(e){console.error(e)}M(!1)};return(0,a.jsx)(b.OJ,{title:j?(0,m.t)("change_payment.update_payment_details"):(0,m.t)("change_payment.enter_payment_method"),onClose:G,maxWidth:465,headerSize:"large",children:(0,a.jsxs)("div",{className:o()({[y.$J]:!P,[y.Un]:$}),children:[(0,a.jsxs)("form",{onSubmit:V,children:[(0,a.jsxs)("div",{className:y.KJ,style:{maxHeight:Math.min(B-49-65,652)},children:[P&&j&&(0,a.jsx)("div",{className:u.s.mb16.$,children:(0,a.jsx)("label",{htmlFor:"updatePaymentDetails",className:u.s.colorTextSecondary.$,children:(0,m.tx)("change_payment.update_payment_details_description_default")})}),(0,a.jsx)(v.S,{billingAddress:S,canSeeBillingAddressExp:j,createPaymentElement:I,error:F,nameOnPaymentMethod:R,paymentElementEventHandlers:{ready:()=>L(!0)},paymentFlow:p.wn.PRO_CHANGE_PAYMENT,paymentMethodType:O,unmountPaymentElement:N,updateBillingAddress:k,updateNameOnPaymentMethod:A})]}),P&&!$&&(0,a.jsxs)("div",{className:y.UD,children:[D&&(0,a.jsx)(c.kt,{className:y.u1}),(0,a.jsx)(d.tM,{onClick:G,children:(0,m.tx)("change_payment.cancel")}),(0,a.jsx)(d.vd,{tabIndex:0,type:"submit",disabled:D,children:(0,m.tx)("change_payment.save")})]})]}),$&&(0,a.jsx)(d.tM,{onClick:G,children:(0,m.tx)("change_payment.close_window")})]})})}function j({currency:e,customerInfo:t,defaultCountry:r,monthlySub:s,annualSub:i,isReactivating:n,canSeeBillingAddressExp:o,estimatedChargeCents:l}){let d=s?.estimated_amount_due??0,c=i?.estimated_amount_due??0,u=l||Math.max(c,d);return(0,a.jsx)(w,{currency:e,customerInfo:t,defaultCountry:r,estimatedChargeCents:u,isReactivating:n,canSeeBillingAddressExp:o})}},250164:(e,t,r)=>{r.r(t),r.d(t,{ChangeVatGstIdModal:()=>b});var a=r(486106),s=r(7378),i=r(514228),n=r(536384),o=r.n(n),l=r(288654),d=r(637027),c=r(490799),u=r(303541),m=r(156213),_=r(191312),p=r(43951),f=r(519092),g=r(289352),h=r(289198);function x(e,t){return e&&"loaded"===t.status?t.data.org:e||"loaded"!==t.status?null:t.data.team}let b=s.memo(function(e){let t=(0,i.wA)(),{updateVatGstId:r}=e,n=!!e.org?.id,b=(0,l.Rs)(p.Wt6,{orgId:e.org?.id||""},{enabled:n}),v=(0,l.Rs)(p.xS7,{teamId:e.team?.id||""},{enabled:!n}),y=n?b:v,w=x(n,y),j=w?.taxIdVerificationStatus,[T,E]=s.useState(),[I,N]=s.useState(""),[C,S]=s.useState(""),[k,R]=s.useState(!1),[A,O]=s.useState({country:"",state:""}),[F,P]=s.useState(!1);s.useEffect(()=>{let e=w?.taxInfo;if(!F&&"loaded"===y.status&&e?.status==="loaded"){let t=x(n,y),r=e?.data;N(t?.vatGstId||""),S(r?.regionalVatGstId||""),R(r?.canUpdateRegionalVatGst||!1),O({country:r?.country||"",state:r?.state||""}),P(!0)}},[n,y,F,w?.taxInfo]);let L=()=>{t(m.Ce())};return(0,a.jsxs)(f.OJ,{onClose:L,title:(0,u.t)("change_vat_gst_id.input_id"),minWidth:344,maxWidth:344,fixedTop:!0,children:[T&&(0,a.jsx)("div",{className:"change_vat_gst_id_modal--errorBanner--sqxNt","data-testid":"change-vat-gst-id-error",children:(0,a.jsx)(c._,{color:c.S.ERROR,rounded:!1,text:T})}),j===_.kI.VERIFIED&&(0,a.jsx)("div",{"data-testid":"change-vat-gst-id-information",children:(0,a.jsx)(c._,{color:c.S.INFORMATION,rounded:!1,text:(0,u.t)("change_vat_gst_id.tax_id_verification_succeeded")})}),j===_.kI.UNVERIFIED&&(0,a.jsx)("div",{"data-testid":"change-vat-gst-id-warning",children:(0,a.jsx)(c._,{color:c.S.WARNING,rounded:!1,text:(0,u.t)("change_vat_gst_id.tax_id_verification_failed")})}),(0,a.jsxs)("div",{className:h.Dy,children:[(0,a.jsx)("p",{className:"change_vat_gst_id_modal--description--6gdSL",children:(0,u.tx)("change_vat_gst_id.description")}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(I,e=>E(e),k?C:"").then(e=>{e&&L()})},"data-testid":"change-vat-form",children:[F&&(0,a.jsx)(g.A,{onChange:N,country:A.country,vatId:I,isCommunityCheckout:!1}),k&&(0,a.jsx)(g.A,{onChange:S,country:A.country,region:A.state,vatId:C,isCommunityCheckout:!1,variant:"regional"}),(0,a.jsx)("div",{className:o()(h.v0,h.hF),children:(0,a.jsx)(d.vd,{className:h.pL,type:"submit",disabled:!F,children:(0,u.tx)("change_vat_gst_id.save_id")})})]})]})]})})},632200:(e,t,r)=>{r.r(t),r.d(t,{ConfirmDowngradeModal:()=>g});var a=r(486106),s=r(7378),i=r(514228),n=r(536384),o=r.n(n),l=r(637027),d=r(303541),c=r(192768),u=r(156213),m=r(482142),_=r(519092),p=r(289198);let f=s.memo(function(e){let t=(0,i.wA)(),{teamId:r,billingEndDate:s}=e.modalShown.data,n=e.teams[r],f=()=>{t(u.Ce())},g=s?(0,a.jsxs)(a.Fragment,{children:[(0,d.tx)("confirm_downgrade.team_name_will_be_downgraded_to_our_free_starter_plan",{teamName:n?.name})," ",(0,d.tx)("confirm_downgrade.any_seats_you_add",{billingEndDate:s})]}):(0,d.tx)("confirm_downgrade.on_your_next_billing_date_team_name_will_be_downgraded_to_our_free_starter_plan",{teamName:n?.name});return(0,a.jsx)(_.OJ,{onClose:f,title:(0,d.t)("confirm_downgrade.cancel_professional_plan"),minWidth:344,maxWidth:344,dataTestId:"downgrade-confirmation-modal",fixedTop:!0,children:(0,a.jsxs)("div",{className:p.Dy,children:[(0,a.jsx)("p",{children:g}),(0,a.jsxs)("div",{className:o()(p.v0,p.hF),children:[(0,a.jsx)(l.tM,{onClick:f,children:(0,d.tx)("confirm_downgrade.go_back")}),(0,a.jsx)(l.qM,{className:p.pL,onClick:()=>{t(m.Wc({teamId:r})),t((0,u.to)({type:(0,c.l)()}))},children:(0,d.tx)("confirm_downgrade.finish_cancellation")})]})]})})});function g(e){return(0,a.jsx)(f,{...e})}},382362:(e,t,r)=>{r.r(t),r.d(t,{TeamPermissionsModal:()=>ee});var a=r(486106),s=r(7378),i=r(514228),n=r(999105),o=r(437088),l=r(38914),d=r(272243),c=r(449184),u=r(416935),m=r(63728),_=r(485103),p=r(858013),f=r(303541),g=r(748726),h=r(156213),x=r(831799),b=r(858319),v=r(405965),y=r(372672),w=r(191312),j=r(713695),T=r(336853),E=r(12796),I=r(351260),N=r(913057),C=r(158283),S=r(557142),k=r(761870),R=r(393279),A=r(986349),O=r(308709),F=r(154112),P=r(635424),L=r(733703),D=r(628632),M=r(331328),B=r(632989),U=r(714743),W=r(805373),$=r(869669),G=r(907616),V=r(372455),z=r(70690),H=r(401431),K=r(442539);function Y(e){let t=e.canAdmin,r=(0,a.jsx)(U.B,{className:V.wk,svg:H.A});e.sharingAudienceControl===w.PQ.ORG_EDIT||e.sharingAudienceControl===w.PQ.ORG_VIEW?r=(0,a.jsx)("div",{className:V.AA,children:(0,a.jsx)(U.B,{svg:K.A})}):(e.sharingAudienceControl===w.PQ.WORKSPACE_EDIT||e.sharingAudienceControl===w.PQ.WORKSPACE_VIEW)&&(r=(0,a.jsx)("div",{className:V.AA,children:e.workspace&&(0,a.jsx)(W.z6,{entity:e.workspace,size:24})}));let s=e.sharingAudienceControl===w.PQ.INVITE_ONLY&&e.isTeamOrgBrowsable,i=s?V.Fl:V.Jt;return(0,a.jsxs)(B.E,{className:t?i:V.zn,onClick:t?()=>e.changeModalView(1):void 0,"data-onboarding-key":$.F,children:[r,(0,a.jsxs)("div",{className:V.$S,children:[(0,a.jsxs)("div",{children:[e.sharingAudienceControl&&(0,G.ET)(e.sharingAudienceControl,e.org,e.workspace),s&&(0,a.jsx)("div",{className:V.JZ,children:(0,f.t)("team_creation.anyone_can_find_this_team")})]}),e.org&&(0,a.jsxs)("div",{className:V.j7,"data-onboarding-key":$.F,children:[e.sharingAudienceControl&&(0,G.mi)(e.sharingAudienceControl),t&&(0,a.jsx)(U.B,{svg:z.A,className:V.$w}),t&&(0,a.jsx)($.j,{})]})]})]})}var q=r(162932),J=r(921963),X=r(144598),Q=r(538002);let Z=s.memo(function({roles:e,virtualItems:t,totalSize:r,user:i,parentOrg:n,team:o,teamOrgDomains:l,canAdmin:d,canEdit:c,isCurrentUserTeamOwner:u}){let m=s.useMemo(()=>({team:o,type:w.vt.TEAM}),[o]);return(0,a.jsx)("div",{style:{height:`${r}px`,position:"relative"},children:t.map(t=>{let r=t.index,s=e[r],_=(0,E.OL)(s,d,c);return(0,a.jsx)(J.O,{canEditRole:_,canMakeAdmin:d,currentOrg:n,currentUserOrgId:n?.id??null,isOwnerOfResource:u,orgDomains:l,readOnlyOverrideWarningMessage:null,resource:m,resourceName:o.name,role:s,user:i,virtualRowItem:t},`role-row-${r}`)})})});function ee(e){let t,{teamId:r,initialInviteLevel:B,prepopulateEmail:U,initialView:W}=e,$=(0,i.wA)(),G=(0,y.Pc)(),V=(0,i.d4)(e=>e.autocomplete),z=(0,i.d4)(e=>e.contacts),H=(0,i.d4)(e=>e.dropdownShown),K=j.M4.Team.useValue(r).data,J=(0,v.dr)(r),ee=(0,v.eb)(r);(0,_.oY)("loaded"===J.status&&"loaded"===ee.status,e=>{let t=ee.data?.length??0,r="unknown";r=t<=100?"small":t<=300?"medium":"large",(0,c.sx)("share_modal_latency",{latency_ms:e,modal_type:"team",is_outlier:e>500,role_size:r},{forwardToDatadog:!0})});let et=J.data,er=et&&et.org,ea=et&&et.teamSharingSettings,es=er?er.id:null,ei=et&&et.workspace,en=er&&er.org_domains?er.org_domains:C.ls,eo=s.useMemo(()=>ee.data?.sort((e,t)=>e.pending===t.pending?X.E4(e,z).toLocaleLowerCase()<X.E4(t,z).toLocaleLowerCase()?-1:1:e.pending?1:-1)??[],[z,ee]),el=et&&et.pendingTeamRoleRequests?et.pendingTeamRoleRequests:[],{default:ed,inviteLevel:ec,setInviteLevel:eu}=(0,v.oU)({initialValue:B,teamId:r,teamPermissions:et}),em=s.useMemo(()=>{let e=[];return et?.canAdmin&&e.push(S.e6.ADMIN),et?.canEdit&&e.push(S.e6.EDITOR),et?.canRead&&e.push(S.e6.VIEWER),e},[et]),{validateToken:e_,searchResultToken:ep}=(0,b.u)({parentOrg:er,prepopulatedEmail:U,orgDomains:en}),ef=e=>{let t=(0,k.Z)(e);$((0,I.rq)({emails:t,resourceType:w.vt.TEAM,resourceIdOrKey:r,level:ec,emailsToExclude:(0,N.bp)(z.usersByEmail,G,eo),source:"team_share_modal",orgName:er?er.name:void 0,teamId:r}))},eg=()=>{$(h.Ce()),$(g.cL())},[eh,ex]=s.useState(W||0),eb=()=>0===eh?(0,a.jsx)("div",{className:Q.DA,children:(0,a.jsx)("p",{children:(0,f.tx)("team_view.team_permissions_modal.invite_other_members",{teamName:K?.name??""})})}):(0,a.jsx)(L.w,{title:(0,f.t)("team_view.team_permissions_modal.share_settings"),onClick:()=>ex(0)}),ev=!!K&&!K.org_id,ey=o.hS({open:e.open,onClose:e.onClose}),{sharingSuggestions:ew,sharingSuggestionIdsToExclude:ej,sharingSuggestionEmailsToExclude:eT}=(0,D.$)({orgId:es,teamId:r,contacts:z.usersByEmail,roles:eo,user:G,autocompleteTokens:V.tokens}),eE=s.useCallback(()=>36,[]),eI=s.useRef(null),eN=(0,n.z)({size:eo.length,parentRef:eI,estimateSize:eE,overscan:10,paddingStart:0});return t=K&&et?0===eh?et?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{onKeyDown:e=>{e.keyCode!==m.Uz.ESCAPE&&e.stopPropagation()},children:[ev&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.i,{includeCopyLinkButton:!0,teamId:r,dropdownShown:H,initialInviteLevel:ed,teamPermissions:{canAdmin:!!et?.canAdmin,canEdit:!!et?.canEdit}}),(0,a.jsx)("div",{className:Q.Vq,children:(0,f.tx)("team_view.team_permissions_modal.invite_by_email")})]}),!!et?.canAdmin&&(0,a.jsx)(P.$i,{teamId:r,teamRoleRequests:el,teamRoles:eo}),(0,O.r)(G)?(0,a.jsx)(O.X,{resourceType:"team"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:Q.Zk,children:(0,a.jsx)(R.e,{SearchResultComponent:A.o6,TokenComponent:A.gy,autocomplete:V,buttonText:(0,f.t)("team_view.team_permissions_modal.invite"),dispatch:$,dropdownKey:"permissions-invite-dropdown",dropdownShown:H,fixedAutocompleteResults:!0,getSearchResults:e=>(0,N.Wj)(e,z.usersByEmail,G,eo,es,r,null,{inviteLevel:ec,source:"team-permissions-modal"}),getSelectText:E.C1,getTokenIdentifier:e=>(0,T.Ts)(e.content)?e.content.email:e.content,hideDropdownOnEmpty:!0,inviteLevel:ec,joinLinkShown:ev,onHideModal:eg,onInviteLevelChange:eu,onSubmit:e=>{if(er&&er.domain_capture&&en&&en.domains.length>0){let t=(0,k.Z)(e).filter(e=>(0,u.xf)(e)&&!(0,T.H_)(en.domains,e));if(er?.invite_whitelist_guest_invite_setting==null&&t.length>0){$(h.to({type:F.F,data:{emails:t,onConfirm:()=>{ef(e)},popStack:!0,orgName:er.name}}));return}}ef(e)},options:em,placeholderText:(0,f.t)("team_creation.add_a_name_or_email"),searchResultToken:ep,shouldAutoFocus:!ev,validateToken:e_,validateTokensAsEmail:!0})}),(0,a.jsx)(D.t,{suggestions:ew??void 0,autocomplete:V,searchResultToken:ep,resourceType:"team",resourceId:r,idsToExclude:ej??void 0,emailsToExclude:eT??void 0})]}),er&&(0,a.jsx)("div",{className:Q.st,ref:eI,children:(0,a.jsxs)("div",{className:Q.d3,children:[(0,a.jsx)("div",{className:Q.TS,children:(0,f.t)("file_permissions_modal.who_has_access")}),(0,a.jsx)(Y,{team:K,workspace:ei,org:er,changeModalView:ex,sharingAudienceControl:ea?.sharingAudienceControl,isTeamOrgBrowsable:ea?.orgBrowsable,canAdmin:!!et?.canAdmin}),(0,a.jsx)(Z,{canAdmin:!!et?.canAdmin,canEdit:!!et?.canEdit,isCurrentUserTeamOwner:!!et?.isOwner,parentOrg:er,roles:eo,team:K,teamOrgDomains:en,totalSize:eN.totalSize,user:G,virtualItems:eN.virtualItems})]})})]},"container")}):(0,a.jsx)("div",{className:Q.Lq,children:(0,a.jsx)(p.qc,{})}):er?ea&&(0,a.jsx)(M.nH,{team:K,workspace:ei||void 0,org:er,teamSharingSettings:ea,hideModal:eg,goBack:()=>ex(0)}):(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("div",{className:Q.Lq,children:(0,a.jsx)(p.qc,{})}),(0,a.jsx)(x.fu,{name:"Share Modal",properties:{resourceType:w.vt.TEAM,resourceId:r},children:(0,a.jsx)(l.bL,{manager:ey,width:"lg",children:(0,a.jsxs)(d.vo,{children:[(0,a.jsx)(d.Y9,{children:(0,a.jsx)(d.hE,{children:eb()})}),(0,a.jsx)(d.nB,{children:t})]})})})}},281140:(e,t,r)=>{r.r(t),r.d(t,{TeamRenameModal:()=>d});var a=r(486106),s=r(514228),i=r(303541),n=r(475472),o=r(630077),l=r(815584);function d({team:e}){let t=(0,s.wA)();return(0,a.jsx)(l.c,{initialName:e.name,maxLength:o.qg,placeholder:(0,i.t)("resource_rename_modal.team.placeholder"),submitText:(0,i.t)("resource_rename_modal.team.submit"),onRename:r=>t((0,n.IA)({team:e,name:r}))})}},82390:(e,t,r)=>{r.d(t,{FileBrowserView:()=>bu});var a=r(486106),s=r(7378),i=r(514228),n=r(934246),o=r(601108),l=r(347146),d=r(280919),c=r(876459),u=r(612521),m=r(207101),_=r(39751),p=r(288654),f=r(566371),g=r(515363),h=r(778880),x=r(594947),b=r(683241),v=r(180986),y=r(492296),w=r(27771),j=r(669330),T=r(976345),E=r(465776),I=r(589278),N=r(303541),C=r(984674),S=r(348887),k=r(915977),R=r(204732),A=r(463766),O=r(63728),F=r(602906),P=r(361972),L=r(751457),D=r(541264),M=r(165054),B=r(536384),U=r.n(B),W=r(637328),$=r(687502),G=r(272488),V=r(314264),z=r(863319),H=r(199513),K=r(298277),Y=r(845253),q=r(959155),J=r(372672),X=r(518077),Q=r(647058),Z=r(113686),ee=r(443068),et=r(251970),er=r(82433),ea=r(723791),es=r(475340),ei=r(858013),en=r(347284),eo=r(925868),el=r(617427),ed=r(27355),ec=r(920142),eu=r(425283),em=r(370443),e_=r(621515),ep=r(545877),ef=r(951233),eg=r(268271),eh=r(425180),ex=r(858282),eb=r(6204);let ev="seen_org_admin_moved_unassigned_drafts_onboarding",ey=(0,ec.A)("2024-10-15").startOf("day"),ew=(0,ep.r1)(ev);function ej(){let e=(0,ed.md)(ew),{show:t,isShowing:r,complete:s}=(0,e_.e)({overlay:eb.rv,priority:eg.N.DEFAULT_MODAL},[e]),n=(0,i.d4)(e=>(0,ef.xw)(e)),o=n?.created_at,l=!!o&&(0,ec.A)(o).isSameOrAfter(ey);return(0,m.h)(()=>{t({canShow:e=>!(e||l)})}),(0,a.jsx)(eh.rq,{arrowPosition:ex.F_.LEFT_TITLE,clickOutsideToHide:!0,description:(0,N.tx)("org_admin_onboarding.tooltip.moved_unassigned_drafts.body"),isShowing:r,onClose:s,primaryCta:{label:(0,N.tx)("general.got_it"),type:"button",onClick:s,ctaTrackingDescriptor:em.c.DONE},secondaryCta:{label:(0,N.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/4420549259799",ctaTrackingDescriptor:em.c.LEARN_MORE},shouldCenterArrow:ex.EL.FALLBACK,targetKey:eu.sm,title:(0,N.tx)("org_admin_onboarding.tooltip.moved_unassigned_drafts.title"),trackingContextName:eu.o8,userFlagOnShow:ev})}var eT=r(12796),eE=r(522082),eI=r(231614);function eN({project:e}){let t=(0,J.iZ)(),r=(0,Y.dq)(),a=(0,i.d4)(e=>e.currentTeamId),s="drafts"===e?r:e.team?.org?.id,n="drafts"===e?a:e.team?.id,o=(0,eI.vt)(n),l=(0,eE.jn)();return!(0,eT.R$)(t,s)&&!h.nW&&!(o||l)}var eC=r(948337),eS=r(34809),ek=r(94979),eR=r(929976),eA=r(386952);function eO(){let e=(0,i.wA)(),t=(0,eA.z3)();return(0,a.jsx)(ek.SidebarRow,{onClick:()=>{e(eR.sf({view:"recentsAndSharing"})),e(eS.Oe({clickedResourceType:"recentsAndSharing"}))},isSelected:"recentsAndSharing"===t,icon:(0,a.jsx)(eC.a,{}),text:(0,a.jsx)(C.E,{truncate:!0,children:(0,N.tx)("sidebar.recents")}),wrapInListItem:!0})}var eF=r(909778),eP=r(985254),eL=r(741211),eD=r(212807),eM=r(191312),eB=r(336853),eU=r(610336),eW=r(483499),e$=r(153916),eG=r(845611),eV=r(961065),ez=r(932503),eH=r(964520),eK=r(43951),eY=r(465071),eq=r(650409),eJ=r(548208),eX=r(11928);let eQ=(0,ep.r1)("seen_connected_projects_admin_settings_overlay"),eZ="connect_admin_settings_onboarding_key";function e0(e){let t=(0,ed.md)(eQ),{show:r,isShowing:s,complete:i}=(0,e_.e)({overlay:eb.kBq,priority:eg.N.DEFAULT_MODAL},[t]);return(0,m.h)(()=>{r({canShow:e=>!e})}),(0,a.jsx)(eh.rq,{arrowPosition:ex.F_.LEFT_TITLE,description:(0,a.jsx)("p",{children:(0,N.tx)("resource_connection.onboarding.use_admin_settings_to_see_all_your_connected_projects")}),emphasized:!0,isShowing:s,onClose:i,primaryCta:{label:(0,N.tx)("resource_connection.onboarding.show_me"),type:"button",onClick:()=>{e.openConnectedProjectsTab(),i()},ctaTrackingDescriptor:em.c.DONE},targetKey:eZ,trackingContextName:"Connected Projects Admin Settings Onboarding",width:350,zIndex:eX.R.MODAL})}let e1="go_to_admin_row--goToAdminRow--OPVDe";function e4(e){let t=(0,i.wA)(),r=(0,eY.T5)("GoToAdminRow").unwrapOr(null),n=(0,p.Rs)(eK.sMZ,{name:"initiated_first_resource_connection"}),l=s.useMemo(()=>"loaded"===n.status&&!!n.data?.currentUser?.userFlagByName,[n])&&(0,o.k)().fc_initial_onboarding_enabled&&(r?.tier===eM.Ag.PRO||r?.tier===eM.Ag.ORG||r?.tier===eM.Ag.ENTERPRISE),d=(0,a.jsx)("div",{className:I.s.h24.w24.$,children:(0,a.jsx)(ez.I,{})}),c=(0,a.jsx)(e2,{badge:e.badge}),u=(0,a.jsx)(ek.SidebarRow,{wrapInListItem:!1,icon:d,text:(0,a.jsx)("div",{className:I.s.pr36.$,"data-onboarding-key":e.dataOnboardingKey,children:(0,a.jsx)(C.E,{truncate:!0,children:(0,N.tx)("sidebar.admin_dashboard")})}),isSelected:e.isSelected,onClick:e.onClick,badge:c,dataTestId:e.dataTestId,"data-onboarding-key":eZ}),m=(0,a.jsx)("div",{className:e1,children:u}),_=(0,a.jsx)("li",{className:e1,children:u});return(0,a.jsxs)(a.Fragment,{children:[(0,o.k)().file_browser_sidebar_semantic_html?_:m,l&&(0,a.jsx)(e0,{openConnectedProjectsTab:()=>{r?.type===eM.OL.TEAM?t(eR.sf({view:"teamAdminConsole",teamId:r?.key.parentId??"",teamAdminConsoleViewTab:eJ.Iv.CONTENT,teamAdminConsoleViewSecondaryTab:eJ.F9.CONNECTED_PROJECTS})):t(eR.sf({view:"orgAdminSettings",orgAdminSettingsViewTab:eq.J7.CONTENT,orgAdminSettingsViewSecondaryTab:eq.SN.CONNECTED_PROJECTS}))}})]})}function e2(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"go_to_admin_row--badgeContainer--U08cW",children:e.badge}),(0,a.jsx)("div",{className:"go_to_admin_row--iconContainer--tEzjQ",children:(0,a.jsx)(eH.a,{})})]})}var e8=r(28323),e5=r(817247),e6=r(684446),e3=r(614170),e7=r(384551),e9=r(441038),te=r(858344);function tt(e){let t=(0,i.wA)(),r=e.orgUser.permission===eM._D.ADMIN,n=(0,e6.RG)(),o=(0,e6.MX)(),{groupsUserIsAdminOf:l}=(0,e6.EQ)(o,e.orgUser.user_id,!r),d=(0,e$.Xf)(e.org.id),c="loaded"===d.status?d.data?.invoices??[]:void 0;s.useEffect(()=>{t(e8.Jt({forceRefetch:!1}))},[t,e.org.id]);let{groupsToReview:u}=(0,e6.Cz)(l,c),m=l[0]?.id,_=e.org.bigma_enabled&&n&&!!m,p=(0,X.NJ)(e.org.id).data??[],f=e.org.bigma_enabled&&p.length>0,g=(0,eG.ZY)({isIntendedAudience:e.org.bigma_enabled&&!r});if(!(r||_||f))return null;let h=function(e){switch(e.view){case"orgAdminSettings":case"billingGroupDashboard":return!0;case"licenseGroup":return e.subView===e9.GN.ADMIN;case"workspace":return e.subView===te.V0.ADMIN;default:return!1}}(e.selectedView),x=(0,a.jsx)(eV.Mn,{org:e.org,orgUser:e.orgUser,selectedView:e.selectedView,isSelected:h});return(0,a.jsx)(e4,{badge:x,onClick:()=>{let e=c&&(0,e3.hX)(c);if(r){let e=eq.J7.DASHBOARD;t(eR.sf({view:"orgAdminSettings",orgAdminSettingsViewTab:e})),t(eS.Oe({clickedResourceType:"orgAdminSettings"}))}else _?g?t(eR.sf({view:"billingGroupDashboard",selectedTab:e7.D.REQUESTS})):(t(eR.sf({view:"licenseGroup",subView:e9.GN.ADMIN,licenseGroupId:e&&u.length>0?u[0].id:m,selectedTab:(0,e5.g)(e&&u.length>0?e9.RM.MEMBERS:e9.Uu[0])})),t(eS.Oe({clickedResourceType:"licenseGroupAdminSettings"}))):f&&(t(eR.sf({view:"workspace",subView:te.V0.ADMIN,workspaceId:p[0].id,selectedTab:te._C})),t(eS.Oe({clickedResourceType:"workspaceAdminSettings"})))},dataTestId:"admin-settings-link",dataOnboardingKey:eu.sm,isSelected:h})}var tr=r(947268);function ta(e){let t=(0,i.d4)(e=>e.currentTeamId),r=(0,i.wA)();return t?(0,a.jsx)(ek.SidebarRow,{isSelected:e.selectedView&&"team"===e.selectedView.view,onClick:()=>{r(T.dm(t)),r(eS.Oe({clickedResourceType:"allProjects"}))},"data-onboarding-key":"ALL_PROJECTS_LINK_ONBOARIND_KEY",icon:(0,a.jsx)(tr.t,{}),text:(0,a.jsx)(C.E,{truncate:!0,children:(0,N.tx)("sidebar.all_projects")}),wrapInListItem:!0}):null}var ts=r(701065),ti=r(663269),tn=r(506207),to=r(544879),tl=r(302958),td=r(404751);function tc(e,t,r,a,s,i){let n=[],o=[];if(a.isFigFiles()){if(!(n=a.getData()))return}else if(a.isRepos()){let e=a.getReposData();e&&(n=e.files,o=e.repos)}else if(a.isTiles()){let e=a.getTilesData();e&&(n=e.files,o=e.repos)}if(n.some(e=>e.editor_type===eM._Y.FIGMAKE)&&!i){e(tl.F.enqueue({message:(0,N.t)("file_browser.file_move.paywall_team_tooltip"),error:!0}));return}e(td.z({files:n,repos:o,folder:t,team:r,draftsMoveData:s?s(n,o):null}))}var tu=r(309844),tm=r(904854),t_=r(329133),tp=r(940356);let tf=(0,ep.r1)("seen_dtm_deprecation_nav_to_plan_overlay");function tg(e){let t=(0,ed.md)(tf),{show:r,isShowing:s,complete:i}=(0,e_.e)({overlay:eb.xPo,priority:eg.N.DEFAULT_MODAL},[t]);(0,m.h)(()=>{r({canShow:e=>!e})});let n=(0,N.tx)("file_browser.drafts_to_move.drafts_to_move_files_are_now_here"),o=e.starterTeamCreated?(0,N.tx)("file_browser.drafts_to_move.if_you_want_you_can_move_these_files"):(0,N.tx)("file_browser.drafts_to_move.the_drafts_to_move_section_has_been_removed_generic");return(0,a.jsx)(eh.rq,{arrowPosition:ex.F_.LEFT_TITLE,description:(0,a.jsx)("p",{children:o}),emphasized:!0,isShowing:s,onClose:i,primaryCta:{label:(0,N.tx)("file_browser.modal.got_it"),type:"button",onClick:()=>{i()},ctaTrackingDescriptor:em.c.DONE},secondaryCta:{label:(0,N.tx)("file_browser.drafts_to_move.viewbar_learn_more_link"),type:"link",href:"https://help.figma.com/hc/articles/18409526530967",ctaTrackingDescriptor:em.c.LEARN_MORE},targetKey:to.uZ,title:n,trackingContextName:"Dtm Deprecation Nav To Plan Overlay",width:350,zIndex:eX.R.MODAL})}var th=r(599462),tx=r(831857),tb=r(214905);function tv(e){let t=(0,tp.f)("file_browser_onboarded"),[r,i]=s.useState(!1),n=(0,tx.e)(),l=(0,eY.S2)(),{dtmMigrationPlanName:d,starterTeamCreated:c,dtmPlanParentType:u}=(0,t_.V)((0,ti.oA)(l.data)||void 0),{shouldShowFirstDtmPostMigrationOverlay:m,switchedFromDtmOnboarding:_}=function(){let e=(0,eY.S2)(),{isDraftsToMovePlan:t,dtmMigrationCompleted:r}=(0,t_.V)((0,ti.oA)(e.data)||void 0),a=(0,p.Rs)((0,eK.sMZ)({name:"switched_to_new_plan_from_dtm_deprecation_onboarding"})),s=!!a?.data?.currentUser?.userFlagByName&&(0,o.k)().dtm_deprecation_post_migration_onboarding&&t;return{shouldShowFirstDtmPostMigrationOverlay:!s&&t&&r&&(0,o.k)().dtm_deprecation_post_migration_onboarding,switchedFromDtmOnboarding:s}}(),f=(0,a.jsxs)(tn.Y,{isDragTarget:e=>{let t=new tm.le(e);return!!(t.isFigFiles()||t.isRepos()||t.isPrototypes()||t.isTiles())},onTargetDragEnter:()=>{i(!0)},onTargetDragLeave:()=>{i(!1)},onTargetDrop:t=>{let r=new tm.le(t);tc(e.dispatch,e.folder,null,r,void 0,n),e.dispatch(tu.T()),i(!1)},draggable:!1,onMouseOver:()=>{i(!0)},onMouseLeave:()=>{i(!1)},children:[(0,a.jsx)(ek.I,{isSelected:"folder"===e.selectedView.view&&e.selectedView.folderId===e.folder.id,onClick:t=>{let r=e.folder;t.metaKey||t.ctrlKey||0!==t.button||(e.dispatch(T.gN(r.id)),e.dispatch(eS.Oe({clickedResourceType:"drafts",resourceIdOrKey:r.id})))},"data-onboarding-key":to.uZ,icon:(0,a.jsx)(ts.g,{}),text:(0,a.jsx)(C.E,{truncate:!0,children:(0,N.tx)("sidebar.drafts")}),badge:e.shouldHideCreateFileButton?void 0:(0,a.jsx)(tb.iM,{folderId:e.folder.id,isContainerHovered:r}),wrapInListItem:!1}),m&&t&&(0,a.jsx)(th.a,{entryPoint:"drafts_sidebar",planName:d,targetKey:to.uZ,isOrg:"org"===u}),_&&t&&(0,a.jsx)(tg,{starterTeamCreated:c})]});return(0,o.k)().file_browser_sidebar_semantic_html?(0,a.jsx)("li",{children:f}):f}var ty=r(527167),tw=r(656233),tj=r(502364),tT=r(200830),tE=r(102752),tI=r(918700);let tN=(0,tE.Ju)(function(e){let t=(0,i.wA)(),r=(0,a.jsx)("span",{className:I.s.fontBold.$,children:e.sectionName});return(0,a.jsx)(tI.yX,{onConfirm:()=>{t(eF.de({sidebarSectionId:e.sectionId}))},confirmationTitle:(0,N.t)("sidebar.delete_section"),titleClass:"confirm_section_delete_modal--title--8Haoy text--fontPos11--2LvXf text--_fontBase--QdLsd",confirmText:(0,N.t)("sidebar.delete"),destructive:!0,autoFocusCta:!1,children:(0,a.jsx)("p",{className:"confirm_section_delete_modal--content--BToo-",children:(0,N.tx)("sidebar.if_you_delete_section_the_section",{item:e.count>1?(0,N.t)("sidebar.items"):(0,N.t)("sidebar.item"),section:r,count:e.count,pronoun:e.count>1?(0,N.t)("sidebar.them"):(0,N.t)("sidebar.it")})})})},"CONFIRM_SECTION_DELETE_MODAL",tE.ZU.YES);var tC=r(156213),tS=r(834956);let tk="custom-section-header-context-menu";function tR(){let e=(0,i.d4)(e=>e.dropdownShown);return e&&e?.type===tk?e:null}function tA(e){let t=(0,i.wA)(),r=tR();if(null==r)return(0,a.jsx)(a.Fragment,{});let s=()=>{0===r.data.favoritesCount?t(eF.de({sidebarSectionId:r.data.customSection.id})):t((0,tC.to)({type:tN,data:{sectionId:r.data.customSection.id,sectionName:r.data.customSection.name,count:r.data.favoritesCount}}))},n=()=>{e.setRenamingSectionId(r.data.customSection.id)},o=[{displayText:(0,N.t)("sidebar.rename_section"),callback:()=>n()},{displayText:(0,N.t)("sidebar.delete_section"),callback:()=>s()}];return(0,a.jsx)(tS.j,{depth:0,dispatch:t,hidePointWhenContentOffScreen:!0,items:o,lean:"right",leanPadding:0,minWidth:162,onSelectItem:(e,r)=>{e.callback&&e.callback("",null,t)},parentRect:r.data.targetRect,showPoint:!r.data.isFromRightClick})}var tO=r(521428),tF=r(698965);let tP="favorited_section--emojiIcon--pDnB-",tL="favorited_section--isDragTarget--dQd5-",tD="favorited_section--previewContainer--4E-dF _overlayBase--_overlayBase--Rkj8l",tM="favorited_section--previewContainerSidebarRowRedesigned--TewzL",tB="favorited_section--previewContainerNoDelay--buvES favorited_section--previewContainer--4E-dF _overlayBase--_overlayBase--Rkj8l",tU="favorited_section--favoriteClickTarget--Z9eur",tW="favorited_section--thumbnailContainer--C4PE-",t$="favorited_section--lowerContainer--9gDfQ",tG="favorited_section--lowerPartTitles--44fhW",tV="favorited_section--title--bWf4x ellipsis--ellipsis--Tjyfa",tz="favorited_section--fileIconContainer--u8cZj",tH="favorited_section--dialogTriggerButtonContainer--m7yPm";function tK(){let e=(0,i.wA)(),t=(0,i.d4)(eB.wA);return t?(0,a.jsxs)("div",{className:"favorited_section--customSectionsEmptyStateContent--Z6jKH",children:[(0,N.tx)("sidebar.just_click_the_on_files_projects_and_teams_to_add_and_organize_them_here"),(0,a.jsx)(tO.$n.Link,{onClick:()=>{e(eR.sf({view:"org",orgId:t.id,orgViewTab:tF.X.HOME}))},children:(0,N.tx)("sidebar.browse_org_custom_sections")})]}):null}function tY(){return(0,a.jsx)("div",{className:"favorited_section--customSectionsEmptyState--JcvfB favorited_section--customSectionsEmptyStateContent--Z6jKH",children:(0,a.jsx)(tK,{})})}var tq=r(976845),tJ=r(125993),tX=r(587214),tQ=r(310688),tZ=r(991924),t0=r(714743),t1=r(547944),t4=r(590952),t2=r(566881),t8=r(796251),t5=r(630077),t6=r(411744),t3=r(11182),t7=r(78808),t9=r(466026),re=r(81009),rt=r(697795),rr=r(2023),ra=r(543100),rs=r(243977),ri=r(612685),rn=r(91820),ro=r(349248),rl=r(713695),rd=r(329496),rc=r(316062),ru=r(915030),rm=r(831154),r_=(e=>(e.FAVORITED_PROTOTYPE_CONTEXT_MENU="favorited-prototype-context-menu",e.FAVORITED_FILE_CONTEXT_MENU="favorited-file-context-menu",e.FAVORITED_PROJECT_CONTEXT_MENU="favorited-project-context-menu",e.FAVORITED_TEAM_CONTEXT_MENU="favorited-team-context-menu",e.FAVORITED_WORKSPACE_CONTEXT_MENU="favorited-workspace-context-menu",e))(r_||{});let rp="sidebar context menu";function rf(e,t,r,a){if(t.stopPropagation(),t.preventDefault(),"file"in e&&e.file){let t=e.file;r(t7.yJ({file:{key:t.key,team_id:t.teamId,file_repo_id:t.fileRepoId,folder_id:t.folderId}}));let a=(0,t6.QJ)(e);a&&r(t9.bE({repo:a}))}r(eR.j7({type:a,data:{resource:{...e},targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1}}}))}let rg=(e,t,r,a={})=>e?[{displayText:t?t():"",callback:r,...a}]:[],rh=[{displayText:"",separator:!0}];function rx(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.selectedView),s=(0,rs.p)(),n=e.favoritedFile.file,o=rl.M4.useFile(n?.key).data,d=n?.project?.canView,u=(0,i.d4)(e=>e.dropdownShown),m=(0,tx.e)();if(null==u||null==n)return null;let _=n.editorType===eM._Y.FIGMAKE&&!m,p="favorited-file-context-menu"===u.type,f=[...rg(!0,()=>(0,N.t)("tile.dropdown.open"),()=>{(0,tQ.DF)("open"),(0,tQ.LP)(n.key,eM.bk.FILE,e.favoritedFile?.sidebarSectionId??void 0,rp,n.editorType??void 0),(0,rt.Tq)(t,n)}),...rg(!c.eD&&!(0,l.ce)(),()=>(0,N.t)("tile.dropdown.open_new_tab"),()=>{(0,rt.nz)((0,ri.jN)({file:n,allowDefaulting:!0}),n.key,r,t),(0,tQ.LP)(n.key,eM.bk.FILE,e.favoritedFile?.sidebarSectionId??void 0,rp,n.editorType),(0,tQ.DF)("open_in_new_tab")}),...rh,...e.organizeFavoriteOptions,...rh,...rg(!0,()=>(0,N.t)("file_browser.copy_link"),()=>{t(t7.S({fileKey:n.key,url:(0,ri.jN)({file:n,attributionContext:(0,rn.b)(s,rn.d.FAVORITED_FILE_CONTEXT_MENU),allowDefaulting:!0}),source:rn.d.FAVORITED_FILE_CONTEXT_MENU})),t(eR.oB())}),...rg(!_,()=>(0,N.t)("sidebar.share"),()=>{(0,tQ.DF)("share"),t((0,tC.to)({type:rm.g_,data:{fileKey:n.key,source:rr.nk.fileBrowserFavoritedContextMenu}}))}),...rg(!0,()=>(0,N.t)("tile.dropdown.show_in_project"),()=>{if((0,tQ.DF)("show_in_project"),t(eR.sf({view:"folder",folderId:e.folderId})),t(re.an()),n.fileRepoId){let r=(0,t6.QJ)(e.favoritedFile);null!=r&&t(re.y$({type:ru.F.REPOS,tiles:[{type:ra.nb.REPO,repo:r,branches:[],selectedBranchKey:""}]}))}else{if(!o)return;t(re.y$({type:ru.F.FILES,tiles:[(0,ra.fA)(o)]}))}},{disabled:!(p&&d)})];return(0,a.jsx)(tS.j,{items:f,parentRect:u.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorite-file-dropdown",dispatch:t,onSelectItem:(e,r)=>{e.callback?.("",{},t,r)}})}function rb(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.dropdownShown);if(null==r)return null;let s=[...e.organizeFavoriteOptions,...rh,...rg(!0,()=>(0,N.t)("file_browser.copy_link_to_team"),()=>{let r=(0,t5.bL)(e.teamId,e.orgId);t(t3.S({url:r})),t(eR.oB())})];return(0,a.jsx)(tS.j,{items:s,parentRect:r.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorite-file-dropdown",dispatch:t,onSelectItem:(e,r)=>{e.callback?.("",{},t,r)}})}function rv(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.dropdownShown);if(null==r)return null;let s=[...e.organizeFavoriteOptions,...rh,...rg(null!==e.orgId,()=>(0,N.t)("file_browser.copy_link_to_workspace"),()=>{if(null!==e.orgId){let r=(0,rd.fO)(e.workspaceId,e.orgId);t(t3.S({url:r}))}t(eR.oB())})];return(0,a.jsx)(tS.j,{items:s,parentRect:r.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,r)=>{e.callback?.("",{},t,r)}})}function ry(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.dropdownShown);if(null==r)return null;let s=[...e.organizeFavoriteOptions,...rh,...rg(!0,()=>(0,N.t)("file_browser.copy_link_to_project"),()=>{let r=(0,rc.EE)(e.projectId,e.orgId);t(t3.S({url:r})),t(eR.oB())})];return(0,a.jsx)(tS.j,{items:s,parentRect:r.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,r)=>{e.callback?.("",{},t,r)}})}function rw(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.dropdownShown);if(null==r)return null;let s=[...e.organizeFavoriteOptions,...rh,...rg(!0,()=>(0,N.t)("file_browser.copy_link"),()=>{let r=(0,ro._3)(e.prototype.fileKey,e.prototype.file?.name,e.prototype.pageId);t(t3.S({url:r})),t(eR.oB())})];return(0,a.jsx)(tS.j,{items:s,parentRect:r.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,r)=>{e.callback?.("",{},t,r)}})}var rj=r(254490);function rT(e){let t=(0,i.wA)(),r=e.orgId,n=(0,i.d4)(e=>e.currentTeamId),o=e.favorite.team,l=(0,i.d4)(e=>e.dropdownShown),d=s.useMemo(()=>l&&l.type===r_.FAVORITED_TEAM_CONTEXT_MENU&&l.data.teamId===o.id,[l,o.id]),c=s.useCallback((e,r)=>{(0,tQ.LP)(r.team?.id,eM.bk.TEAM,r.sidebarSectionId??void 0,tQ.vg);let a=(0,t5.bL)(r.resourceId,r.orgId);(0,O.oJ)(e)?(u.Ay.redirect(a,"_blank"),e.stopPropagation()):(t(T.dm(r.resourceId)),e.preventDefault())},[t]),m=s.useCallback(e=>{e.stopPropagation(),e.preventDefault();let r={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(eR.j7({type:r_.FAVORITED_TEAM_CONTEXT_MENU,data:{teamId:o.id,targetRect:r}}))},[t,o]),_=(0,t8.x)({currentOrgId:r,currentTeamId:n,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eM.bk.TEAM,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(r,a)=>{let s={entrypoint:"sidebar",sectionId:a,team:{id:o.id},favoriteId:e.favorite.id,resourceType:eM.bk.TEAM};r?t(eF.V1(s)):t(eF.ox(s))}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ek.SidebarRow,{dragKey:e.dragKey,icon:o.imgUrl?(0,a.jsx)("div",{className:I.s.colorIcon.$,children:(0,a.jsx)(t4.nl,{shape:"ROUNDED_SQUARE",size:{imgSize:t4.Pf.SMALL,fallbackSize:t4.Pf.SMALL},fallbackDisplay:t2.U.HIDDEN,team:{...o,imgUrl:o.imgUrl},fallbackSvg:rj.A})}):(0,a.jsx)(t1.U,{}),isDragTarget:e.isDragTarget,isSelected:e.isSelected,onClick:t=>c(t,e.favorite),onContextMenu:m,onDragDrop:e.onDragDrop,onDragEnd:e.onDragEnd,onDragEnter:e.onDragEnter,onDragLeave:e.onDragLeave,onDragQuadrantUpdate:e.onDragQuadrantUpdate,onDragStart:e.onDragStart,showGrabber:e.showGrabber,text:(0,a.jsx)(C.E,{truncate:!0,children:o.name}),wrapInListItem:!1}),d&&(0,a.jsx)(rb,{teamId:o.id,orgId:o.orgId,organizeFavoriteOptions:_})]})}var rE=r(722141),rI=r(680166),rN=r(445814),rC=r(204891),rS=r(225144),rk=r(528509);let rR=e=>(0,a.jsx)("div",{className:tP,children:e});function rA(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.currentUserOrgId),n=(0,i.d4)(e=>e.currentTeamId),l=(0,i.d4)(e=>e.dropdownShown),d=e.favorite.file,c=rl.M4.useFile(d.key).data,m=(0,rN.NN)(),_=null!==r,p=!!n,f=s.useMemo(()=>l&&l.type===r_.FAVORITED_FILE_CONTEXT_MENU&&l.data.fileKey===d.key,[l,d]),g=s.useMemo(()=>l&&l.type===tk,[l]),h=s.useCallback(e=>{c||t(t7.yJ({file:{key:d.key,team_id:d.teamId,file_repo_id:d.fileRepoId,folder_id:d.folderId,library_key:d.libraryKey}})),e.stopPropagation(),e.preventDefault();let r={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(eR.j7({type:r_.FAVORITED_FILE_CONTEXT_MENU,data:{fileKey:d.key,targetRect:r}}))},[t,d,c]),x=(0,ri.jN)({file:d,allowDefaulting:!0}),b=(e,r)=>{(0,tQ.LP)(r.file?.key,eM.bk.FILE,r.sidebarSectionId??void 0,tQ.vg,r.file?.editorType??void 0),(0,O.oJ)(e)?(t(T.UN({fileKey:r.file?.key??"",entrypoint:tQ.vg})),e.stopPropagation()):e.preventDefault(),r.file&&(u.Ay.redirect(x,"_blank"),t(T.UN({fileKey:r.file.key,entrypoint:tQ.vg})))},v=()=>{t(eF.qP({file:{key:d.key,editorType:d.editorType??eM._Y.DESIGN},repoId:d.fileRepoId??void 0,entrypoint:"sidebar",favoriteId:e.favorite.id}))},y=(0,t8.x)({currentOrgId:r,currentTeamId:n,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eM.bk.FILE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(r,a)=>{if(r&&c){let r={entrypoint:"sidebar",sectionId:a,favoriteId:e.favorite.id,resourceType:eM.bk.FILE};t(eF.V1(r))}else r||v()}}),w=d.name,j=(0,rS.AE)(w),E=e.favorite.file?m(e.favorite.file):rN.y1.DESIGN,I=j?rR(j):(0,a.jsx)(rN.w4,{size:16,type:E}),S=j?(0,rS.Nn)(w,j):w,k=e.favorite.file?.project?.path,R=(0,rk.S)(k),A=R?tV:"favorited_section--titleWithoutSubtitle--BXdOW ellipsis--ellipsis--Tjyfa text--fontPos13--xW8hS text--_fontBase--QdLsd";return(0,a.jsxs)("div",{className:tU,children:[(0,a.jsx)(ek.SidebarRow,{dragKey:e.dragKey,icon:I,isDragTarget:e.isDragTarget,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED,isSelected:e.isSelected,onClick:t=>b(t,e.favorite),onContextMenu:_||p?h:r=>{rf(e.favorite,r,t,r_.FAVORITED_FILE_CONTEXT_MENU)},onDragDrop:e.onDragDrop,onDragEnd:e.onDragEnd,onDragEnter:e.onDragEnter,onDragLeave:e.onDragLeave,onDragQuadrantUpdate:e.onDragQuadrantUpdate,onDragStart:e.onDragStart,showGrabber:e.showGrabber,text:""!==S?(0,a.jsx)(C.E,{truncate:!0,showTooltipWhenTruncated:!1,children:S}):(0,a.jsx)(C.E,{truncate:!0,children:(0,N.tx)(e.favorite.file?.editorType==="whiteboard"?"sidebar.fig_jam_file":e.favorite.file?.editorType==="slides"?"sidebar.slides_file":"sidebar.design_file")}),wrapInListItem:!1}),!f&&!g&&(0,a.jsxs)("div",{className:U()(e.showPreviewDelay?tD:tB,{[tM]:(0,o.k)().file_browser_sidebar_row_ui}),style:{transform:`translateY(${-e.previewYOffset}px)`},children:[(0,a.jsx)("div",{className:tW,children:(0,a.jsx)(rC.NM,{file:d,noBorder:!0})}),(0,a.jsxs)("div",{className:t$,children:[(0,a.jsx)("div",{className:tz,children:(0,a.jsx)(rN.w4,{size:16,type:E})}),(0,a.jsxs)("div",{className:tG,children:[(0,a.jsx)("div",{className:A,children:e.favorite.file?.name}),R&&(0,a.jsx)("div",{className:"favorited_section--subtitle--sQ1zI ellipsis--ellipsis--Tjyfa",children:R})]})]})]}),(_||p)&&f&&d.folderId&&(0,a.jsx)(rx,{favoritedFile:e.favorite,folderId:d.folderId,organizeFavoriteOptions:y})]})}var rO=r(295932),rF=r(95038),rP=r(391888);let rL=e=>(0,a.jsx)("div",{className:tP,children:e});function rD(e){let t=(0,i.wA)(),r=e.favorite.project,n=(0,i.d4)(e=>e.currentTeamId),o=(0,i.d4)(e=>e.currentUserOrgId),l=(0,i.d4)(e=>e.dropdownShown),d=s.useMemo(()=>l&&l.type===r_.FAVORITED_PROJECT_CONTEXT_MENU&&l.data.projectId===r.id,[l,r.id]),c=s.useCallback(e=>{e.stopPropagation(),e.preventDefault();let a={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(eR.j7({type:r_.FAVORITED_PROJECT_CONTEXT_MENU,data:{projectId:r.id,targetRect:a}}))},[t,r.id]),u=(0,rP.E)(),m=s.useCallback((e,t)=>{(0,tQ.LP)(t.project?.id,eM.bk.FOLDER,t.sidebarSectionId??void 0,tQ.vg),u(t.resourceId,e)},[u]),_=(0,t8.x)({currentOrgId:o,currentTeamId:n,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eM.bk.FOLDER,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(a,s)=>{let i={entrypoint:"sidebar",sectionId:s,folder:r,favoriteId:e.favorite.id};a?t(eF.Mv(i)):t(eF.jv(i))}}),p=(0,rS.AE)(r.path),f=p?(0,rS.Nn)(r.path,p):r.path,g=e.favorite.project.activeProjectResourceConnections?.[0];return(0,a.jsxs)("div",{children:[(0,a.jsx)(ek.SidebarRow,{badge:g?(0,a.jsx)(rF.W,{hostPlanName:g.hostPlanName,connectedPlanName:g.connectedPlanName}):void 0,dragKey:e.dragKey,icon:p?(0,a.jsx)("div",{children:rL(p)}):(0,a.jsx)(rO.e,{}),isDragTarget:e.isDragTarget,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED,isSelected:e.isSelected,onClick:t=>m(t,e.favorite),onContextMenu:c,onDragDrop:e.onDragDrop,onDragEnd:e.onDragEnd,onDragEnter:e.onDragEnter,onDragLeave:e.onDragLeave,onDragQuadrantUpdate:e.onDragQuadrantUpdate,onDragStart:e.onDragStart,showGrabber:e.showGrabber,text:(0,a.jsx)(C.E,{truncate:!0,children:f}),wrapInListItem:!1}),d&&(0,a.jsx)(ry,{projectId:r.id,orgId:r.orgId,organizeFavoriteOptions:_})]})}var rM=r(126561),rB=r(794224),rU=r(385855),rW=r(171275);function r$({thumbnailUrl:e,isLocked:t,...r}){return t?(0,a.jsx)(rB.N,{thumbnailType:rW.F.PROTOTYPE,...r}):(0,a.jsx)(rU.V,{thumbnailUrl:e,thumbnailType:rW.F.PROTOTYPE,...r})}function rG(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.currentTeamId),n=(0,i.d4)(e=>e.currentUserOrgId),l=(0,i.d4)(e=>e.dropdownShown),d=s.useMemo(()=>l&&l.type===r_.FAVORITED_PROTOTYPE_CONTEXT_MENU&&l.data.resource.prototype.id===e.favorite.prototype.id,[l,e.favorite.prototype.id]),c=s.useMemo(()=>l&&l.type===tk,[l]),m=(0,ro._3)(e.favorite.prototype.fileKey,e.favorite.prototype.file?.name,e.favorite.prototype.pageId),_=(e,t)=>{if((0,tQ.LP)(t.prototype?.fileKey,eM.bk.PROTOTYPE,t.sidebarSectionId??void 0,tQ.vg),(0,O.oJ)(e)){e.stopPropagation();return}e.preventDefault(),u.Ay.redirect(m,"_blank")},p=(r,a)=>{r||t(eF.X7({prototype:{file_key:e.favorite.prototype.fileKey,page_id:e.favorite.prototype.pageId},entrypoint:"sidebar",favoriteId:a}))},f=(0,t8.x)({currentOrgId:n,currentTeamId:r,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eM.bk.PROTOTYPE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(r,a)=>{if(r){let r={entrypoint:"sidebar",sectionId:a,favoriteId:e.favorite.id,resourceType:eM.bk.PROTOTYPE};t(eF.V1(r))}else p(!1,e.favorite.id)}});return(0,a.jsxs)("div",{className:tU,children:[(0,a.jsx)(ek.SidebarRow,{dragKey:e.dragKey,icon:(0,a.jsx)(rM.F,{}),isDragTarget:e.isDragTarget,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED,isSelected:e.isSelected,onClick:t=>_(t,e.favorite),onContextMenu:r=>{rf(e.favorite,r,t,r_.FAVORITED_PROTOTYPE_CONTEXT_MENU)},onDragDrop:e.onDragDrop,onDragEnd:e.onDragEnd,onDragEnter:e.onDragEnter,onDragLeave:e.onDragLeave,onDragQuadrantUpdate:e.onDragQuadrantUpdate,onDragStart:e.onDragStart,showGrabber:e.showGrabber,text:(0,a.jsx)(C.E,{truncate:!0,showTooltipWhenTruncated:!1,children:e.favorite.prototype.file?.name}),wrapInListItem:!1}),!d&&!c&&(0,a.jsxs)("div",{className:U()(e.showPreviewDelay?tD:tB,{[tM]:(0,o.k)().file_browser_sidebar_row_ui}),style:{transform:`translateY(${-e.previewYOffset}px)`},children:[(0,a.jsx)("div",{className:tW,children:(0,a.jsx)(r$,{isLocked:!!e.favorite.prototype.file?.hasProtoLinkPassword&&e.favorite.prototype.file?.hasProtoLinkPassword,thumbnailUrl:e.favorite.prototype.thumbnailUrl,noBorder:!0})}),(0,a.jsxs)("div",{className:t$,children:[(0,a.jsx)("div",{className:tz,children:(0,a.jsx)(rM.F,{})}),(0,a.jsx)("div",{className:tG,children:(0,a.jsx)("div",{className:tV,children:e.favorite.prototype.file?.name})})]})]}),d&&e.favorite.prototype&&(0,a.jsx)(rw,{prototype:e.favorite.prototype,organizeFavoriteOptions:f})]})}var rV=r(805373);function rz(e){let t=(0,i.wA)(),r=e.orgId,n=(0,i.d4)(e=>e.currentTeamId),o=(0,i.d4)(e=>e.dropdownShown),l=e.favorite.workspace,d=s.useMemo(()=>o&&o.type===r_.FAVORITED_WORKSPACE_CONTEXT_MENU&&o.data.workspaceId===l.id,[o,l.id]),c=s.useCallback((e,r)=>{let a=r.workspace;(0,tQ.LP)(a?.id,eM.bk.WORKSPACE,r.sidebarSectionId??void 0,tQ.vg),a&&t(eR.sf({view:"workspace",subView:te.V0.DIRECTORY,workspaceId:a.id,selectedTab:te.dN.TEAMS}))},[t]),u=s.useCallback(e=>{e.stopPropagation(),e.preventDefault();let r={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(eR.j7({type:r_.FAVORITED_WORKSPACE_CONTEXT_MENU,data:{workspaceId:l.id,targetRect:r}}))},[t,l]),m=(0,t8.x)({currentOrgId:r,currentTeamId:n,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eM.bk.WORKSPACE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(r,a)=>{let s={workspace:{id:l.id,name:l.name??"",imgUrl:l.imgUrl??null},entrypoint:"sidebar",sectionId:a,favoriteId:e.favorite.id};r?t(eF.ZW(s)):t(eF.if(s))}}),_=e.favorite.workspace?(0,a.jsx)(rV.z6,{entity:e.favorite.workspace,size:16}):(0,a.jsx)(tr.t,{className:I.s.colorIcon.$});return(0,a.jsxs)("div",{children:[(0,a.jsx)(ek.SidebarRow,{dragKey:e.dragKey,icon:_,isDragTarget:e.isDragTarget,isSelected:e.isSelected,onClick:t=>c(t,e.favorite),onContextMenu:u,onDragDrop:e.onDragDrop,onDragEnd:e.onDragEnd,onDragEnter:e.onDragEnter,onDragLeave:e.onDragLeave,onDragQuadrantUpdate:e.onDragQuadrantUpdate,onDragStart:e.onDragStart,showGrabber:e.showGrabber,text:(0,a.jsxs)(C.E,{truncate:!0,children:[" ",l.name]}),wrapInListItem:!1}),d&&(0,a.jsx)(rv,{workspaceId:l.id,orgId:e.favorite.orgId,organizeFavoriteOptions:m})]})}let rH=(e,t)=>{let r=e.cloneNode(!0),a=document.createElement("div");return a.className="favorited_generic_row--favorite--vFcy4 favorited_generic_row--_favorite--jiaJX sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd",Object.assign(a.style,{position:"absolute",top:"-100%",left:"-100%",width:`${e.clientWidth}px`,height:`${e.clientHeight}px`,overflow:"hidden",zIndex:-1}),r.style.overflow="hidden",t&&(r.classList.add(t),r.classList.add(I.s.colorText.$)),a.appendChild(r),document.body.appendChild(a),a};function rK(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.dragState),n=(0,i.d4)(e=>e.currentUserOrgId),{hasPendingRequest:o,getUpgradePathway:l,getUpgradeEligibility:d,getPlanAndPlanUser:c,getHasProvisionalAccess:u,getShouldShowCurf:m,getShouldShowScim:_,getIsUpgradeHandlerLoading:p,getIsEligibleForProvisionalAccess:f}=(0,rI.wH)({folderId:e.favorite.resourceType===eM.bk.FOLDER?e.favorite.resource.project?.id??null:null,isDraftsMove:!0}),g=(0,rE.f4)((0,ed.md)(rE.yH)),[h,x]=s.useState(!1),b=e.favorite.resourceType,v=(0,eA._6)(),[y,w]=s.useState(!1),j=e.rearrangeDragState?.draggedOverFavoriteId===e.favorite.resource.id&&!y,[T,I]=s.useState(!1),N=s.useRef(null),C=(0,tx.e)(),S=e.isSelected||(()=>{switch(b){case eM.bk.FOLDER:return"folder"===v.view&&v.folderId===e.favorite.resource.resourceId;case eM.bk.TEAM:return"team"===v.view&&v.teamId===e.favorite.resource.resourceId;case eM.bk.WORKSPACE:return"workspace"===v.view&&v.subView===te.V0.DIRECTORY&&v.workspaceId===e.favorite.resource.resourceId;default:return!1}})(),k=r=>{r.dataTransfer.effectAllowed="move";let a=new tm.le(r.dataTransfer);a.setArbitraryData(e.favorite.resource.id);let s=r.currentTarget.childNodes[0];if(!s)return;let i=s.getBoundingClientRect(),n=r.clientX-i.left,o=r.clientY-i.top;N.current=rH(s,"favorited_generic_row--draggable--QinZd"),a.setDragImage(N.current,n,o),t(tu.v({type:eW.R.Favorite,data:e.favorite}))},R=(t,a)=>{let s=new tm.le(t),i=!1;(r.type===eW.R.Favorite||s.isFigFiles()||s.isRepos()||s.isPrototypes()||s.isTiles())&&((s.isFigFiles()||s.isRepos()||s.isTiles())&&(i=e.favorite.resourceType===eM.bk.FOLDER),e.updateRearrangeDragState({draggedOverFavoriteId:e.favorite.resource.id,dropBefore:i?a.upperQuarter:a.upper,dropInto:i&&a.middleVerticalHalf,draggedOverSectionId:e.favorite.resource.sidebarSectionId}),I(i))},A=t=>{let a=new tm.le(t);(r.type===eW.R.Favorite||a.isFigFiles()||a.isRepos()||a.isPrototypes()||a.isTiles()&&j)&&(e.clearRearrangeDragState(e.favorite.resource.id),I(!1))},O=(t,r)=>{let a=p();return(0,rE.Zm)({files:t,repos:r,isDestinationDrafts:e.favorite.resourceType===eM.bk.FOLDER&&e.favorite.resource.project?.path==="",enabledForOrgOnly:!1,originFolderIdToPath:g,hasPendingRequest:o,getUpgradePathway:l,getUpgradeEligibility:d,getPlanAndPlanUser:c,getHasProvisionalAccess:u,getShouldShowCurf:m,getShouldShowScim:_,loading:a,getIsEligibleForProvisionalAccess:f})},F=a=>{let s=new tm.le(a);if(e.rearrangeDragState?.dropInto&&e.favorite.resourceType===eM.bk.FOLDER&&e.favorite.resource.project)tc(t,e.favorite.resource.project,e.favorite.resource.project.team,s,O,C),t(tu.T());else if(s.isFigFiles()||s.isRepos()||s.isPrototypes()||s.isTiles())e.onSetResourceFavoriteDragDrop(a);else if(r.type===eW.R.Favorite&&j){let a=r.data;e.reorderOrInsertFavorite(a.resource.id,a.resourceType),t(tu.T())}e.clearRearrangeDragState(e.favorite.resource.id),I(!1)},P=r=>{N.current&&N.current.remove(),t(tu.T()),e.clearRearrangeDragState(e.favorite.resource.id),I(!1)},L=t=>{e.updateRearrangeDragState({draggedOverFavoriteId:e.favorite.resource.id,dropBefore:T?t.upperQuarter:t.upper,dropInto:T&&t.middleVerticalHalf,draggedOverSectionId:e.favorite.resource.sidebarSectionId})},D=e=>{let t=new tm.le(e);return w(t.isFile()),r.type!==eW.R.SidebarSection&&!t.isFile()};return(0,a.jsx)("div",{className:j?e.rearrangeDragState?.dropBefore?"favorited_generic_row--dropBefore--xZvBN sidebar--dropBefore--wZDYO":e.rearrangeDragState?.dropInto?"favorited_generic_row--dropInto--VKuX5":"favorited_generic_row--dropAfter--a64Ax sidebar--dropAfter--JEX7d":void 0,children:(0,a.jsx)("div",{onMouseEnter:()=>{e.preventHoverStyle||x(!0)},onMouseLeave:()=>{e.setShowPreviewDelay(!1),x(!1)},draggable:!e.isFavoritesToMove_DEPRECATED,children:(()=>{switch(b){case eM.bk.FILE:if(!e.favorite.resource.file)return null;return(0,a.jsx)(rA,{dragKey:`FavoritedFile_${e.favorite.resource.resourceId}`,favorite:e.favorite.resource,isDragTarget:D,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED,isHover:h,isSelected:S,onDragDrop:F,onDragEnd:P,onDragEnter:R,onDragLeave:A,onDragQuadrantUpdate:L,onDragStart:k,previewYOffset:e.previewYOffset,sections:e.sections,showGrabber:!1,showPreviewDelay:e.showPreviewDelay});case eM.bk.PROTOTYPE:if(!e.favorite.resource.prototype)return null;return(0,a.jsx)(rG,{dragKey:`FavoritedPrototype_${e.favorite.resource.resourceId}`,favorite:e.favorite.resource,isDragTarget:D,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED,isHover:h,isSelected:S,onDragDrop:F,onDragEnd:P,onDragEnter:R,onDragLeave:A,onDragQuadrantUpdate:L,onDragStart:k,previewYOffset:e.previewYOffset,sections:e.sections,showGrabber:!1,showPreviewDelay:e.showPreviewDelay});case eM.bk.FOLDER:if(!e.favorite.resource.project)return null;return(0,a.jsx)(rD,{dragKey:`FavoritedProject_${e.favorite.resource.resourceId}`,favorite:e.favorite.resource,isDragTarget:D,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED,isHover:h,isSelected:S,onDragDrop:F,onDragEnd:P,onDragEnter:R,onDragLeave:A,onDragQuadrantUpdate:L,onDragStart:k,sections:e.sections,showGrabber:!1});case eM.bk.TEAM:if(!e.favorite.resource.team||!n)return null;return(0,a.jsx)(rT,{dragKey:`FavoritedTeam_${e.favorite.resource.resourceId}`,favorite:e.favorite.resource,isDragTarget:D,isHover:h,isSelected:S,onDragDrop:F,onDragEnd:P,onDragEnter:R,onDragLeave:A,onDragQuadrantUpdate:L,onDragStart:k,orgId:n,sections:e.sections,showGrabber:!1});case eM.bk.WORKSPACE:if(!e.favorite.resource.workspace||!n)return null;return(0,a.jsx)(rz,{dragKey:`FavoritedWorkspace_${e.favorite.resource.resourceId}`,favorite:e.favorite.resource,isDragTarget:D,isHover:h,isSelected:S,onDragDrop:F,onDragEnd:P,onDragEnter:R,onDragLeave:A,onDragQuadrantUpdate:L,onDragStart:k,orgId:n,sections:e.sections,showGrabber:!1});default:(0,E.xb)(b)}})()})})}var rY=r(148074),rq=r(523860),rJ=r(85206);function rX(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.currentTeamId),n=(0,Y.dq)()??null,o=(0,z.sb)(e.favorites,e.order),l=(0,eA._6)(),[d,c]=s.useState(!1),u=(0,i.d4)(e=>e.favorites.movingResource),m=(0,i.d4)(e=>e.favorites.collapsedCustomSections),p=e.section?!m.has(e.section?.id):!m.has("favorited"),[f,g]=s.useState(!1),[h,x]=s.useState(),[b,v]=s.useState(),y=(0,i.d4)(e=>e.dragState),w=(0,_.ZC)(y);s.useEffect(()=>{y.type===eW.R.None&&w&&w.type!==eW.R.None&&v(void 0)},[y,w]),s.useEffect(()=>{!e.isCurrentHoveredSection&&y.type===eW.R.SidebarSection&&b&&v(void 0)},[e.isCurrentHoveredSection,b,y]);let[j,T]=s.useState(void 0),[E,C]=s.useState(!0),S=s.useRef(null),k=tR();s.useEffect(()=>{j===b?.draggedOverFavoriteId&&v(void 0),T(void 0)},[b,v,j,T]);let R=s.useCallback(r=>{e.section?.id&&(r.dataTransfer.effectAllowed="move",new tm.le(r.dataTransfer).setArbitraryData(e.section.id),t(tu.v({type:eW.R.SidebarSection,data:e.section.id})))},[t,e.section]),A=s.useCallback(()=>{(0,tQ.xs)(!p);let r=new Set(m);e.section?(rY.Fp({type:"topLevel",id:"custom",orgId:n,sectionId:e.section?.id},!p),p?r.add(e.section.id):r.delete(e.section.id)):(rY.Fp({type:"topLevel",id:"favorited",orgId:n},!p),p?r.add("favorited"):r.delete("favorited")),t(eF.U6({collapsedCustomSections:r}))},[p,n,e.section,m,t]),O=(r,a)=>{let s;let i=o.map(e=>e.resource.id);if(!b?.draggedOverFavoriteId)return i;let n=-1!==i.indexOf(r);if(n)s=(0,tw.Pe)(i,r,b.draggedOverFavoriteId,b.dropBefore);else{let e=i.indexOf(b.draggedOverFavoriteId);b.dropBefore||(e+=1),s=[...i.slice(0,e),r,...i.slice(e)]}if((0,tQ.hp)(),x(r),e.section?.id){n?t(eF.vg({sectionId:e.section.id,orderedFavoriteIds:s})):t(eF.V1({favoriteId:r,sectionId:e.section.id,resourceType:a,orderedFavoriteIds:s}));return}n||t(eF.V1({favoriteId:r,sectionId:void 0,resourceType:a})),t(W.yJ({prefs:{id:e.fileBrowserPreferences?.id||"optimistic-id",orderedFavoritedResourceIds:s,orderedTeamIds:e.fileBrowserPreferences?.orderedTeamIds,orderedLicenseGroupIds:e.fileBrowserPreferences?.orderedLicenseGroupIds},userInitiated:!0}))},F=s.useCallback(e=>{e.stopPropagation(),h&&x(void 0)},[h]),P=s.useCallback(()=>{C(!0)},[]),L=s.useCallback(e=>{let t=new tm.le(e);return c(t.isFile()),t.isFigFiles()||t.isRepos()||t.isPrototypes()||t.isTiles()},[]),D=a=>{let s=new tm.le(a),i=[],d=[],c=[];if(g(!1),s.isFigFiles()){if(!(i=s.getData()))return!1}else if(s.isPrototypes()){if(!(c=s.getData()))return!1}else if(s.isRepos()){let e=s.getReposData();if(!e)return!1;d=e.repos}else if(s.isTiles()){let e=s.getTilesData();if(!e)return!1;i=e.files,d=e.repos,c=e.prototypes}i=i.filter(e=>!e.is_favorited),d=d.filter(e=>!e.is_favorited),c=c.filter(e=>!e.is_favorited);let u=o.map(e=>e.resource.id),m=i.length+d.length+c.length,_=(0,z.kK)(n);if(m+o.length>_)return t(tl.F.enqueue({message:(0,N.t)("tile.favoriting.max_favorites",{maxFavorites:_})})),!1;let p=null;return b&&(p=u.indexOf(b.draggedOverFavoriteId)+(b.dropBefore?0:1)),t(eF.N9({files:i,repos:d,prototypes:c,orgId:n,teamId:r,selectedView:l.view,entrypoint:"sidebar",insertAtIndex:p,orderedFavorites:u,sectionId:e.section?.id,fileBrowserPrefs:e.fileBrowserPreferences})),!0},M=s.useCallback(()=>{g(!0)},[]),B=s.useCallback(()=>{g(!1)},[]),$=U()(I.s.relative.$,"favorited_section--showsCaret--vjo7-",f||b?.draggedOverSectionId&&e.section&&!d&&b.draggedOverSectionId===e.section.id?tL:""),G=e.section?.name===""||e.section?.name===void 0?(0,N.tx)("sidebar.starred"):e.section.name,V=k?.data?.customSection?.id===e.section?.id,H=e.isCreatingNewSection||e.isRenaming,K=U()({"favorited_section--sectionHeaderContainer--otgqF sidebar--sectionHeaderContainer--TcvBb sidebar--sectionHeaderName--xToHG sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa":!0,"favorited_section--actionButtonsVisibleOnHover--AOJ8E":!H,"favorited_section--actionButtonsVisible--Ey4QI":V&&!H}),q=e.section?.name===void 0?(0,N.t)("sidebar.new_section"):(0,z.R3)(e.section)?(0,N.t)("sidebar.starred"):e.section.name;return(0,a.jsxs)(tn.Y,{className:$,isDragTarget:L,draggable:!1,onTargetDrop:D,onTargetDragEnter:M,onTargetDragLeave:B,children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{draggable:!0,onDragStart:R,className:K,onClick:A,onContextMenu:r=>{r.stopPropagation(),r.preventDefault();let a={top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1};t(eR.j7({type:tk,data:{customSection:e.section,favoritesCount:o.length,isFromRightClick:!0,targetRect:a}}))},role:"button",tabIndex:0,children:[(0,a.jsx)(t0.B,{className:"favorited_section--expandCaretCustomSections--SUjwA",svg:p?rq.A:rJ.A}),(0,a.jsx)("div",{className:"favorited_section--sectionName--PrU2k ellipsis--ellipsis--Tjyfa","data-onboarding-key":1===e.allSections.length?null:"FAVORITES_ONBOARDING_KEY",children:e.isRenaming?(0,a.jsx)(tZ.p,{className:"favorited_section--input--8x-Vh",placeholderValue:q,submit:r=>{e.isCreatingNewSection?(u?t(eF.yH({name:r,insertAtIndex:e.sectionIndex,currentOrderedSections:e.allSections.map(e=>e.id),prefs:e.fileBrowserPreferences??void 0,newResourceForSection:u})):t(eF.YI({name:r,insertAtIndex:e.sectionIndex,currentOrderedSections:e.allSections.map(e=>e.id),prefs:e.fileBrowserPreferences??void 0})),e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(void 0)):e.section&&(t(eF.vg({sectionId:e.section.id,name:r.trim()})),e.setRenamingSectionId&&e.setRenamingSectionId(void 0))},cancel:()=>{e.isCreatingNewSection?(e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(void 0),u&&t(eF.to({movingResource:void 0}))):e.setRenamingSectionId&&e.setRenamingSectionId(void 0)},maxLength:25}):G}),n&&(0,a.jsxs)("div",{className:"favorited_section--actionButtons--VZ6Er",children:[(0,a.jsx)("div",{className:tH,children:(0,a.jsx)(tq.d,{"aria-expanded":!!k,"aria-label":(0,N.t)("favorited_resources.settings_tooltip"),onClick:r=>{k?t(eR.oB()):S.current&&t(eR.j7({type:tk,data:{targetRect:S.current.getBoundingClientRect(),customSection:e.section,favoritesCount:o.length}})),r.stopPropagation(),r.preventDefault()},ref:S,children:(0,a.jsx)(tJ.J,{})})}),(0,a.jsx)(rQ,{newCustomSectionIndex:e.sectionIndex,setNewCustomSectionIndex:e.setNewCustomSectionIndex})]})]})}),(0,a.jsx)("div",{className:p?void 0:I.s.hidden.$,children:0===o.length?1===e.allSections.length&&(0,z.R3)(e.allSections[0])&&!e.isCreatingNewSection?(0,a.jsx)(tK,{}):(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("div",{onMouseMove:F,onMouseLeave:P,children:o.map(t=>{let r=h===t.resource.id;return(0,a.jsx)(rK,{clearRearrangeDragState:T,favorite:t,isSelected:r,onSetResourceFavoriteDragDrop:D,preventHoverStyle:void 0!==h,previewYOffset:e.previewYOffset,rearrangeDragState:b,reorderOrInsertFavorite:O,sections:e.allSections,setShowPreviewDelay:C,showPreviewDelay:E,updateRearrangeDragState:v},t.resource.resourceId)})})})]})}function rQ(e){return(0,a.jsx)("div",{className:tH,children:(0,a.jsx)(ee.K,{"aria-label":(0,N.t)("favorited_resources.create_a_new_section_tooltip"),htmlAttributes:{"data-tooltip":(0,N.t)("favorited_resources.create_a_new_section_tooltip"),"data-tooltip-type":"text"},onClick:t=>{t.stopPropagation(),e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(e.newCustomSectionIndex)},children:(0,a.jsx)(tX.x,{})})})}function rZ(e){let t=(0,z.ds)(e.favoritedFiles,e.favoritedPrototypes,e.favoritedProjects,e.favoritedTeams,e.favoritedWorkspaces);return(0,a.jsx)(rX,{favorites:t,order:e.fileBrowserPreferences?.orderedFavoritedResourceIds??void 0,fileBrowserPreferences:e.fileBrowserPreferences,allSections:e.userSidebarSections??[],sectionIndex:0,previewYOffset:e.previewYOffset})}function r0(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.dragState),n=(0,i.d4)(e=>e.favorites.newCustomSectionIndex),o=(0,i.d4)(e=>e.favorites.favoritesCount),l=(0,z.ds)(e.favoritedFiles,e.favoritedPrototypes,e.favoritedProjects,e.favoritedTeams,e.favoritedWorkspaces),[d,c]=s.useState(),[u,m]=s.useState(),[_,p]=s.useState(!1),f=s.useMemo(()=>(0,z.t$)(e.userSidebarSections??[],e.fileBrowserPreferences?.orderedSidebarSections??void 0),[e.userSidebarSections,e.fileBrowserPreferences?.orderedSidebarSections]);s.useMemo(()=>{o&&o<15&&l.length>=15&&(0,tj.YQ)({id:tT.FAVORITES_COUNT_CROSSED_THRESHOLD_EVENT}),t(eF.lF({favoritesCount:l.length}))},[o,l.length,t]);let g={},h=[];l.forEach(e=>{e.resource.sidebarSectionId?g[e.resource.sidebarSectionId]?g[e.resource.sidebarSectionId].push(e):g[e.resource.sidebarSectionId]=[e]:h.push(e)});let x=s.useCallback(()=>r.type===eW.R.Favorite||r.type===eW.R.SidebarSection,[r]),b=s.useCallback(e=>{r.type===eW.R.SidebarSection&&p(e.upper)},[r]),v=s.useCallback(()=>{let a="starred"===d?void 0:d;if(r.type===eW.R.Favorite){let e=r.data;t(eF.V1({favoriteId:e.resource.id,sectionId:a,resourceType:e.resourceType}))}else if(r.type===eW.R.SidebarSection&&a){let s=f.map(e=>e.id)??[],i=(0,tw.Pe)(s,r.data,a,_);t(W.yJ({prefs:{id:e.fileBrowserPreferences?.id||"optimistic-id",orderedFavoritedResourceIds:e.fileBrowserPreferences?.orderedFavoritedResourceIds,orderedTeamIds:e.fileBrowserPreferences?.orderedTeamIds,orderedLicenseGroupIds:e.fileBrowserPreferences?.orderedLicenseGroupIds,orderedSidebarSections:i},userInitiated:!0}))}p(!1),c(void 0),t(tu.T())},[d,t,r,_,f,e.fileBrowserPreferences]),y=s.useCallback(e=>()=>{c(e)},[]),w=s.useCallback(()=>{c(void 0)},[]),j=s.useCallback(e=>{t(eF.pS({newCustomSectionIndex:e}))},[t]);if(0===f.length&&void 0===n)return(0,a.jsx)(tY,{});let T=(0,a.jsx)("div",{className:I.s.mb8.$,children:(0,a.jsx)(rX,{allSections:f,favorites:[],fileBrowserPreferences:e.fileBrowserPreferences,isCreatingNewSection:!0,isRenaming:!0,order:[],previewYOffset:e.previewYOffset,sectionIndex:n||0,setNewCustomSectionIndex:j,setRenamingSectionId:m})});return(0,a.jsxs)("div",{className:I.s.mt8.$,children:[0===n&&T,f.map((t,s)=>{let i=r.type===eW.R.Favorite?tL:_?"favorited_section--dropBefore--6poyi sidebar--dropBefore--wZDYO":"favorited_section--dropAfter--7G6L7 sidebar--dropAfter--JEX7d",o=U()(d===t.id?i:"",I.s.mb8.$);return(0,a.jsxs)("div",{children:[(0,a.jsx)(tn.Y,{className:o,isDragTarget:x,draggable:!1,onTargetDragQuadrantUpdate:b,onTargetDrop:v,onTargetDragEnter:y(t.id),onTargetDragLeave:w,children:(0,a.jsx)(rX,{allSections:f,favorites:g[t.id]??[],isCurrentHoveredSection:d===t.id,isRenaming:u===t.id,order:t.orderedFavoritedResourceIds??[],previewYOffset:e.previewYOffset,section:t,sectionIndex:s,setNewCustomSectionIndex:j,setRenamingSectionId:m})}),n===s+1&&T]},t.id)}),(0,a.jsx)(tA,{setRenamingSectionId:m})]})}var r1=r(919079),r4=r(60079),r2=r(831799),r8=r(129884),r5=r(696396),r6=r(637027),r3=r(524544),r7=r(844322),r9=r(780571),ae=r(519092),at=r(824007);let ar=(0,tE.Ju)(function(e){let[t,r]=(0,s.useState)(null),n=(0,i.wA)(),o=(0,r3.Gs)(),l=(0,J.TA)(),d=(0,i.d4)(e=>e.teamUserByTeamId),c=(0,i.d4)(e=>l?e.authedUsers.byId[l]?.plans?.filter(e=>!e.is_org):null),u=(0,N.t)("file_browser.planless_favorites.add_favorites_to_modal_title"),m=()=>n(tC.Ce()),_={};l&&(0,r9._)(d,l).forEach(e=>{e.drafts_folder_id&&(_[e.team_id]=e.drafts_folder_id)});let p=(e,t)=>{t&&n(r7.Cy({files:e,folderName:"",folderId:t,isDraftsToMove:!0,fromFileModal:!0}))};return(0,a.jsx)(ae.OJ,{title:u,fixedTop:!0,minWidth:480,maxWidth:480,onClose:m,truncateTitleText:!0,children:(0,a.jsxs)("div",{className:"move_favorites_modal--modalBody---Rdx2",children:[c&&(0,a.jsx)(en.P,{width:480,children:(0,a.jsx)("div",{className:I.s.pl8.pr8.$,children:c.map(e=>(0,a.jsx)(aa,{planId:e.plan_id,name:e.name,imgUrl:e.img_url,checked:t?.plan_id===e.plan_id,onSelect:()=>r(t?.plan_id===e.plan_id?null:e)},e.plan_id))})}),(0,a.jsxs)("div",{className:"move_favorites_modal--footer--ERUeX",children:[(0,a.jsx)(r6.nR,{onClick:m,children:(0,N.tx)("modal.cancel")}),(0,a.jsx)(r6.vd,{disabled:!t,onClick:()=>{let r=t?.is_org?null:t?.plan_id,a=e.favorites.reduce((e,t)=>t.resourceType===eM.bk.FILE&&t.resource.file?.key?{...e,[t.resource.file?.key]:!0}:e,{}),s={},i=o.filter(e=>{let t=!!a[e.key];return t&&(s[e.key]=!0),t}),l=e.favorites.filter(e=>!(e.resourceType===eM.bk.FILE&&e.resource.file?.key)||!s[e.resource.file?.key]).map(e=>e.resource.id);n(eF.Ic({favoriteIds:l,teamId:r})),r&&p(i,_[r]),m()},children:(0,N.t)("modal.confirm")})]})]})})},"MoveFavoritesModal");function aa(e){return(0,a.jsxs)("button",{"data-testid":`${e.name}-button`,className:U()("move_favorites_modal--teamRow--qNRGf",e.checked?I.s.colorBgSelected.$:""),onClick:e.onSelect,children:[(0,a.jsx)("div",{className:"move_favorites_modal--iconContainer--oDATP",children:e.checked?(0,a.jsx)(t0.B,{className:I.s.colorIcon.$,svg:at.A}):(0,a.jsx)(t4.nl,{size:t4.Pf.MEDIUM,shape:"CIRCLE",fallbackDisplay:t2.U.HIDDEN,team:{id:e.planId,imgUrl:e.imgUrl}})}),(0,a.jsx)("div",{className:"move_favorites_modal--teamName--pVqcu ellipsis--ellipsis--Tjyfa",children:(0,a.jsx)("span",{className:"move_favorites_modal--destinationHeading--mwxLX",children:e.name})})]})}var as=r(507015);let ai="favorited_drafts_to_move";function an(e){let t=(0,i.wA)(),[r,o]=s.useState(!0),l=(0,J.TA)(),d=(0,i.d4)(e=>e.favorites.collapsedCustomSections),c=e.teamUser?.planlessFavoritedFiles?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedFilesKeySet.has(t.resourceId)),u=e.teamUser?.planlessFavoritedPrototypes?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedPrototypesIdSet.has(t.resourceId)),m=e.teamUser?.planlessFavoritedProjects?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedFoldersIdSet.has(t.resourceId)),_=(0,z.ds)(c,u,m),p=!d.has(ai),f=s.useCallback(()=>{rY.Fp({type:"topLevel",id:ai,orgId:null},!p),p?d.add(ai):d.delete(ai),t(eF.U6({collapsedCustomSections:d}))},[p,d,t]),g=s.useCallback(()=>{t(eF.vr({favoriteIds:_.map(e=>e.id)}))},[t,_]);if(0===_.length)return(0,a.jsx)(a.Fragment,{});let h=_.map(t=>(0,a.jsx)(rK,{clearRearrangeDragState:n.lQ,favorite:t,isFavoritesToMove_DEPRECATED:!0,isSelected:!1,onSetResourceFavoriteDragDrop:n.lQ,preventHoverStyle:!1,previewYOffset:e.previewYOffset,rearrangeDragState:void 0,reorderOrInsertFavorite:n.lQ,sections:[],setShowPreviewDelay:o,showPreviewDelay:r,updateRearrangeDragState:n.lQ},t.resource.resourceId));return(0,a.jsx)(r2.fu,{name:r5.e0.FAVORITES_TO_MOVE_SECTION,properties:{userId:l,numFiles:_.length},children:(0,a.jsxs)("div",{className:U()("favorited_section--moveFavoritesContainer--qp39R",I.s.pt4.pb4.ml8.mr8.mb8.$),children:[(0,a.jsxs)("div",{className:U()(I.s.flex.itemsCenter.justifyBetween.pl8.pr8.$,"favorited_section--favoriteToMoveHeaderContainer--2RB9p favorited_section--sectionHeaderContainer--otgqF sidebar--sectionHeaderContainer--TcvBb sidebar--sectionHeaderName--xToHG sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa"),children:[(0,a.jsxs)("div",{onClick:f,className:I.s.flex.itemsCenter.justifyBetween.$,role:"button",tabIndex:0,children:[(0,a.jsx)(t0.B,{className:U()(I.s.flex.itemsCenter.p6.mr12.colorIcon.$,"favorited_section--moveFavoritesContainerHeaderLeftBlockItems--pl1Hf"),svg:p?rq.A:rJ.A}),(0,N.tx)("sidebar.move_these_starred_items"),(0,a.jsx)(t0.B,{svg:as.A,className:U()("favorited_section--helpIcon--vfl5Y",I.s.flex.itemsBaseline.ml4.$),"data-tooltip-type":r8.Ib.TEXT,"data-tooltip":(0,N.t)("file_browser.planless_favorites.your_favorited_items_tooltip"),"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200})]}),p?null:(0,a.jsx)(r1.Ex,{text:_.length>99?"99+":`${_.length}`,color:r1.zE.DEFAULT,className:I.s.mr8.colorText.colorBgSelectedSecondary.$})]}),p?(0,a.jsxs)("div",{className:"favorited_section--favoritesToMoveContentContainer--xYv6p",children:[h,(0,a.jsxs)("div",{className:I.s.flex.justifyBetween.m8.h24.$,children:[(0,a.jsx)(r4.$$,{className:"favorited_section--favoritesToMoveActionButtons--FUt77",onClick:()=>{t(tC.to({type:ar,data:{favorites:_}}))},children:(0,N.tx)("file_browser.planless_favorites.add_to_sidebar")}),(0,a.jsx)(r4.nR,{className:"favorited_section--unstarAllButton--Rhy3- favorited_section--favoritesToMoveActionButtons--FUt77",onClick:g,children:(0,N.tx)("file_browser.planless_favorites.unstar_all")})]})]}):null]})})}function ao(e){let t=(0,i.d4)(e=>e.currentTeamId),r=(0,i.wA)();return t?(0,a.jsx)(ek.SidebarRow,{isSelected:e.selectedView&&"limitedTeamSharedProjects"===e.selectedView.view,onClick:()=>{r(T.eP()),r(eS.Oe({clickedResourceType:"limitedTeamSharedProjects"}))},icon:(0,a.jsx)(tr.t,{}),text:(0,a.jsx)(C.E,{truncate:!0,children:(0,N.tx)("sidebar.all_shared_projects")}),wrapInListItem:!0}):null}function al(e){return e?(0,N.t)("sidebar.browse.all_workspaces"):(0,N.t)("sidebar.browse.all_teams")}function ad(){let e=(0,i.d4)(e=>e.currentUserOrgId),t=(0,i.d4)(t=>e?t.orgById[e]:null),r=(0,X.c4)(e).data??!1;return t&&e?(0,a.jsx)(a.Fragment,{children:al(r)}):null}function ac({hasWorkspaces:e}){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.currentUserOrgId),s=(0,i.d4)(e=>e.selectedView),n=(0,i.d4)(e=>r?e.orgById[r]:null),o="org"===s.view&&s.orgId===r,l=al(e);return n&&r&&l?(0,a.jsx)(ek.SidebarRow,{isSelected:o,onClick:()=>{t(eR.sf({view:"org",orgId:r,orgViewTab:tF.X.HOME})),t(eS.Oe({clickedResourceType:"org",resourceIdOrKey:r}))},icon:(0,a.jsx)(tr.t,{className:I.s.colorIcon.$}),text:(0,a.jsx)(C.E,{truncate:!0,children:l}),wrapInListItem:!0}):null}var au=r(641541),am=r(982327);let a_="seen_team_admin_moved_unassigned_drafts_onboarding",ap=(0,ep.r1)(a_);function af(){let e=(0,ed.md)(ap),{show:t,isShowing:r,complete:s}=(0,e_.e)({overlay:eb.tZO,priority:eg.N.DEFAULT_MODAL},[e]);return(0,m.h)(()=>{t({canShow:e=>!e})}),(0,a.jsx)(eh.rq,{arrowPosition:ex.F_.LEFT_TITLE,clickOutsideToHide:!0,description:(0,N.tx)("team_admin.onboarding.unassigned_drafts.description"),isShowing:r,onClose:s,primaryCta:{label:(0,N.tx)("general.got_it"),type:"button",onClick:s,ctaTrackingDescriptor:em.c.DONE},secondaryCta:{label:(0,N.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/4420549259799",ctaTrackingDescriptor:em.c.LEARN_MORE},shouldCenterArrow:ex.EL.FALLBACK,targetKey:ag,title:(0,N.tx)("team_admin.onboarding.unassigned_drafts.title"),trackingContextName:am.o8,userFlagOnShow:a_})}let ag="PRO_ADMIN_SETTINGS_LINK_ONBOARING_KEY";function ah(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.currentTeamId),n=(0,eY.px)(),o=(0,eY.W8)(n).unwrapOr(!1),l=(0,eY.No)(),d=(0,s.useMemo)(()=>l.transform(({tier:e})=>({isProTeam:e===eM.Ag.PRO,hasProAccess:e===eM.Ag.PRO||e===eM.Ag.STUDENT})),[l]);if("loaded"!==d.status)return null;let c=d.data;if(!r||!o||!c.hasProAccess)return null;let u=e.selectedView&&"teamAdminConsole"===e.selectedView.view,m=(0,a.jsx)(eV.e9,{planType:eG.ps.TEAM,planId:r,isSelected:u,isDataLoaded:!0,isOrgAdmin:!1});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e4,{badge:c.isProTeam?m:void 0,isSelected:u,dataTestId:"admin-settings-link",dataOnboardingKey:ag,onClick:()=>{t(eR.sf({view:"teamAdminConsole",teamId:r,isProTeam:c.isProTeam,teamAdminConsoleViewTab:c.isProTeam?eJ.Iv.DASHBOARD:eJ.Iv.MEMBERS})),t(eS.Oe({clickedResourceType:"teamAdminSettings",resourceIdOrKey:r}))}}),(0,a.jsx)(af,{})]})}var ax=r(501209),ab=r(169182),av=r(449184),ay=r(61705),aw=r(915202),aj=r(435788),aT=r(614223),aE=r(687265);function aI({onClickCta:e}){return(0,a.jsx)(aT.J,{brand:"seascape",children:(0,a.jsx)("div",{className:"xk0qfmw x1bamp8i x19y5rnk x1v8gsql xb3r6kr x1n2onr6",children:(0,a.jsxs)("div",{className:"xi4r6k5 x78zum5 xdt5ytf x6s0dn4",children:[(0,a.jsx)(aj.t,{}),(0,a.jsx)("div",{...er.xk(aN.title),children:(0,N.t)("file_browser.make_file_creation_promos.title")}),(0,a.jsx)("div",{className:"x2b8uid xkdneqi",children:(0,N.t)("file_browser.make_file_creation_promos.description")}),(0,a.jsx)(tO.IK,{onClick:e,children:(0,N.t)("file_browser.make_file_creation_promos.cta")})]})})})}let aN={title:{...aE.g.textBodyMediumStrong,textAlign:"x2b8uid",marginTop:"x7hzu26",$$css:!0}};function aC(){let e=(0,ay.$)({isDraftsFolder:!0,editorType:eM._Y.FIGMAKE,newFileFrom:aw.f6.FIGMAKE_SIDEBAR_PROMO,contextClicked:"make_sidebar_promo"});return s.useEffect(()=>{(0,av.sx)("Figma Make File Browser Sidebar Promo Viewed")},[]),(0,a.jsx)(aI,{onClickCta:e})}var aS=r(358013),ak=r(202688),aR=r(483726),aA=r(223767),aO=r(712384),aF=r(165519),aP=r(91689),aL=r(888808),aD=r(17223),aM=r(570310);let aB="base_upgrade_section--closeButton--cbjWt",aU=(0,r2.tf)(aP.l),aW=(0,r2.tf)(aL.k);function a$(){return(0,a.jsx)("div",{className:"base_upgrade_section--divider--k-uOp sidebar--divider--sHsz4"})}function aG(e){return(0,a.jsx)(r2.fu,{name:e.trackingContext,properties:e.trackingProperties,children:(0,a.jsxs)("div",{className:U()({"base_upgrade_section--content--95XrT":!e.demure,"base_upgrade_section--contentCollapsible--W7q8q base_upgrade_section--contentMindful--eOyhd base_upgrade_section--content--95XrT":e.demure&&e.collapsible,"base_upgrade_section--contentMindful--eOyhd base_upgrade_section--content--95XrT":e.demure&&!e.collapsible}),children:[e.collapsible&&(0,a.jsx)("div",{className:aB,children:e.isCollapsed?(0,a.jsx)(aU,{"aria-label":(0,N.t)("base_upgrade_section.expand"),onClick:()=>e.setIsCollapsed(!1),trackingProperties:{action:"expand"}}):(0,a.jsx)(aW,{"aria-label":(0,N.t)("base_upgrade_section.collapse"),onClick:()=>e.setIsCollapsed(!0),trackingProperties:{action:"collapse"}})}),e.onDismiss&&(0,a.jsx)(aD.Jn,{className:aB,onClick:e.onDismiss}),e.header&&(0,a.jsxs)("div",{className:I.s.wFull.if(e.demure,I.s.font13.lh24,I.s.mb12).$,children:[(0,a.jsx)("div",{className:"base_upgrade_section--header--NKOUG",children:e.header}),(!e.demure||e.collapsible&&!e.isCollapsed)&&(0,a.jsx)(a$,{})]}),!!e.icon&&e.icon,e.countDownDaysLeft&&(0,a.jsx)("div",{className:"base_upgrade_section--countdownTicker--6YLVt",children:(0,a.jsx)(C.E,{children:e.countDownDaysLeft,fontWeight:"medium",fontSize:14})}),!(e.collapsible&&e.isCollapsed)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:e.demure?"base_upgrade_section--textContainerMindful--CttjJ base_upgrade_section--baseTextContainer--t4bW6":"base_upgrade_section--textContainer--ObHaO base_upgrade_section--baseTextContainer--t4bW6",children:[e.titleText&&(0,a.jsx)("p",{className:"base_upgrade_section--title--MLhT1",children:e.titleText}),(0,a.jsx)("p",{children:e.bodyText})]}),(0,a.jsx)(aM.hK,{height:12}),(0,a.jsx)(el.Ih,{onClick:e.onClickCTA,"data-testid":e.ctaDataTestId,disabled:e.disabled,trackingProperties:e.ctaTrackingProperties,children:e.ctaText})]})]})})}let aV="upgrade_section--upgradeTextEmphasized--aQCr9";var az=(e=>(e[e.UPGRADE=0]="UPGRADE",e[e.CREATE=1]="CREATE",e))(az||{});function aH(e){let t=(0,i.wA)(),r=e.type,s=(0,a.jsx)("span",{className:aV,children:(0,N.t)("edu.sidebar_section.verified")});return(0,a.jsx)(aG,{trackingContext:0===r?"Edu Upgrade Section":"Edu Create Section",icon:(0,a.jsx)(ak.o,{}),bodyText:(0,a.jsxs)(a.Fragment,{children:[s," ",0===r?(0,N.t)("edu.sidebar_section.upgrade"):(0,N.t)("edu.sidebar_section.create_team")]}),ctaText:0===r?(0,N.t)("edu.choose_team"):(0,N.t)("edu.create_free_team"),onClickCTA:0===r?()=>{t((0,tC.to)({type:aO.q}))}:()=>{t(T.Dw({isEduTeam:!0}))},onDismiss:()=>{t(eP.b({dismissed_edu_sidebar:!0}))},ctaDataTestId:"edu-upgrade-cta"})}function aK({daysLeft:e}){let t=(0,i.wA)(),r=!!(0,tp.f)("edu_hide_verification");if(e<0)return null;let s=()=>{t((0,tC.to)({type:aA.V,data:{upsellSource:aF.b.EDU_UPGRADE_SECTION}}))},n=(0,a.jsx)(r6.eM,{onClick:()=>u.Ay.redirect("/education/apply",h.Ay.isIpadNative?void 0:"_blank"),children:(0,N.tx)("edu.sidebar_section.verify_your_education_status")});return e>0?(0,a.jsx)(aG,{trackingContext:"Universal Upgrade Section Education Plan Countdown",countDownDaysLeft:e,titleText:(0,N.tx)("edu.sidebar_section.education_plan_expires_in_days",{daysLeft:e}),bodyText:r?(0,N.tx)("edu.sidebar_section.bootcamp_users_after_that_you_ll_need_to_upgrade_your_team"):(0,N.tx)("edu.sidebar_section.after_that_you_ll_need_to_upgrade_your_team_or_verify",{verify:n}),ctaText:(0,N.tx)("upgrade.upgrade_to_professional"),onClickCTA:s}):(0,a.jsx)(aG,{trackingContext:"Universal Upgrade Section Education Plan Expired",icon:(0,a.jsx)(aR.e,{}),titleText:(0,N.tx)("edu.sidebar_section.education_plan_expired"),bodyText:r?(0,N.tx)("edu.sidebar_section.bootcamp_users_to_keep_editing_upgrade_your_team"):(0,N.tx)("edu.sidebar_section.to_keep_editing_upgrade_your_team",{verify:n}),ctaText:(0,N.tx)("upgrade.upgrade_to_professional"),onClickCTA:s})}var aY=r(573154),aq=r(375098),aJ=r(834575);let aX="dismissed_limited_team_space_uub";function aQ(e){let t=(0,i.wA)(),[r,n]=s.useState(!1),o=(0,p.Rs)(eK.qOl,{teamId:e.team.id}),l=(0,J.iZ)(),d="loaded"===o.status&&(0,ti.oA)(o.data?.teamRoleRequest),c=!!d&&"pending"===d.status,u=!!d&&"approved"===d.status,m=!!d&&"denied"===d.status;if(s.useEffect(()=>{c&&n(!0)},[c]),"loaded"!==o.status||u||m)return null;let _=async()=>{try{await aJ.$.requestTeamRole({teamId:e.team.id}),t(tl.F.enqueue({message:(0,N.t)("view_permissions.request_sent"),type:"request-team-membership"})),(0,V.uE)("limited_team_plan_request_upgrade_clicked",{user:l},{teamId:e.team.id}),n(!0)}catch(e){t(aY.s.error("Failed to request team role",e))}};return(0,a.jsx)(aG,{bodyText:(0,N.tx)("upgrade.to_get_unlimited_files_must_be_member",{currentTeamName:e.team.name}),ctaText:r?(0,N.tx)("upgrade.access_requested"):(0,N.tx)("upgrade.request_full_access"),ctaTrackingProperties:{},demure:"very",disabled:c||r,header:(0,N.tx)("upgrade.limited_access_in_this_team"),onClickCTA:_,onDismiss:()=>{t(aq.bE({all_team_flags:[{team_id:e.team.id,flags:{[aX]:!0}}]}))},trackingContext:"Limited Team Space Dismissable Upgrade Section",trackingProperties:{teamId:e.team.id}})}var aZ=r(860164),a0=r(109538),a1=r(698052);function a4({orgUpsellEligibility:e}){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.userFlags),s=e===a1.VY.SINGLE_TEAM?(0,N.tx)("upgrade.access_cross_team_design_libraries_sso_and_more"):(0,N.tx)("upgrade.centralize_your_teams_and_share_design_libraries"),n=`${e===a1.VY.SINGLE_TEAM?"Single-Team":"Multi-Team"} Dismissible Org Upgrade Section`;return(0,a.jsx)(aG,{trackingContext:n,icon:(0,a.jsx)(aZ.L,{}),bodyText:s,ctaText:(0,N.tx)("upgrade.view_plans"),onClickCTA:()=>{e===a1.VY.SINGLE_TEAM&&t((0,tC.to)({type:a0.HS,data:{upsellSource:aF.b.ORG_UPGRADE_SECTION}})),e===a1.VY.MULTIPLE_TEAMS&&t((0,tC.to)({type:a0.u3,data:{upsellSource:aF.b.ORG_UPGRADE_SECTION}}))},onDismiss:()=>t((0,a1.CJ)(r)),ctaDataTestId:"org-upgrade-cta"})}var a2=r(791136),a8=r(864281);let a5="dismissed_paid_free_space_uub";function a6(e){let t=(0,i.wA)(),r=a8.h.useTrackingContext({trigger:aF.b.UNIVERSAL_UPGRADE_SECTION}),{open:s}=(0,a2.OC)(),n=(0,a.jsx)(r6.eM,{onClick:()=>{s()},trackingProperties:{trackingDescriptor:em.c.WORK_IN_ONE_OF_YOUR_PAID_TEAMS},children:(0,N.tx)("upgrade.work_in_one_of_your_paid_teams")}),o=(0,N.tx)("upgrade.to_get_unlimited_files_and_features_link_switch_teams_or_upgrade_this_team_s_plan",{linkSwitchTeams:n});return(0,a.jsx)(aG,{trackingContext:"Paid Free Space Dismissible Upgrade Section",trackingProperties:{teamId:e.team.id,...r},header:(0,N.tx)("upgrade.this_team_is_on_a_free_plan"),bodyText:o,ctaText:(0,N.tx)("upgrade.view_all_plans"),onClickCTA:()=>{t((0,tC.to)({type:aA.V,data:{upsellSource:aF.b.UNIVERSAL_UPGRADE_SECTION}}))},ctaTrackingProperties:{trackingDescriptor:em.c.VIEW_ALL_PLANS},onDismiss:()=>{t(aq.bE({all_team_flags:[{team_id:e.team.id,flags:{[a5]:!0}}]}))},demure:"very"})}var a3=r(438674),a7=r(657224),a9=r(361035),se=r(692987),st=r(899624),sr=r(920435),sa=r(84777),ss=r(332483),si=r(712921),sn=r(831101);function so(e,t,r){let a=function(e,t){let r=(0,sa.jv)({billableProductKeys:ss.N_,baseQuery:{currency:e,tier:si.Ju.PRO,renewalTerm:t,unit:t}}),[a]=(0,f.mI)(r),s=(0,sa.vu)(a);if(null===s.data)throw Error("Price data is null");return(0,a9.s$)(s.data)}(e,t),s=ss.N_.dict(e=>r?.[e]||0);return(0,se.Vh)(s,a)}function sl({loading:e,data:t}){let r=(0,i.wA)(),s=(0,i.d4)(e=>e.teamBilling.summary),n=s.has_billing_address,[o,l]=(0,a7.Vc)("resubscription_section_collapsed",!1),{currency:d,annual_seats:c,monthly_seats:u}=s,m=so(d,sn.NW.YEAR,c)??0,_=so(d,sn.NW.MONTH,u)??0;if(e||!(m||_))return null;let{cancellationDate:p,paymentMethod:f,team:g,annualSubscription:h,monthlySubscription:x}=t,b=0;(0,st.v)(s)?(b=m,x?.canceled_at&&(b+=_)):b=_;let v=(0,a.jsx)("h4",{className:"xfifm61 x1s688f xd4r4e8 x1akne3o",children:(0,N.tx)("resubscription_section.header_text")}),y=(0,a.jsx)(a3.N,{href:"https://www.figma.com/pricing",children:(0,N.tx)("resubscription_section.link_so_much_more")});return(0,a.jsx)(aG,{bodyText:(0,N.tx)("resubscription_section.body_text",{linkSoMuchMore:y}),collapsible:!0,ctaDataTestId:"user-churning-cta",ctaText:(0,N.tx)("resubscription_section.cta_text"),ctaTrackingProperties:{trackingDescriptor:f?em.c.REACTIVATE_YOUR_PROFESSIONAL_PLAN:em.c.UPDATE_PAYMENT},demure:"very",header:v,isCollapsed:o,onClickCTA:()=>{f?r((0,tC.to)({type:a0.U6,data:{upsellSource:aF.b.RESUBSCRIBE_SECTION,paymentMethod:f,nextBillDate:p,amount:b,team:g,monthlySub:x,annualSub:h,currency:d,canSeeBillingAddressExp:n}})):(0,sr.C8)({team:g,dispatch:r,cancelling:!0,monthlySub:x,annualSub:h,currency:d,canSeeBillingAddressExp:n,estimatedChargeCents:b})},setIsCollapsed:l,titleText:(0,N.tx)("resubscription_section.title_text",{teamName:g.name,date:p}),trackingContext:"Resubscribe UUB"})}var sd=(e=>(e.LIMITED_TEAM_SPACE="Limited Team Space",e.EDU_EXPIRY="EDU Expiry",e.EDU_UPGRADE="EDU Upgrade",e.ORG_UPGRADE="Org Upgrade",e.PAID_FREE_SPACE="Paid Free Space",e.UNIVERSAL="Universal",e.RESUBSCRIPTION="Resubscription",e))(sd||{}),sc=(e=>(e.BETWEEN_CONTENT="between_content",e.AFTER_CONTENT="after_content",e.IN_FOOTER="in_footer",e))(sc||{});function su({onTeam:e,hitFileLimit:t}){let r=(0,i.wA)(),s=a8.h.useTrackingContext({trigger:aF.b.UNIVERSAL_UPGRADE_SECTION}),n=t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:aV,children:(0,N.tx)("upgrade.running_out_of_files_in_your_free_team")})," ",(0,N.tx)("upgrade.upgrade_to_give_your_ideas_and_designs_room_to_grow_without_limits")]}):(0,N.tx)("upgrade.ready_to_go_beyond_free_plan_upgrade_for_premium_features");return(0,a.jsx)(aG,{trackingContext:"Universal Upgrade Section",trackingProperties:{onTeam:e,hitFileLimit:t,...s},icon:(0,a.jsx)(aZ.L,{}),bodyText:n,ctaText:(0,N.tx)("upgrade.view_plans"),ctaTrackingProperties:{trackingDescriptor:em.c.UPGRADE},ctaDataTestId:"redesigned-upgrade-button",onClickCTA:()=>{r((0,tC.to)({type:aA.V,data:{upsellSource:aF.b.UNIVERSAL_UPGRADE_SECTION}}))}})}var sm=r(989992),s_=r(103090),sp=r(141320),sf=r(579169),sg=r(797994),sh=r(18797),sx=r(345997),sb=r(729732),sv=r(598018),sy=r(270322);let sw=(0,ed.eU)(e=>{let t=e(sj);return!!t&&[eM.P4.FILES_LIMITED,eM.P4.FILES_LIMITED_LEGACY,eM.P4.WHITEBOARD_FILES_LIMITED,eM.P4.WHITEBOARD_FILES_LIMITED_BETA,eM.P4.SLIDE_FILES_LIMITED,eM.P4.SLIDE_FILES_LIMITED_BETA,eM.P4.GLOBAL_FILES_LIMITED_LEGACY,eM.P4.GLOBAL_FILES_LIMITED].some(e=>t?.restrictions_list?.includes(e))}),sj=(0,sy.bt)(e=>{let t=e.currentTeamId;return t?e.teams[t]:null});function sT(){let e=sI();return null===e?null:(0,a.jsx)(L.tH,{boundaryKey:"SidebarUpgradeSection",fallback:L.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:M.e.MONETIZATION_UPGRADES},children:(0,a.jsx)(sE,{...e})})}function sE(e){switch(e.type){case sd.RESUBSCRIPTION:return(0,a.jsx)(sl,{...e.props});case sd.EDU_EXPIRY:return(0,a.jsx)(aK,{daysLeft:e.props.daysLeft});case sd.EDU_UPGRADE:return(0,a.jsx)(aH,{type:e.props.type});case sd.ORG_UPGRADE:return(0,a.jsx)(a4,{orgUpsellEligibility:e.props.orgUpsellEligibility});case sd.PAID_FREE_SPACE:return(0,a.jsx)(a6,{team:e.props.team});case sd.LIMITED_TEAM_SPACE:return(0,a.jsx)(aQ,{team:e.props.team});case sd.UNIVERSAL:default:return(0,a.jsx)(su,{onTeam:e.props.onTeam,hitFileLimit:e.props.hitFileLimit})}}function sI(){let e=function(){let e=(0,J.iZ)(),t=(0,sv.ol)(),r=(0,eD.FC)(),a=(0,p.Rs)(eK.UpR,{}),s=a.data?.currentUser?.eduPeriodEnd,n=(0,i.d4)(e=>e.userFlags),o=(0,eY.D6)("useEduUpgradeSectionProps"),l=(0,eY.fh)(o).unwrapOr(!1);if(!e||"loaded"!==a.status)return null;let d=(0,sp.x$)(s,(0,sp.cn)(e)),c=d>0&&d!==1/0&&(0,sp.cn)(e)&&t?.student_team_state===eM.kU.STUDENT_TEAM_CURRENT,u=0===d&&t?.student_team_state===eM.kU.STUDENT_TEAM_EXPIRED&&(0,sx.oc)(t.id,r);if(c||u)return{type:sd.EDU_EXPIRY,props:{daysLeft:d}};if(!n.dismissed_edu_sidebar&&(0,sp.cn)(e)&&!l){let e=(0,sx.Kg)(r).length>0;return{type:sd.EDU_UPGRADE,props:{type:e?az.UPGRADE:az.CREATE}}}return null}(),t=function(){let e=(0,J.iZ)(),t=(0,i.d4)(e=>e.teams),r=(0,sv.ol)(),a=(0,ed.md)(sw),s=(0,ed.md)(sf.Lm),n=(0,p.Rs)(eK.kQI,{id:r?.id??""},{enabled:!!r}),o=(0,eI.vt)(),l=(0,eE.jn)();return e&&r&&"loaded"===n.status&&n.data.team?.hasPermission&&"loaded"===s.status&&s.data?!r||(0,sp.cn)(e)||(0,sx.w5)(t[r.id])||o||l?null:{type:sd.UNIVERSAL,props:{onTeam:Object.keys(t).length>0,hitFileLimit:a}}:null}(),r=function(){let e=(0,i.d4)(e=>e.userFlags),t=function(){let e=(0,eD.FC)(),t=(0,s_.R)(e=>({orgUsersByOrgId:e.orgUsersByOrgId,user:e.user,userFlags:e.userFlags,teams:e.teams,currentTeamId:e.currentTeamId})),r=(0,p.Rs)((0,eK.yQw)(t.currentTeamId?{teamId:t.currentTeamId}:null));return t.currentTeamId?r.transform(({team:r})=>(0,a1.hF)(t,e,r)):sm.Qw.loaded((0,a1.hF)(t,e,null))}(),r=(0,a1.j)(e);return t.transform(e=>e===a1.VY.NONE||r?null:{type:sd.ORG_UPGRADE,props:{orgUpsellEligibility:e},overrideLocation:sc.IN_FOOTER})}(),a=function(){let e=(0,J.iZ)(),t=(0,i.d4)(e=>e.teams),r=(0,sv.ol)(),a=(0,ed.md)(sf.Lm),s=(0,i.d4)(e=>e.userTeamFlags),n=(0,p.Rs)(eK.kQI,{id:r?.id??""},{enabled:!!r}),o=(0,G.Mi)();return!e||!r||"loaded"!==a.status||a.data||(0,sp.cn)(e)||(0,sx.w5)(t[r.id])||"loaded"!==n.status||!n.data.team?.hasPermission||!o()?null:(0,sg.gY)(s,a5,r.id,7776e6)?null:{type:sd.PAID_FREE_SPACE,props:{team:r},overrideLocation:sc.IN_FOOTER}}(),s=function(){let e=(0,J.iZ)(),t=(0,sv.ol)(),r=(0,Q.d)(),a=(0,i.d4)(e=>e.userTeamFlags);return e&&t&&r?(0,sg.gY)(a,aX,t.id,7776e6)?null:{type:sd.LIMITED_TEAM_SPACE,props:{team:t},overrideLocation:sc.IN_FOOTER}:null}();return null!==s?s:null!==e?e:null!==t?t:"loaded"===r.status&&r.data?r.data:null!==a?a:null}var sN=r(632989),sC=r(821223);let sS=(0,ed.eU)(!1);function sk(){let[e,t]=(0,ed.fp)(sS),r=(0,ed.md)(l.Bb);if(!r)return null;let s=async()=>{t(!0);let e=await r.prompt();"dismissed"===e.outcome&&t(!1),(0,av.sx)("add_to_chromebook_clicked",{installed:"accepted"===e.outcome})};return(0,a.jsxs)(sN.E,{...er.xk(sR.container,e&&sR.containerFadeOut),onClick:s,children:[(0,a.jsx)("span",{className:"x2lah0s",children:(0,a.jsx)(sC.z,{})}),(0,a.jsx)(C.E,{truncate:!0,color:"default",children:(0,a.jsx)("span",{...er.xk(sR.text),children:(0,N.tx)("file_browser.tool_bar.add_to_chromebook")})})]})}let sR={container:{width:"xh8yej3",display:"x78zum5",alignItems:"x6s0dn4",opacity:"x1hc1fzr",padding:"xtdwleo",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,gap:"x167g77z",rowGap:null,columnGap:null,":focus-visible_boxShadow":"x1icplyp",$$css:!0},containerFadeOut:{opacity:"xg01cxk",pointerEvents:"x47corl",transition:"x177bw73",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,$$css:!0},text:{...aE.g.textBodyMedium,$$css:!0}};var sA=r(59509),sO=r(363675),sF=r(103637),sP=r(979714),sL=r(350203),sD=r(692865),sM=r(418961);function sB(){let e=(0,i.wA)(),t=(0,i.d4)(e=>e.userFlags),r=(0,sP.Om)(),s=(0,sP.tv)();return t[sD.w3]?null:(0,a.jsx)(r2.fu,{name:r5.e0.COMMUNITY_MOVED_TO_RESOURCE_HUB_BANNER,children:(0,a.jsx)("div",{className:"x15dj09p",children:(0,a.jsxs)(sA.cV,{icon:(0,a.jsx)(sF.U,{}),variant:"default",onDismiss:()=>{e(eP.b({[sD.w3]:!0}))},children:[(0,a.jsx)(sO.Q,{title:(0,N.t)("community.resource_hub.a_new_place_to_explore_community"),children:(0,a.jsx)("div",{className:"x1n0bwc9",children:(0,N.t)("community.resource_hub.introducing_templates_and_tools")})}),(0,a.jsx)(sN.E,{"aria-label":(0,N.t)("community.resource_hub.take_me_there"),...er.xk(sU.button),onClick:()=>{u.Ay.push(new sP.au({...r,tab:sL.N$.COMMUNITY},s).href),(0,sM.lz)()},children:(0,a.jsx)("div",{children:(0,N.t)("community.resource_hub.take_me_there")})})]})})})}let sU={button:{color:"x1quhyk7",...aE.g.textBodyMediumStrong,$$css:!0}};var sW=r(948584),s$=r(640564);function sG(){let e=(0,i.wA)(),t=()=>{(0,av.sx)("community_browser_sidebar_action_clicked"),e(eR.sf({view:"communityHub",subView:"searchAndBrowse",data:(0,s$.Gu)()}))};return(0,a.jsxs)(r2.L0,{trackingEventName:"community_browser_sidebar_action_clicked",className:U()(I.s.flex.flexRow.itemsCenter.gap12.h48.pl12.pr12.colorText.cursorDefault.$,"explore_community_button--hoverColor--mDUIs"),"data-onboarding-key":sD.vM,onClick:e=>{e.preventDefault(),e.stopPropagation(),t()},children:[(0,a.jsx)(sW.J,{}),(0,a.jsx)(C.E,{children:(0,N.tx)("sidebar.explore_community")})]})}function sV(e){let t=(0,eU.Fz)(),r=(0,eY.T5)("SidebarFooter"),s=(0,eU.LQ)(r),i=function(){let e=(0,l.lH)(),t=(0,ed.md)(l.Bb);return!!h.Ay.chromeos&&!!h.Ay.chrome&&!e&&!!t}(),n=function(){let{data:e}=(0,aS.E)(),t=(0,o.k)().make_sidebar_promo,r=(0,h.C8)();return!!e&&!!t&&!r}(),d=!(0,ab.sL)()&&!n,c=d&&t&&!s&&"loaded"===r.status,u=d&&(!t||s)&&"loaded"===r.status;return(0,a.jsxs)("div",{className:I.s.sticky.bottom0.colorBg.zIndex1.if(e.hasTopBorder,I.s.bt1.colorBorder.bSolid).$,children:[e.shouldShowUUBInFooter&&(0,a.jsx)("div",{className:I.s.pb10.pt12.$,children:(0,a.jsx)(sT,{})}),i&&(0,a.jsx)(sk,{}),n&&(0,a.jsx)(aC,{}),c&&(0,a.jsx)(sB,{}),u&&(0,a.jsx)(sG,{})]})}var sz=r(502363),sH=r(751556);function sK(e){return(0,a.jsxs)("div",{className:I.s.flex.flexColumn.colorBg.if(e.hasBottomBorder,I.s.bb1.colorBorder.bSolid).$,children:[(0,a.jsx)(sH.Xg,{}),(0,a.jsx)(sz.Zn,{})]})}var sY=r(352835);function sq(e){let t=(0,i.wA)(),r=(0,eA._6)(),s=(0,i.d4)(e=>e.currentUserOrgId),n=(0,i.d4)(e=>e.teamFeedBellStates),o=!!(s&&n[s]),l="teamFeed"===r.view;return(0,a.jsx)(ek.SidebarRow,{onClick:()=>{t(eR.sf({view:"teamFeed"})),t(eS.Oe({clickedResourceType:"teamFeed"}))},isSelected:l,icon:(0,a.jsx)(sY.h,{}),text:(0,a.jsx)("span",{className:"team_feed_page_link--sectionNameCustomSections--dPwog sidebar--sectionNameCustomSections--9e7LZ sidebar--sectionTextCustomSections---1KFn sidebar--sectionContentCustomSections--wI9mZ ellipsis--ellipsis--Tjyfa",children:(0,a.jsxs)("div",{className:"team_feed_page_link--sectionNameCustomSectionsLeft--MLMFK",children:[(0,N.tx)("fig_feed.feed"),o&&(0,a.jsx)("div",{className:"team_feed_page_link--redDot--t6QPY red_dot--baseRedDot--pgZV7"})]})}),wrapInListItem:!0})}function sJ({selectedView:e,teamFolderId:t,teamFolderName:r}){let s=(0,i.wA)();return t&&r?(0,a.jsx)(ek.SidebarRow,{isSelected:e&&"folder"===e.view&&e.folderId===t,onClick:()=>{s(T.gN(t)),s(eS.Oe({clickedResourceType:"folder"}))},icon:(0,a.jsx)(rO.e,{}),text:(0,a.jsx)(C.E,{truncate:!0,showTooltipWhenTruncated:!1,children:r}),"data-onboarding-key":to.Jo,wrapInListItem:!0}):null}var sX=r(265110);function sQ(){let e=(0,i.wA)(),t="deletedFiles"===(0,i.d4)(e=>e.selectedView).view;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(ek.SidebarRow,{isSelected:t,onClick:()=>{e(eR.sf({view:"deletedFiles"})),e(eS.Oe({clickedResourceType:"deletedFiles"}))},icon:(0,a.jsx)(sX.z,{}),text:(0,a.jsx)("div",{className:I.s.pr36.$,children:(0,a.jsx)(C.E,{children:(0,N.tx)("file_browser.tool_bar.trash")})}),wrapInListItem:!0})})}let sZ="sidebar--section--COZVK",s0="sidebar--loading--AITp2",s1="sidebar--divider--sHsz4";function s4(e){let t=(0,i.wA)(),r=(0,Y.dq)(),n=(0,i.d4)(e=>e.currentTeamId),l=(0,i.d4)(e=>e.userFlags),d=(0,eD.FC)(),c=(0,i.d4)(e=>e.userStateLoaded),u=(0,eA._6)(),m=(0,i.d4)(e=>e.dragState),_=eN({project:"drafts"}),[p,f]=s.useState(0),[g,x]=s.useState(!1),[b,v]=s.useState(!1),[y,w]=s.useState(!1),j=()=>{t(eP.b({show_create_new_section_banner:!1}))},T=(0,o.k)().file_browser_sidebar_semantic_html,E=()=>{t(eF.pS({newCustomSectionIndex:0})),j()},I=!!n,C=(0,Q.d)(),S=(0,eB.wA)(d),k=(0,eL.a9)(),R=k&&k.permission===eM._D.ADMIN,A=(0,eU.Fz)(),O=(0,z.D6)(r),F=()=>S&&l.show_create_new_section_banner?(0,a.jsxs)("div",{className:"sidebar--betaAnnouncementContainer--FfmFT",children:[(0,a.jsxs)("div",{className:"sidebar--betaAnnouncementHeader--g6Qzz",children:[(0,a.jsx)("div",{className:"sidebar--betaAnnouncementHeaderTitle--AyDjm",children:(0,N.tx)("favorited_resources.custom_sections_banner_header")}),(0,a.jsx)(ee.K,{"aria-label":(0,N.t)("common.close"),onClick:j,children:(0,a.jsx)(et.A,{})})]}),(0,a.jsxs)("div",{className:"sidebar--betaAnnouncementBodyContainer--8u60g",children:[(0,a.jsx)("p",{children:(0,N.tx)("favorited_resources.custom_sections_banner_body")}),(0,a.jsx)("br",{}),(0,a.jsx)("p",{children:(0,a.jsx)(el.$z,{variant:"secondary",onClick:E,children:(0,N.tx)("favorited_resources.custom_sections_banner_create_new_section_button")})})]})]}):null,P=()=>(0,o.k)().xr_debounce_threshold&&S&&k&&k.permission!==eM._D.GUEST?(0,a.jsx)(sq,{}):null,L=()=>c?(0,a.jsx)(sT,{}):null,D=I?e.dataDriftCorrectedTeamResources?.favoritedFiles:e.sidebarUser?.favoritedFiles,M=I?e.dataDriftCorrectedTeamResources?.favoritedPrototypes:e.sidebarUser?.favoritedPrototypes,B=I?e.dataDriftCorrectedTeamResources?.favoritedProjects:e.sidebarUser?.favoritedProjects;B&&e.FBGNavigationUpdatesTreatment!==G.ih.CONTROL&&(B=B.filter(t=>t.project?.id!==e.teamFolderId));let W=D?.length===0&&M?.length===0&&B?.length===0,$=e.FBGNavigationUpdatesTreatment===G.ih.CONTROL||!W,V=()=>c?(0,a.jsxs)(a.Fragment,{children:[r?(0,a.jsx)(r0,{fileBrowserPreferences:e.sidebarUser?.fileBrowserPreferences,favoritedFiles:D,favoritedPrototypes:M,favoritedProjects:B,favoritedTeams:e.sidebarUser?.favoritedTeams??null,favoritedWorkspaces:e.sidebarUser?.favoritedWorkspaces??null,userSidebarSections:e.sidebarUser?.userSidebarSections?(0,ea.oA)(e.sidebarUser.userSidebarSections):[],previewYOffset:p}):(0,a.jsx)(a.Fragment,{children:$&&(0,a.jsx)(rZ,{fileBrowserPreferences:e.sidebarUser?.fileBrowserPreferences,favoritedFiles:D,favoritedPrototypes:M,favoritedProjects:B,favoritedTeams:null,favoritedWorkspaces:null,previewYOffset:p})}),I&&(0,a.jsx)(an,{teamUser:e.sidebarUser?.currentTeamUser??null,dataDriftCorrectedTeamResources:e.dataDriftCorrectedTeamResources,previewYOffset:p})]}):(0,a.jsx)("div",{className:s0,children:(0,a.jsx)(ei.kt,{})}),H=sI(),K={[G.ih.CONTROL]:sc.BETWEEN_CONTENT,[G.ih.VARIANT_A]:sc.IN_FOOTER,[G.ih.VARIANT_B]:sc.AFTER_CONTENT}[e.FBGNavigationUpdatesTreatment],q=H?.overrideLocation??K,J=!!m.data&&(m.type===eW.R.Folder||m.type===eW.R.Team||m.type===eW.R.Favorite),X=!(e.showLoadingState||e.showingFileBrowserLoader);return(0,a.jsx)(es.A,{loadingElementId:"filebrowser-loading-sidebar",loaded:X,children:(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf xh8yej3",children:[(0,a.jsx)(sK,{hasBottomBorder:y}),(0,a.jsxs)(en.P,{className:"sidebar--sidebarScrollContainer--Z95XT",innerClassName:"sidebar--innerScrollContainer--JaOLM",scrollingDisabled:!1,onScroll:e=>f(e),children:[(0,a.jsx)(eo.a,{onIntersectionChange:t=>{w(!t.isIntersecting),t.isIntersecting||g||(e.trackScroll(),x(!0))}}),(0,a.jsxs)("div",{className:U()("sidebar--navContent--15V3f",{"sidebar--grabbingCursor--6rbhU":J,"sidebar--navWidth240--TCn98":(0,o.k)().file_browser_sidebar_row_ui}),children:[(0,a.jsx)("div",{className:"x78zum5 x1iyjqo2 xdt5ytf",children:T?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("ul",{children:[(0,a.jsx)(eO,{}),(0,a.jsx)(ty.r,{selectedView:u,dispatch:t}),A&&(0,a.jsx)(ax.w,{})]}),(0,a.jsx)("div",{className:s1}),(0,a.jsx)("div",{className:"x17qaar8 xr9ek0c xjpr12u",children:(0,a.jsx)(au.b,{})}),P(),(0,a.jsxs)("ul",{children:[e.draftsProject&&(0,a.jsx)(tv,{folder:e.draftsProject,selectedView:u,dispatch:t,shouldHideCreateFileButton:!_}),I&&(0,a.jsx)(a.Fragment,{children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ao,{selectedView:u}),(0,a.jsx)(sQ,{})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ta,{selectedView:u}),(0,a.jsx)(sQ,{}),(0,a.jsx)(ah,{selectedView:u}),e.FBGNavigationUpdatesTreatment!==G.ih.CONTROL&&(0,a.jsx)(sJ,{selectedView:u,teamFolderId:e.teamFolderId,teamFolderName:e.teamFolderName})]})})]}),q===sc.BETWEEN_CONTENT&&(0,a.jsxs)("div",{className:sZ,children:[!!H&&(0,a.jsx)("div",{className:"x7hzu26 x1ef8nbk xjm9jq1 x176lpz5"}),L()]}),S&&k&&c&&(0,a.jsxs)("ul",{children:[(0,a.jsx)(ac,{hasWorkspaces:e.isOrgWithWorkspaces}),(0,a.jsx)(sQ,{}),(0,a.jsx)(tt,{selectedView:u,org:S,orgUser:k}),R&&(0,a.jsx)(ej,{})]}),O&&F(),(0,a.jsx)("div",{className:s1}),(0,a.jsx)("section",{"aria-labelledby":"favorites-heading",children:V()}),q===sc.AFTER_CONTENT&&(0,a.jsx)("div",{className:"x7wzq59 x1ey2m1c x1yjdb4r x1a8lsjc xz9dl7a",children:L()})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eO,{}),(0,a.jsx)(ty.r,{selectedView:u,dispatch:t}),A&&(0,a.jsx)(ax.w,{}),(0,a.jsx)("div",{className:s1}),(0,a.jsx)("div",{className:"x17qaar8 xr9ek0c xjpr12u",children:(0,a.jsx)(au.b,{})}),P(),e.draftsProject&&(0,a.jsx)(tv,{folder:e.draftsProject,selectedView:u,dispatch:t,shouldHideCreateFileButton:!_}),I&&(0,a.jsx)(a.Fragment,{children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ao,{selectedView:u}),(0,a.jsx)(sQ,{})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ta,{selectedView:u}),(0,a.jsx)(sQ,{}),(0,a.jsx)(ah,{selectedView:u}),e.FBGNavigationUpdatesTreatment!==G.ih.CONTROL&&(0,a.jsx)(sJ,{selectedView:u,teamFolderId:e.teamFolderId,teamFolderName:e.teamFolderName})]})}),q===sc.BETWEEN_CONTENT&&(0,a.jsxs)("div",{className:sZ,children:[!!H&&(0,a.jsx)("div",{className:"x7hzu26 x1ef8nbk xjm9jq1 x176lpz5"}),L()]}),k&&S&&(c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ac,{hasWorkspaces:e.isOrgWithWorkspaces}),(0,a.jsx)(sQ,{}),S&&k&&!h.Ay.mobile&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tt,{selectedView:u,org:S,orgUser:k}),R&&(0,a.jsx)(ej,{})]})]}):(0,a.jsx)("div",{className:s0,children:(0,a.jsx)(ei.kt,{})})),O&&F(),(0,a.jsx)("div",{className:s1}),V(),q===sc.AFTER_CONTENT&&(0,a.jsx)("div",{className:"x7wzq59 x1ey2m1c x1yjdb4r x1a8lsjc xz9dl7a",children:L()})]})}),(0,a.jsx)(eo.a,{onInitialLoad:e=>{v(!e)},onIntersectionChange:e=>{v(!e.isIntersecting)}})]})]}),(0,a.jsx)(sV,{hasTopBorder:q===sc.BETWEEN_CONTENT&&(b||y),shouldShowUUBInFooter:q===sc.IN_FOOTER})]})})}function s2(e){let t=(0,J.iZ)(),r=(0,Y.dq)(),n=(0,Q.d)(),o=(0,i.d4)(e=>e.currentTeamId),l=(0,i.wA)(),d=(0,Z.v)({currentOrgId:r,currentTeamId:o||null}),c="loaded"===d.status?d.data:null,u="loaded"!==d.status;(0,g.WX)({markName:"Sidebar",isLoaded:!u});let m=(0,J.TA)(),_=(0,i.d4)(e=>m?e.authedUsers.byId[m]?.plans:null),[{status:p,data:h}]=(0,f.IT)((0,H.Xg)({teamId:o||void 0}),{enabled:!n}),x="loaded"===p&&h?.length===1?h[0]:null,b=x?.id,v=x?.name,y=null,w=(0,s.useMemo)(()=>c?{...c.currentUser}:null,[c]),j=(0,X.Zr)(c?.org??null),T=s.useMemo(()=>{if(w&&w.currentTeamUser&&o)return(0,z.TF)(w,o,_)},[w,o,_]),E=e.showingFileBrowserLoader;if(s.useEffect(()=>{if(o&&w&&w?.currentTeamUser){let e=w.currentTeamUser;!e.fileBrowserPreferences&&w.fileBrowserPreferences&&l(W.Sh({prefs:w.fileBrowserPreferences,orderedFolderSubscriptions:w.fileBrowserSectionPreferences?.filter(e=>e.teamId===o)[0]?.orderedFolderIds??[],teamUser:e}))}},[o,w,l]),w){if(r&&w.baseOrgUser){let e=w.baseOrgUser;w.fileBrowserPreferences=e.fileBrowserPreferences,w.fileBrowserSectionPreferences=e.fileBrowserSectionPreferences}else o&&w.currentTeamUser&&(w.fileBrowserPreferences=w.currentTeamUser?.fileBrowserPreferences);o?y=w.currentTeamUser?.draftsProject??null:r&&(y=w.baseOrgUser?.draftsProject??null)}return(0,a.jsx)(s4,{FBGNavigationUpdatesTreatment:(0,G.fn)(),dataDriftCorrectedTeamResources:T,draftsProject:y,isOrgWithWorkspaces:j,showLoadingState:u,showingFileBrowserLoader:E,sidebarUser:w,teamFolderId:b,teamFolderName:v,trackScroll:()=>(0,V.uE)("Sidebar Scrolled",{user:t})})}var s8=(e=>(e.FILE_BROWSER="FileBrowserSidebar",e.ADMIN="AdminSettingsSidebar",e))(s8||{});let s5={FileBrowserSidebar:M.e.WAYFINDING,AdminSettingsSidebar:M.e.SCALE};function s6(e){let t=(0,i.d4)(e=>e.mobileNavShown),r=(0,q.n)()?"AdminSettingsSidebar":"FileBrowserSidebar";return(0,a.jsx)("nav",{className:U()("sidebar--navDefault--pYuzm",{"sidebar--navDefaultWidth240--qFPqm":(0,o.k)().file_browser_sidebar_row_ui,"sidebar--showMobileNav--YiFit":t,"sidebar--showMobileNavWidth240--mMlvE":t&&(0,o.k)().file_browser_sidebar_row_ui}),children:(0,a.jsx)(L.tH,{sentryTags:{area:s5[r]},boundaryKey:r,fallback:(0,a.jsx)($.R,{}),hasCustomWASMBuild:K.y4,children:"FileBrowserSidebar"===r?(0,a.jsx)(s2,{...e}):(0,a.jsx)(R.ay,{})})})}var s3=r(740025),s7=r(967587),s9=r(642025),ie=r(502247),it=r(707808),ir=r(269770),ia=r(347406),is=r(12775),ii=r(444904),io=r(953812),il=r(783094),id=r(353894),ic=r(159448),iu=r(763686),im=r(436288),i_=r(191804),ip=r(583114),ig=r(153399);let ih=(0,ed.eU)(void 0),ix=(0,ed.eU)(!1),ib=(0,i_.H0)("#2c2c2c");function iv(e){let t=(0,ed.md)(ih);if(!e||"unset"===t)return;let r=(e.colorConfig?.colors??[])[0];return t?(0,im.colorToHex)(t):r}function iy(e){return!!e&&"unset"!==e}var iw=r(198885);function ij(e){return e.rightSideActions?(0,a.jsx)(iT,{headerLabel:e.label,rightSideActions:e.rightSideActions}):e.label}function iT(e){return(0,a.jsxs)("div",{className:"x78zum5 x1qughib xh8yej3 x6s0dn4 x40hh3e",children:[(0,a.jsx)("div",{className:"x2lah0s",children:e.headerLabel}),(0,a.jsx)("div",{className:"x78zum5 x167g77z xeuugli",children:e.rightSideActions})]})}function iE(e){let t=(0,Y.dq)(),r=(0,X.P)(t,(0,i.d4)(iw.o)),s=iv("Unassigned"===r.data?null:r.data);return(0,a.jsxs)("div",{...er.xk(iI.desktopHeader,e.showNavigationChevrons&&iI.desktopHeaderWithChevrons,!!e.pageHeaderContent&&!e.pageHeaderDividerHidden&&iI.desktopHeaderBorder),style:{backgroundColor:s},"data-testid":"file-browser-desktop-header",children:[e.showNavigationChevrons&&(0,a.jsx)(io.J,{parentBackgroundColor:s}),e.pageHeaderContent&&(0,a.jsx)("span",{className:"xeuugli xh8yej3",children:(0,a.jsx)(ij,{label:e.pageHeaderContent,rightSideActions:e.pageHeaderActions})})]})}let iI={desktopHeader:{display:"x78zum5",flexDirection:"x1q0g3np",flexShrink:"x2lah0s",gap:"x167g77z",rowGap:null,columnGap:null,alignItems:"x6s0dn4",height:"xsdox4t",paddingLeft:"x1tudf5h",paddingRight:"x1m2p0i2",paddingInlineStart:null,paddingInlineEnd:null,$$css:!0},desktopHeaderWithChevrons:{paddingLeft:"x5tiur9",paddingInlineStart:null,paddingInlineEnd:null,$$css:!0},desktopHeaderBorder:{borderBottom:"x1n5zjp5",borderBottomWidth:null,borderBottomStyle:null,borderBottomColor:null,$$css:!0}};var iN=r(27776);let iC=(0,il.jz)(iN.tgj);function iS(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(id.z,{query:`(min-width: ${iC}px)`,defaultClass:I.s.sticky.top0.colorBg.zIndexTopBar.$,children:(0,a.jsx)(iE,{pageHeaderContent:e.pageHeaderContent?(0,a.jsx)("h1",{className:"x193iq5w xuxw1ft xb3r6kr xlyipyv x13saxwh xg4jxnz x39l7i4 x1uvdjgy xo1l8bm",children:e.pageHeaderContent}):void 0,pageHeaderDividerHidden:e.pageHeaderDividerHidden,pageHeaderActions:e.pageHeaderActions,showNavigationChevrons:e.showNavigationChevrons})}),e.pageHeaderContent&&(0,a.jsx)(ic.i,{tabs:[(0,a.jsx)("h1",{className:"x193iq5w xuxw1ft xb3r6kr xlyipyv x13saxwh xg4jxnz x39l7i4 x1uvdjgy xo1l8bm",children:e.pageHeaderContent},"mobilePageHeaderKey")]})]})}function ik(e){let t=s.useRef(null),r=(0,i.d4)(({selectedView:e})=>e),n=(0,io.E)(),d=(0,is.K)(),u=(0,Y.sZ)(),m=d&&u&&!it.T8.includes(r.view);!function(){let e=(0,i.Pj)();s.useEffect(()=>{let t=e.getState(),r=(0,s9.getPermissionsState)(t),a=(0,s7.vp)(r.user,r.currentUserOrgId,r.currentTeamId);a&&(0,ie.Y9)(a.userId,(0,s3.d9)(t.selectedView),a.orgId,void 0,a.teamId)},[e])}();let _=(0,q.n)()||"litmus"===r.view,p=!e.showingFileBrowserLoader&&!_&&(!!c.eD||(0,l.ce)()||e.pageHeaderContent);s.useEffect(()=>{let e=e=>{e.keyCode===O.Uz.PERIOD&&document.activeElement?.tagName==="BODY"&&(0,o.k)().internal_only_debug_tools&&(0,o.k)().figment_debugger&&(0,ia.Y)()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]);let{scrollPerformanceMonitorRef:f}=function({flowName:e,scrollStopDelay:t=150,context:r}){let a=(0,s.useRef)(null),i=(0,s.useRef)(!1),n=(0,s.useRef)(null),o=(0,s.useRef)(null),l=(0,s.useCallback)(()=>{i.current||(i.current=!0,a.current=F.J6.createVital(e,{level:P.$.INFO,description:"Logging scroll performance via useScrollPerformanceMonitor",context:r,trackFps:!0}),a.current.start()),n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{i.current=!1,n.current=null,a.current?.stop()},t)},[t,e,r]);return(0,s.useEffect)(()=>{let e=o.current;if(e)return e.addEventListener("scroll",l),()=>{e.removeEventListener("scroll",l),n.current&&clearTimeout(n.current)}},[l]),{scrollPerformanceMonitorRef:o}}({flowName:"file_browser_main_body_scroll_performance",context:{selectedViewView:r.view}});return(0,a.jsxs)("div",{className:I.s.flex.flexRow.flexGrow1.$,ref:t,children:[(0,a.jsx)(s6,{showLoadingState:!1,showingFileBrowserLoader:e.showingFileBrowserLoader}),(0,a.jsxs)("div",{className:"file_browser_layout--fileBrowserPageViewContainer--m7oe2",ref:f,children:[p&&(0,a.jsx)(L.tH,{boundaryKey:"FileBrowserPageHeader",fallback:L.H4.NONE_I_KNOW_WHAT_IM_DOING,hasCustomWASMBuild:K.y4,children:(0,a.jsx)(iS,{pageHeaderContent:e.pageHeaderContent,pageHeaderActions:e.pageHeaderActions,showNavigationChevrons:n,pageHeaderDividerHidden:e.pageHeaderDividerHidden})}),(0,a.jsx)(L.tH,{boundaryKey:"FileBrowserLayout-content",fallback:(0,a.jsx)($.R,{}),hasCustomWASMBuild:K.y4,children:!e.showingFileBrowserLoader&&(m?(0,a.jsx)(ii.H,{org:u,isInFileBrowser:!0}):(0,a.jsx)(D.z,{layoutRef:t,children:e.children}))})]}),(0,a.jsx)(ir.G,{entryPoint:ir.Q.FILE_BROWSER})]})}var iR=r(90195),iA=r(831725),iO=r(409644),iF=r(191841),iP=r(88768),iL=r(504360),iD=r(247093),iM=r(915131),iB=r(195198);function iU({orgTeamsQuery:e,workspaceId:t}){let r=(0,i.wA)(),{currentOrgUser:n,teams:o,user:l,roles:d,orgId:c,orgName:u}=(0,s_.R)(e=>({currentOrgUser:e.orgUsersByOrgId[e.currentUserOrgId]?.[e.user.id],teams:e.teams,user:e.user,roles:e.roles,orgId:e.currentUserOrgId,orgName:e.orgById[e.currentUserOrgId].name})),{canCreateTeam:m}=(0,X.LM)(c?{id:c}:null,t),_="loaded"===e.status,p=s.useMemo(()=>{let t=e.data??[],r=t.length<tw.Tw;return(0,tw.KQ)(t,"name",{useExpensiveNaturalComparison:r}),t},[e]),f=n&&n.permission===eM._D.GUEST,g=Object.keys((0,iL.t)(d.byTeamId,l.id)).filter(e=>o[e]);if(f){let e=g.map(e=>o[e]).filter(e=>e.org_id===c);return(0,a.jsx)(iA.h,{teams:e,onLeave:e=>{r(tC.to({type:iB.p,data:{teamId:e.id}}))},orgName:u})}return _?(0,a.jsx)("div",{className:I.s.mt24.$,children:(0,a.jsx)(iF.w,{orgTeams:p,orgTeamStatus:e.status,onCreateTeam:m?()=>{let e={workspaceId:t??iD.O};r(tC.to({type:iM.Uc,data:e}))}:void 0,emptyView:t&&!m?(0,N.t)("team_tile.no_teams.empty_workspace"):void 0})}):(0,a.jsx)(iO.X,{isLoading:!0})}let iW=(0,ed.eU)(()=>sm.Qw.loaded([]));function i$({workspaceId:e,onlyJoinedTeams:t}){let r=(0,eD.FC)(),a=(0,eY.X$)("useFilteredOrgTeamsQuery").unwrapOr(null),i=(0,eY.H3)(a),n=!(0,s9.canMemberOrg)(i??null,r),o=(0,ed.md)(n?iW:iR.EK);return s.useMemo(()=>o.transform(a=>a.filter(a=>{if(t)return(0,s9.hasViewerRoleAccessOnTeam)(a.id,r);if(null===e){if(a.workspace_id)return!1}else if(e&&a.workspace_id!==e)return!1;return(0,iP.ox)(a,r)})),[o,r,t,e])}function iG({children:e}){return(0,a.jsxs)("section",{"aria-label":(0,N.t)("file_browser.teams"),children:[(0,a.jsx)("div",{className:I.s.mx32.textBodyLargeStrong.$,children:(0,a.jsx)("div",{children:(0,N.t)("file_browser.teams")})}),e]})}var iV=r(941192),iz=r(694593);function iH({avatar:e,title:t,rightSideActions:r,rightSideOfTitleAction:s,pageHeaderIcon:i,textColor:n,badge:o}){return(0,a.jsx)("div",{className:U()(I.s.mx32.mb20.$,"page_header--marginMobile--ocPfX"),children:(0,a.jsxs)("div",{className:I.s.flex.mt8.itemsCenter.justifyBetween.$,children:[(0,a.jsxs)("div",{className:I.s.flex.itemsCenter.minH40.minW0.$,children:[e,(0,a.jsx)("div",{className:I.s.wFull.overflowHidden.$,style:iV.sx.if(e&&!i,iV.sx.ml16).$,children:(0,a.jsxs)("span",{className:I.s.flex.itemsCenter.$,children:[i,(0,a.jsx)("h1",{style:{wordBreak:"break-word"},children:(0,a.jsxs)(C.E,{color:n,fontSize:24,truncate:"line-clamp",lineClamp:2,children:[t," "]})}),(0,a.jsx)("div",{className:I.s.ml8.$,children:o}),s&&s.element]})})]}),(0,a.jsx)("div",{className:I.s.flex.ml16.gap8.$,children:r?.map(e=>a.jsx(iz.K,{action:e},e.key))})]})})}function iK(e){let{belowHeaderItem:t,...r}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iH,{...r}),t]})}var iY=r(398386),iq=r(149844),iJ=r(901889);function iX(e){return(0,a.jsx)(tO.$n,{variant:"secondary",disabled:!0,htmlAttributes:{"data-tooltip-type":r8.Ib.TEXT,"data-tooltip":e.tooltipText,"data-tooltip-show-immediately":!0,onPointerEnter:e.onMouseEnter},"aria-describedby":e.tooltipText,children:e.text})}function iQ({backgroundColor:e}){let t=(0,iJ.NV)(V.WL),r=(0,i.d4)(e=>e.selectedView.view),s=(0,N.t)("license_group_view.toolbar.new_team_button"),n=()=>{t(V.jd,{placement:r})};return e?(0,a.jsx)("button",{className:U()("button_custom--buttonBase--H2KEL button--buttonBase---72nl",(0,i_.kx)(e)?"button_custom--buttonColorsForDarkBackground--CiydL":"button_custom--buttonColorsForLightBackground--wejKf","button_custom--buttonHugContents--Ntibj"),"data-tooltip-type":r8.Ib.TEXT,"data-tooltip":(0,N.t)("license_group_view.toolbar.create_team_disabled"),"data-tooltip-show-immediately":!0,onMouseEnter:n,disabled:!0,children:(0,a.jsx)(C.E,{fontSize:11,fontWeight:"medium",truncate:!0,children:s})}):(0,a.jsx)(iX,{text:s,tooltipText:(0,N.t)("license_group_view.toolbar.create_team_disabled"),onMouseEnter:n})}var iZ=(e=>(e.NEW_FILE="NEW_FILE",e.NEW_RESOURCE="NEW_RESOURCE",e.PROJECT_OVERFLOW_MENU="PROJECT_OVERFLOW_MENU",e.NEW_TEAM="NEW_TEAM",e.NEW_PROJECT="NEW_PROJECT",e.IMPORT="IMPORT",e.INVITE="INVITE",e.SHARE="SHARE",e.FAVORITE="FAVORITE",e.LOG_OUT="LOG_OUT",e.CLAIM="CLAIM",e.NEW_WHITEBOARD_FILE="NEW_WHITEBOARD_FILE",e.VIEW_COMMUNITY_PROFILE="VIEW_COMMUNITY_PROFILE",e.REQUEST_TO_EDIT="REQUEST_TO_EDIT",e.JOIN_TEAM="JOIN_TEAM",e.UPGRADE_TO_TEAM_ADMIN="UPGRADE_TO_TEAM_ADMIN",e.DROPDOWN="DROPDOWN",e.VIEW_MEMBERS="VIEW_MEMBERS",e.TEAM_OVERFLOW_MENU="TEAM_OVERFLOW_MENU",e.VIEW_LIBRARIES="VIEW_LIBRARIES",e.NEW_SITE_FILE="NEW_SITE_FILE",e.NEW_SLIDES_FILE="NEW_SLIDES_FILE",e.NEW_FIGMAKE_FILE="NEW_FIGMAKE_FILE",e.GET_DESKTOP_APP="GET_DESKTOP_APP",e.ADD_TO_CHROMEBOOK="ADD_TO_CHROMEBOOK",e.REQUEST_SENT_DESIGN="REQUEST_SENT_DESIGN",e.REQUEST_SENT_WHITEBOARD="REQUEST_SENT_WHITEBOARD",e.REQUEST_SENT_ALL="REQUEST_SENT_ALL",e.SETTINGS="SETTINGS",e))(iZ||{});function i0(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.currentUserOrgId),a=(0,eA._6)();return()=>{r?t(tC.to({type:iM.Uc,data:{workspaceId:e??iD.O}})):t(T.Dw({previousView:a}))}}function i1({workspace:e,org:t}){let{canCreateTeam:r,cannotCreateTeamReason:s}=(0,X.LM)(t,e?.id??null),i=iv(e),n=i0(e?.id);return s===X.z4.TEAM_CREATION_CONTROL?{kind:iz.A.CUSTOM,key:iZ.NEW_TEAM,element:(0,a.jsx)(iQ,{backgroundColor:i})}:r?{kind:iz.A.CUSTOM,key:iZ.NEW_TEAM,element:(0,a.jsx)(el.c,{"aria-label":(0,N.t)("license_group_view.toolbar.new_team_button_aria_label"),variant:"primary",onClick:n,iconPrefix:(0,a.jsx)(iq.e,{}),children:(0,N.t)("license_group_view.toolbar.new_team_button")})}:null}function i4(){let e=(0,Y.sZ)(),t=i1({org:e,workspace:null}),r=i$({workspaceId:null,onlyJoinedTeams:!1});return(0,a.jsx)(iY.r,{header:(0,a.jsx)(iK,{title:(0,N.t)("license_group_view.meta.unassigned_title",{orgName:e.name}),rightSideActions:t?[t]:void 0}),content:(0,a.jsx)("div",{className:I.s.flex.flexColumn.my24.$,children:(0,a.jsx)(iG,{children:(0,a.jsx)(iU,{orgTeamsQuery:r,workspaceId:null})})})})}var i2=r(391338),i8=r(863010),i5=r(713624);function i6(e,t){return i3(e.slice(0,t.length),t).filter(({path:e,oldValue:t,newValue:r})=>{let a=e[1];return 2!==e.length||"string"!=typeof a||(!i9.includes(a)||!!t||!!r)&&a in i5.hJ.shape&&!i7.includes(a)})}let i3=(0,i2.BG)({strictLists:!0,strictRecords:!0}),i7=["community_profile_handle","community_profile_id","design_default_paid_status","experiment_assignments","figma_provided_libraries_disabled","last_upgraded_at","legal_name","license_group","license_group_id","sanctioned_at","student_autoverifying_team_at","subscription_raw","tax_id_verification_status","vat_gst_id","whiteboard_default_paid_status"],i9=["description","editors","img_url"];var ne=r(606725),nt=r(443820),nr=r(243271),na=r(379902),ns=r(289770),ni=r(860955),nn=r(29593);function no(e){return(0,a.jsx)("div",{className:"x1iog12x",children:(0,o.k)().fb_page_header_fpl_menu?(0,a.jsx)(nl,{...e}):(0,a.jsx)(nd,{...e})})}function nl({buttonAriaLabel:e,menuGroups:t,dataOnboardingKey:r}){let{manager:s,getTriggerProps:i}=ni.b({initialPosition:"bottom"}),n=(0,r2.j6)();return(0,a.jsxs)(ni.bL,{manager:s,children:[(0,a.jsx)(tq.d,{...i(),"aria-label":e,"data-onboarding-key":r,children:(0,a.jsx)(aL.k,{})}),(0,a.jsx)(nn.s,{groups:t,minItemContentWidth:192,trackedContext:r5.e0.PAGE_HEADER_DROPDOWN,onTrackedItemClick:e=>{(0,V.Cu)({...n.properties,trackingContext:n.name,...e.trackingProperties})}})]})}function nd(e){let t=(0,i.wA)(),r=s.useRef(null),n=(0,i.d4)(({dropdownShown:e})=>e),o=(0,nn.o)(e.menuGroups),l=!!(n&&n.type===e.dropdownKey&&n.data&&n.data.targetRect),d=(0,r2.j6)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tq.d,{ref:r,"aria-expanded":l,"aria-label":e.buttonAriaLabel,onClick:()=>{if(r.current){if(n){t(eR.oB());return}t(eR.j7({type:e.dropdownKey,data:{targetRect:r.current.getBoundingClientRect()}}))}},"data-onboarding-key":e.dataOnboardingKey,children:(0,a.jsx)(aL.k,{})}),l&&(0,r2.T8)((0,a.jsx)(tS.j,{parentRect:n?.data?.targetRect,minWidth:224,rootAndSubmenuMaxWidth:224,items:o,dispatch:t,onSelectItem:e=>{e.callback&&e.callback("",null,t),e.trackingProperties&&(0,V.Cu)({...d.properties,trackingContext:d.name,...e.trackingProperties})},showPoint:!0}),r5.e0.PAGE_HEADER_DROPDOWN)]})}var nc=r(231188),nu=r(952832),nm=r(102449),n_=r(91315),np=r(774364),nf=r(815584);let ng=rl.M4.Mutation(async e=>{await np.u.updateDescription(e)}),nh=(0,tE.Ju)(function({workspace:e}){let t=(0,i.wA)(),r=(0,rl.gY)(ng);return(0,a.jsx)(nf.c,{title:(0,N.t)("workspace_view.description_modal.title"),subtitle:(0,a.jsx)("div",{className:I.s.mb16.$,children:(0,a.jsx)(C.E,{color:"secondary",children:(0,N.tx)("workspace_view.description_modal.subtitle",{allWorkspacesText:(0,a.jsx)("span",{className:I.s.fontSemiBold.$,children:(0,N.t)("sidebar.browse.all_workspaces")})})})}),initialName:e.description??"",placeholder:(0,N.t)("workspace_view.description.placeholder"),submitText:(0,N.t)("workspace_view.description.save"),onRename:a=>r({workspaceId:e.id,description:a}).then(()=>t(tl.F.enqueue({message:(0,N.t)("workspace_view.description_update_updated")})),()=>{let e=(0,N.t)("workspace_view.description_update_error");t(aY.s.error(e)),console.error(e)})})},"UpdateWorkspaceDescriptionModal");function nx(){let e=(0,i.wA)(),t=(0,J.TA)();return s.useCallback(r=>{let a=r.workspace.admins.some(e=>e.baseOrgUser?.user.id===t),s=[];a&&s.push({key:"admin",items:[{displayText:(0,N.t)("workspace_view.toolbar.admin_settings"),onClick:()=>{e(eR.sf({view:"workspace",subView:te.V0.ADMIN,workspaceId:r.workspace.id,selectedTab:te._C}))}}]});let i={key:"default",items:[]};return s.push(i),i.items.push({displayText:(0,N.t)("file_browser.copy_link"),onClick:()=>{let t=(0,rd.fO)(r.workspace.id,r.org.id);e(t3.S({url:t}))}}),r.workspace.canAdmin&&i.items.push({displayText:(0,N.t)("license_group_view.toolbar.change_icon"),onClick:()=>{e((0,n_.X)({entity:r.workspace,entityType:nu.ck.WORKSPACE,shape:"SQUARE"}))}}),s},[e,t])}var nb=r(236327),nv=r(640017),ny=r(932285),nw=r(439493),nj=r(90441),nT=(e=>(e.SOLID="solid",e.NO_FILL="no_fill",e))(nT||{});function nE({selectedFillOption:e,onSelectFillOption:t}){let r={solid:(0,N.t)("workspace_view.toolbar.solid"),no_fill:(0,N.t)("workspace_view.toolbar.no_fill")};return(0,a.jsx)(nb.Ve,{className:I.s.ml8.colorTextMenuSecondary.colorIconMenuSecondary.$,dropdownButton:function({onClick:t}){return(0,a.jsx)(nw.$n,{className:I.s.ml4.mr4.$,role:"combobox",onClick:t,caret:"down",children:(0,a.jsx)("span",{className:I.s.minW32.mr8.$,children:r[e]})})},dropdownOptionsClassName:I.s.mt4.$,options:["solid","no_fill"].map((e,s)=>(0,a.jsx)(nb.c$,{className:I.s.colorTextMenuSecondary.$,id:e,onClick:()=>{t(e)},children:r[e]},s)),optionsBelowSelector:!0,noBorder:!0})}let nI=rl.M4.Mutation(async e=>{await np.u.updateColor(e)});function nN({workspace:e,onClose:t}){let r=(0,i.wA)(),n=(0,rl.gY)(nI),o=[{option:ib},...(0,ig.TS)("base").filter(e=>!(0,i_.DA)(e,(0,ig.BV)(iu.daH.BLACK,"base"))).map(e=>({option:e})),...(0,ig.TS)("baseLight").map(e=>({option:e}))],l=s.useRef(null),[d,c]=s.useState(!1),u=(0,nv.DP)(),m=function(e){try{if(e)return(0,i_.H0)(e)}catch(e){console.error(e)}}((e?.colorConfig?.colors??[])[0]),[_,p]=s.useState(m?"solid":"no_fill"),[f,g]=(0,ed.fp)(ih);return s.useEffect(()=>(g(m),()=>{g(void 0)}),[]),s.useEffect(()=>{if(!d){let e=e=>{"Escape"===e.key&&t()},r=e=>{l.current&&!l.current.contains(e.target)&&t()};return document.addEventListener("keydown",e),document.addEventListener("pointerdown",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("pointerdown",r)}}},[d,t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{role:"button","aria-label":(0,N.t)("common.close"),tabIndex:0,className:I.s.absolute.wFull.hFull.top0.left0.zIndexTertiaryModal.$,onClick:t}),(0,a.jsxs)("div",{className:I.s.absolute.flex.h40.justifyCenter.alignCenter.flexShrink0.bRadius4.colorBgMenu.elevation400.mt8.ml32.zIndexModal.$,ref:l,children:[(0,a.jsx)(nE,{selectedFillOption:_,onSelectFillOption:e=>{if(p(e),"solid"===e){let e="dark"===u?ib:i_.UE;g(m??e)}else g("unset")}}),iy(f)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(nw.wv,{}),(0,a.jsx)(ny.qW,{buttonClassName:I.s.ml2.mr2.$,buttonSize:"xsmall",dropperDisabled:!0,fixedNumColumns:9,hasNonWhiteboardColors:!0,isColorPopoverOpen:d,onColorChange:e=>{g(e.option)},optionSize:"medium",options:o,paletteType:"base",positionX:()=>0,positionY:(e,t)=>(0,nj.DH)(e,t,4),setIsColorPopoverOpen:c,shouldCustomColorPopoverCloseOnEscape:!0,shouldDisableDataTooltip:!0,value:{option:f}})]}),(0,a.jsx)(nw.wv,{}),(0,a.jsx)(nw.$n,{className:I.s.ml4.mr2.$,onClick:t,children:(0,a.jsx)("span",{className:I.s.mr1.colorTextToolbarSecondary.$,children:(0,N.t)("workspace_view.color.toolbar.cancel")})}),(0,a.jsx)(nw.$n,{className:I.s.mr8.$,onClick:()=>{n({workspaceId:e.id,colors:iy(f)?[(0,im.colorToHex)(f)]:[],onfulfilled:()=>r(tl.F.enqueue({message:(0,N.t)("workspace_view.toolbar.workspace_color_updated")})),onrejected:()=>{let e=(0,N.t)("workspace_view.toolbar.workspace_color_update_error");r(aY.s.error(e)),console.error(e)}}),t()},children:(0,a.jsx)("span",{className:I.s.colorTextOnbrand.$,children:(0,N.t)("workspace_view.color.toolbar.save")})})]})]})}var nC=r(437088),nS=r(150656),nk=r(38914),nR=r(272243),nA=r(563413),nO=r(391205);let nF=(0,i.Ng)(e=>({currentUserId:e.user?.id}))(function(e){let t=t=>{t.stopPropagation(),e.canLeave&&e.onLeaveClick()},r=e.members.length,s=e.membersToShow||10;return(0,a.jsxs)("div",{children:[!e.removeHeader&&(0,a.jsx)("div",{className:I.s.font13.fontMedium.mb12.$,children:e.label||(0,N.t)("file_browser.team_overview.member_label")}),e.members.slice(0,s).map(r=>{let s=r.id===e.currentUserId,i=e.showAdminBadge&&e.showAdminBadge(r);return(0,a.jsx)(rV.az,{size:24,entity:r,className:e.customAvatarRowStyle?e.customAvatarRowStyle:I.s.font13.mb16.$,showIsMe:s,onClick:e.onMemberClick,badge:i?{color:r1.zE.DEFAULT,text:(0,N.t)("file_browser.badge_label.admin")}:void 0,includeUserEmailAddress:e.shouldIncludeUserEmailAddress,children:e.canLeave&&s&&(0,a.jsx)("span",{onClick:t,className:"members_preview--leaveLink--v8vxs text--fontPos13--xW8hS text--_fontBase--QdLsd blue_link--blueLink--9rlnd",children:(0,N.tx)("file_browser.team.leave_confirm")})},r.id)}),r>s&&(e.customOverflowRow||(0,a.jsxs)("div",{className:"members_preview--totalMemberCountContainer--wYQwX",onClick:e.onClickShowMore,children:[(0,a.jsx)(t0.B,{svg:nO.A,className:"members_preview--teamIcon--UFW2s"}),(0,a.jsx)("div",{className:"members_preview--totalMemberCount--D3Q8a text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,N.tx)("file_browser.team_overview.num_others",{numMembers:r-s})})]}))]})});var nP=r(895626),nL=(e=>(e.MEMBERS="MEMBERS",e.ADMINS="ADMINS",e))(nL||{});function nD(e){return(0,a.jsx)("div",{className:"workspace_members_modal--searchContainer--KGPrU modal--searchContainer--EA8ib",children:(0,a.jsx)(nA.IW,{className:"workspace_members_modal--searchBar--z110d",focusOnMount:!0,query:e.query,clearSearch:()=>{e.onChange("")},onChange:e.onChange,hideXIcon:!0,hasTransparentBackground:!0,iconClassName:"workspace_members_modal--searchIcon--7DSd4",placeholder:(0,N.t)("workspace_view.members_modal.search_placeholder")})})}function nM(e){return(0,a.jsx)("div",{className:"workspace_members_modal--emptyContainer--bTf-s",children:(0,a.jsx)("div",{className:"workspace_members_modal--emptyState--IwqA2 text--fontPos11--2LvXf text--_fontBase--QdLsd",children:e.content})})}let nB=(e,t)=>null===e.baseOrgUser?-1:null===t.baseOrgUser?1:e.baseOrgUser.user.handle.localeCompare(t.baseOrgUser.user.handle),nU=(0,tE.Ju)(function(e){let t=nC.hS({open:e.open,onClose:e.onClose}),[r,i]=(0,s.useState)(""),[n,o,l]=nS.t.useTabs({MEMBERS:!0,ADMINS:!0});s.useEffect(()=>{i("")},[i,l.activeTab]);let d=e.workspace.members.slice().sort(nB),c=e.workspace.admins.slice().sort(nB),u={};d.forEach(e=>{e.baseOrgUser&&(u[e.baseOrgUser.user.id]=e.permission)});let m=e=>u[e.id]===eM.bp.ADMIN&&"MEMBERS"===l.activeTab;return(0,a.jsx)(nk.bL,{manager:t,width:"lg",height:"fixed",children:(0,a.jsxs)(nR.vo,{children:[(0,a.jsxs)(nR.Y9,{children:[(0,a.jsx)(nR.r1,{children:(0,N.t)("workspace_view.members_modal.title")}),(0,a.jsxs)(nS.t.TabStrip,{manager:l,children:[(0,a.jsx)(nS.t.Tab,{...n.MEMBERS,children:(0,N.t)("workspace_view.members_modal.members")}),(0,a.jsx)(nS.t.Tab,{...n.ADMINS,children:(0,N.t)("workspace_view.members_modal.admins")})]})]}),(0,a.jsxs)(nR.nB,{scrolling:"none",padding:0,children:[(n.MEMBERS.display?d:c).length>0&&(0,a.jsx)(nD,{query:r,onChange:i}),(0,a.jsx)(en.P,{className:"workspace_members_modal--outerContainer--in03x",innerClassName:"workspace_members_modal--membersContainer--16pMi",children:(0,a.jsxs)("div",{className:"workspace_members_modal--modalContainer--3d9wu",children:[(0,a.jsx)(nS.t.TabPanel,{...o.MEMBERS,children:0===d.length?(0,a.jsx)(nM,{content:(0,N.tx)("workspace_view.members_modal.no_members",{workspaceName:e.workspace.name})}):(0,a.jsx)(nW,{getShouldShowAdminBadge:m,query:r,users:d})}),(0,a.jsx)(nS.t.TabPanel,{...o.ADMINS,children:0===c.length?(0,a.jsx)(nM,{content:(0,N.tx)("workspace_view.members_modal.no_admins",{workspaceName:e.workspace.name})}):(0,a.jsx)(nW,{getShouldShowAdminBadge:m,query:r,users:c})})]})})]})]})})},"WORKSPACE_MEMBERS_MODAL",tE.ZU.YES);function nW({getShouldShowAdminBadge:e,query:t,users:r}){let n=(0,i.wA)(),o=s.useCallback((e,t)=>{n(eR.sf({view:"user",userId:t.id,userViewTab:nP.o.INTERNAL_PROFILE})),n(tC.Ce())},[n]),l=r.filter(e=>{let r=e.baseOrgUser?.user,a=t.toLocaleLowerCase();return!!r?.email?.toLocaleLowerCase().includes(a)||!!r?.handle.toLocaleLowerCase().includes(a)}).map(e=>{let t=e.baseOrgUser.user;return{id:t.id,handle:t.handle,img_url:t.imgUrl,email:t.email}})||[];return 0===l.length?(0,a.jsx)(nM,{content:(0,N.tx)("workspace_view.members_modal.no_results",{query:t})}):(0,a.jsx)(nF,{members:l,showAdminBadge:e,membersToShow:l.length,canLeave:!1,customAvatarRowStyle:"workspace_members_modal--memberPopup--y5bbv text--fontPos13--xW8hS text--_fontBase--QdLsd admin_settings_page--avatarWithHandle--awCiS ellipsis--ellipsis--Tjyfa",onMemberClick:o,removeHeader:!0,shouldIncludeUserEmailAddress:!0})}function n$(e){let{workspace:t,org:r}=e,n=(0,i.wA)(),o=(0,i.d4)(e=>e.currentUserOrgId),l=(0,i.d4)(e=>e.avatarEditorState),d=t.canAdmin,[c,u]=(0,ed.fp)(ix),{canCreateTeam:m}=(0,X.LM)(r,t.id),_=window.innerWidth<=(0,il.hG)(iN.tgj),p=t?t.id:iD.O,f=iv(t),g=function(e){if(e&&"unset"!==e)return(0,i_.kx)(e)?"dark":"light"}(f),h=(t?.members||[]).length,x=(0,ns.G)(),b=i0(t.id),v=s.useCallback((e,r,a)=>{if(t){let s={workspace:{id:t.id,name:t.name??"",imgUrl:t.imgUrl},entrypoint:"workspace_page_view",sectionId:a,favoriteId:r};e?n(eF.ZW(s)):n(eF.if(s))}},[n,t]),y={kind:iz.A.CUSTOM,key:iZ.VIEW_MEMBERS,element:(0,a.jsx)(el.c,{variant:"secondary",onClick:()=>{n(tC.to({type:nU,data:{workspace:e.workspace,tab:nL.MEMBERS}}))},iconPrefix:(0,a.jsx)(nr._,{}),htmlAttributes:{"data-tooltip-type":r8.Ib.TEXT,"data-tooltip":(0,N.t)("file_browser.view_members_with_count",{numMembers:h})},"aria-label":(0,N.t)("file_browser.view_members_with_count",{numMembers:h}),children:e.isWorkspaceMembersLoading?(0,a.jsx)(nt.k,{}):(0,a.jsx)(a.Fragment,{children:h.toString()})})},w=s.useMemo(()=>(0,a.jsx)(nc.i,{setFavorite:v,favoriteType:eM.bk.WORKSPACE,resourceId:p,orgId:o,monochrome:!!f,size:"lg"}),[p,v,o,f]),j=function(){let e=nx(),t=(0,i.wA)(),[r,a]=(0,ed.fp)(ix);return s.useCallback(r=>{let s=e(r),i=s[s.length-1];return i||(i={key:"workspace-page-header-menu-items",items:[]},s.push(i)),r.workspace.canAdmin&&(i.items.push({displayText:(0,N.t)("workspace_view.toolbar.change_color"),onClick:()=>a(!0)}),i.items.push({displayText:(0,N.t)("workspace_view.description.title"),onClick:()=>{t(tC.to({type:nh,data:{workspace:r.workspace}}))}})),s},[e,t,a])}(),T=t&&r?j({workspace:t,org:r}):m&&_?[{key:"mobile-workspace-page-header-menu-items",items:[{displayText:(0,N.t)("org_view.new_team"),onClick:b}]}]:void 0,E=[],I=i1({workspace:t,org:r});if(I&&E.push(I),e.showMembersButton&&E.push(y),t&&E.push({kind:iz.A.CUSTOM,key:iZ.FAVORITE,element:w}),!t)return(0,a.jsx)(iK,{title:(0,N.t)("license_group_view.meta.unassigned_title",{orgName:r.name}),rightSideActions:E});let C=T?{kind:iz.A.CUSTOM,key:iZ.DROPDOWN,element:(0,a.jsx)(no,{buttonAriaLabel:(0,N.t)("org_view.page_header_dropdown_label"),dropdownKey:`workspace-context-${t.id}`,menuGroups:T})}:void 0;return(0,a.jsx)("div",{style:{backgroundColor:f},children:(0,a.jsx)(aT.J,{mode:f?g:x.color,children:(0,a.jsx)(iK,{avatar:d?(0,a.jsx)(nm.j,{avatarEditorState:l,entityType:nu.ck.WORKSPACE,entity:t,dispatch:n,size:40}):(0,a.jsx)(rV.z6,{entity:t,size:40}),title:(0,a.jsx)("span",{className:"workspace_page_header--titleColorForBackground--e6EH9",children:t.name}),badge:t.orgAccess===eM.bU.SECRET?(0,a.jsx)("div",{"data-tooltip-type":r8.Ib.TEXT,"data-tooltip":(0,N.t)("workspace_table.secret_workspace_lock_tooltip"),"data-tooltip-subtext":(0,N.t)("workspace_table.secret_workspace_lock_tooltip_subtext"),"data-tooltip-timeout-delay":500,"data-tooltip-max-width":300,children:(0,a.jsx)(na.$,{className:"workspace_page_header--iconColorForBackground--QSzJh"})}):void 0,rightSideActions:E,rightSideOfTitleAction:C,belowHeaderItem:c?(0,a.jsx)(nN,{workspace:t,onClose:()=>u(!1)}):void 0})})})}function nG(e){let t=(0,i.wA)(),r=e.workspace.members,n=s.useMemo(()=>r?r.sort((e,t)=>{let r=e.permission===eM.bp.ADMIN,a=t.permission===eM.bp.ADMIN;if(r&&!a)return -1;if(!r&&a)return 1;let s=e.baseOrgUser?.user?.handle||"",i=t.baseOrgUser?.user?.handle||"",n=""===s,o=""===i;return n&&!o?1:!n&&o?-1:n&&o?0:s.localeCompare(i,void 0,{sensitivity:"base"})}):[],[r]),o={};return n.forEach(e=>{e.baseOrgUser&&(o[e.baseOrgUser.user.id]=e.permission)}),(0,a.jsxs)("div",{className:I.s.my24.mr8.ml24.$,children:[(0,a.jsx)("div",{className:"workspace_page_meta_content--membersHeader--0jaJ3 text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,N.t)("workspace_view.sidebar.members")}),(0,a.jsx)(nF,{removeHeader:!0,members:n.map(e=>e.baseOrgUser?.user).filter(e=>!!e),onMemberClick:(e,r)=>{t(eR.sf({view:"user",userId:r.id,userViewTab:nP.o.INTERNAL_PROFILE}))},canLeave:!1,showAdminBadge:e=>o[e.id]===eM.bp.ADMIN,customOverflowRow:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("button",{className:"workspace_page_meta_content--seeAllMembers--mIOar text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:()=>{t(tC.to({type:nU,data:{workspace:e.workspace,tab:nL.MEMBERS}}))},children:(0,N.t)("workspace_view.sidebar.see_all_members")})})})]})}var nV=r(239603),nz=r(672640);function nH({isExpanded:e,fill:t,onClick:r}){return(0,a.jsx)("div",{role:"button",tabIndex:-1,className:U()("expand_caret--animation--GOE8s",{"expand_caret--expanded--MmsW9":e}),onClick:r,children:(0,a.jsx)(nz.In,{icon:"caret-right-16",fill:t})})}function nK({isOpen:e,toggleIsOpen:t,collapseHeader:r,content:s}){return(0,a.jsxs)("div",{className:I.s.flex.flexColumn.wFull.$,children:[(0,a.jsxs)("div",{className:I.s.flex.flexRow.gap4.itemsCenter.wFull.$,children:[(0,a.jsx)(nH,{isExpanded:e,fill:"secondary",onClick:t}),r]}),(0,a.jsx)("div",{className:I.s.grid.ml20.$,"aria-hidden":!e,style:iV.sx.add({transition:"grid-template-rows 0.3s ease"}).if(e,iV.sx.add({gridTemplateRows:"1fr"}),iV.sx.add({gridTemplateRows:"0fr"})).$,children:(0,a.jsx)("div",{className:I.s.if(!e,I.s.overflowHidden).$,children:s})})]})}var nY=r(850789),nq=r(999566),nJ=r(147337),nX=r(977218),nQ=r(607862);function nZ({title:e,confirmText:t,emptyStateText:r,onSelectFile:i,onSubmit:o,files:l,tileClassName:d,renderFileTile:c,query:u,setQuery:m,gridText:_,shouldDisableTile:p}){let[f,g]=s.useState(null),h=s.useCallback(()=>{f&&o(f)},[o,f]),x=s.useCallback(e=>{if(e.length>0){let t=e[0].key;i?.(t),g(t)}else g(null)},[i]);return(0,a.jsx)(n0,{title:e,onSubmit:h,confirmText:t,isDisabled:!f,query:u,onSearchChange:m,clearSearch:()=>m(""),searchPlaceholder:(0,N.t)("file_browser.choose_file_modal.search_for_a_file"),children:0===l.length?(0,a.jsx)("div",{className:"x78zum5 x1q0g3np x195vfkc x6s0dn4 xl56j7k x1n0bwc9 x5yr21d xh8yej3 x1iyjqo2 x2b8uid",children:r}):(0,a.jsxs)(a.Fragment,{children:[_&&(0,a.jsx)("span",{className:"x1n0bwc9",children:_}),(0,a.jsx)(nQ.g,{canSelectItem:e=>!p?.(e),containerStyle:n1.grid,doNotFocusOnLoad:!0,getAriaLabel:e=>e.name,handleContextMenu:n.lQ,isDraggable:!1,items:l,keepSelectionOnFocusLost:!0,multiselectDisabled:!0,onSelection:x,renderTile:c,renderTileFooter:()=>(0,a.jsx)(a.Fragment,{}),tileClassName:d})]})})}function n0({title:e,confirmText:t,onSubmit:r,isDisabled:s,children:i,query:n,onSearchChange:o,clearSearch:l,searchPlaceholder:d}){return(0,a.jsxs)(ae.Dd,{title:e,confirmText:t,onSubmit:r,disabled:s,maxWidth:1024,useRedesign:!0,fullWidthContent:!0,children:[(0,a.jsx)(nA.IW,{className:U()(I.s.px16.py8.colorBg.wFull.bb1.bSolid.colorBorder.borderBox.$,"choose_file_modal--heightOverride--QTue5"),hasTransparentBackground:!0,placeholder:d,focusOnMount:!0,query:n,onChange:o,clearSearch:l,iconClassName:I.s.colorIcon.$,hideXIcon:!0}),(0,a.jsx)(en.P,{className:"choose_file_modal--gridMaxHeight--8NKvW",innerClassName:I.s.hFull.gap12.flex.flexColumn.pt16.px24.borderBox.$,children:i})]})}let n1={grid:{paddingBottom:"x1l90r2v",$$css:!0}};var n4=r(950875),n2=r(977961);function n8({file:e,isDisabled:t,orgName:r}){let s=(0,rN.NN)();return(0,a.jsx)(n2.i,{thumbnail:(0,a.jsx)(rC.NM,{file:e,noBorder:!0}),bottomLeftIcon:(0,a.jsx)(rN.w4,{size:16,type:s(e)}),title:(0,a.jsxs)("div",{className:"x78zum5 x1q0g3np x1jnr06f x1jud9m8 x6s0dn4",children:[(0,a.jsx)("span",{...er.xk(n5.truncate,t&&n5.secondaryText),children:e.name}),t&&r&&(0,a.jsx)("span",{"data-tooltip-type":"text","data-tooltip":(0,N.t)("file_browser.pinning.choose_file_to_pin_modal.file_not_workspace_visible.tooltip",{orgName:r}),"data-tooltip-show-immediately":!0,"data-tooltip-show-above":!0,"data-tooltip-max-width":500,children:(0,a.jsx)(n4.B,{className:"xmauxvm"})})]}),subtitle:e.project?.name})}let n5={truncate:{whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,textOverflow:"xlyipyv",$$css:!0},secondaryText:{color:"x1n0bwc9",$$css:!0}},n6=(0,tE.Ju)(function({workspaceId:e}){let t=(0,i.wA)(),r=(0,eY.T5)("ChooseFileToPinModal").unwrapOr(null),o=r?.name??null,[l,d]=s.useState(""),[c]=(0,nY.A)(l,400),[u,m]=s.useState(null),_=s.useCallback(e=>{m(e)},[]);(0,p.Rs)(eK.wtK,{fileKey:u??""},{enabled:!!u});let f=function({searchQuery:e,workspaceId:t}){let r=sm.Qw.useTransformShallowEqual((0,p.Rs)(eK.z07,{}),e=>{if(!e.currentUser.recentFiles2)return[];let t=[];for(let{file:r}of e.currentUser?.recentFiles2)r&&t.push(r);return t}),a=function({searchQuery:e,workspaceId:t}){let r=(0,Y.dq)();(0,E.vA)(!!r,"currentUserOrgId must be defined in useSearchWorkspaceFilesQuery");let a=(0,p.Rs)(eK.Imb,{query:e,workspaceId:t,orgId:r,sort:"relevancy",desc:"true"},{enabled:!!e});return sm.Qw.useTransformShallowEqual(a,e=>{let t=[];for(let r of e.searchWorkspaceFiles)r.file&&t.push(r.file);return t})}({searchQuery:e,workspaceId:t}),s="disabled"!==a.status?a:r;return(0,nJ.z1)(s,t)}({searchQuery:c,workspaceId:e}),g=sm.Qw.useTransformShallowEqual(f,e=>e.map(e=>e.key)),h=(0,nJ.H6)(g.unwrapOr([])),x=s.useCallback(e=>{t(tC.ES(n6)),t(tC.to({type:(0,nq.a)(),data:{fileKey:e,source:l?"add_file_modal_search":"add_file_modal_suggested"}}))},[t,l]);s.useEffect(()=>(t(nX.Dy({entryPoint:"file_browser:file_picker_modal"})),t(nX.Rz({workspaceFilter:e})),()=>{t(nX.Rz({workspaceFilter:null})),t(nX.ky())}),[t,d,e]);let b=s.useCallback(e=>{d(e)},[]);if("loaded"!==h.status||"loaded"!==f.status)return(0,a.jsx)(n0,{title:(0,N.t)("file_browser.pinning.pin_modal.pin_file_to_workspace"),confirmText:(0,N.t)("general.next"),isDisabled:!0,query:l,onSearchChange:b,clearSearch:n.lQ,searchPlaceholder:(0,N.t)("file_browser.choose_file_modal.search_for_a_file"),children:(0,a.jsx)("div",{className:U()(I.s.flex.itemsCenter.justifyCenter.wFull.hFull.flexGrow1.$),children:(0,a.jsx)(ei.qc,{})})});let v=e=>{let t=h.data.get(e.key);return!!t&&!t?.canPinFileToWorkspace};return(0,a.jsx)(nZ,{confirmText:(0,N.t)("general.next"),emptyStateText:l?(0,N.tx)("file_browser.workspace_pinning.no_files_matching_query",{searchQuery:(0,a.jsx)("div",{className:I.s.colorText.fontMedium.truncate.$,children:l})}):(0,N.t)("file_browser.workspace_pinning.no_suggested_files"),files:f.data,gridText:l?void 0:(0,N.t)("file_browser.pinning.suggested"),onSelectFile:_,onSubmit:x,query:l,renderFileTile:(e,t)=>(0,a.jsx)(n8,{file:e,orgName:o,isDisabled:v(e)}),setQuery:b,shouldDisableTile:v,tileClassName:"choose_file_to_pin_modal--showOnHoverContainer--DO9-h",title:(0,N.t)("file_browser.pinning.pin_modal.pin_file_to_workspace")})},"ChooseFileToPinModal");var n3=r(819288),n7=r(457828),n9=r(531560),oe=r(939922),ot=r(13390),or=r(610691),oa=r(351112),os=r(943101),oi=r(756995);let on={open:!0,openNewTab:!0,showInFolder:!0,copyLink:!0,pinToWorkspace:!0};function oo({suggestedFiles:e}){let t=e.slice(0,8),r=(0,eA._6)(),n=(0,i.wA)(),{showing:o,show:l,data:d}=(0,ot.L)(),c=s.useCallback((e,t)=>{u.Ay.redirect((0,ri.r1)(e)),(0,V.k1)(e.key,{selectedViewName:r.view,entrypoint:"suggested_files_empty_state"}),t.stopPropagation(),t.preventDefault()},[r.view]),m=s.useCallback((e,t)=>{c(e,t)},[c]),_=s.useCallback((e,t,r)=>{let a=e[0];a&&l({data:{tile:(0,nJ.bn)(a),targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:r}})},[l]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"x1n0bwc9 xlyipyv xuxw1ft xb3r6kr",children:(0,N.t)("file_browser.pinning.suggested")}),(0,a.jsx)(oa.A,{items:t,multiselectDisabled:!0,isDraggable:!1,handleOpenItem:m,onSelection:e=>{n(re.an()),n(re.PW({type:ru.F.FILES,keys:e.map(e=>e.key)}))},handleContextMenu:_,gridViewProps:{containerStyle:od.grid,renderTile:e=>(0,a.jsx)("div",{className:"x1dmp6jm xkib98w xbyyjgo x12oqio5 xgk9eko xb3r6kr",children:(0,a.jsx)(rC.NM,{file:e,noBorder:!0,size:rW.y.SMALL})}),tileBorderRadius:8,tileBorderStyle:"dashed",tileFooterPosition:"right",renderTileFooter:(e,{isSelected:t,isHovered:r})=>(0,a.jsx)(ol,{file:e,isHovered:r,isSelected:t})},viewType:oi.XU.GRID}),o&&d?.tile?(0,a.jsx)(or.i,{tileActions:on,openTile:e=>c(d.tile.file,e),tile:d.tile,selectedTiles:[d.tile],dropdownVisible:o}):null]})}function ol({file:e,isHovered:t,isSelected:r}){let n=(0,i.wA)(),o=s.useCallback(t=>{n(tC.to({type:(0,nq.a)(),data:{fileKey:e.key,source:"suggested_files_empty_state"}})),t.stopPropagation(),t.preventDefault()},[n,e]),l=e.project?.name;return(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x195vfkc x1iyjqo2 xl56j7k xb3r6kr xq1n1xh",children:[(0,a.jsx)("div",{...er.xk(od.fileName),children:e.name}),t||r||h.Ay.mobile||h.Ay.tablet?(0,a.jsx)("div",{role:"button",tabIndex:0,className:"x1quhyk7 xlyipyv xuxw1ft xb3r6kr x1ypdohk",onClick:o,children:(0,N.t)("file_browser.pinning.pin_file")}):l?(0,a.jsx)("div",{className:"x1n0bwc9 xlyipyv xuxw1ft xb3r6kr",children:l}):null]})}let od={fileName:{...aE.g.textBodyMedium,textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,$$css:!0},grid:{gridTemplateColumns:"xem2tbl",gap:"xou54vl",rowGap:null,columnGap:null,$$css:!0}};function oc({workspaceId:e}){let t;let r=function(e){let t=sm.Qw.useTransform((0,p.Rs)(eK.m28,{}),e=>{if(!e.currentUser.recentFiles2)return[];let t=[];for(let{file:r}of e.currentUser?.recentFiles2)r&&t.push(r);return t});return(0,nJ.z1)(t,e)}(e);return t="loaded"!==r.status?(0,a.jsx)("div",{className:I.s.py1.h20.wFull.$,children:(0,a.jsx)(ei.qc,{})}):r.data.length>0?(0,a.jsx)(oo,{suggestedFiles:r.data}):(0,a.jsx)("span",{className:I.s.colorTextSecondary.truncate.textBodyLarge.alignCenter.$,children:(0,N.t)("file_browser.pinning.no_pinned_files")}),(0,a.jsx)("div",{className:I.s.bRadius8.colorBgSecondary.px32.py24.flex.flexColumn.gap16.mt8.$,children:t})}var ou=r(944059),om=r(492908),o_=r(879378),op=r.n(o_),of=r(508367),og=r(749682),oh=r(241044),ox=r(986103),ob=r(767868),ov=r(226458),oy=r(579755);function ow({pinnedFile:e}){let t=(0,nJ.bn)(e.file),r=(0,ob.l)(e.file.folderId),s=(0,ov.C)(t);return(0,a.jsxs)("div",{className:I.s.bRadius8.borderBox.p16.flex.flexColumn.gap16.colorBg.colorText.b1.bSolid.colorBorder.elevation300.flexGrow1.$,style:iV.sx.add({width:"422px",overflowY:"auto",overflowX:"hidden"}).$,children:[(0,a.jsxs)("div",{className:I.s.flex.flexRow.gap16.$,children:[(0,a.jsx)("div",{className:I.s.flexBasisAuto.$,children:(0,a.jsx)(oy.e,{entity:{id:e.creator.id,img_url:e.creator.imgUrl,name:e.creator?.name??void 0,handle:e.creator?.handle}})}),(0,a.jsxs)("div",{className:I.s.flex.flexColumn.overflowHidden.$,children:[(0,a.jsxs)("div",{className:I.s.flex.flexRow.gap8.textBodyLarge.$,children:[(0,a.jsx)(C.E,{fontWeight:"semi-bold",truncate:!0,children:e.creator.name}),(0,a.jsx)("span",{className:I.s.flexBasisAuto.flexGrow1.flexShrink0.$,children:(0,a.jsx)(C.E,{color:"secondary",children:(0,a.jsx)(ox.h1,{date:e.createdAt})})})]}),(0,a.jsx)("div",{className:I.s.textBodyLarge.overflowBreakWord.$,dangerouslySetInnerHTML:{__html:(0,oh.p)((0,n3.sP)(e.description))}})]})]}),(0,a.jsx)("div",{className:I.s.flex.flexColumn.$,children:(0,a.jsxs)("div",{className:I.s.bRadius8.b1.colorBorder.bSolid.wFull.overflowHidden.$,children:[(0,a.jsx)("div",{children:(0,a.jsx)(n7.e,{tile:t,noBorder:!0})}),(0,a.jsx)("div",{className:I.s.flex.flexRow.gap8.itemsCenter.bt1.bSolid.colorBorder.p16.$,children:(0,a.jsxs)("div",{className:"x78zum5 x1q0g3np x1v2ro7d x6s0dn4",children:[(0,a.jsx)(rN.w4,{size:16,type:s}),(0,a.jsxs)("div",{className:I.s.flex.flexColumn.gap2.flexGrow1.justifyCenter.overflowHidden.cursorDefault.$,children:[(0,a.jsx)("div",{...er.Ay.props(oE.title),children:e.file.name}),"loaded"===r.status&&r.data?(0,a.jsx)("div",{...er.Ay.props(oE.subtitle),children:r.data}):null]})]})})]})})]})}let oj={width:0,height:0};function oT({pinnedFile:e,targetRef:t,shouldHide:r}){let i=(0,og.s)(t),[n,o]=(0,og.M)(),[l,d]=s.useState(oj),[c,u]=s.useState(!1),m=s.useCallback(()=>{if(!t.current)return;let e=(0,of.E)(t.current.getBoundingClientRect()),r=window.innerWidth,a=window.innerHeight,s=a-e.top-8,i=s>100;if(r-e.right>438&&i){d({transform:`translate(${e.right+8}px, ${e.top}px)`,maxHeight:s});return}if(e.left>438&&i){d({transform:`translate(${e.left-430}px, ${e.top}px)`,maxHeight:s});return}let n=430-(r-e.left),o=a-e.bottom-16;if(o>100){d({transform:`translate(${(0,om.qE)(e.left-n,0,e.left)}px, ${e.bottom+8}px)`,maxHeight:o});return}let l=e.top-16;d({top:"auto",bottom:"100vh",transform:`translate(${(0,om.qE)(e.left-n,0,e.left)}px, ${e.top-8}px)`,maxHeight:l})},[t,d]),p=!r&&(i||o),f=(0,_.ZC)(p);if(s.useEffect(()=>{if(!f&&p)m();else if(f&&!p){u(!0);let e=setTimeout(()=>{u(!1)},(0,il.XB)("150ms"));return()=>{clearTimeout(e)}}},[p,f,m]),s.useEffect(()=>{let e=op()(m),t=()=>{p&&e()};return document.addEventListener("scroll",t,!0),()=>{document.removeEventListener("scroll",t,!0)}},[p,m]),!t.current)return null;let g=(0,a.jsx)("div",{className:"pinned_files_hover--hoverCardOverflowWrapper--VaAZM",children:(0,a.jsx)("div",{className:U()("pinned_files_hover--hoverCard--MLJbb",p&&"pinned_files_hover--makeVisible--QrDF7"),style:l,ref:n,role:"tooltip",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},children:(p||c)&&(0,a.jsx)(ow,{pinnedFile:e})})});return ou.createPortal(g,document.body)}let oE={title:{...aE.g.textBodyMediumStrong,$$css:!0},subtitle:{...aE.g.textBodyMedium,$$css:!0}},oI={open:!0,openNewTab:!0,showInFolder:!0,copyLink:!0,share:!0,duplicateToDrafts:!0,pinToWorkspace:!0,publishOrgTemplate:!0,favoriteFile:!0,unfavoriteFile:!0},oN=[];function oC({workspace:e}){let t=(0,i.wA)(),r=(0,eA._6)(),n=(0,J.TA)(),{showing:o,show:l,data:d}=(0,ot.L)(),c=(0,oe.v)(),u=s.useCallback((t,a,s,i)=>{c(t,s),(0,V.E9)(V.gH,a.file,{entrypoint:i,selectedView:r.view,resourceType:"workspace",resourceId:e.id,pinDescription:(0,n3._Z)(a.description)})},[c,r.view,e.id]),m=s.useCallback((e,t)=>{u((0,nJ.bn)(e.file),e,t,"pinned files")},[u]),_=e.pinnedFiles??oN,p=s.useCallback(r=>{let a=r[0];a&&(e.canAdmin||a.creator?.id===n)&&t(tC.to({type:(0,n9.I)(),data:{pinnedFileId:a.id}}))},[e.canAdmin,n,t]),f=s.useMemo(()=>_.filter(({file:e})=>!!e).map(e=>(0,nJ.bn)(e.file)),[_]),g=(0,ra.nw)(f),h=s.useMemo(()=>_.sort((e,t)=>e.createdAt>t.createdAt?1:-1),[_]);return(0,a.jsxs)(a.Fragment,{children:[_.length>0?(0,a.jsx)(oa.A,{doNotFocusOnLoad:!0,getAriaLabel:e=>e.file.name,gridViewProps:{containerStyle:oR.grid,renderTile:e=>(0,a.jsx)(oS,{pinnedFile:e,isDropdownOpen:o}),renderTileFooter:e=>(0,a.jsx)(ok,{pinnedFile:e}),renderTileDragImage:e=>(0,a.jsx)(rC.NM,{file:e.file,noBorder:!0})},handleContextMenu:(e,r,a)=>{t(re.an());let s=e.map(e=>e.file).filter(e=>null!==e);t(re.PW({type:ru.F.FILES,keys:s.map(e=>e.key)}));let i=s[0];i&&l({data:{tile:(0,nJ.bn)(i),targetRect:{top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1},index:a}})},handleDeleteKey:p,handleDragDataTransfer:(e,t)=>{t.setFigFilesData(e.map(e=>os.F.toSinatra(e.file)))},handleOpenItem:m,isDraggable:!0,items:h,viewType:oi.XU.GRID}):(0,a.jsx)(oc,{workspaceId:e.id}),(()=>{let e=d?.tile??null,t=d?.index??0;return(0,a.jsx)(or.i,{tile:e,selectedTiles:g,tileActions:oI,openTile:r=>{e&&u(e,_[t],r,"pinned files: context menu")},dropdownVisible:o})})()]})}function oS({pinnedFile:e,isDropdownOpen:t}){let r=s.useRef(null),i=(0,nJ.bn)(e.file);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(oT,{pinnedFile:e,targetRef:r,shouldHide:t}),(0,a.jsx)("div",{ref:r,children:(0,a.jsx)(n7.e,{tile:i,noBorder:!0,size:rW.y.SMALL})})]})}function ok({pinnedFile:e}){return(0,a.jsxs)("div",{className:"x1y1aw1k x78zum5 xdt5ytf",children:[(0,a.jsx)("span",{...er.xk(oR.fileName),children:e.file.name}),(0,a.jsx)(C.E,{truncate:!0,showTooltipWhenTruncated:!0,color:"secondary",children:(0,N.t)("tile.file_tile.pinned_by_user",{name:e.creator?.name??""})})]})}let oR={fileName:{...aE.g.textBodyLargeStrong,textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,$$css:!0},grid:{paddingTop:"xyamay9",gridTemplateColumns:"x1g5i94c",userSelect:"x87ps6o",$$css:!0}},oA=(0,ed.Iz)(e=>(0,ed.E2)(`file_browser.workspace.pinned_section_open.${e}`,!0,nV.z.boolean()));function oO({workspace:e,isAssignedWorkspace:t}){let[r,n]=(0,ed.fp)(oA(e.id)),o=s.useCallback(()=>n(e=>!e),[n]),l=(0,i.wA)(),d=e.pinnedFiles?.length??0,c=t||e.canAdmin,u=d>=nJ.D1,m=c||d>0,_=s.useCallback(()=>{l(tC.to({type:n6,data:{workspaceId:e.id}}))},[l,e.id]);return(0,a.jsx)(a.Fragment,{children:m&&(0,a.jsx)(nK,{isOpen:r,toggleIsOpen:o,collapseHeader:(0,a.jsxs)("div",{className:I.s.flex.justifyBetween.itemsCenter.wFull.$,children:[(0,a.jsx)("div",{"aria-expanded":r,role:"button",tabIndex:0,className:I.s.flex.flexRow.gap4.itemsCenter.textBodyLargeStrong.cursorDefault.$,onClick:o,children:(0,N.t)("file_browser.pinning.pinned_files")}),c&&(0,a.jsx)(tO.$n,{variant:"link",onClick:_,disabled:u,htmlAttributes:{"data-tooltip":u?(0,N.t)("file_browser.pinning.max_files.add_button_tooltip",{maxPins:nJ.D1}):void 0,"data-tooltip-type":r8.Ib.TEXT,"data-tooltip-show-above":!0},children:(0,N.t)("file_browser.pinning.add_file")})]}),content:(0,a.jsx)(oC,{workspace:e})})})}function oF({workspaceId:e}){let t=(0,Y.sZ)(),r=(0,p.Rs)(eK.aON,{orgId:t.id,workspaceId:e}),i=(0,p.Rs)(eK.nD$,{workspaceId:e}).transform(e=>e.workspace?.members??null),n=function(e){let t=!!(0,o.k)().fb_paginated_workspace_teams_shadow_reads,[r]=(0,f.IT)((0,eK.QJZ)(t?{workspaceId:e,firstPageSize:50}:null)),a=r.transform(e=>(function(e){let t=[];for(let r of e)if(r.team){let e=i8.w.toSinatra(r.team);t.push({...e,pro_team:!1,org_team:!0,member_count:r.memberCount,experiment_assignments:[],license_group:null,last_upgraded_at:null,student_autoverifying_team_at:null,sanctioned_at:null,subscription_raw:null,license_group_id:null,legal_name:null})}return t})(e.workspace?.activeTeams??[])),i=i$({workspaceId:e,onlyJoinedTeams:!1}),n=s.useRef("loaded"!==i.status&&"loaded"!==r.status);return(0,i2.MF)({enableShadowRead:t,label:i2.A5.WorkspacePageView.teams,oldValue:i,newValue:a,trackLatency:n.current,contextArgs:{workspaceId:e,numTeams:i.transform(e=>e.length).unwrapOr(null)},comparator:i6}),i}(e);if("loading"===r.status)return(0,a.jsx)(ei.qc,{});if("loaded"!==r.status)return(0,a.jsx)(ne.S,{resourceType:it.Ft.WORKSPACE});let l=r.data.workspace;if(!l||!l.canView)return(0,a.jsx)(ne.S,{resourceType:it.Ft.WORKSPACE});let d=(0,X.eO)(r.data.currentUser)===l.id;return(0,a.jsx)(oP,{org:t,workspace:l,workspaceMembersQuery:i,workspaceOrgTeamsQuery:n,isAssignedWorkspace:d})}function oP({org:e,workspace:t,workspaceMembersQuery:r,workspaceOrgTeamsQuery:s,isAssignedWorkspace:i}){(0,rt.hL)(t.name);let n={...t,members:r.data??[]},o=r.transform(e=>!!e&&e.length>0),l=t.admins.length>0,d=o.transform(e=>e||l).unwrapOr(!0);return(0,g.kF)("Workspace"),(0,g.WX)({markName:"MainBodyContent",isLoaded:"loaded"===s.status,contextArgs:{numTeams:s.transform(e=>e.length).unwrapOr(null)}}),(0,a.jsx)(iY.r,{header:(0,a.jsx)(n$,{workspace:n,org:e,isWorkspaceMembersLoading:"loading"===r.status,showMembersButton:d}),content:(0,a.jsxs)("div",{className:I.s.flex.flexColumn.gap24.my24.$,children:[(0,a.jsx)("section",{"aria-label":(0,N.t)("file_browser.pinning.pinned_files"),className:I.s.pl12.pr32.borderBox.wFull.$,children:(0,a.jsx)(oO,{workspace:t,isAssignedWorkspace:i})}),(0,a.jsx)(iG,{children:(0,a.jsx)(iU,{orgTeamsQuery:s,workspaceId:t.id})})]}),metaContent:o.unwrapOr(!1)?(0,a.jsx)(nG,{workspace:n}):void 0})}var oL=r(623414),oD=r(275462),oM=r(705249),oB=r(833838),oU=r(471068),oW=r(162807),o$=r(130505),oG=r(999312),oV=r(805898),oz=r(758461),oH=r(934145),oK=r(354658),oY=r(411458),oq=r(600006),oJ=r(709303),oX=r(321395);function oQ({tab:e}){return(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{...er.xk(oZ.headerText),children:(0,N.t)("community.resource_hub.browse_resources")}),(0,a.jsx)("div",{...er.xk(oZ.subHeaderText),children:e===sL.N$.INTERNAL?(0,N.t)("community.resource_hub.browse_resources_internal_subheader"):(0,N.t)("community.resource_hub.browse_resources_community_subheader")})]})}let oZ={headerText:{...aE.g.textHeadingMedium,paddingTop:"xz9dl7a",$$css:!0},subHeaderText:{...aE.g.textBodyMedium,paddingTop:"x1y1aw1k",color:"x1n0bwc9",$$css:!0}};var o0=r(215667),o1=r(715664),o4=r(22009),o2=r(930386),o8=r(405906),o5=r(178090);let o6=new Set([o2.LJ.uiKits,o2.LJ.wireframes,o2.LJ.designTemplates,o2.LJ.mobileApps,o2.LJ.portfolios,o2.LJ.resumes,o2.LJ.visualAssets,o2.LJ.illustrations,o2.LJ.icons,o2.LJ.shapesColors]),o3=new Set([o2.LJ.brainstorming,o2.LJ.diagramming,o2.LJ.funGames,o2.LJ.teamMeetings,o2.LJ.whiteboarding,o2.LJ.strategicPlanning]),o7=new Set([o2.LJ.editingEffects,o2.LJ.fileOrganization,o2.LJ.development,o2.LJ.whiteboarding,o2.LJ.designTools,o2.LJ.importExport,o2.LJ.accessibility,o2.LJ.prototypingAnimation]),o9=new Set([o2.LJ.presentations]),le=new Set([o2.LJ.desktopAppsWebsites]),lt={DESIGN_RESOURCES:"designResources",PLUGINS_AND_WIDGETS:"pluginsAndWidgets",WHITEBOARDING:"whiteboarding",PRESENTATIONS:"presentations",WEBSITES:"websites"};function lr(e){let t=(0,sP.Om)(),r=(0,sP.tv)();return(0,s.useMemo)(()=>Object.fromEntries(e.map(({key:e,category:a,resource_type:s,editor_type:i,tag:n})=>[e,new oV.Dv({...t,categorySlug:a,tagSlug:n},{resource_type:s??o5.L.BrowseResourceTypes.FILES,editor_type:i??void 0,...r})])),[e,t,r])}var la=(e=>(e.marketing="marketing",e.product="product",e.pitchDeck="pitch-deck",e.sales="sales",e.landingPages="landing-pages",e.portfolio="portfolio",e.ecommerce="ecommerce",e.blog="blog",e.wedding="wedding",e.photography="photography",e))(la||{});function ls(e,t,r){let a=t?({marketing:(0,N.t)("community.resource_hub.categories.marketing_presentations"),product:(0,N.t)("community.resource_hub.categories.product_presentations"),"pitch-deck":(0,N.t)("community.resource_hub.categories.pitch_decks"),sales:(0,N.t)("community.resource_hub.categories.sales_presentations"),"landing-pages":(0,N.t)("community.resource_hub.categories.landing_pages"),portfolio:(0,N.t)("community.resource_hub.categories.portfolio"),ecommerce:(0,N.t)("community.resource_hub.categories.ecommerce"),blog:(0,N.t)("community.resource_hub.categories.blog"),wedding:(0,N.t)("community.resource_hub.categories.wedding"),photography:(0,N.t)("community.resource_hub.categories.photography")})[t]:void 0;if(a)return a;let s=(0,o8.WG)(e),i=r?function(e,t){let r={[o2.LJ.whiteboarding]:{[o5.L.BrowseResourceTypes.WIDGETS]:(0,N.t)("categories.widgets")},[o2.LJ.designTools]:{[o5.L.BrowseResourceTypes.PLUGINS]:(0,N.t)("community.view_bar.plugins")}};return r[e]?.[t]}(s,r):void 0;return i?i:({[o2.LJ.mobileApps]:(0,N.t)("community.resource_hub.categories.mobile_app_templates"),[o2.LJ.desktopAppsWebsites]:(0,N.t)("community.resource_hub.categories.websites"),[o2.LJ.make]:(0,N.t)("community.view_bar.figmake")})[s]||(0,o8.xF)(e)}var li=r(571562),ln=r(478538);let lo="category_menu_button--buttonText--0inUk";function ll({defaultText:e,iconPrefix:t,categorySlug:r,tagSlug:s,resourceType:i,getTriggerProps:n,isSelected:o}){let l=r?ls(r,s,i):void 0;return(0,a.jsx)(sN.E,{"aria-pressed":o,className:U()(ln.x6,ln.Mg,o&&ln.wH),...n(),children:(0,a.jsxs)("span",{className:ln.IO,children:[t,(0,a.jsx)("span",{className:lo,children:l||e}),(0,a.jsx)(li.r,{})]})})}function ld({parentDropdown:e,defaultText:t,iconPrefix:r,menuItemsByGroup:s}){let{getTriggerProps:i,manager:n}=ni.b(),o=(0,oX.Rd)(oV.Dv),l=o?.categorySlug,d=o?.tagSlug,c=(0,oX.vA)(oV.Dv),m=c?.resource_type,_=l&&function(e,t){if(!e)return null;let r=(0,o8.WG)(e);return e===o2.LJ.whiteboarding?t===o5.L.BrowseResourceTypes.WIDGETS?lt.PLUGINS_AND_WIDGETS:lt.WHITEBOARDING:o3.has(r)?lt.WHITEBOARDING:o7.has(r)?lt.PLUGINS_AND_WIDGETS:o6.has(r)?lt.DESIGN_RESOURCES:o9.has(r)?lt.PRESENTATIONS:le.has(r)?lt.WEBSITES:null}(l,m)===e;return(0,a.jsxs)(ni.bL,{manager:n,children:[(0,a.jsx)(ll,{defaultText:t,iconPrefix:r,categorySlug:_?l:void 0,tagSlug:d,resourceType:m,getTriggerProps:i,isSelected:n.isOpen}),(0,a.jsx)(ni.mc,{children:s.map((e,t)=>(0,a.jsx)(ni.YJ,{children:e.map((e,t)=>(0,a.jsx)(ni.q7,{onClick:()=>{(0,sM.pt)(e?.href??""),u.Ay.push(e?.href??"")},children:(0,a.jsx)("div",{style:{minWidth:132},children:e.text})},t))},t))})]})}function lc(){let e=lr([{key:"uikitRoute",category:o2.LJ.uiKits},{key:"wireframesRoute",category:o2.LJ.wireframes},{key:"socialMediaTemplatesRoute",category:o2.LJ.socialMediaTemplates,editor_type:o4.k.Editors.COOPER},{key:"cardTemplatesRoute",category:o2.LJ.cardTemplates,editor_type:o4.k.Editors.COOPER},{key:"designTemplatesRoute",category:o2.LJ.designTemplates},{key:"mobileAppRoute",category:o2.LJ.mobileApps},{key:"portfolioRoute",category:o2.LJ.portfolios},{key:"resumeRoute",category:o2.LJ.resumes},{key:"visualAssetsRoute",category:o2.LJ.visualAssets},{key:"illustrationsRoute",category:o2.LJ.illustrations},{key:"iconsRoute",category:o2.LJ.icons},{key:"shapesColorsRoute",category:o2.LJ.shapesColors}]),t=[[{href:e.uikitRoute?.href,text:(0,N.t)("categories.ui_kits")},{href:e.wireframesRoute?.href,text:(0,N.t)("categories.wireframes")}],[{href:e.socialMediaTemplatesRoute?.href,text:(0,N.t)("categories.social_media_templates")},{href:e.cardTemplatesRoute?.href,text:(0,N.t)("categories.cards_and_invites")}],[{href:e.mobileAppRoute?.href,text:(0,N.t)("community.resource_hub.categories.mobile_app_templates")},{href:e.resumeRoute?.href,text:(0,N.t)("categories.resume_templates")},{href:e.portfolioRoute?.href,text:(0,N.t)("categories.portfolio_templates")},{href:e.designTemplatesRoute?.href,text:(0,N.t)("community.resource_hub.see_more")}],[{href:e.iconsRoute?.href,text:(0,N.t)("categories.icons")},{href:e.illustrationsRoute?.href,text:(0,N.t)("categories.illustrations")},{href:e.shapesColorsRoute?.href,text:(0,N.t)("categories.shapes_colors")},{href:e.visualAssetsRoute?.href,text:(0,N.t)("community.resource_hub.see_more")}]].filter(e=>e.length>0);return(0,a.jsx)(ld,{parentDropdown:lt.DESIGN_RESOURCES,menuItemsByGroup:t,defaultText:(0,N.t)("community.homepage.figma_section.header"),iconPrefix:(0,a.jsx)(o1.n,{})})}var lu=r(866761);function lm(){let e=lr([{key:"editingEffectsRoute",category:o2.LJ.editingEffects,resource_type:o5.L.BrowseResourceTypes.PLUGINS},{key:"fileOrganizationRoute",category:o2.LJ.fileOrganization,resource_type:o5.L.BrowseResourceTypes.PLUGINS},{key:"developmentRoute",category:o2.LJ.development,resource_type:o5.L.BrowseResourceTypes.PLUGINS},{key:"widgetsRoute",category:o2.LJ.whiteboarding,resource_type:o5.L.BrowseResourceTypes.WIDGETS},{key:"pluginsRoute",category:o2.LJ.designTools,resource_type:o5.L.BrowseResourceTypes.PLUGINS},{key:"importExportRoute",category:o2.LJ.importExport,resource_type:o5.L.BrowseResourceTypes.PLUGINS},{key:"accessibilityRoute",category:o2.LJ.accessibility,resource_type:o5.L.BrowseResourceTypes.PLUGINS},{key:"prototypingAnimationRoute",category:o2.LJ.prototypingAnimation,resource_type:o5.L.BrowseResourceTypes.PLUGINS}]),t=[[{href:e.fileOrganizationRoute?.href,text:(0,N.t)("categories.file_organization")},{href:e.developmentRoute?.href,text:(0,N.t)("categories.navbar.development")},{href:e.editingEffectsRoute?.href,text:(0,N.t)("categories.editing_effects")},{href:e.importExportRoute?.href,text:(0,N.t)("categories.import_export")},{href:e.accessibilityRoute?.href,text:(0,N.t)("categories.accessibility_tools")},{href:e.prototypingAnimationRoute?.href,text:(0,N.t)("categories.prototyping_animation")}],[{href:e.widgetsRoute?.href,text:(0,N.t)("community.resource_hub.categories.see_all_widgets")},{href:e.pluginsRoute?.href,text:(0,N.t)("community.resource_hub.categories.see_all_plugins")}]];return(0,a.jsx)(ld,{parentDropdown:lt.PLUGINS_AND_WIDGETS,defaultText:(0,N.t)("community.resource_hub.categories.plugins_and_widgets"),iconPrefix:(0,a.jsx)(lu.u,{}),menuItemsByGroup:t})}var l_=r(241412);function lp(){let e=lr([{key:"marketingRoute",category:o2.LJ.presentations,tag:la.marketing,editor_type:o4.k.Editors.SLIDES},{key:"productRoute",category:o2.LJ.presentations,tag:la.product,editor_type:o4.k.Editors.SLIDES},{key:"pitchDecksRoute",category:o2.LJ.presentations,tag:la.pitchDeck,editor_type:o4.k.Editors.SLIDES},{key:"salesRoute",category:o2.LJ.presentations,tag:la.sales,editor_type:o4.k.Editors.SLIDES},{key:"presentationsRoute",category:o2.LJ.presentations,editor_type:o4.k.Editors.SLIDES}]),t=[[{href:e.marketingRoute?.href,text:(0,N.t)("community.resource_hub.categories.marketing_presentations")},{href:e.productRoute?.href,text:(0,N.t)("community.resource_hub.categories.product_presentations")},{href:e.pitchDecksRoute?.href,text:(0,N.t)("community.resource_hub.categories.pitch_decks")},{href:e.salesRoute?.href,text:(0,N.t)("community.resource_hub.categories.sales_presentations")}],[{href:e.presentationsRoute?.href,text:(0,N.t)("community.resource_hub.see_more")}]];return(0,a.jsx)(ld,{parentDropdown:lt.PRESENTATIONS,menuItemsByGroup:t,defaultText:(0,N.t)("categories.presentations"),iconPrefix:(0,a.jsx)(l_.l,{})})}function lf(){let e=lr([{key:"websitesRoute",category:o2.LJ.desktopAppsWebsites,editor_type:o4.k.Editors.SITES},{key:"landingPagesRoute",category:o2.LJ.desktopAppsWebsites,tag:la.landingPages,editor_type:o4.k.Editors.SITES},{key:"portfolioRoute",category:o2.LJ.desktopAppsWebsites,tag:la.portfolio,editor_type:o4.k.Editors.SITES},{key:"ecommerceRoute",category:o2.LJ.desktopAppsWebsites,tag:la.ecommerce,editor_type:o4.k.Editors.SITES},{key:"blogRoute",category:o2.LJ.desktopAppsWebsites,tag:la.blog,editor_type:o4.k.Editors.SITES},{key:"weddingRoute",category:o2.LJ.desktopAppsWebsites,tag:la.wedding,editor_type:o4.k.Editors.SITES},{key:"photographyRoute",category:o2.LJ.desktopAppsWebsites,tag:la.photography,editor_type:o4.k.Editors.SITES}]),t=[[{href:e.landingPagesRoute?.href,text:(0,N.t)("community.resource_hub.categories.landing_pages")},{href:e.portfolioRoute?.href,text:(0,N.t)("community.resource_hub.categories.portfolio")},{href:e.ecommerceRoute?.href,text:(0,N.t)("community.resource_hub.categories.ecommerce")},{href:e.blogRoute?.href,text:(0,N.t)("community.resource_hub.categories.blog")},{href:e.weddingRoute?.href,text:(0,N.t)("community.resource_hub.categories.wedding")},{href:e.photographyRoute?.href,text:(0,N.t)("community.resource_hub.categories.photography")}],[{href:e.websitesRoute?.href,text:(0,N.t)("community.resource_hub.see_more")}]];return(0,a.jsx)(ld,{parentDropdown:lt.WEBSITES,menuItemsByGroup:t,defaultText:(0,N.t)("community.resource_hub.categories.websites"),iconPrefix:(0,a.jsx)(sW.J,{})})}var lg=r(780644);function lh(){let e=lr([{key:"brainstormingRoute",category:o2.LJ.brainstorming},{key:"diagrammingRoute",category:o2.LJ.diagramming},{key:"funGamesRoute",category:o2.LJ.funGames},{key:"teamMeetingsRoute",category:o2.LJ.teamMeetings},{key:"whiteboardingRoute",category:o2.LJ.whiteboarding},{key:"strategicPlanningRoute",category:o2.LJ.strategicPlanning}]),t=[[{href:e.diagrammingRoute?.href,text:(0,N.t)("categories.diagramming")},{href:e.brainstormingRoute?.href,text:(0,N.t)("categories.brainstorming")},{href:e.funGamesRoute?.href,text:(0,N.t)("categories.fun_games")},{href:e.teamMeetingsRoute?.href,text:(0,N.t)("categories.team_meetings")},{href:e.strategicPlanningRoute?.href,text:(0,N.t)("categories.strategic_planning")}],[{href:e.whiteboardingRoute?.href,text:(0,N.t)("community.resource_hub.see_more")}]];return(0,a.jsx)(ld,{parentDropdown:lt.WHITEBOARDING,menuItemsByGroup:t,defaultText:(0,N.t)("categories.whiteboarding"),iconPrefix:(0,a.jsx)(lg.D,{})})}function lx(){let e=(0,N.t)("community.view_bar.figmake"),t=lr([{key:"categoryRoute",category:o2.LJ.make}]).categoryRoute;return t?(0,a.jsx)(sN.E,{"aria-label":e,className:U()(ln.x6,ln.Mg,ln.pU),onClick:()=>{u.Ay.push(t.href)},children:(0,a.jsxs)("span",{className:ln.IO,children:[(0,a.jsx)(aj.t,{}),(0,a.jsx)("span",{className:lo,children:e})]})}):null}var lb=r(749199);function lv(){let e=(0,N.t)("community.profiles.saved"),t=(0,sP.Om)(),r=(0,sP.tv)()??void 0;return(0,a.jsx)(sN.E,{"aria-label":e,className:U()(ln.x6,ln.Mg,ln.pU),onClick:()=>{let e=new oY.e(t,r);u.Ay.push(e.href),(0,sM.YM)()},children:(0,a.jsxs)("span",{className:ln.IO,children:[(0,a.jsx)(lb.k,{}),(0,a.jsx)("span",{className:lo,children:e})]})})}function ly(){let e=(0,oD.oi)(),t=(0,oD.l$)();return(0,a.jsx)(o0.a,{mode:"match",children:(0,a.jsxs)("div",{className:"x78zum5 x1q0g3np x167g77z x1a02dak",children:[e&&(0,a.jsx)(lv,{}),(0,a.jsx)(lc,{}),t&&(0,a.jsx)(lx,{}),(0,a.jsx)(lm,{}),(0,a.jsx)(lp,{}),(0,a.jsx)(lh,{}),(0,a.jsx)(lf,{})]})})}var lw=r(704379),lj=r(598412),lT=r(601188),lE=r(675995);let lI=e=>Math.ceil(e/sL.Yn)*sL.Yn;function lN({resourceCount:e,resourceType:t,category:r,editorType:a,savedByUserId:i,caller:n,includeContent:o,enabled:l=!0}){let d=(0,s.useRef)(null);(0,s.useEffect)(()=>{e>0&&null===d.current&&(d.current=lI(e))},[e]);let c=(0,lj.zq)(),[{data:u,status:m,hasNextPage:_},{fetchNextPage:p}]=(0,f.IT)(lT.a.ResourcesPaginatedQuery({resourceType:t,category:r,editorType:a,savedByUserId:i,caller:n,pageSize:d.current??0,includeContent:o,locale:c}),{enabled:null!==d.current&&l}),g="loading"===m;return(0,s.useEffect)(()=>{!g&&_&&e>(u?.length??0)&&p()},[g,_,e,u,p]),{resources:u,loading:g,hasNextPage:_}}function lC({resourceCount:e,resourceType:t,includeContent:r,enabled:a=!0}){let[{data:i,status:n,hasNextPage:o},{fetchNextPage:l}]=(0,f.IT)(lE.K.PaginatedCommunityResourceSavesQuery({pageSize:e,resourceType:t,includeContent:r}),{enabled:a}),d="loading"===n;return(0,s.useEffect)(()=>{!d&&o&&e>(i?.length??0)&&l()},[d,o,e,i,l]),{resources:i,loading:d,hasNextPage:o}}var lS=r(342380),lk=r(306946),lR=r(277543),lA=r(912149),lO=r(342207),lF=r(675859);let lP={card:{borderRadius:"x1mxnbhz",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},cardShadow:{boxShadow:"x1u3p76b",$$css:!0},cardWidth:{width:"xamxeob",$$css:!0},cardTransition:{transition:"x1el4u5y",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,$$css:!0}};function lL({imageSources:e,isHovered:t}){return(0,a.jsx)("div",{className:"x10l6tqk x1y0lptx xxbcxho x78zum5 x1q0g3np x1v2ro7d x1g75g36",children:e.map((e,r)=>(0,a.jsx)(lF.oW,{...er.xk(lD.image,lP.card,t&&lD.hoveredImage),src:(0,ab.ck)(e),alt:""},r))})}let lD={image:{...lP.cardShadow,transition:"x1i5byms",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,flexGrow:"x1iyjqo2",aspectRatio:"xacr46v",$$css:!0},hoveredImage:{transform:"xqc4caa",$$css:!0}};function lM({imageSources:e,isHovered:t}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(lF.oW,{...er.xk(lB.image,lB.frontImage,lP.card,t&&lB.frontImageHovered),src:(0,ab.ck)(e[0]),alt:""}),(0,a.jsx)(lF.oW,{...er.xk(lB.image,lB.backImage,lP.card,t&&lB.backImageHovered),src:(0,ab.ck)(e[1]),alt:""})]})}let lB={image:{...lP.cardWidth,...lP.cardShadow,...lP.cardTransition,position:"x10l6tqk",left:"x1nrll8i",insetInlineStart:null,insetInlineEnd:null,$$css:!0},frontImage:{transform:"xkz1y4k",bottom:"x874rk5",$$css:!0},backImage:{transform:"xpdgo6v",bottom:"x1y0lptx",$$css:!0},frontImageHovered:{transform:"xcvh5f3",$$css:!0},backImageHovered:{transform:"xgz6438",$$css:!0}};function lU({imageSource:e,isHovered:t}){return(0,a.jsx)("div",{className:"x10l6tqk x1d9swqr x5yr21d",children:(0,a.jsx)(lF.oW,{...er.xk(lW.image,t&&lW.hoveredImage),src:(0,ab.ck)(e),alt:""})})}let lW={image:{...lP.cardTransition,position:"x1n2onr6",height:"xlxyqfn",bottom:"x1y0lptx",$$css:!0},hoveredImage:{transform:"xeybphm",$$css:!0}};function l$({imageSource:e,containerStyle:t,isHovered:r}){let s="sheetStyle"===t?lG.hoveredSheetImage:lG.hoveredWidgetImage;return(0,a.jsx)("div",{...er.xk(lG[t]),children:(0,a.jsx)(lF.oW,{...er.xk(lG.image,r&&s),src:(0,ab.ck)(e),alt:""})})}let lG={sheetStyle:{...lP.cardWidth,...lP.cardShadow,left:"x1nrll8i",insetInlineStart:null,insetInlineEnd:null,transform:"xv9q2wl",position:"x10l6tqk",$$css:!0},hoveredSheetImage:{transform:"xfx47b9",$$css:!0},widgetCardStyle:{height:"x5yr21d",top:"x8l1umf",right:"x3m8u43",insetInlineStart:null,insetInlineEnd:null,opacity:"x1us6l5c",position:"x10l6tqk",$$css:!0},hoveredWidgetImage:{transform:"x1bao77f",$$css:!0},image:{...lP.cardTransition,width:"xh8yej3",height:"x5yr21d",$$css:!0}};function lV({imageSources:e,isHovered:t}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(lF.oW,{...er.xk(lz.image,lz.bottomImage),src:(0,ab.ck)(e[0]),alt:""}),(0,a.jsx)(lF.oW,{...er.xk(lz.image,lz.middleImage,t&&lz.hoveredMiddleImage),src:(0,ab.ck)(e[1]),alt:""}),(0,a.jsx)(lF.oW,{...er.xk(lz.image,lz.topImage,t&&lz.hoveredTopImage),src:(0,ab.ck)(e[2]),alt:""})]})}let lz={image:{...lP.cardWidth,...lP.cardTransition,position:"x10l6tqk",left:"x1nrll8i",insetInlineStart:null,insetInlineEnd:null,transform:"xuuh30",bottom:"x1y0lptx",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},bottomImage:{width:"xqjhr6n",boxShadow:"x1u3p76b",$$css:!0},middleImage:{width:"x8uc0wx",bottom:"x1g84rlc",boxShadow:"x1wu5q8a",$$css:!0},topImage:{bottom:"x1otreau",$$css:!0},hoveredMiddleImage:{transform:"xbtikzi",$$css:!0},hoveredTopImage:{transform:"x16ui88a",$$css:!0}};function lH({header:e,route:t,content:r,showSeeMore:s}){let i=t&&s?(0,a.jsxs)(el.e6,{"aria-label":(0,N.t)("community.resource_hub.see_more"),onClick:()=>{(0,sM.CA)(t.pathname),u.Ay.push(t.href)},className:"x78zum5 x8rdmch x6s0dn4 x19y5rnk x1d4akdp",children:[(0,a.jsx)("h3",{...er.xk(lK.headerText),"data-testid":"section-header",children:e}),(0,a.jsx)(eH.a,{})]}):(0,a.jsx)("h3",{...er.xk(lK.headerText),"data-testid":"section-header",children:e});return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"x78zum5 x6s0dn4 x1y1aw1k xwib8y2 x1jnr06f",children:i}),r]})}let lK={headerText:{...aE.g.textBodyLarge,lineHeight:"x1o2sk6j",$$css:!0}};var lY=(e=>(e.BRAINSTORMING="brainstorming",e.CARD_TEMPLATES="cardTemplates",e.CLASSROOM_ACTIVITIES="classroomActivities",e.DATA_TEMPLATES="dataTemplates",e.DESIGN_TUTORIALS="designTutorials",e.DEVELOPMENT="development",e.DIAGRAMMING="diagramming",e.EDITING_EFFECTS="editingEffects",e.FILE_ORGANIZATION="fileOrganization",e.PRESENTATIONS_LARGE="presentationsLarge",e.PRESENTATIONS_SMALL="presentationsSmall",e.RESUMES="resumes",e.STRATEGIC_PLANNING="strategicPlanning",e.TEAM_MEETINGS_SMALL="teamMeetingsSmall",e.TEAM_MEETINGS_LARGE="teamMeetingsLarge",e.UI_KITS="uiKits",e.VISUAL_ASSETS="visualAssets",e.WIDGETS="widgets",e.WIREFRAMES="wireframes",e.WORKSHOP_TEMPLATES="workshopTemplates",e))(lY||{});let lq={brainstorming:{category:o2.LJ.brainstorming,size:"large",art:e=>(0,a.jsx)(lL,{imageSources:["f01ed35801ea5830119fbe503b42f18f8b8fa6bb","d96670e9dd7d8f500b1d82f97d4d08ca5762f014","25a7262271550cf605425ae1f9dbb3186df9e938","75319ef48f81cc1e0f733b2a9ee834ae20ad7383","1d6892175c739459b51f88450efd4fd63647a2d6","0e81b3f80cb2491aac0675bd33fbbbb79db59ddd"],isHovered:e}),backgroundColor:lO.Tj.bgFigjamTertiary,brand:"seascape"},cardTemplates:{category:o2.LJ.cardTemplates,editorType:o4.k.Editors.COOPER,size:"small",art:e=>(0,a.jsx)(l$,{imageSource:"2c4bc9301e89bc080dbadbdb33df70febe9bf82f",containerStyle:"sheetStyle",isHovered:e}),backgroundColor:lO.Tj.bgBrandTertiary,brand:"cooper"},classroomActivities:{category:o2.LJ.classroomActivities,size:"small",art:e=>(0,a.jsx)(lM,{imageSources:["ad9ed6524f8541f00d3968f21e59fcc627be04a6","9633b9c063fd07075008ee206a4ea712c2931994"],isHovered:e}),backgroundColor:lO.Tj.bgFigjamTertiary,brand:"seascape"},dataTemplates:{category:o2.LJ.dataTemplates,size:"small",art:e=>(0,a.jsx)(lM,{imageSources:["85c247027dd036bb720dbaac9ecf63318e138266","55da4072453228deaa707a61fac742fd6b8a1022"],isHovered:e}),backgroundColor:lO.Tj.bgFigjamTertiary,brand:"seascape"},designTutorials:{category:o2.LJ.designTutorials,size:"large",art:e=>(0,a.jsx)(lL,{imageSources:["f341d1cb6464b9ff5d2eb63c89eb380249fc7c78","985e74dda7ed515202f6b7a55ffc2e1562c9ff94","d48320278ece5f694fe686c2c971bcb9c5381f88","1864952e1f5b8fbc94fe85f548d41b77458dcc87","deb79a32eabbdaed5b86904ec9c4adda486345fb","3e63b05276c55b2d9e95c49e90969cc51023344b"],isHovered:e}),backgroundColor:lO.Tj.bgSecondary},development:{category:o2.LJ.development,resourceType:o5.L.BrowseResourceTypes.PLUGINS,size:"small",art:e=>(0,a.jsx)(lU,{isHovered:e,imageSource:"6ce1bcbe88b8f4f202e4307f0de131f8fb6cf61e"}),backgroundColor:lO.Tj.bgBrandTertiary,brand:"design"},diagramming:{category:o2.LJ.diagramming,size:"large",art:e=>(0,a.jsx)(lL,{imageSources:["378c5389dc551daa4f2a3daa5f4e4748fa811eb9","f5fa32f34d57e6b4b01f67f10c13fa4ced6fa20f","82cc8e76b689ad016a0e4871ad99f68fe7c67864","b1f9c2bb18232dd55c41e0528227a2a82ecdd151","37903eb6b345c31cc1ad0967dc6ff8a541a16b90","9f70f6b78199251bb1213c6f3e5e00df8fc0572b"],isHovered:e}),backgroundColor:lO.Tj.bgFigjamTertiary,brand:"seascape"},editingEffects:{category:o2.LJ.editingEffects,resourceType:o5.L.BrowseResourceTypes.PLUGINS,size:"small",art:e=>(0,a.jsx)(lU,{imageSource:"6ce1bcbe88b8f4f202e4307f0de131f8fb6cf61e",isHovered:e}),backgroundColor:lO.Tj.bgBrandTertiary,brand:"design"},fileOrganization:{category:o2.LJ.fileOrganization,resourceType:o5.L.BrowseResourceTypes.PLUGINS,size:"small",art:e=>(0,a.jsx)(lU,{imageSource:"2f1dc06209ebe620cb42e03cdb85da7ef9d9efa0",isHovered:e}),backgroundColor:lO.Tj.bgBrandTertiary,brand:"design"},presentationsLarge:{category:o2.LJ.presentations,size:"large",art:e=>(0,a.jsx)(lL,{imageSources:["0b6a114955ffe1c7a56e993323f212990422a525","0b8f4c7881cf0404fb105a1a680d74564205bc8c","b9d5d2df7dfd58ee29a44ecd72c83dbb6f6588c0","1eb484ec6df2d5d6874b92bae0b221fcbbebc79c","ed0ab6a51ef9b7275a9c123994db37df3188fee7","b616eae234aeefb2ad7c62d5f0bd84c843c3d86d"],isHovered:e}),backgroundColor:lO.Tj.bgBrandTertiary,brand:"piper"},presentationsSmall:{category:o2.LJ.presentations,size:"small",art:e=>(0,a.jsx)(lV,{imageSources:["8b73180892c70a676c567732411c422e46f1fcae","4963a5a549df301b0ba8dbdc788c2c3424c4217e","e66ce4f446be08f56a330a9b39c5e9c72e6d3338"],isHovered:e}),backgroundColor:lO.Tj.bgBrandTertiary,brand:"piper"},teamMeetingsLarge:{category:o2.LJ.teamMeetings,size:"large",art:e=>(0,a.jsx)(lL,{imageSources:["b7e05a6d6b76b8b377e5c4f0eb006dfe99e5875d","61830de70c1cec8ae28737c1f9c36ff5a7b07d18","742fbce6b78404d48f62e39a6be510dce4cae699","6405c322fda966de6578a55cb0c861d2fb774b84","d22c05d35fc088e4d089e814f42379b395b86e26","89d7df8b21116cbf283086a5056f305de01f91a4"],isHovered:e}),backgroundColor:lO.Tj.bgFigjamTertiary,brand:"seascape"},teamMeetingsSmall:{category:o2.LJ.teamMeetings,size:"small",art:e=>(0,a.jsx)(lM,{imageSources:["742fbce6b78404d48f62e39a6be510dce4cae699","b7e05a6d6b76b8b377e5c4f0eb006dfe99e5875d"],isHovered:e}),backgroundColor:lO.Tj.bgFigjamTertiary,brand:"seascape"},resumes:{category:o2.LJ.resumes,size:"small",art:e=>(0,a.jsx)(l$,{imageSource:"ba7504eb5c18069ca8c0455768fcf46c6bc4ee52",containerStyle:"sheetStyle",isHovered:e}),backgroundColor:lO.Tj.bgBrandTertiary,brand:"design"},strategicPlanning:{category:o2.LJ.strategicPlanning,size:"small",art:e=>(0,a.jsx)(lM,{imageSources:["3b212f16a905705728bf1dc973fa25001844b4bc","28c8e9a68927b0f9f55a41efd6df2251b8823eea"],isHovered:e}),backgroundColor:lO.Tj.bgFigjamTertiary,brand:"seascape"},uiKits:{category:o2.LJ.uiKits,size:"small",art:e=>(0,a.jsx)(lM,{imageSources:["52e2511dc978b4b6aad9ad3799dd2fb75139cb2a","fc614bae349b646e1ea8ffe00e5b6e723ec9f13f"],isHovered:e}),backgroundColor:lO.Tj.bgBrandTertiary,brand:"design"},visualAssets:{category:o2.LJ.visualAssets,size:"large",art:e=>(0,a.jsx)(lU,{imageSource:"a9b2bb97699222fc52104170706120e06c6f971a",isHovered:e}),backgroundColor:lO.Tj.bgBrandTertiary,brand:"design"},widgets:{category:o2.LJ.whiteboarding,resourceType:o5.L.BrowseResourceTypes.WIDGETS,size:"large",art:e=>(0,a.jsx)(l$,{imageSource:"c14d817322fb0a630ceb76de93d5669b91e6bce1",containerStyle:"widgetCardStyle",isHovered:e}),backgroundColor:lO.Tj.bgFigjamTertiary,brand:"seascape"},wireframes:{category:o2.LJ.wireframes,size:"large",art:e=>(0,a.jsx)(lL,{imageSources:["4c787218f1399d78e7035575c6041d05b7c51abf","4a119c09ddc4e5a598728b3121b81e7df52f30f0","d380df1c57eb9d1c6d963673d2c718d515b69e9e","c04936ee5bd33d718c78e37fd42e4f8dbe058f35","c8e4c4f9dd45d76797e4c8f1a7515fbbb0f49a61","448ad0f1bc089057cf63f983b7fe865ae1395a56"],isHovered:e}),backgroundColor:lO.Tj.bgBrandTertiary,brand:"design"},workshopTemplates:{category:o2.LJ.workshopTemplates,size:"small",art:e=>(0,a.jsx)(lM,{imageSources:["c6bfc0d07a504cbb9daa39452cb5d1afa29f4e36","6899629efb49a4e0cb289017a2a6c8380e494fae"],isHovered:e}),backgroundColor:lO.Tj.bgFigjamTertiary,brand:"seascape"}};function lJ({size:e,title:t,description:r,art:i,backgroundColor:n,brand:o,route:l,userJobTitle:d}){let[c,m]=(0,s.useState)(!1);return(0,a.jsx)(aT.J,{brand:o,children:(0,s.createElement)(sN.E,{"aria-label":t,...er.xk(lX.card,o?lX.cardBrandBorder:lX.cardStrongBorder,"large"===e?lX.largeCard:lX.smallCard),onClick:()=>{l&&((0,sM.rC)(d,l.href),u.Ay.push(l.href))},htmlAttributes:{onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1)},style:{backgroundColor:n},key:t},(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x10l6tqk x13vifvy x1nejdyq x7eqkm1",children:[(0,a.jsx)("div",{...er.xk(lX.title),children:t}),(0,a.jsx)("div",{className:"x1n0bwc9",children:r})]}),i(c))})}let lX={smallCard:{flexBasis:"xhnlq4v",flexGrow:"x1iyjqo2",$$css:!0},largeCard:{flexBasis:"x4pfjvb",flexGrow:"xgyuaek",$$css:!0},card:{position:"x1n2onr6",display:"x1lliihq",placeItems:"x1hd2rbs",alignItems:null,justifyItems:null,borderRadius:"x1mxnbhz",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,height:"x5yr21d",overflow:"xb3r6kr",overflowX:null,overflowY:null,textAlign:"x1yc453h",$$css:!0},cardBrandBorder:{border:"xehbxol x1fz536k",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:null,borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0},cardStrongBorder:{border:"xehbxol x12jpku1",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:null,borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0},title:{...aE.g.textHeadingSmall,fontWeight:"xk50ysn",$$css:!0}};function lQ(){let e=(0,lA.w)(),t=function(e){let t={designer:["visualAssets","presentationsSmall","editingEffects"],developer:["diagramming","development","teamMeetingsSmall"],"product-manager":["widgets","presentationsSmall","teamMeetingsSmall"],marketer:["brainstorming","cardTemplates","resumes"],researcher:["diagramming","teamMeetingsSmall","strategicPlanning"],education:["classroomActivities","designTutorials","workshopTemplates"],"ux-writer":["uiKits","teamMeetingsLarge","fileOrganization"],data:["dataTemplates","presentationsLarge","strategicPlanning"],other:["wireframes","presentationsSmall","uiKits"],unknown:["wireframes","presentationsSmall","uiKits"]};return(t[e]||t.unknown).map(e=>lq[e]).filter(e=>void 0!==e)}(e),r=lr(t.map(e=>({key:e.category,category:e.category,resource_type:e.resourceType||void 0,editor_type:e.editorType||void 0}))),i=t.map(t=>({...function(e){switch(e){case o2.LJ.brainstorming:return{title:(0,N.t)("categories.brainstorming"),description:(0,N.t)("community.resource_hub.category_description.brainstorming")};case o2.LJ.cardTemplates:return{title:(0,N.t)("community.resource_hub.featured_categories.invites_templates"),description:(0,N.t)("community.resource_hub.category_description.card_templates")};case o2.LJ.classroomActivities:return{title:(0,N.t)("community.resource_hub.featured_categories.classroom_activities"),description:(0,N.t)("community.resource_hub.category_description.classroom_activities")};case o2.LJ.dataTemplates:return{title:(0,N.t)("community.footer.data_templates"),description:(0,N.t)("community.resource_hub.category_description.data_templates")};case o2.LJ.designTutorials:return{title:(0,N.t)("community.resource_hub.featured_categories.design_tutorials"),description:(0,N.t)("community.resource_hub.category_description.design_tutorials")};case o2.LJ.development:return{title:(0,N.t)("community.resource_hub.featured_categories.plugins_for_development"),description:(0,N.t)("community.resource_hub.category_description.development")};case o2.LJ.diagramming:return{title:(0,N.t)("categories.diagramming"),description:(0,N.t)("community.resource_hub.category_description.diagramming")};case o2.LJ.editingEffects:return{title:(0,N.t)("community.resource_hub.featured_categories.plugins_for_editing_and_effects"),description:(0,N.t)("community.resource_hub.category_description.editing_effects")};case o2.LJ.fileOrganization:return{title:(0,N.t)("community.resource_hub.featured_categories.plugins_for_file_organization"),description:(0,N.t)("community.resource_hub.category_description.file_organization")};case o2.LJ.presentations:return{title:(0,N.t)("categories.presentations"),description:(0,N.t)("community.resource_hub.category_description.presentations")};case o2.LJ.resumes:return{title:(0,N.t)("categories.resume_templates"),description:(0,N.t)("community.resource_hub.category_description.resumes")};case o2.LJ.strategicPlanning:return{title:(0,N.t)("categories.strategic_planning"),description:(0,N.t)("community.resource_hub.category_description.strategic_planning")};case o2.LJ.teamMeetings:return{title:(0,N.t)("community.resource_hub.featured_categories.team_meetings"),description:(0,N.t)("community.resource_hub.category_description.team_meetings")};case o2.LJ.uiKits:return{title:(0,N.t)("categories.ui_kits"),description:(0,N.t)("community.resource_hub.category_description.ui_kits")};case o2.LJ.visualAssets:return{title:(0,N.t)("community.resource_hub.featured_categories.assets"),description:(0,N.t)("community.resource_hub.category_description.visual_assets")};case o2.LJ.whiteboarding:return{title:(0,N.t)("categories.widgets"),description:(0,N.t)("community.resource_hub.category_description.widgets")};case o2.LJ.wireframes:return{title:(0,N.t)("categories.wireframes"),description:(0,N.t)("community.resource_hub.category_description.wireframes")};case o2.LJ.workshopTemplates:return{title:(0,N.t)("community.resource_hub.featured_categories.workshop_templates"),description:(0,N.t)("community.resource_hub.category_description.workshop_templates")};default:(0,E.xb)(e)}}(t.category),size:t.size,art:t.art,backgroundColor:t.backgroundColor,brand:t.brand,route:r[t.category],userJobTitle:e})),n=(0,s.useRef)(null),[o,l]=(0,s.useState)(0);(0,s.useEffect)(()=>{let e=new ResizeObserver(e=>{l(e[0]?.contentRect.width??0)});return n.current&&(l(n.current.clientWidth),e.observe(n.current)),()=>{e.disconnect()}},[n]);let d=(0,s.useMemo)(()=>{let e=[],t=0;return i.forEach(r=>{let a="large"===r.size?420:210;t+a<=o&&(e.push(r),t+=a)}),e},[o,i]);return(0,a.jsx)(lH,{header:(0,N.t)("community.resource_hub.featured_categories"),content:(0,a.jsx)("div",{className:"x78zum5 x1q0g3np x1665zp3 xc6p2dh",ref:n,children:d.map(e=>(0,a.jsx)(lJ,{...e},e.title))}),showSeeMore:!1})}var lZ=r(126619),l0=(e=>(e.BRAINSTORMING="brainstorming",e.COOPER_TEMPLATE="cooperTemplate",e.DATA_TEMPLATE="dataTemplate",e.DESIGN_TEMPLATE="designTemplate",e.DESIGN_TOOLS="designTools",e.DIAGRAMMING="diagramming",e.EDUCATION="education",e.FIGJAM_TEMPLATE="figJamTemplate",e.FUN_AND_GAMES="funAndGames",e.MAKE_TEMPLATE="makeTemplate",e.PRESENTATION_TEMPLATE="presentationTemplate",e.SITE_TEMPLATE="siteTemplate",e.STRATEGIC_PLANNING="strategicPlanning",e.UI_KITS="uiKits",e.WEBSITE_TEMPLATE="websiteTemplate",e.WHITEBOARDING="whiteboarding",e.WIREFRAMES="wireframes",e))(l0||{});function l1({sizingInfo:e}){let t=(function(e){let t={brainstorming:{key:"brainstorming",header:(0,N.t)("categories.brainstorming"),categoryForQuery:o2.LJ.brainstorming,categorySlug:o2.LJ.brainstorming,resourceType:lk.vt.FIGJAM_TEMPLATE},cooperTemplate:{key:"cooperTemplate",header:(0,N.t)("categories.social_media_templates"),categoryForQuery:o2.LJ.socialMediaTemplates,categorySlug:o2.LJ.socialMediaTemplates,resourceType:lk.vt.COOPER_TEMPLATE_FILE,resourceEditorType:lR.qq.COOPER,apiEditorType:o4.k.Editors.COOPER},dataTemplate:{key:"dataTemplate",header:(0,N.t)("community.footer.data_templates"),categoryForQuery:o2.LJ.dataTemplates,categorySlug:o2.LJ.dataTemplates,resourceType:lk.vt.DESIGN_TEMPLATE},designTemplate:{key:"designTemplate",header:(0,N.t)("categories.design_templates"),categorySlug:o2.LJ.designTemplates,resourceType:lk.vt.DESIGN_TEMPLATE},designTools:{key:"designTools",header:(0,N.t)("community.view_bar.plugins"),categorySlug:o2.LJ.designTools,resourceType:lk.vt.PLUGIN,isPlugin:!0},diagramming:{key:"diagramming",header:(0,N.t)("categories.diagramming"),categoryForQuery:o2.LJ.diagramming,categorySlug:o2.LJ.diagramming,resourceType:lk.vt.FIGJAM_TEMPLATE},education:{key:"education",header:(0,N.t)("categories.education"),categoryForQuery:o2.LJ.education,categorySlug:o2.LJ.education,resourceType:lk.vt.DESIGN_TEMPLATE},figJamTemplate:{key:"figJamTemplate",header:(0,N.t)("community.resource_hub.figjam_templates"),categorySlug:o2.LJ.whiteboarding,resourceType:lk.vt.FIGJAM_TEMPLATE,resourceEditorType:lR.qq.WHITEBOARD,apiEditorType:o4.k.Editors.FIGJAM},funAndGames:{key:"funAndGames",header:(0,N.t)("categories.fun_games"),categoryForQuery:o2.LJ.funGames,categorySlug:o2.LJ.funGames,resourceType:lk.vt.WIDGET,apiResourceType:o5.L.BrowseResourceTypes.WIDGETS},makeTemplate:{key:"makeTemplate",header:(0,N.t)("community.resource_hub.make_shelf_header"),categoryForQuery:o2.LJ.make,categorySlug:o2.LJ.make,resourceType:lk.vt.FIGMAKE_TEMPLATE},presentationTemplate:{key:"presentationTemplate",header:(0,N.t)("community.footer.presentations"),categoryForQuery:o2.LJ.presentations,categorySlug:o2.LJ.presentations,resourceType:lk.vt.SLIDE_TEMPLATE,resourceEditorType:lR.qq.SLIDES,apiEditorType:o4.k.Editors.SLIDES},siteTemplate:{key:"siteTemplate",header:(0,N.t)("categories.website_templates"),categoryForQuery:o2.LJ.websiteTemplates,categorySlug:o2.LJ.websiteTemplates,resourceType:lk.vt.SITE_TEMPLATE,resourceEditorType:lR.qq.SITES,apiEditorType:o4.k.Editors.SITES},strategicPlanning:{key:"strategicPlanning",header:(0,N.t)("categories.strategic_planning"),categoryForQuery:o2.LJ.strategicPlanning,categorySlug:o2.LJ.strategicPlanning,resourceType:lk.vt.FIGJAM_TEMPLATE},uiKits:{key:"uiKits",header:(0,N.t)("categories.ui_kits"),categoryForQuery:o2.LJ.uiKits,categorySlug:o2.LJ.uiKits,resourceType:lk.vt.DESIGN_TEMPLATE},websiteTemplate:{key:"websiteTemplate",header:(0,N.t)("categories.website_templates"),categoryForQuery:o2.LJ.websiteTemplates,categorySlug:o2.LJ.websiteTemplates,resourceType:lk.vt.DESIGN_TEMPLATE,resourceEditorType:lR.qq.DESIGN},whiteboarding:{key:"whiteboarding",header:(0,N.t)("categories.whiteboarding"),categoryForQuery:o2.LJ.whiteboarding,categorySlug:o2.LJ.whiteboarding,resourceType:lk.vt.FIGJAM_TEMPLATE},wireframes:{key:"wireframes",header:(0,N.t)("categories.wireframes"),categoryForQuery:o2.LJ.wireframes,categorySlug:o2.LJ.wireframes,resourceType:lk.vt.DESIGN_TEMPLATE}},r={designer:["siteTemplate","uiKits","figJamTemplate","designTools","cooperTemplate"],developer:["siteTemplate","wireframes","whiteboarding","uiKits","cooperTemplate"],"product-manager":["brainstorming","strategicPlanning","dataTemplate","uiKits","siteTemplate"],marketer:["cooperTemplate","presentationTemplate","strategicPlanning","uiKits","whiteboarding"],researcher:["brainstorming","presentationTemplate","dataTemplate","uiKits","cooperTemplate"],education:["education","presentationTemplate","funAndGames","uiKits","siteTemplate"],"ux-writer":["brainstorming","presentationTemplate","wireframes","cooperTemplate","siteTemplate"],data:["diagramming","brainstorming","uiKits","siteTemplate","cooperTemplate"],other:["brainstorming","cooperTemplate","designTools","uiKits","siteTemplate"],unknown:["brainstorming","cooperTemplate","designTools","uiKits","siteTemplate"]},a=r[e]||r.unknown||[];return(0,oD.l$)()&&a.unshift("makeTemplate"),a.map(e=>t[e]).filter(e=>void 0!==e)})((0,lA.w)()).map(e=>({key:e.key,header:e.header,categoryForQuery:e.categoryForQuery,categorySlug:e.categorySlug,resourceType:e.resourceType,resourceEditorType:e.resourceEditorType,apiResourceType:e.apiResourceType,apiEditorType:e.apiEditorType,isPlugin:e.isPlugin}));return(0,a.jsx)("div",{className:"x78zum5 xdt5ytf xh8yej3 x5yr21d x1665zp3",children:t.map((t,r)=>(0,a.jsxs)("div",{children:[2===r&&(0,a.jsx)("div",{className:"x1hq5gj4",children:(0,a.jsx)(lQ,{})}),t.isPlugin?(0,a.jsx)(l2,{header:t.header,categorySlug:t.categorySlug},t.key):(0,a.jsx)(l4,{header:t.header,categoryForQuery:t.categoryForQuery,categorySlug:t.categorySlug,resourceType:t.resourceType,resourceEditorType:t.resourceEditorType,apiResourceType:t.apiResourceType,apiEditorType:t.apiEditorType,sizingInfo:e},t.key)]},r))})}function l4({header:e,categoryForQuery:t,categorySlug:r,resourceType:i,resourceEditorType:n,apiResourceType:o,apiEditorType:l,sizingInfo:d}){let{resources:c,loading:u}=lN({resourceCount:d.numberOfTiles,resourceType:[i],editorType:n,category:t,caller:lT.z.RESOURCE_HUB,includeContent:!1}),m=lr([{key:"categoryRoute",category:r,resource_type:o,editor_type:l}]),{trackResourceImpression:_}=(0,lS.GS)(),p=(0,s.useCallback)((e,t)=>{t&&_(e)},[_]);return u||c&&0!==c.length?(0,a.jsx)(lH,{header:e,route:m.categoryRoute,content:(0,a.jsx)(lZ.T,{resources:(c&&c.slice(0,d.numberOfTiles))??[],loadingTileCount:d.numberOfTiles,isLoading:u,resourceImpressionTracking:p}),showSeeMore:!0}):null}function l2({header:e,categorySlug:t}){let{resources:r,loading:i}=lN({resourceCount:sL.l_,resourceType:[lk.vt.PLUGIN],category:t,caller:lT.z.RESOURCE_HUB,includeContent:!0}),{trackResourceImpression:n}=(0,lS.GS)(),o=(0,s.useCallback)((e,t)=>{t&&n(e)},[n]),l=lr([{key:"pluginsRoute",category:t,resource_type:o5.L.BrowseResourceTypes.PLUGINS}]);return i||r&&0!==r.length?(0,a.jsx)(lH,{header:e,route:l.pluginsRoute,content:(0,a.jsx)(lw.M,{plugins:(r??[]).map(e=>e.content?.plugin).filter(e=>void 0!==e),onIntersectionChange:o,isOrgTeamBrowsing:!1,isLoading:i,loadingRowCount:sL.l_}),showSeeMore:!0}):null}function l8({currentOrgId:e}){return(0,a.jsx)(r2.fu,{name:r5.e0.RESOURCE_HUB_COMMUNITY_TAB_DISABLED_PAGE,properties:{orgId:e},children:(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xh8yej3 x16g6g8t xgqmno8 x1sjmt1f xl56j7k",children:[(0,a.jsx)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x14o0rcq",children:(0,a.jsx)(lF.oW,{className:"x193iq5w xl1xv1r",src:(0,ab.ck)("8b7c6fb3e353c1972267681e37a56765b96f5b3c"),alt:(0,N.t)("community.resource_hub.your_admins_have_restricted_access"),loading:"lazy"})}),(0,a.jsx)("div",{className:"x78zum5 xdt5ytf x1665zp3 xycev2y xo3t2mw x6s0dn4 x1nhvcw1",children:(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x167g77z xkh2ocl xh8yej3 x2lah0s",children:[(0,a.jsx)("div",{...er.xk(l5.heading),children:(0,N.t)("community.resource_hub.your_admins_have_restricted_access")}),(0,a.jsx)("div",{...er.xk(l5.description),children:(0,N.tx)("community.resource_hub.looking_for_inspiration_you_can",{link:(0,a.jsx)(a3.N,{href:"/community",newTab:!0,children:(0,N.t)("community.resource_hub.community_link")})})})]})}),(0,a.jsx)("div",{className:"x78zum5 xdt5ytf xjwf9q1 x98rzlu"})]})})}let l5={heading:{color:"x1akne3o",...aE.g.textHeadingMedium,textAlign:"x2b8uid",$$css:!0},description:{color:"x1n0bwc9",...aE.g.textBodyMedium,textAlign:"x2b8uid",$$css:!0}};var l6=r(966412);function l3({currentOrgId:e,isCommunityTabDisabledForOrg:t}){let r=(0,l6.X)();return t?(0,a.jsx)(l8,{currentOrgId:e}):(0,a.jsx)(r2.fu,{name:r5.e0.RESOURCE_HUB_COMMUNITY_RESOURCES_HOME_PAGE,children:(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf xh8yej3 x5yr21d x1665zp3",ref:r.sizeRef,children:[(0,a.jsx)(oQ,{tab:sL.N$.COMMUNITY}),(0,a.jsx)(ly,{}),(0,a.jsx)(l1,{sizingInfo:r})]})})}var l7=r(427318),l9=r(45218);function de(e,t){let r={orgId:e??void 0,teamId:t??void 0,isInternal:!0},{trackResourceImpression:a,flushAndResetResourceImpressions:i}=(0,lS.GS)({extraProperties:r}),{trackResourceImpression:n,flushAndResetResourceImpressions:o}=(0,lS.r4)({extraProperties:r}),{trackResourceImpression:l,flushAndResetResourceImpressions:d}=(0,lS.FD)({extraProperties:r});return{onIntersectionChange:(0,s.useCallback)((e,t)=>{t&&((0,l7.o_)(e)?n(e):(0,l7.ws)(e)?a(e):(0,l9.I0)(e)&&l(e))},[a,n,l]),flushAndResetImpressions:(0,s.useCallback)(()=>{i(),o(),d()},[i,o,d])}}var dt=r(324237),dr=r(461992),da=r(687776),ds=r(334471),di=r(964548),dn=r(223206);let dl=new Set([eM._Y.COOPER,eM._Y.SLIDES,eM._Y.WHITEBOARD]),dd=new Set([eM._Y.COOPER,eM._Y.SLIDES]);function dc({newFileFrom:e,contextClicked:t,forceOpenNewTab:r}){let a=(0,i.d4)(e=>e.user?.drafts_folder_id),{data:s,status:n}=(0,da.nt)(a),o=(0,ds.h)(s),l=(0,eY.T5)("useTemplatesOmnicreateMenuItemsProps"),d=o.filter(({editorType:e})=>{switch(l.data?.tier){case eM.Ag.STUDENT:case eM.Ag.PRO:return dd.has(e);case eM.Ag.ORG:case eM.Ag.ENTERPRISE:return dl.has(e);case eM.Ag.STARTER:default:return!0}}),[c,u]=(0,ed.fp)(dn.bW),m=u({showOrgTemplateView:!0}),_=(0,ay.E)({isDraftsFolder:!0,newFileFrom:e,forceOpenNewTab:r,newFileDataLocalStorageKey:m}),p="loading"===n||"loading"===l.status;return{newFiles:d.map(({editorType:e,canCreate:r})=>(0,di.p)({editorType:e,isDisabled:!r,isLoading:p,onClick:_({editorType:e,contextClicked:t})})),import:null}}var du=r(950366);function dm({planTier:e}){let t;let{color:r}=(0,ns.G)();t=e===eM.Ag.ORG||e===eM.Ag.ENTERPRISE?"dark"===r?(0,ab.ck)("156640b467fc94700549db25a70310582e3ef24b"):(0,ab.ck)("923655d3d7ad0e0261946e6b8175911e0daceff3"):"dark"===r?(0,ab.ck)("199fc5fd43ab7b8cdb2208db7a7a1c8b4f039119"):(0,ab.ck)("363ceafa11ccd8ba7b2d9fe2b9aba1f8f8477596");let s=dc({newFileFrom:aw.f6.RESOURCE_HUB_FEW_TEMPLATES_UPSELL,contextClicked:r5.e0.RESOURCE_HUB_FEW_TEMPLATES_UPSELL,forceOpenNewTab:!0});return(0,a.jsx)(r2.fu,{name:r5.e0.RESOURCE_HUB_FEW_TEMPLATES_UPSELL,children:(0,a.jsxs)("div",{className:"x78zum5 x1q0g3np xh8yej3 xeq9io7 xgqmno8 x3s0vfn",children:[(0,a.jsx)("div",{className:"x3nfvp2 x13a6bvl xgqmno8 xb3r6kr",children:(0,a.jsx)(lF.oW,{className:"xnq0rdo x15elv7b x1sy10c2 x1d6c7ev xl1xv1r",src:t,alt:(0,N.t)("community.resource_hub.get_more_done"),loading:"lazy"})}),(0,a.jsx)("div",{className:"x1iyjqo2 x1264ykn xmcgfsh"}),(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x1665zp3 x1d3hk7y x1cy8zhl xw8ila8 x1n2onr6",children:[(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf xl56j7k x1cy8zhl x167g77z xkh2ocl xh8yej3 x2lah0s",children:[(0,a.jsx)("div",{...er.xk(d_.heading),children:(0,N.t)("community.resource_hub.get_more_done")}),(0,a.jsx)("div",{...er.xk(d_.description),children:(0,N.t)("community.resource_hub.create_custom_templates_to_add")})]}),(0,a.jsx)(du.a,{menuItems:s})]})]})})}let d_={heading:{color:"x1akne3o",...aE.g.textHeadingMedium,$$css:!0},description:{color:"x1n0bwc9",...aE.g.textBodyMedium,$$css:!0}};function dp({planTier:e,isTemplatesPublishingDisabledForOrg:t}){let r;let s=(0,sP.Om)(),i=(0,sP.tv)(),{color:n}=(0,ns.G)();r=e===eM.Ag.ORG||e===eM.Ag.ENTERPRISE?t?(0,ab.ck)("ceafb20933e03362e3d3f6c8191e892c8321d3db"):"dark"===n?(0,ab.ck)("156640b467fc94700549db25a70310582e3ef24b"):(0,ab.ck)("923655d3d7ad0e0261946e6b8175911e0daceff3"):"dark"===n?(0,ab.ck)("199fc5fd43ab7b8cdb2208db7a7a1c8b4f039119"):(0,ab.ck)("363ceafa11ccd8ba7b2d9fe2b9aba1f8f8477596");let o=dc({newFileFrom:aw.f6.RESOURCE_HUB_NO_RESOURCES_UPSELL,contextClicked:r5.e0.RESOURCE_HUB_NO_RESOURCES_UPSELL,forceOpenNewTab:!0}),l=new sP.au({...s,tab:sL.N$.COMMUNITY},i),d=t?(0,N.t)("community.resource_hub.template_publishing_has_been_disabled"):(0,N.t)("community.resource_hub.streamline_your_work_with_custom");return(0,a.jsx)(r2.fu,{name:r5.e0.RESOURCE_HUB_NO_RESOURCES_UPSELL,children:(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xh8yej3 x16g6g8t xgqmno8 x1sjmt1f xl56j7k",children:[(0,a.jsx)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xvue9z xwbyk0q x2lah0s xk1l47c",children:(0,a.jsx)(lF.oW,{className:"x193iq5w xl1xv1r xetamn0",src:r,alt:d,loading:"lazy"})}),(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x1665zp3 xz84dc7 xo3t2mw x6s0dn4",children:[(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x167g77z xkh2ocl xh8yej3 x2lah0s",children:[(0,a.jsx)("div",{...er.xk(df.heading),children:d}),(0,a.jsx)("div",{...er.xk(df.description),children:(0,N.t)("community.resource_hub.create_templates_to_keep_up")})]}),(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xou54vl xkh2ocl xh8yej3 x2lah0s",children:[!t&&(0,a.jsx)(du.a,{menuItems:o}),(0,a.jsx)(r2.o3,{...er.xk(df.browseResourcesFromCommunity),to:l.to,trackingEventName:sM.HH.RESOURCE_HUB_BROWSE_COMMUNITY_CLICKED,trackingProperties:{route:l.pathname},children:(0,N.t)("community.resource_hub.browse_resources_from_community")})]})]})]})})}let df={heading:{color:"x1akne3o",...aE.g.textHeadingMedium,textAlign:"x2b8uid",$$css:!0},description:{color:"x1n0bwc9",...aE.g.textBodyMedium,textAlign:"x2b8uid",$$css:!0},browseResourcesFromCommunity:{color:"x1quhyk7",...aE.g.textBodyMedium,textAlign:"x2b8uid",cursor:"x1ypdohk",$$css:!0}};var dg=r(482142);function dh({teamId:e}){let t=(0,i.wA)(),r=(0,sP.Om)(),s=(0,sP.tv)(),{color:n}=(0,ns.G)(),o=new sP.au({...r,tab:sL.N$.COMMUNITY},s);return(0,a.jsx)(r2.fu,{name:r5.e0.RESOURCE_HUB_UPGRADE_UPSELL,properties:{planTier:eM.Ag.STARTER,teamId:e},children:(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xh8yej3 x16g6g8t xgqmno8 x1sjmt1f xl56j7k",children:[(0,a.jsx)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xvue9z xwbyk0q x2lah0s xk1l47c",children:(0,a.jsx)(lF.oW,{className:"x193iq5w xl1xv1r xetamn0",src:"dark"===n?(0,ab.ck)("199fc5fd43ab7b8cdb2208db7a7a1c8b4f039119"):(0,ab.ck)("363ceafa11ccd8ba7b2d9fe2b9aba1f8f8477596"),alt:(0,N.t)("community.resource_hub.custom_templates_for_your_team"),loading:"lazy"})}),(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x1665zp3 xz84dc7 xo3t2mw x6s0dn4",children:[(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x167g77z xkh2ocl xh8yej3 x2lah0s",children:[(0,a.jsx)("div",{...er.xk(dx.heading),children:(0,N.t)("community.resource_hub.custom_templates_for_your_team")}),(0,a.jsx)("div",{...er.xk(dx.description),children:(0,N.t)("community.resource_hub.upgrade_to_the_professional_plan")})]}),(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xou54vl xkh2ocl xh8yej3 x2lah0s",children:[(0,a.jsx)(el.$z,{onClick:()=>{t(dg.WX({teamId:e,entryPoint:sn.TN.RESOURCE_HUB,openInNewTab:!1}))},children:(0,N.t)("community.resource_hub.upgrade_to_professional")}),(0,a.jsx)(r2.o3,{...er.xk(dx.browseResourcesFromCommunity),to:o.to,trackingEventName:sM.HH.RESOURCE_HUB_BROWSE_COMMUNITY_CLICKED,children:(0,N.t)("community.resource_hub.browse_resources_from_community")})]})]})]})})}let dx={heading:{color:"x1akne3o",...aE.g.textHeadingMedium,textAlign:"x2b8uid",$$css:!0},description:{color:"x1n0bwc9",...aE.g.textBodyMedium,textAlign:"x2b8uid",$$css:!0},browseResourcesFromCommunity:{color:"x1quhyk7",...aE.g.textBodyMedium,textAlign:"x2b8uid",cursor:"x1ypdohk",$$css:!0}};var db=r(821962),dv=r(887999);function dy({resourceTypeSlugs:e}){return(0,a.jsx)("div",{className:"x78zum5 x167g77z x1a02dak",children:e.map(e=>(0,s.createElement)("div",{className:"x167g77z x4vwp2a",key:e},(0,a.jsx)(dw,{resourceTypeSlug:e})))})}function dw({resourceTypeSlug:e}){let t=(0,sP.Om)(),r=(0,sP.tv)(),s=(0,eU.i_)(e),i=function(e){switch(e){case oz.M.PLUGINS:return(0,a.jsx)(lu.u,{});case oz.M.FIGJAM_TEMPLATES:return(0,a.jsx)(lg.D,{});case oz.M.WIDGETS:return(0,a.jsx)(db.v,{});case oz.M.SLIDE_TEMPLATES:return(0,a.jsx)(l_.l,{});case oz.M.LIBRARIES:break;case oz.M.COOPER_TEMPLATES:return(0,a.jsx)(dv.W,{});case oz.M.FIGMAKE_TEMPLATES:return(0,a.jsx)(aj.t,{});case oz.M.RECENTLY_ADDED_TEMPLATES:break;default:(0,E.S9)(e,null)}return null}(e);return(0,a.jsx)(sN.E,{"aria-label":s,className:U()(ln.x6,ln.Mg,ln.pU),onClick:()=>{let a=new oz.U({...t,resourceTypeSlug:e},r);(0,sM.ng)(e),u.Ay.push(a.href)},children:(0,a.jsxs)("span",{className:ln.IO,children:[i,(0,a.jsx)("span",{className:lo,children:s})]})})}function dj({planTier:e,isTemplatesPublishingDisabledForOrg:t,currentOrgId:r,currentTeamId:s}){let i;let n=(0,l6.X)(),{onIntersectionChange:l}=de(r??void 0,s??void 0),d=(0,dr.er)(e,s??null,!!t),c=(0,dr.NQ)(e,r??null,!!t),{[eM._Y.COOPER]:{templates:u,isLoading:m,hasMoreTemplates:_},[eM._Y.WHITEBOARD]:{templates:p,isLoading:f,hasMoreTemplates:g},[eM._Y.SLIDES]:{templates:h,isLoading:x,hasMoreTemplates:b},[eM._Y.FIGMAKE]:{templates:v,isLoading:y,hasMoreTemplates:w}}=r?c:d,{resources:j,loading:T,hasNextPage:E}=(0,dr.wO)({limit:sL.Fx,caller:lT.z.RESOURCE_HUB,orgId:r,includeContent:!0}),{resources:I,loading:N,hasNextPage:C}=(0,dr.GO)({resourceType:lk.vt.WIDGET,orgId:r,teamId:s,planTier:e,sortBy:dt.e.Browse.ALL_TIME,isTemplatesPublishingDisabledForOrg:!!t});if(m||f||x||y||T||N)return(0,a.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4 xg87l8a",ref:n.sizeRef,children:(0,a.jsx)(nt.k,{})});let S=(0,o.k)().cooper,k=(0,o.k)().make_template_discovery||(0,o.k)().make_template_discovery_plan_key,R=(j??[]).map(e=>e.content?.plugin).filter(e=>void 0!==e),A=[];if([...k?[{resources:v,slug:oz.M.FIGMAKE_TEMPLATES}]:[],...S?[{resources:u,slug:oz.M.COOPER_TEMPLATES}]:[],{resources:p,slug:oz.M.FIGJAM_TEMPLATES},{resources:h,slug:oz.M.SLIDE_TEMPLATES},{resources:R,slug:oz.M.PLUGINS},{resources:I,slug:oz.M.WIDGETS}].forEach(({resources:e,slug:t})=>{e&&e.length>0&&A.push(t)}),e===eM.Ag.STARTER&&s)return(0,a.jsx)("div",{className:"x78zum5 xdt5ytf x1665zp3",ref:n.sizeRef,children:(0,a.jsx)(dh,{teamId:s})});let O=0===R.length&&0===I.length,F=u.length+p.length+h.length+v.length;if(t&&O||0===F&&O)return(0,a.jsx)("div",{className:"x78zum5 xdt5ytf x1665zp3",ref:n.sizeRef,children:(0,a.jsx)(dp,{planTier:e,isTemplatesPublishingDisabledForOrg:t})});if(!t){if(0===F)i=(0,a.jsx)("div",{className:"x78zum5 xdt5ytf xw7yly9",children:(0,a.jsx)(dm,{planTier:e})});else if(F<4){let t=[...v,...u,...p,...h];i=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(dT,{resourceImpressionTracking:l,numberOfTiles:n.numberOfTiles,resources:t??[]}),(0,a.jsx)("div",{className:"x78zum5 xdt5ytf xw7yly9",children:(0,a.jsx)(dm,{planTier:e})})]})}else i=(0,a.jsxs)(a.Fragment,{children:[k&&(0,a.jsx)(dC,{resourceImpressionTracking:l,numberOfTiles:n.numberOfTiles,resources:v,hasNextPage:w}),S&&(0,a.jsx)(dE,{resourceImpressionTracking:l,numberOfTiles:n.numberOfTiles,resources:u,hasNextPage:_}),(0,a.jsx)(dN,{resourceImpressionTracking:l,numberOfTiles:n.numberOfTiles,resources:p,hasNextPage:g}),(0,a.jsx)(dI,{resourceImpressionTracking:l,numberOfTiles:n.numberOfTiles,resources:h,hasNextPage:b}),1===A.length&&(0,a.jsx)("div",{className:"x78zum5 xdt5ytf xw7yly9",children:(0,a.jsx)(dm,{planTier:e})})]})}return(0,a.jsx)("div",{className:"x78zum5 xdt5ytf x1665zp3",ref:n.sizeRef,children:(0,a.jsxs)(r2.fu,{name:r5.e0.RESOURCE_HUB_INTERNAL_RESOURCES_HOME_PAGE,children:[(0,a.jsx)(oQ,{tab:sL.N$.INTERNAL}),A.length>1&&(0,a.jsx)("div",{className:"x78zum5 x1qughib x6s0dn4 x1a02dak xou54vl",children:(0,a.jsx)(dy,{resourceTypeSlugs:A})}),i,(0,a.jsx)(dS,{resourceImpressionTracking:l,resources:R??[],hasNextPage:E}),(0,a.jsx)(dk,{resourceImpressionTracking:l,numberOfTiles:n.numberOfTiles,resources:I??[],hasNextPage:C})]})})}function dT({resourceImpressionTracking:e,numberOfTiles:t,resources:r}){return(0,a.jsx)(dR,{resourceTypeSlug:oz.M.RECENTLY_ADDED_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:!1})}function dE({resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:s}){return(0,a.jsx)(dR,{resourceTypeSlug:oz.M.COOPER_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:s})}function dI({resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:s}){return(0,a.jsx)(dR,{resourceTypeSlug:oz.M.SLIDE_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:s})}function dN({resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:s}){return(0,a.jsx)(dR,{resourceTypeSlug:oz.M.FIGJAM_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:s})}function dC({resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:s}){return(0,a.jsx)(dR,{resourceTypeSlug:oz.M.FIGMAKE_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:s})}function dS({resourceImpressionTracking:e,resources:t,hasNextPage:r}){let s=(0,sP.Om)(),i=(0,sP.tv)();return t&&0!==t.length?(0,a.jsx)(lH,{header:(0,eU.i_)(oz.M.PLUGINS),route:new oz.U({...s,resourceTypeSlug:oz.M.PLUGINS},i),content:(0,a.jsx)(lw.M,{plugins:t,onIntersectionChange:e,isOrgTeamBrowsing:!1,isLoading:!1,loadingRowCount:sL.Fx,layoutV1:"twoColumn"}),showSeeMore:!!r}):null}function dk({resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:s}){return(0,a.jsx)(dR,{resourceTypeSlug:oz.M.WIDGETS,resourceImpressionTracking:e,numberOfTiles:t,resources:r,hasNextPage:s})}function dR({resourceTypeSlug:e,resources:t,hasNextPage:r,resourceImpressionTracking:s,numberOfTiles:i}){let n=(0,sP.Om)(),o=(0,sP.tv)();if(0===t.length)return null;let l=!!r||t.length>i;return(0,a.jsx)(lH,{header:(0,eU.i_)(e),route:new oz.U({...n,resourceTypeSlug:e},o),content:(0,a.jsx)(lZ.T,{resources:t.slice(0,i),resourceImpressionTracking:s}),showSeeMore:l})}let dA="resource_hub--pageContainer--0k53S";function dO({planTier:e,isTemplatesPublishingDisabledForOrg:t,currentOrgId:r,currentTeamId:s,isCommunityTabDisabledForOrg:i}){let n;let{tab:o}=(0,oX.RA)(sP.au);switch(o){case sL.N$.INTERNAL:n=(0,a.jsx)(dj,{planTier:e,currentOrgId:r??void 0,currentTeamId:s??void 0,isTemplatesPublishingDisabledForOrg:t});break;case sL.N$.COMMUNITY:n=(0,a.jsx)(l3,{currentOrgId:r??void 0,isCommunityTabDisabledForOrg:i});break;default:(0,E.xb)(o)}return(0,a.jsx)("div",{className:dA,children:n})}var dF=r(769256),dP=r(115566),dL=r(622574);function dD(){let e=(0,eY.T5)("useTeamTemplatesPageData"),{templatesTeamId:t,resourceTypeSlug:r}=(0,oX.Rd)(oz.U)??{},a=null;if(r)try{let e=(0,eU.W6)(r);e.length>0&&e[0]&&(a=(0,l7.J2)(e[0]))}catch{}let s=e.data?.type===eM.OL.ORG?t:e.data?.key.parentId;return(0,dL.li)({teamId:s??null,editorType:a,enabled:!!a&&!!s&&"loaded"===e.status})}function dM(){let{requestLoadMoreForTeam:e,templatesByTeam:t,isLoading:r}=dD(),{onIntersectionChange:i}=de(void 0,t?.teamId),n=(0,s.useRef)(null),o=(0,s.useRef)(null);return((0,dP.X)({containerRef:n,targetRef:o,onIntersectionChange:e}),r||!t)?null:(0,a.jsxs)("div",{ref:n,children:[(0,a.jsx)(lZ.T,{resources:t?.templates??[],resourceImpressionTracking:i}),(0,a.jsx)("div",{ref:o})]})}function dB({resourceType:e,planTier:t,orgId:r,internalResourcesRoute:i,resourceImpressionTracking:n}){let o;let l=(0,l7.J2)(e),d=(0,l6.X)(),{onIntersectionChange:c}=de(r??void 0,void 0),{teamTemplates:u,isLoading:m,requestLoadMoreForOrg:_}=(0,dL.e2)({orgId:r,areWorkspacesEnabled:t===eM.Ag.ENTERPRISE,numTemplatesPerTeam:sL.u8+1,editorType:l,filterByIds:null,enabled:!!l}),p=u?.[u.length-1]?.teamId??null,f=(0,s.useRef)(null);return(0,dP.X)({containerRef:d.sizeRef,targetRef:f,targetKey:p,onIntersectionChange:_}),o=m?null:0===u.length?(0,a.jsx)(dp,{planTier:t}):u.map(e=>{let t=e.teamName??"",r=e.templates.length>d.numberOfTiles,s=e.templates.slice(0,d.numberOfTiles).map(e=>e.template),n=i.copyWith({templatesTeamId:e.teamId},void 0);return(0,a.jsx)("div",{ref:e.teamId===p?f:null,children:(0,a.jsx)(lH,{header:(0,N.t)("community.resource_hub.internal_tab",{orgOrTeamName:t}),route:n,content:(0,a.jsx)(lZ.T,{resources:s,resourceImpressionTracking:c}),showSeeMore:r})},e.teamId)}),(0,a.jsx)(en.P,{scrollContainerRef:d.sizeRef,children:(0,a.jsx)("div",{className:"x78zum5 xdt5ytf xou54vl x1120s5i",children:o})})}function dU({planTier:e,currentOrgId:t,currentTeamId:r,fallbackRedirectRoute:i}){let n;let l=(0,o.k)().cooper,d=(0,oX.a4)(oz.U),{resourceTypeSlug:c,templatesTeamId:m}=d.params,{onIntersectionChange:_,flushAndResetImpressions:p}=de(t??void 0,r??void 0);if(s.useEffect(()=>{p()},[c,p]),!c)return u.Ay.redirect(i.href),null;let f=(0,eU.W6)(c).filter(e=>l||e!==lk.vt.COOPER_TEMPLATE_FILE);return 0===f.length?null:(f[0]&&(0,eU.Pe)(e,f[0])&&(n=f[0]===lk.vt.PLUGIN?(0,a.jsx)(d$,{orgId:t??void 0,resourceImpressionTracking:_,planTier:e}):f[0]===lk.vt.WIDGET||c===oz.M.RECENTLY_ADDED_TEMPLATES?(0,a.jsx)(dW,{resourceTypes:f,orgId:t??void 0,teamId:r??void 0,resourceImpressionTracking:_,planTier:e}):r||m?(0,a.jsx)(dM,{}):(0,a.jsx)(dB,{resourceType:f[0],planTier:e,orgId:t??"",internalResourcesRoute:d,resourceImpressionTracking:_})),(0,a.jsx)(r2.fu,{name:r5.e0.RESOURCE_HUB_INTERNAL_RESOURCES_PAGE,children:(0,a.jsx)("div",{className:dA,children:n})}))}function dW({resourceTypes:e,orgId:t,teamId:r,resourceImpressionTracking:s,planTier:i}){let n=(0,l6.X)(),{resources:o,loading:l,hasNextPage:d,fetchNextPage:c,isFetchingNextPage:u}=(0,dr.yH)({resourceTypes:e,limit:sL.u8,caller:lT.z.RESOURCE_HUB,orgId:t,teamId:r,includeContent:!0,sortBy:e.some(e=>[lk.vt.SLIDE_TEMPLATE,lk.vt.COOPER_TEMPLATE_FILE,lk.vt.FIGJAM_TEMPLATE].includes(e))?dt.e.Browse.PUBLISHED_AT:dt.e.Browse.ALL_TIME});if(!l&&(!o||0===o.length))return(0,a.jsx)(dp,{planTier:i});let m=n.numberOfTiles;return(0,a.jsxs)("div",{ref:n.sizeRef,children:[(0,a.jsx)(lZ.T,{resources:o??[],isLoading:l,loadingTileCount:m*sL.Z_,resourceImpressionTracking:s}),(0,a.jsx)(dF.D,{useInfiniteScroll:!0,fetchNextPage:c,isFetchingNextPage:u,hasNextPage:!!d,containerRef:n.sizeRef})]})}function d$({orgId:e,resourceImpressionTracking:t,planTier:r}){let{resources:i,loading:n,hasNextPage:o,isFetchingNextPage:l,fetchNextPage:d}=(0,dr.wO)({limit:10,caller:lT.z.RESOURCE_HUB,orgId:e,includeContent:!0}),c=(0,s.useRef)(null);return n||i&&0!==i.length?(0,a.jsxs)("div",{ref:c,children:[(0,a.jsx)(lw.M,{plugins:(i??[]).map(e=>e.content?.plugin).filter(e=>void 0!==e),onIntersectionChange:t,isOrgTeamBrowsing:!1,isLoading:n}),(0,a.jsx)(dF.D,{useInfiniteScroll:!0,fetchNextPage:d,isFetchingNextPage:l,hasNextPage:!!o,containerRef:c})]}):(0,a.jsx)(dp,{planTier:r})}var dG=r(604204),dV=r(668915),dz=r(835219),dH=r(823351),dK=r(188671),dY=r(131744),dq=r(872825),dJ=r(745972);function dX({text:e,isSelected:t,onClick:r}){return(0,a.jsx)(sN.E,{"aria-label":e,"aria-pressed":t,className:U()(ln.x6,ln.Mg,"category_link_pill--tagPill--vb98J",t&&ln.wH),onClick:r,children:(0,a.jsx)("span",{className:U()(ln.IO,"category_link_pill--tagPillContent--tADeA"),children:e})})}function dQ({links:e}){let t=(0,oX.a4)(oV.Dv),{tagSlug:r}=(0,oX.RA)(oV.Dv),i=s.useRef(null),[n,o]=s.useState(!1),[l,d]=s.useState(!1),c=(0,dJ.l)(),[m,_]=s.useState(0),[p,f]=s.useState(0);return s.useLayoutEffect(()=>{if(!i.current)return;let t=Array.from(i.current.children).filter(e=>!e.className.includes("expansionButton"));if(l)t.every(e=>0===e.offsetTop)&&d(!1),i.current.scrollWidth>i.current.clientWidth&&(d(!1),_(-1));else if(i.current.scrollWidth>i.current.clientWidth){let e=i.current.clientWidth-83,r=Array.from(t).findIndex(t=>t.offsetLeft+t.offsetWidth>e)-1;if(_(r),r<0){o(!1);return}f(t[r].offsetLeft+t[r].offsetWidth+8),o(!0)}else _(e.length-1),o(!1)},[l,n,c,e]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{...er.xk(dZ.container,l?dZ.expandedContainer:dZ.collapsedContainer),ref:i,children:[e.map(({to:e,translatedTitle:i,categorySlug:n,tagSlug:o},d)=>{let c=!!(o&&r&&o===r),_=l||d<=m;return(0,s.createElement)("div",{...er.xk(dZ.pillContainer,!_&&dZ.hiddenPill),key:e},(0,a.jsx)(dX,{text:i,categoryTagSlug:o,onClick:()=>{if(c){let e=t.copyWith({categorySlug:n,tagSlug:void 0}).href;(0,sM.uo)(t.href,e),u.Ay.push(e)}else(0,sM.uo)(t.href,e),u.Ay.push(e)},isSelected:c}))}),(n||l)&&(0,a.jsx)(sN.E,{className:"expansion-button",...er.xk(dZ.expansionButton),style:n?{left:`${p}px`,position:"absolute"}:{},onClick:()=>{o(!n),d(!l)},children:n?(0,N.t)("community.shelves.show_more"):(0,N.t)("community.detail_view.show_less")})]})})}let dZ={collapsedContainer:{flexWrap:"xozqiw3",$$css:!0},expandedContainer:{flexWrap:"x1a02dak",$$css:!0},container:{display:"x78zum5",gap:"x167g77z",rowGap:null,columnGap:null,maxWidth:"x193iq5w",$$css:!0},pillContainer:{flex:"xkz0k9k",flexGrow:null,flexShrink:null,flexBasis:null,$$css:!0},hiddenPill:{visibility:"xlshs6z",$$css:!0},expansionButton:{whiteSpace:"xuxw1ft",color:"x1n0bwc9",outlineWidth:"x1qgsegg",outlineStyle:"xaatb59",outlineColor:"xru40mv",borderRadius:"x1sxf85j",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,padding:"xdqdrvq",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,outlineOffset:"x1g40iwv",...aE.g.textBodyMedium,":hover_backgroundColor":"x133fa97",$$css:!0}};function d0({category:e,showTags:t=!1}){let r=(0,oX.a4)(oV.Dv),s=(0,dq.S)(e.url_slug,o2.LJ);if(!s)return null;let i=(0,dY.m)(e,s,t,r);return(0,a.jsx)("div",{className:"x78zum5 x167g77z xgp1u7p",children:(0,a.jsx)(dQ,{links:i})})}var d1=r(484293);function d4(){let e=(0,l6.X)(),t=(0,oX.a4)(oV.Dv);(0,oV.pj)(t);let r=t.params,{categorySlug:i,tagSlug:n}=r,[o,l]=s.useState(null),d=t.search,c=(0,lj.zq)(),[{data:u,status:m}]=(0,f.IT)((0,dK.Zp)({categorySlug:i,tagSlug:n,locale:c})),_="loading"===m;s.useEffect(()=>{u&&!_&&l(u)},[u,_]);let p=(0,dV.V)(r,d,sL.u8),g=p.filterState;return(0,a.jsx)(r2.fu,{name:r5.e0.RESOURCE_HUB_CATEGORY,properties:{category:i,tag:n},children:(0,a.jsx)("div",{className:"x78zum5 xdt5ytf xou54vl x1gan7if",ref:e.sizeRef,children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"x78zum5 x1qughib x1cy8zhl xozqiw3 xou54vl",children:[(0,a.jsx)("div",{className:"x78zum5 xdt5ytf x1n2onr6 x12lumcd xeuugli",children:(0,a.jsx)(d0,{category:o,showTags:!!o.tags.length})}),(0,a.jsx)("div",{className:"x78zum5 x13a6bvl x3psx0u xuxw1ft",children:(0,a.jsx)(d1.W,{context:dH.gM.CATEGORY,filterState:g,allowedEditorTypes:o.editor_types,showEditorFilter:!0,showResourceTypeFilter:i!==o2.LJ.make,showPriceFilter:i!==o2.LJ.make,allowMixedResourceType:!1})})]}),(0,a.jsx)("div",{className:"xw7yly9",children:(0,a.jsx)(dG.e,{category:o,categoryPageData:p,numTilesPerRow:e.numberOfTiles})})]}):(0,a.jsx)("div",{className:"x7z7khe",children:(0,a.jsx)(dz.y$,{})})})})}var d2=r(455722),d8=r(15189);let d5=(0,ep.r1)(sD.xH);function d6({isCommunityTabDisabledForOrg:e}){let t=(0,ed.md)(d5),r=(0,d8.P)()===sL.N$.COMMUNITY,{show:s,isShowing:i,complete:n}=(0,e_.e)({overlay:eb.cvy,priority:eg.N.DEFAULT_MODAL},[t]);return(0,m.h)(()=>{s({canShow:t=>!t&&!r&&!e})}),(0,a.jsx)(eh.rq,{arrowPosition:ex.F_.TOP,clickOutsideToHide:!0,description:(0,N.tx)("community.resource_hub.see_what_community_has_to_offer"),emphasized:!0,isShowing:i,onClose:n,primaryCta:{label:(0,N.tx)("community.resource_hub.got_it"),type:"button",onClick:()=>n(),ctaTrackingDescriptor:em.c.GOT_IT},targetKey:d3,title:(0,N.tx)("community.resource_hub.get_more_inspiration"),trackingContextName:sM.HH.COMMUNITY_TAB_ONBOARDING_OVERLAY,userFlagOnShow:sD.xH,width:240})}let d3="resource_hub_community_tab";function d7({selectedTab:e,orgOrTeamName:t,isCommunityTabDisabledForOrg:r}){let s=(0,i.wA)(),n=(0,oX.a4)(sP.au),o=(0,i.d4)(e=>e.userFlags),l=e=>{e!==sL.N$.COMMUNITY||o[sD.w3]||s(eP.b({[sD.w3]:!0})),(0,sM._K)(e),u.Ay.push(n.copyWith({tab:e}).href)},[d,c,m]=nS.t.useManagedTabs({[sL.N$.INTERNAL]:!0,[sL.N$.COMMUNITY]:!0},e,e=>{l(e)}),_=Object.keys(sL.N$).map(e=>{let r=sL.N$[e]===sL.N$.COMMUNITY;return(0,a.jsx)(nS.t.Tab,{...d[sL.N$[e]],...r&&{"data-onboarding-key":d3},children:function(e,t){switch(e){case sL.N$.INTERNAL:if(t)return(0,N.t)("community.resource_hub.internal_tab",{orgOrTeamName:t});return(0,N.t)("community.resource_hub.internal_tab_default");case sL.N$.COMMUNITY:return(0,N.t)("community.resource_hub.community_tab");default:(0,E.xb)(e)}}(sL.N$[e],t)},e)});return(0,a.jsxs)("div",{children:[(0,a.jsx)(nS.t.TabStrip,{manager:m,children:_}),(0,a.jsx)(d6,{isCommunityTabDisabledForOrg:r})]})}var d9=r(185998),ce=r(994594),ct=r(704296),cr=r(90566),ca=r(925970),cs=r(582465),ci=r(493196),cn=r(270045);function co({onSelect:e,orgOrTeamName:t}){let r=(0,d2.UX)(),i=(0,sP.Om)(),n=(0,sP.tv)(),o=(0,oX.RA)(sP.au).tab,[l,d]=(0,s.useState)(o);return(0,s.useEffect)(()=>{d(o),e?.(o)},[o,e]),(0,a.jsx)(o0.a,{mode:"match",children:(0,a.jsx)("div",{className:"x1iog12x x1db2dqx",children:(0,a.jsxs)(ci.bL,{value:l,onChange:t=>{if(t!==l&&(d(t),e?.(t),r&&i&&n)){let e=new(t===sL.N$.INTERNAL?oq.IQ:oq.bP)(i,{...n,query:r.search.query,editor_type:r.search.editor_type,resource_type:r.search.resource_type});u.Ay.push(e.href)}},children:[(0,a.jsx)(ci.l9,{iconLead:(0,a.jsx)(ce.h,{}),label:(0,a.jsx)(cn.h,{children:(0,N.t)("community.search.select_search_scope")})}),(0,a.jsxs)(ci.mc,{children:[(0,a.jsx)(ci.c$,{value:sL.N$.COMMUNITY,children:(0,N.t)("community.community")}),(0,a.jsx)(ci.c$,{value:sL.N$.INTERNAL,children:t})]})]})})})}function cl(){let{onSubmit:e,setSelectedDropdownTab:t}=function(){let e=(0,d8.P)(),t=oX.Rd(sP.au)?.tab||e,[r,a]=(0,s.useState)(t),i=r===sL.N$.INTERNAL?oq.IQ:oq.bP,n=(0,d2.UX)(),o=!!n,l=(0,sP.Om)(),d=(0,sP.tv)();return{onSubmit:e=>{let t;if(t=n?n.copyWith({},{query:e}).href:new i(l,{...d,query:e}).href,e.length)u.Ay.push(t);else if(o){let e=new sP.au({...l,tab:r},d).href;u.Ay.push(e)}},setSelectedDropdownTab:a}}();return(0,oD.Fm)()?(0,a.jsx)(cd,{onSubmit:e,setSelectedDropdownTab:t}):(0,a.jsx)("div",{className:"xhs4bwn xh8yej3 x78zum5 x13a6bvl x4pepcl",children:(0,a.jsx)(cs.S,{onSubmit:e,isMobile:!1})})}function cd({onSubmit:e,setSelectedDropdownTab:t}){let r=(0,eY.T5)("ResourceHubApp"),n=(0,eU.LQ)(r),o=r.data?.name||"",l="loaded"===r.status&&!n,d=(0,d2.UX)(),c=!!d,u=d?.search.query,m=(0,i.wA)(),[_,p]=s.useState(""),f=(0,cr.A)(e,400),[g,h]=(0,s.useState)(!1),x=l&&(g||c||_),b=x?"":(0,N.t)("community.search.search_templates_and_tools"),v=(0,a.jsx)(ce.h,{className:"xmaevd6"});s.useEffect(()=>{c&&u&&p(u),c||m(ca.ky())},[c]);let y=s.useCallback(()=>{p("")},[]);return s.useEffect(()=>{c||y()},[y,c]),(0,a.jsxs)(d9.p.Root,{size:"lg",onFocus:()=>{h(!0),c||m(ca.Dy({entryPoint:"resource_hub"}))},onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||h(!1)},children:[x&&(0,a.jsx)("div",{className:"xpnmzw7 x78zum5 x2lah0s xt0e3qv",children:(0,a.jsx)(co,{orgOrTeamName:o,onSelect:t})}),!x&&v,(0,a.jsx)(d9.p,{value:_,onChange:e=>{p(e),e&&f(e)},"aria-label":(0,N.t)("community.search.search_templates_and_tools"),placeholder:b}),_.length>0&&(0,a.jsx)(sN.E,{className:"xt0e3qv xy13l1i",onClick:()=>{p(""),c&&(h(!1),e("")),m(ca.ky())},children:(0,a.jsx)(ct.L,{})})]})}function cc({orgOrTeamName:e,isCommunityTabDisabledForOrg:t}){let{tab:r}=(0,oX.RA)(sP.au),s=!!(0,oX.ed)(oK.jT),i=r===sL.N$.COMMUNITY&&!t&&!s&&!(0,oD.Fm)(),n=(0,a.jsx)("div",{className:"xqyf9gi",children:(0,a.jsx)(cl,{},"resource-hub-search-bar")});return(0,a.jsx)(sz.g2,{leftSide:(0,a.jsx)(cu,{selectedTab:r||sL.N$.INTERNAL,orgOrTeamName:e,isCommunityTabDisabledForOrg:t}),rightSide:i?[n]:[]})}function cu({selectedTab:e,orgOrTeamName:t,isCommunityTabDisabledForOrg:r}){let s=!!(0,d2.v$)(),i=(0,oX.ye)(sP.au,!0),n=(0,oX.ed)(oV.Dv),o=(0,oX.ed)(oz.U),l=(0,oX.ed)(oY.e),{templatesByTeam:d}=dD();if(i)return(0,a.jsx)(d7,{selectedTab:e,orgOrTeamName:t,isCommunityTabDisabledForOrg:r});let c="";return s||n||o||l?(s?c=e===sL.N$.INTERNAL?t?(0,N.t)("community.search.search_results_from_org_or_team",{orgOrTeamName:t}):(0,N.t)("community.search.search_results"):(0,N.t)("community.search.search_results_from_community"):o?(c=(0,eU.i_)(o.params.resourceTypeSlug),o.params.templatesTeamId&&(c=d?.teamName?(0,N.t)("community.resource_hub.internal_tab",{orgOrTeamName:d.teamName}):"")):n?c=ls(n.params.categorySlug,void 0,n.search.resource_type)||"":l&&(c=(0,N.t)("community.saves.saved_by_me")),(0,a.jsx)("h1",{...er.xk(cm.headerText),children:c})):null}let cm={headerText:{...aE.g.textHeadingMedium,$$css:!0}};var c_=r(352483),cp=r(28597),cf=r(601486),cg=r(229344),ch=r(387599),cx=r(909123),cb=r(743953);function cv(){let e=(0,i.wA)(),t=(0,oX.RA)(oK.jT),r=t.apiResourceType,n=t.resourceId,[o]=(0,f.IT)((0,cx.Z)({apiResourceType:r,id:n})),l=o.data,d=l&&(0,l7.XW)(l)?(0,l7.qY)(l):l;s.useEffect(()=>{d&&(0,cb.S)(e,d)},[e,d]);let c=(0,c_.eJ)(),u=(0,ch.Jm)(),m=(0,ch.BY)(),_=(0,sM.W6)(r,n,u,m);if(!l||!d)return(0,a.jsx)(a.Fragment,{});let p=(0,l7.zL)(l);return(0,a.jsx)(r2.fu,{name:r5.e0.RESOURCE_HUB_COMMUNITY_RESOURCE_DETAIL_PAGE,properties:_,children:(0,a.jsxs)("div",{children:[p?(0,a.jsx)(cf.Y,{resource:l,resourceContent:d}):(0,a.jsx)(cg.Y,{resource:l,resourceContent:d}),(0,a.jsx)(cp.X6,{resource:l,resourceContent:d,rdpImpressionId:c})]})})}var cy=r(638907),cw=r(777551);function cj(){let e;let{color:t}=(0,ns.G)();return e="dark"===t?(0,ab.ck)("7ab53d43da451ec79f8b986fd66e173285e8f890"):(0,ab.ck)("09318ceb86318f7b9246ee48a8634ef0d126c06f"),(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xh8yej3 x16g6g8t xgqmno8 x1sjmt1f xl56j7k",children:[(0,a.jsx)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xvue9z x2lah0s xl0j6f1 x1wft13i",children:(0,a.jsx)(lF.oW,{className:"x193iq5w xl1xv1r",src:e,alt:(0,N.t)("community.saves.no_saves_title"),loading:"lazy"})}),(0,a.jsx)("div",{className:"x78zum5 xdt5ytf x1665zp3 xz84dc7 xo3t2mw x6s0dn4 xl2nq6h x1bzacg x14ilqb x1egpy1l",children:(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x167g77z xkh2ocl xh8yej3 x2lah0s",children:[(0,a.jsx)("div",{...er.xk(cT.heading),children:(0,N.t)("community.saves.no_saves_heading")}),(0,a.jsx)("div",{...er.xk(cT.description),children:(0,N.t)("community.saves.no_saves_subheading")})]})})]})}let cT={heading:{color:"x1akne3o",...aE.g.textHeadingMedium,textAlign:"x2b8uid",$$css:!0},description:{color:"x1n0bwc9",...aE.g.textBodyMedium,textAlign:"x2b8uid",$$css:!0}};function cE(){let e=(0,J.TA)()??void 0,t=(0,oX.a4)(oY.e),r=(0,l6.X)(),{resourceType:s}=t.params,i=s?(0,a.jsx)(cN,{resourceType:s,currentUserId:e,sizingInfo:r}):(0,a.jsx)(cI,{currentUserId:e,sizingInfo:r});return(0,a.jsx)("div",{className:dA,ref:r.sizeRef,children:(0,a.jsx)(r2.fu,{name:r5.e0.RESOURCE_HUB_SAVES_PAGE,children:i})})}function cI({currentUserId:e,sizingInfo:t}){let{trackResourceImpression:r}=(0,lS.GS)({extraProperties:{tab:"saves"}}),i=s.useCallback((e,t)=>{t&&r(e)},[r]),n=s.useCallback((e,t)=>{t&&r(e)},[r]),{resources:o,loading:l,hasNextPage:d}=lC({resourceType:(0,cw.yl)(o5.t.FILES),resourceCount:2*sL.u8,includeContent:!1,enabled:!!e}),{resources:c,loading:u,hasNextPage:m}=lC({resourceType:(0,cw.yl)(o5.t.PLUGINS),resourceCount:sL.u8,includeContent:!0,enabled:!!e}),{resources:_,loading:p,hasNextPage:f}=lC({resourceType:(0,cw.yl)(o5.t.WIDGETS),resourceCount:2*sL.u8,includeContent:!1,enabled:!!e});return l||u||p?(0,a.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4 x4ygwfs",children:(0,a.jsx)(ei.kt,{})}):o?.length===0&&c?.length===0&&_?.length===0?(0,a.jsx)("div",{className:dA,children:(0,a.jsx)(cj,{})}):(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf xnfooyd",children:[(0,a.jsx)(cC,{resources:o??[],resourceType:o5.t.FILES,header:(0,N.t)("community.saves.all_files"),numTilesPerRow:t.numberOfTiles,hasNextPage:!!d,resourceImpressionTracking:n}),(0,a.jsx)(cS,{resources:(c??[]).map(e=>e.content?.plugin).filter(e=>void 0!==e),hasNextPage:!!m,resourceImpressionTracking:i}),(0,a.jsx)(cC,{resources:_??[],resourceType:o5.t.WIDGETS,header:(0,N.t)("community.view_bar.widgets"),numTilesPerRow:t.numberOfTiles,hasNextPage:!!f,resourceImpressionTracking:n})]})}function cN({resourceType:e,currentUserId:t,sizingInfo:r}){let i=s.useRef(null),{trackResourceImpression:n}=(0,lS.GS)({extraProperties:{tab:"saves",resourceType:e}}),[{data:o,status:l,hasNextPage:d,isFetchingNextPage:c},{fetchNextPage:u}]=(0,f.IT)(lE.K.PaginatedCommunityResourceSavesQuery({pageSize:sL.u8,resourceType:(0,cw.yl)(e),includeContent:e===o5.t.PLUGINS}),{enabled:!!t});return(0,a.jsxs)("div",{ref:i,children:[(0,a.jsx)(cy.O,{resourcesLoading:"loading"===l,totalResources:o??[],numTilesPerRow:r.numberOfTiles,hasNextPage:!!d,trackResourceImpression:n,filterState:{...(0,dH.c5)(),resourceType:e},customLoadingView:(0,a.jsx)("div",{className:"x78zum5 xl56j7k x6s0dn4 x4ygwfs",children:(0,a.jsx)(ei.kt,{})}),emptyResourceStateQuery:e}),d&&(0,a.jsx)(dF.D,{useInfiniteScroll:!0,fetchNextPage:u,isFetchingNextPage:c,hasNextPage:d,containerRef:i})]})}function cC({resources:e,resourceType:t,header:r,numTilesPerRow:s,hasNextPage:i,resourceImpressionTracking:n}){let o=(0,sP.Om)(),l=(0,sP.tv)();if(0===e.length)return null;let d=i&&e.length===2*s||e.length>2*s;return(0,a.jsx)(lH,{header:r,content:(0,a.jsx)(lZ.T,{resources:e.slice(0,2*s),resourceImpressionTracking:n}),route:new oY.e({...o,resourceType:t},l),showSeeMore:d})}function cS({resources:e,hasNextPage:t,resourceImpressionTracking:r}){let s=(0,sP.Om)(),i=(0,sP.tv)();if(0===e.length)return null;let n=t&&e.length>=sL.Fx;return(0,a.jsx)(lH,{header:(0,N.t)("community.view_bar.plugins"),content:(0,a.jsx)(lw.M,{plugins:e.slice(0,sL.Fx),onIntersectionChange:r,isOrgTeamBrowsing:!1,isLoading:!1,loadingRowCount:sL.Fx,layoutV1:"twoColumn"}),route:new oY.e({...s,resourceType:o5.t.PLUGINS},i),showSeeMore:n})}var ck=r(572042),cR=r(62487),cA=r(237873),cO=r(773663),cF=r(465741),cP=r(143080);function cL({selectedTab:e,resultsByType:t,filtersControlState:r}){let s=(0,d2.e3)(),i=s instanceof oq.bP?sL.N$.COMMUNITY:sL.N$.INTERNAL,n=(0,sP.tv)(),o=(0,cP.v)(t),l=(e,t)=>{let r=s.copyWith({},{...n,resource_type:t}).href;u.Ay.push(r),(0,av.sx)("resource_type_filter_changed",{resource_type:t,from:e})},[d,c,m]=nS.t.useManagedTabs({[o5.t.FILES]:!0,[o5.t.PLUGINS]:!0,[o5.t.WIDGETS]:!0},e,t=>{l(e,t)}),_=Object.keys(o5.t).map(e=>{let{count:t=0,hasMore:r}=o[o5.t[e]];return(0,a.jsxs)(nS.t.Tab,{...d[o5.t[e]],children:[(0,a.jsx)("span",{children:function(e,t){switch(e){case o5.t.FILES:if(t===sL.N$.COMMUNITY)return(0,N.t)("community.view_bar.files_and_templates_tab");return(0,N.t)("community.view_bar.templates_tab");case o5.t.PLUGINS:return(0,N.t)("community.view_bar.plugins");case o5.t.WIDGETS:return(0,N.t)("community.view_bar.widgets");default:(0,E.xb)(e)}}(o5.t[e],i)}),(0,a.jsx)("span",{children:` (${t??0}${r?"+":""})`})]},e)});return(0,a.jsx)("div",{children:(0,a.jsx)(sz.g2,{leftSide:(0,a.jsx)(nS.t.TabStrip,{manager:m,children:_}),rightSide:[(0,a.jsx)(d1.W,{context:dH.gM.SEARCH,filterState:r,showEditorFilter:!0,showResourceTypeFilter:!1,showPriceFilter:i!==sL.N$.INTERNAL},"filters")]})})}function cD({onSearchInCommunity:e}){return(0,a.jsx)("div",{className:"x19y5rnk xb3r6kr",children:(0,a.jsxs)(sA.Cs,{variant:"brand",icon:(0,a.jsx)(sF.U,{}),children:[(0,a.jsx)(sO.Q,{title:(0,N.t)("community.search.search_in_community_banner.title"),children:(0,N.t)("community.search.search_in_community_banner.description")}),(0,a.jsx)(ck.N,{href:"#",onClick:e,children:(0,N.t)("community.search.search_in_community_banner.cta")})]})})}let cM=e=>({query:e.search.query??"",editor_type:e.search.editor_type??o4.k.Editors.ALL,price:e.search.price??cA.C.Price.ALL,resource_type:e.search.resource_type??o5.t.FILES});function cB({currentOrgId:e,currentTeamId:t}){let r=!!(e||t),i=(0,d2.e3)();(0,cO._4)(i,r);let n=cM(i),o=n.resource_type,{trackResourceImpression:l,flushAndResetResourceImpressions:d}=(0,lS.GS)({extraProperties:{resourceType:n.resource_type}}),c=(0,s.useMemo)(()=>({resourceType:n.resource_type,editorType:n.editor_type??o4.k.Editors.ALL,price:n.price,sortBy:(0,dt.H)()}),[n]);s.useEffect(()=>{d()},[n.resource_type,n.query,n.editor_type,n.price,d]);let{resultsByType:m,loadedStatusByType:_}=(0,cR._w)((0,s.useMemo)(()=>({query:n.query,editor_type:n.editor_type,price:n.price,sort_by:dt.e.Search.RELEVANCY,org_id:e,team_id:t}),[n.query,n.editor_type,n.price,e,t]),o),p=(0,l6.X)(),f=(0,eY.S2)(),g=(0,eU.LQ)(f),h=(0,ch.Jm)(),x=(0,ch.BY)(),b=m[o].resources.length,v=s.useCallback(()=>{(0,sM.JO)(h,x,b);let e=new oq.bP(i.params,n).href;u.Ay.push(e)},[i.params,n,b,h,x]),y=r&&!g&&_[o]&&b<=10,w=y&&b>0,j=y&&!w;return(0,a.jsx)(r2.fu,{name:r5.e0.RESOURCE_HUB_SEARCH,children:(0,a.jsxs)("div",{className:dA,ref:p.sizeRef,children:[(0,a.jsx)(cL,{selectedTab:o,resultsByType:m,filtersControlState:c}),(0,a.jsx)(cF.G,{searchParams:n,trackResourceImpression:l,resultsByType:m,isLoadingThisView:!_[o],emptyStateActions:j?(0,a.jsx)(ck.N,{href:"#",onClick:v,children:(0,N.t)("community.search.search_in_community_instead_cta")}):void 0,numTilesPerRow:p.numberOfTiles}),w&&(0,a.jsx)("div",{className:"xpgiz1h x1buy44e",children:(0,a.jsx)(cD,{onSearchInCommunity:v})})]})})}function cU(){let e=(0,i.wA)(),t=(0,sP.Om)(),r=(0,sP.tv)(),n=(0,eY.T5)("ResourceHubApp"),o=(0,eU.LQ)(n),l=(0,oD.Fm)(),d=(0,oD.CS)(),c=n.data?.type===eM.OL.ORG?n.data?.key.parentId:void 0,u=n.data?.type===eM.OL.TEAM?n.data?.key.parentId:void 0,m=(0,eU.Fz)(),_=n.data?.type!==eM.OL.ORG||(0,ea.oA)(n.data.customTemplatesAllowed),p=(0,oD.oi)(),f=(0,s.useMemo)(()=>{let e=sL.N$.INTERNAL;return"loaded"===n.status&&n.data?.tier===eM.Ag.STARTER&&(e=sL.N$.COMMUNITY),new sP.au({...t,tab:e},r)},[t,r,n]);return"loading"!==n.status&&t?(m||e(eR.sf({view:"recentsAndSharing"})),(0,a.jsx)(r2.fu,{name:r5.e0.RESOURCE_HUB,children:(0,a.jsx)(oG.Rj.Provider,{value:oG.mk.RESOURCE_HUB,children:(0,a.jsx)(o$.qh,{path:sP.VR,children:(0,a.jsxs)("div",{className:"xv90nub x78see",children:[(0,a.jsx)(cc,{orgOrTeamName:n.data?.name,isCommunityTabDisabledForOrg:o}),(0,a.jsxs)(o$.dO,{children:[(0,a.jsx)(o$.qh,{path:oH.qL.path,children:!o&&d?(0,a.jsx)(oJ.P,{fallbackRedirectRoute:f}):(0,a.jsx)(o$.rd,{to:f.to})}),(0,a.jsx)(o$.qh,{path:oK.jT.path,children:o?(0,a.jsx)(o$.rd,{to:f.to}):(0,a.jsx)(cv,{})}),(0,a.jsx)(o$.qh,{path:oq.bP.path,children:o?(0,a.jsx)(o$.rd,{to:f.to}):(0,a.jsx)(cB,{})}),(0,a.jsx)(o$.qh,{path:oq.IQ.path,children:l&&(c||u)?(0,a.jsx)(cB,{currentOrgId:c,currentTeamId:u}):(0,a.jsx)(o$.rd,{to:f.to})}),(0,a.jsx)(o$.qh,{path:oz.U.path,children:(0,a.jsx)(dU,{planTier:n.data?.tier??null,currentOrgId:c,currentTeamId:u,fallbackRedirectRoute:f})}),(0,a.jsx)(o$.qh,{path:oY.e.path,children:!o&&p?(0,a.jsx)(cE,{}):(0,a.jsx)(o$.rd,{to:f.to})}),(0,a.jsx)(o$.qh,{path:oV.Dv.path,children:o?(0,a.jsx)(o$.rd,{to:f.to}):(0,a.jsx)(d4,{})}),(0,a.jsx)(o$.qh,{path:sP.au.path,children:(0,a.jsx)(dO,{planTier:n.data?.tier??null,currentOrgId:c,currentTeamId:u,isCommunityTabDisabledForOrg:o,isTemplatesPublishingDisabledForOrg:!_})}),(0,a.jsx)(o$.rd,{to:f.to})]})]})})})})):null}function cW(){let e=(0,sP.Om)(),t=(0,sP.tv)();return e?(0,a.jsx)(c$,{sharedRouteParams:e,sharedSearchParams:t}):null}function c$({sharedRouteParams:e,sharedSearchParams:t}){let[r,i]=s.useState(null),[n,o]=s.useState(null),[l,d]=s.useState(null),{templatesByTeam:c}=dD(),m=[],_=oX.Rd(sP.au)?.tab||sL.N$.INTERNAL,p=_===sL.N$.COMMUNITY?(0,N.t)("community.resource_hub.templates_and_tools_from_community"):(0,N.t)("sidebar.templates_and_tools");m=[{text:p,to:new sP.au({...e,tab:_},t).href,trackingProperties:{name:sM.HH.RESOURCE_HUB_HOME_BREADCRUMB_CLICKED,text:p}}];let g=(0,oX.ed)(oV.Dv),h=!!g,x=(0,oX.ed)(oK.jT),b=!!x,v=h||b;s.useEffect(()=>{v||(i(null),d(null),o(null))},[v]);let y=x?.params.apiResourceType,w=x?.params.resourceId,[j]=(0,f.IT)((0,cx.Z)({apiResourceType:y,id:w}),{enabled:b&&!!y&&!!w}),T=g?.params.categorySlug||j.data?.category_slug||"",E=g?.params.tagSlug||"",I=(0,lj.zq)(),[{data:C,status:S}]=(0,f.IT)((0,dK.Zp)({categorySlug:T,tagSlug:E,locale:I}),{enabled:v});s.useEffect(()=>{if("loaded"===S){d(C?.selected_tag||null);let{parent_category:e}=C||{parent_category:null};o(e||null),i(C)}},[C,S]),v&&r&&(m=[...m,...function({currentCategory:e,currentParentCategory:t,currentTag:r,sharedRouteParams:a,sharedSearchParams:s,categoryRoute:i}){if(!e)return[];let n=(0,dq.S)(t?.url_slug,o2.LJ),o=(0,dq.S)(e.url_slug,o2.LJ);return[t&&n&&{text:ls(n,void 0,i?.search.resource_type)||(0,N.Yd)(t.i18n_meta?.title,t.title),to:i?i.copyWith({categorySlug:n,tagSlug:void 0}).href:new oV.Dv({...a,categorySlug:n},{...s}).href,trackingProperties:{name:sM.HH.RESOURCE_HUB_CATEGORY_BREADCRUMB_CLICKED,text:ls(n,void 0,i?.search.resource_type)||(0,N.Yd)(t.i18n_meta?.title,t.title),category_slug:n}},e&&o&&{text:ls(o,void 0,i?.search.resource_type)||(0,N.Yd)(e.i18n_meta?.title,e.title),to:i?i.copyWith({categorySlug:o,tagSlug:void 0}).href:new oV.Dv({...a,categorySlug:o},{...s}).href,trackingProperties:{name:sM.HH.RESOURCE_HUB_CATEGORY_BREADCRUMB_CLICKED,text:ls(o,void 0,i?.search.resource_type)||(0,N.Yd)(e.i18n_meta?.title,e.title),category_slug:o}},r&&{text:(0,N.Yd)(r.i18n_meta?.text,r.text)}].filter(Boolean)}({currentCategory:r,currentParentCategory:n,currentTag:l,sharedRouteParams:e,sharedSearchParams:t,categoryRoute:h?g:void 0})]);let k=j.data;if(b&&k&&(r||!k.category_slug)){let e={text:(0,cw.K2)(k)||""};m=[...m,e]}let R=(0,oX.ed)(oY.e);if(R){let t={text:(0,N.t)("community.profiles.saved"),to:new oY.e({...e,resourceType:void 0}).href};m=[...m,t];let r=R?.params.resourceType,a=r?(0,eU.M0)(r):void 0;a&&(m=[...m,{text:a}])}if((0,d2.v$)()){let e={text:(0,N.t)("community.resource_hub.search_breadcrumb")};m=[...m,e]}let A=(0,oX.ed)(oz.U);if(A){let e=A.params.resourceTypeSlug,t={text:(0,eU.i_)(e)};if(m=[...m,t],A?.params.templatesTeamId){t.to=A.copyWith({templatesTeamId:void 0}).href,t.trackingProperties={name:sM.HH.RESOURCE_HUB_INTERNAL_RESOURCE_TYPE_BREADCRUMB_CLICKED,text:(0,eU.i_)(e)};let r=c?.teamName;r&&(m=[...m,{text:r}])}}if((0,oX.ye)(oH.qL)){let e={text:(0,N.t)("community.profiles.community_profile")};m=[...m,e]}return 1===m.length?(0,a.jsx)(a.Fragment,{children:m[0].text}):(0,a.jsxs)(oL.A5,{children:[...m.map((e,t)=>(0,a.jsx)(oL.J5,{text:e.text,onClick:()=>{e.to&&u.Ay.push(e.to),e.trackingProperties&&(0,sM.Ox)(e.trackingProperties)},hasTrailingDivider:t<m.length-1,disabled:t===m.length-1},`resource_hub_breadcrumb_${t}`))]})}function cG(){let e=(0,a.jsx)(cW,{});return(0,oD.Fm)()?(0,a.jsxs)("div",{className:"x78zum5 x6s0dn4 x1qughib xaobbuh xozqiw3",children:[e,(0,a.jsx)(oG.Rj.Provider,{value:oG.mk.RESOURCE_HUB,children:(0,a.jsx)("div",{className:"xflo6bn x14coe6r",children:(0,a.jsx)(cl,{})})})]}):e}var cV=r(879759),cz=r(288241),cH=r(609396),cK=r(774631),cY=r(504768),cq=r(999105),cJ=r(910117);let cX=new class{markFeedVisited(e){return cJ.Ay.post(`/api/feed_visited/${e.currentOrgId}`)}};var cQ=r(201222),cZ=r(403166),c0=r(434813),c1=r(12220),c4=r(848862),c2=r(495564);let c8=new class{markFeedViewed(e){cJ.Ay.post(`/api/feed_posts/${e.publicUuid}/mark_viewed`)}vote(e){cJ.Ay.post(`/api/feed_posts/${e.publicUuid}/vote`,{vote_option:e.voteOption})}};var c5=r(841415),c6=r(778125),c3=r(780715),c7=r(462076),c9=r(837002),ue=r(575850),ut=r(486464),ur=r(758553);let ua="feed_tile--commentPillText--goQ26",us="feed_tile--feedPostHoverContainerSelectable--rhPI9";var ui=r(505e3);function un(e){let t=(0,i.wA)(),r=s.useRef(null),[n,o]=(0,og.M)(),[l,d]=(0,og.M)(),{requestToOpenPostByFeedIdx:c}=e,u=s.useCallback((r,a)=>{r?.stopPropagation();let s=e.itemIdx+1;(0,av.sx)("Team Feed Tile Clicked",{postUuid:e.post.publicUuid,feedRank:s}),t((0,tC.to)({type:cQ.K,data:{postUuid:e.post.publicUuid,initialPreloadedPost:e.post,feedIdx:e.feedIdx,requestToOpenPostByFeedIdx:c,autofocusCommentInput:a?.autofocusCommentInput,selectedContentIdx:a?.selectedContentIdx,onSetSelectedContentIdx:a?.onSetSelectedContentIdx}}))},[e.itemIdx,e.post,t,e.feedIdx,c]),{refSetter:m}=function(e){let t=s.useRef(null),r=s.useRef(e);r.current=e;let a=s.useMemo(()=>new ResizeObserver(()=>{r.current(t.current)}),[]);return s.useEffect(()=>()=>{a.disconnect()},[a]),{refSetter:s.useCallback(e=>{null!==t.current&&a.unobserve(t.current),t.current=e,null!==t.current&&a.observe(t.current)},[a])}}(e.virtualRowItem.measureRef),_={position:"absolute",top:e.virtualRowItem.start,left:0,right:0},p=e.feedListRef.current?.getBoundingClientRect().left??0,f=Math.max(0,(r.current?.getBoundingClientRect().left??0)-p),g=(0,a.jsxs)("div",{className:"feed_tile--caughtUpContainer--5uyiy",children:[(0,a.jsx)("div",{className:"feed_tile--caughtUpTitle--PVabL",children:(0,N.t)("fig_feed.youre_all_caught_up")}),(0,a.jsx)("div",{className:"feed_tile--caughtUpSubtitle--j2qKn",children:(0,N.t)("fig_feed.come_back_later_for_more_posts")})]});return(0,a.jsxs)("div",{className:"feed_tile--postContainer--jD-OA",ref:e=>{m(e),e&&(r.current=e,n(e))},style:_,children:[(0,a.jsx)("div",{className:"feed_tile--hoverExtension--aYeAh",ref:l}),(0,a.jsxs)("div",{className:"feed_tile--tileContainer---NbBK",children:[(0,a.jsx)(uo,{feedPost:e.post,feedIdx:e.feedIdx,onTileMouseDown:u,horizontalMargin:f,isHovered:o||d}),e.mostRecentUnviewed&&g]})]})}function uo(e){let t=parseInt(e.feedPost.numComments,10),r=(0,c1.o8)(e.feedPost.descriptionMeta),i=[...new Map(e.feedPost.comments.map(e=>[e.user.id,e.user])).values()],n=(0,a.jsx)("div",{className:"feed_tile--commentPill--ZWfdc feed_reactions_section--reactionPill--qE8nJ reactions--reaction--BGfYE text--fontPos11--2LvXf text--_fontBase--QdLsd",onMouseDown:t=>e.onTileMouseDown(t,{autofocusCommentInput:!0}),role:"button",tabIndex:0,children:t>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c0.u,{users:i,totalNum:i.length,numAvatarsToDisplay:4}),(0,a.jsx)("div",{className:ua,children:(0,N.tx)("fig_feed.num_comments",{numComments:t})})]}):(0,a.jsx)("div",{className:ua,children:(0,N.tx)("fig_feed.add_comment")})}),[o,l]=s.useState(!1),d=s.useRef(null);s.useEffect(()=>{let e=d.current;e&&l(e.scrollHeight>e.offsetHeight)},[]);let c=s.useMemo(()=>(r.length>0&&(r[0].t=r[0].t?.trimStart(),r[r.length-1].t=r[r.length-1].t?.trimEnd()),r),[r]),u=(0,c2.q)(),m=s.useCallback((e=[],t)=>e?e.map((e,r)=>{let i=(e.user_annotated?e.user_annotated.handle:e.t)||"",n=(0,oh.F)(i),o=null,l=e.link&&(0,c5.xT)(e.link);if(e.user_annotated&&n)o=(0,a.jsx)("span",{onMouseDown:e=>e.stopPropagation(),role:"link",tabIndex:0,children:(0,a.jsx)(c5.E4,{href:`/files${u}/user/${e.user_id}`,userId:e.user_annotated.id,handle:n,imgUrl:e.user_annotated.img_url})});else if(l&&n&&(0,c3.$x)(l))o=(0,a.jsx)("span",{onMouseDown:e=>e.stopPropagation(),role:"link",tabIndex:0,children:(0,a.jsx)(c5.Rk,{text:n,hyperlink:l})});else{let e=(0,cZ.x6)(n?.replace(/\n\s*\n/g,"\n").split("\n").join(" ")||"");o=(0,a.jsx)("span",{children:e})}return(0,a.jsxs)(s.Fragment,{children:[o,e.children?.length&&e.styles?.length&&e.children.map((i,n)=>(0,a.jsxs)(s.Fragment,{children:[" ",e.styles.includes("ol")?`${n+1}. `:"\u2022 ",m(i.children,`${t}-${r}-${n}`)," "]},`${t}-${r}-${n}`))]},`${t}-${r}`)}):[(0,a.jsx)(a.Fragment,{})],[u]),_=s.useMemo(()=>m(c,e.feedPost.id),[c,m,e.feedPost.id]),{onTileMouseDown:p}=e,f=s.useMemo(()=>(0,a.jsxs)("div",{className:"feed_tile--postDescriptionContainer--xP5Fz",onMouseDown:p,role:"button",tabIndex:0,children:[(0,a.jsx)("div",{className:"feed_tile--postTitle--DY-Hh",children:e.feedPost.title}),(0,a.jsxs)("div",{className:"feed_tile--postDescription--PiaCx","data-testid":"feed-post-description",ref:d,children:[(0,a.jsx)("div",{className:U()("feed_tile--postDescriptionMessage--6ThT1 comment_message--commentMessage--kZCzD","feed_tile--collapsed--ruER6",o&&"feed_tile--hasShowMore--6Nm-e"),children:_}),o&&(0,a.jsxs)("div",{onMouseDown:e=>{e.stopPropagation(),p()},className:"feed_tile--viewMore--o-NxF",role:"button",tabIndex:0,children:[(0,a.jsx)("div",{className:"feed_tile--viewMoreEllipsis--k1nCe",children:"..."}),(0,a.jsx)("div",{className:"feed_tile--viewMoreText--WpL2K",children:(0,N.t)("fig_feed.see_more")})]})]})]}),[o,d,e.feedPost,p,_]),g=(0,c7.DG)(e.feedPost.publicUuid,c7.dy.TILE),h=(0,c4.Um)(),x=e.isHovered||h?.type===(0,ur.j8)(ur.Hx.USER,e.feedPost.publicUuid,c7.Zp.TILE);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"feed_tile--topRowUGC--oWJxs",children:[(0,a.jsx)("div",{className:"feed_tile--avatarFloat--h-EFM",children:(0,a.jsx)(ue.A,{user:e.feedPost.creator,size:t4.Pf.LARGE,noHandle:!0})}),(0,a.jsx)(ue.B,{user:e.feedPost.creator,date:e.feedPost.createdAt,onTileMouseDown:e.onTileMouseDown,noAvatar:!0}),(0,a.jsxs)("div",{className:I.s.flex.flexRow.$,children:[(0,a.jsx)(ur.Wu,{hideTarget:!x,feedPost:e.feedPost,source:c7.Zp.TILE}),x&&(0,a.jsx)(c6.K0,{"data-tooltip-type":r8.Ib.TEXT,"data-tooltip":(0,N.t)("fig_feed.copy_link_to_post"),onClick:g,children:(0,a.jsx)(nz.In,{icon:"hyperlink-32"})})]})]}),f,(0,a.jsx)(ul,{feedPost:e.feedPost,feedIdx:e.feedIdx,backgroundColor:e.feedPost.backgroundColor,onTileMouseDown:e.onTileMouseDown,horizontalMargin:e.horizontalMargin}),(0,a.jsx)("div",{className:"feed_tile--bottomRow--CTXwC",children:(0,a.jsx)(ut.Q$,{type:ut.Us.FULL,source:ut.zY.TILE_POST,postUuid:e.feedPost.publicUuid,postId:e.feedPost.id,feedReactions:e.feedPost.reactions,prependToList:[n]})})]})}function ul(e){let t=s.useRef(null),r=e.feedPost.content.map(e=>JSON.parse(e)),[i,n]=s.useState(!1),[o,l]=s.useState(!1),[d,c]=s.useState(0);s.useEffect(()=>{0!==d&&c8.markFeedViewed({publicUuid:e.feedPost.publicUuid})},[d,e.feedPost.publicUuid]);let u=(0,ut.mz)({type:"post",id:e.feedPost.publicUuid},ut.zY.TILE_CONTENT),m=r.length>1,_=U()(m?"feed_tile--feedPostHoverContainerWithThumbnails--pAnNB feed_tile--feedPostHoverContainer--238j6":"feed_tile--feedPostHoverContainer--238j6",!(i||o||u)&&"feed_tile--hidden--9bafI"),p={selectedContentIdx:d,onSetSelectedContentIdx:c},{fileData:f,fileIcon:g,fileLoaded:h,openFile:x}=(0,c7.rS)(e.feedPost.publicUuid,r,e.feedPost.fileKey);return(0,a.jsxs)("div",{ref:e=>{e&&(t.current=e)},className:U()("feed_tile--fullHeightContentSection--qE0UO feed_tile--contentSection--1-urk",m&&"feed_tile--fullHeightContentSection_WithThumbnails--l-If7"),children:[(0,a.jsx)(c9.x,{contentItems:r,feedPostIdx:e.feedIdx,feedPostUuid:e.feedPost.publicUuid,onContentHover:e=>n(e),onSelectedTileMouseDown:t=>e.onTileMouseDown(t,p),pageBackgroundColor:e.backgroundColor||void 0,selectedContentIdx:d,setSelectedContentIdx:c,source:c7.Zp.TILE,staticContent:!0}),h&&(0,a.jsxs)("button",{className:U()(_,us,"feed_tile--hoverTopLeft--zVWFQ"),onClick:x,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[(0,a.jsx)(rN.w4,{type:g,size:16}),(0,a.jsx)("div",{children:f.name})]}),(0,a.jsx)("button",{className:U()(_,us,"feed_tile--hoverTopRight---lyoe"),onMouseDown:t=>e.onTileMouseDown(t,p),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:(0,a.jsx)(t0.B,{svg:ui.A})})]})}function ud(e){let t=(0,i.wA)(),r=s.useRef(null),n=(0,J.iZ)(),o=(0,i.d4)(e=>e.teamFeedRefreshNonce),[l,d]=s.useState(null),c=(0,eA._6)(),u="teamFeed"===c.view,m="user"===c.view;s.useEffect(()=>{u&&(cX.markFeedVisited({currentOrgId:e.currentOrgId}).then(e=>{d(e.data.meta?new Date(e.data.meta):null)}),t(eP.b({has_visited_feed:!0})))},[e.currentOrgId,o,t,u]);let f=(0,p.Rs)(eK.KhA,{orgId:e.currentOrgId,firstPageSize:50,feedFilter:JSON.stringify({creator_id:e.selectedUser?.id??null}),refreshNonce:o}),g=(0,_.ZC)(o);g&&g!==o&&r.current&&(r.current.scrollTop=0),s.useEffect(()=>{"errors"===f.status&&t(tl.F.enqueue({message:(0,N.t)("general.an_error_occurred"),error:!0}))},[t,f.status]);let h=s.useMemo(()=>"loaded"===f.status?{isLoadingNextPage:f.data.feedPosts.isLoadingNextPage,hasNextPage:f.data.feedPosts.hasNextPage,loadNext:f.data.feedPosts.loadNext}:null,[f]),x=s.useMemo(()=>"loaded"===f.status?{...f,data:f.data.feedPosts.filter(e=>!!e.feedPost)}:f,[f]),b="loaded"===x.status&&"loaded"===f.status,v=s.useCallback(()=>512,[]),y=x.data?x.data.length:0,w=(0,cq.z)({size:y,parentRef:r,estimateSize:v,overscan:15,paddingStart:0}),j=s.useRef(0);s.useEffect(()=>{j.current=x.data?.length??0},[b,x.data?.length]),s.useEffect(()=>{b&&(0,av.sx)("Team Feed Posts Rendered",{numPosts:j.current,view:c.view,selectedUserId:e.selectedUser?.id},{forwardToDatadog:!0})},[e.selectedUser,j,b,c.view]);let[T,E]=s.useState(!1),C=s.useCallback((e,t)=>{e>0&&!T&&((0,av.sx)("Team Feed User Scrolled Down"),E(!0));let r=y/50,a=e+t.trackHeight,s=t.scrollHeight;1-(s-a)/(s/r)>=.5&&h&&!h.isLoadingNextPage&&h.hasNextPage()&&h.loadNext(50)},[T,h,y]),S=s.useMemo(()=>{let e={};return x.data&&x.data.forEach((t,r)=>{e[t.publicUuid]=r}),e},[x]),[k,R]=s.useState(void 0),A=s.useCallback(e=>{R(e)},[]);s.useEffect(()=>{if(void 0===k||(R(void 0),k<0)||(k>=.5*y&&h&&h.loadNext(50),k>=y))return;let e=x.data[k];t(tC.hm({type:cQ.K.type,data:{postUuid:e.publicUuid,initialPreloadedPost:e.feedPost,feedIdx:k,requestToOpenPostByFeedIdx:A}}))},[k,t,x,A,h,y]);let O=s.useMemo(()=>{if(!l||!x.data)return null;let e=0,t=x.data.length-1,r=-1,a=0;for(;e<=t;){let s=Math.floor((e+t)/2);if(new Date(x.data[s].createdAt)>l?(r=s,e=s+1):t=s-1,(a+=1)>50)break}for(;r>=0&&n&&x.data[r].feedPost?.creator.id===n.id;)r-=1;return r},[l,x.data,n]),F=b&&x.data&&0===x.data.length&&e.selectedUser;return(0,a.jsx)(en.P,{scrollContainerRef:r,className:"feed_list_view--scrollContainer--84INP main_feed_view--scrollContainer--BunJg",innerClassName:U()("feed_list_view--scrollContainerInner--8Le-r",m&&"feed_list_view--scrollContainerInnerProfile--izApr"),onScroll:C,children:(0,a.jsx)("div",{className:"feed_list_view--feedListContainer--2BMds",children:F?(0,a.jsxs)("div",{className:"feed_list_view--noPostsFound--COpgM",children:[(0,a.jsx)("div",{className:I.s.fontMedium.$,children:(0,N.tx)("fig_feed.no_posts_found_title")}),(0,a.jsx)("div",{className:I.s.colorTextSecondary.$,children:(0,N.tx)("fig_feed.no_posts_found_description")})]}):(0,a.jsx)("div",{style:{margin:"0 8px",height:`${w.totalSize}px`,position:"relative"},children:w.virtualItems.map(e=>{let t=e.index;if(!x.data||!x.data[t].feedPost)return null;let s=x.data[t].feedPost;return(0,a.jsx)(un,{post:s,virtualRowItem:e,feedListRef:r,itemIdx:t,feedIdx:S[s.publicUuid],requestToOpenPostByFeedIdx:A,mostRecentUnviewed:u&&S[s.publicUuid]===O},e.key)})})})})}function uc(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.teamFeedRefreshNonce);return s.useEffect(()=>{t(cY.yu({orgId:e.currentOrgId,bellActive:!1}))},[t,r,e.currentOrgId]),(0,a.jsx)(ud,{...e})}let uu="new_post_indicator--icon--uvRMg";var um=r(185333),u_=r(821527);function up(e){return(0,a.jsxs)("div",{className:"new_post_indicator--notification--NxIRJ text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l",children:[(0,a.jsxs)("div",{className:"new_post_indicator--leftSide--Y7k6-",onClick:e.onRefresh,role:"button",tabIndex:0,children:[(0,a.jsx)(t0.B,{svg:um.A,className:uu}),(0,N.tx)("fig_feed.new_posts")]}),(0,a.jsx)("div",{className:"new_post_indicator--dismiss--BAIvc",onClick:e.onDismiss,role:"button",tabIndex:0,children:(0,a.jsx)(t0.B,{svg:u_.A,className:uu})})]})}function uf(e){let t=(0,i.wA)();s.useEffect(()=>((0,av.sx)("Team Feed Posts List View Visited"),t(cY.yu({orgId:e.currentOrgId,bellActive:!1})),()=>{(0,av.sx)("Team Feed List View Closed")}),[t,e.currentOrgId]);let r=s.useCallback(()=>t(cY.Y9()),[t]),n=s.useCallback(()=>{r()},[r]),o=(0,i.d4)(t=>t.teamFeedBellStates[e.currentOrgId]),[l,d]=s.useState(!1),c=(0,_.ZC)(o);return s.useEffect(()=>{o&&!1===c?d(!0):c&&!1===o&&d(!1)},[o,c,t]),s.useEffect(()=>{e.initialPostUuidToShow&&t((0,tC.to)({type:cQ.K,data:{postUuid:e.initialPostUuidToShow}}))},[t,e.initialPostUuidToShow]),(0,a.jsxs)(a.Fragment,{children:[l&&(0,a.jsx)(up,{onRefresh:n,onDismiss:()=>d(!1)}),(0,a.jsx)(uc,{currentOrgId:e.currentOrgId}),(0,a.jsx)(cK.cx,{})]})}function ug(e){let t=(0,i.d4)(e=>e.currentUserOrgId),r=s.useRef(new cH.M4);return(s.useEffect(()=>{r.current.start()},[]),t)?(0,a.jsx)(uf,{currentOrgId:t,initialPostUuidToShow:e.postUuid,creatorId:e.creatorId,feedViewTimer:r.current}):null}var uh=r(815945);function ux(e){let t=e.tabs?(0,a.jsx)(nS.t.TabStrip,{manager:e.tabManager,children:e.tabs.map(e=>(0,s.createElement)(nS.t.Tab,{...e.tabProps,key:e.tabName},e.tabName))}):(0,a.jsx)(a.Fragment,{});return(0,a.jsx)(sz.g2,{leftSide:t,rightSide:e.viewbarActions||[]})}var ub=r(507428);let uv=e=>({tileSortFilterConfig:e.deletedFiles,sortKeys:[oi.C0.TRASHED_AT]}),uy=e=>({tileSortFilterConfig:e.trashedFolders,sortKeys:[oi.C0.TRASHED_AT,oi.C0.NAME]}),uw=(e,t,r)=>{let s=(0,uh.xx)(uv)(t);return[(0,a.jsx)(sz.gr,{dispatch:e,options:s,selectedView:r},0),(0,a.jsx)(sz.ye,{config:s.tileSortFilterConfig},1),(0,a.jsx)(sz.mc,{dispatch:e,options:s,selectedView:r},2),(0,a.jsx)(sz.$c,{initialViewMode:s.tileSortFilterConfig.viewMode,onViewModeChange:t=>{(0,av.sx)("file view toggle",{viewType:t===oi.XU.GRID?"grid":"list"}),e(eS.JF({selectedView:r,config:{...s.tileSortFilterConfig,viewMode:t}}))}},3)]},uj=(e,t,r)=>{let s=(0,uh.xx)(uy)(t);return[(0,a.jsx)(sz.KH,{dispatch:e,options:s,selectedView:r},6),(0,a.jsx)(sz.mc,{dispatch:e,options:s,selectedView:r},4),(0,a.jsx)(sz.$c,{initialViewMode:s.tileSortFilterConfig.viewMode,onViewModeChange:t=>{(0,av.sx)("folder view toggle",{viewType:t===oi.XU.GRID?"grid":"list"}),e(eS.JF({selectedView:r,config:{...s.tileSortFilterConfig,viewMode:t}})),e(eS.uV({viewId:ub.l,viewMode:t}))}},5)]};function uT({currView:e}){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.tileSortFilterStateByView),n=uw(t,r,e),o=uj(t,r,e),[l,d,c]=nS.t.useManagedTabs({deletedFiles:!0,trashedFolders:!0},e.view,s.useCallback(e=>{t(eR.sf({view:e}))},[t]));return(0,a.jsx)(ux,{tabManager:c,tabs:[{tabName:(0,N.t)("file_browser.tool_bar.trashed_files"),view:{view:"deletedFiles"},ariaLabel:(0,N.t)("file_browser.tool_bar.trashed_files.aria_label"),tabProps:l.deletedFiles},{tabName:(0,N.t)("file_browser.tool_bar.trashed_projects"),view:{view:"trashedFolders"},ariaLabel:(0,N.t)("file_browser.tool_bar.trashed_projects.aria_label"),tabProps:l.trashedFolders}],viewbarActions:"deletedFiles"===e.view?n:o})}var uE=r(55104),uI=r(19536),uN=r(542194),uC=r(174697),uS=r(436731),uk=r(830372);function uR({currentProgress:e,totalAllowed:t}){return(0,a.jsxs)(uk.Y,{spacing:"auto",children:[(0,a.jsxs)("div",{className:I.s.relative.wFull.$,className:"x1b68738 x1n2onr6",children:[(0,a.jsx)("div",{className:I.s.absolute.wFull.$,children:(0,a.jsx)(uk.Y,{cornerRadius:5,height:6,backgroundColor:"secondary"})}),(0,a.jsx)("div",{className:I.s.absolute.wFull.flex.itemsCenter.$,children:(0,a.jsx)(uk.Y,{cornerRadius:5,height:6,width:`${Math.min(e/t*100,100)}%`,backgroundColor:e>=t?"warning":"brand"})})]}),(0,a.jsx)("div",{className:"x1i0uq9b x1ok221b xp5pvr8 x4z9k3i xk50ysn x1d3mw78 x122x9cr",children:(0,N.t)("file_browser.starter_limit_global.files_used",{numFilesUsed:e,totalFiles:t})})]})}function uA({text:e,tooltipText:t,currentProgress:r,totalProgress:s}){return(0,a.jsxs)(uk.Y,{direction:"vertical",height:"hug-contents",spacing:"7px",children:[(0,a.jsxs)(uk.Y,{horizontalAlignItems:"space-between",children:[(0,a.jsxs)(uk.Y,{spacing:4,children:[(0,a.jsx)(C.E,{fontSize:13,fontWeight:"medium",children:e}),(0,a.jsx)("div",{"data-tooltip-type":r8.Ib.TEXT,"data-tooltip":t,"data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-tip-align-left":!0,"data-tooltip-text-left":!0,children:(0,a.jsx)(nz.In,{icon:"info-16",fill:"secondary"})})]}),(0,a.jsxs)(C.E,{fontSize:13,fontWeight:"medium",children:[r,"/",s]})]}),(0,a.jsxs)("div",{className:I.s.relative.wFull.$,children:[(0,a.jsx)("div",{className:I.s.absolute.wFull.$,children:(0,a.jsx)(uk.Y,{cornerRadius:5,height:5,backgroundColor:"disabled"})}),(0,a.jsx)("div",{className:I.s.absolute.wFull.$,children:(0,a.jsx)(uk.Y,{cornerRadius:5,height:5,width:`${Math.min(r/s*100,100)}%`,backgroundColor:r>=s?"warning":"brand"})})]})]})}let uO={title:{...aE.g.textBodyLargeStrong,$$css:!0},description:{...aE.g.textBodyMedium,paddingRight:"xmzs88n",paddingInlineStart:null,paddingInlineEnd:null,marginTop:"x1xmf6yo",$$css:!0}},uF=(0,r2.tf)(tO.$n);function uP({canEditTeam:e,isDraftsFolder:t}){let r=(0,i.wA)(),s=(0,sv.ol)(),n=(0,eA._6)();return t||!s||(0,sx.w5)(s)||"folder"!==n.view?null:(0,a.jsx)(uL,{folderId:n.folderId,showPlanComparisonModal:()=>{r((0,tC.to)({type:aA.V,data:{upsellSource:aF.b.STARTER_LIMIT_OVERVIEW,teamId:s.id}}))},canEditTeam:e})}function uL({folderId:e,showPlanComparisonModal:t,canEditTeam:r}){let s=(0,G.E9)(),i=(0,p.Rs)((0,eK.yU5)({projectId:e})),n=a8.h.useTrackingContext({trigger:aF.b.STARTER_LIMIT_OVERVIEW});if("loaded"!==i.status)return null;let o=i.data.project?.team?.projectsCount.status==="loaded"?i.data.project?.team?.projectsCount.data??1:1,l=i.data.project?.team?.teamFileCounts?.designFileCount??0,d=i.data.project?.team?.teamFileCounts?.whiteboardFileCount??0,c=i.data.project?.team?.teamFileCounts?.slideFileCount,u=c?parseInt(c,10):0,m=(0,ea.oA)(i.data.project?.team?.teamFileCounts?.totalFileCount)??0,_=s?m>=sx.WW:l>=sx.WW||d>=sx.WW;return(0,a.jsx)(r2.fu,{name:"Starter Limit Overview",properties:n,children:(0,a.jsx)("div",{className:U()(I.s.cursorDefault.mr32.maxW300.colorBg.$,"starter_limit_overview--responsiveHide--nMkA0"),style:iV.sx.sticky.add({alignSelf:"flex-start",top:"128px",maxWidth:s?"280px":"300px"}).$,children:(0,a.jsxs)(uk.Y,{direction:"vertical",padding:s?16:32,spacing:s?"auto":24,cornerRadius:s?13:8,strokeWidth:1,strokeColor:"default",height:"hug-contents",children:[(0,a.jsx)("div",{...s?er.Ay.props(uO.title):{},children:s?(0,N.tx)("file_browser.starter_limit_global.your_plan_files"):(0,a.jsx)(C.E,{fontSize:16,fontWeight:"semi-bold",children:(0,N.tx)("file_browser.starter_limit.your_starter_team_overview")})}),(0,a.jsx)(uD,{numProjects:o,numFigmaFilesUsed:l,numFigjamFilesUsed:d,numSlidesFilesUsed:u,totalFilesUsed:m,isStarterGlobalFileLimitOn:s}),r?(0,a.jsxs)(uk.Y,{direction:"vertical",spacing:"12px",children:[s?(0,a.jsx)("div",{...er.Ay.props(uO.description),children:(0,N.tx)("file_browser.starter_limit_global.description")}):(0,a.jsx)(C.E,{fontSize:13,children:(0,N.tx)(_?"file_browser.starter_limit.running_out_of_files":"file_browser.starter_limit.enough_for_you_to_get_started")}),(0,a.jsx)(uF,{onClick:t,trackingProperties:{trackingDescriptor:em.c.VIEW_PLANS,numFiles:m},children:(0,N.tx)("upgrade.view_plans")})]}):(0,a.jsx)(C.E,{fontSize:13,children:(0,N.tx)("file_browser.starter_limit.trying_things_out")})]})})})}function uD({numProjects:e,numFigmaFilesUsed:t,numFigjamFilesUsed:r,numSlidesFilesUsed:s,totalFilesUsed:i,isStarterGlobalFileLimitOn:n}){return(0,a.jsxs)(uk.Y,{direction:"vertical",spacing:24,width:n?"100%":234,children:[n&&(0,a.jsx)(uR,{currentProgress:i,totalAllowed:sx.WW}),!n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(uA,{text:(0,N.t)("file_browser.starter_limit.projects"),tooltipText:(0,N.t)("file_browser.starter_limit.projects.tooltip"),currentProgress:e,totalProgress:sx.Wf}),(0,a.jsx)(uA,{text:(0,N.t)("file_browser.starter_limit.design_files"),tooltipText:(0,N.t)("file_browser.starter_limit.design_files.tooltip"),currentProgress:t,totalProgress:sx.WW}),(0,a.jsx)(uA,{text:(0,N.t)("file_browser.starter_limit.figjam_boards"),tooltipText:(0,N.t)("file_browser.starter_limit.figjam_boards.tooltip"),currentProgress:r,totalProgress:sx.WW}),(0,a.jsx)(uA,{text:(0,N.t)("file_browser.starter_limit.slides"),tooltipText:(0,N.t)("file_browser.starter_limit.slides.tooltip"),currentProgress:s,totalProgress:sx.WW})]})]})}var uM=r(293658),uB=r(958822),uU=r(738636),uW=r(93909),u$=r(258114),uG=r(760074),uV=r(121751),uz=r(37051),uH=r(193867),uK=r(18613),uY=r(53721),uq=r(403855),uJ=r(256203);let uX="open_invoice_reminder_card--icon--gcN35";function uQ(e){let t=(0,i.wA)(),r=e.team.restrictions_list?.includes(eM.P4.LOCKED),s=e.canAdminTeam?r?(0,N.t)("billing.open_invoice_reminder.title"):(0,N.t)("billing.open_invoice_reminder.grace_period_title"):(0,N.t)("billing.open_invoice_reminder.title_viewer"),n=e.canAdminTeam?r?(0,N.t)("billing.open_invoice_reminder.locked_admin_description"):(0,N.t)("billing.open_invoice_reminder.grace_period_admin_description"):(0,N.t)("billing.open_invoice_reminder.locked_viewer_description"),o=e.canAdminTeam?(0,N.t)("billing.open_invoice_reminder.cta"):null,l={"data-tooltip-type":r8.Ib.TEXT,"data-tooltip":(0,N.t)("billing.open_invoice_reminder.button_tooltip"),"data-tooltip-show-immediately":!0};return(0,a.jsxs)(uk.Y,{direction:"vertical",padding:e.noPaddingOrBorder?0:20,spacing:24,width:288,cornerRadius:e.noPaddingOrBorder?void 0:8,strokeWidth:e.noPaddingOrBorder?void 0:1,strokeColor:"default",height:"hug-contents",children:[(0,a.jsx)("div",{className:I.s.flex.justifyBetween.wFull.$,children:(0,a.jsx)("div",{className:I.s.flex.itemsCenter.justifyCenter.w32.h32.bRadius5.colorBgWarning.$,children:r?(0,a.jsx)(uq.s,{className:uX}):(0,a.jsx)(uJ.R,{className:uX})})}),(0,a.jsx)("div",{className:I.s.font14.fontSemiBold.lh24.$,children:s}),(0,a.jsx)("div",{className:I.s.font13.lh24.$,children:n}),!!o&&(0,a.jsx)("div",{className:I.s.flex.justifyEnd.wFull.$,children:(0,a.jsx)(tO.IK,{onClick:()=>t(eR.sf({view:"teamAdminConsole",teamId:e.team.id,teamAdminConsoleViewTab:eJ.Iv.BILLING})),variant:"primary",htmlAttributes:l,children:o})})]})}function uZ(e){return e.team.restrictions_list?.includes(eM.P4.LOCKED)||e.canAdminTeam?(0,a.jsx)(r2.fu,{name:"Open Invoice Reminder Card",properties:{teamId:e.team.id},children:(0,a.jsx)(uQ,{...e})}):null}var u0=r(32680),u1=r(603826);let u4="tiles_view--container--u00AG",u2="tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd";function u8({tile:e,index:t,dispatch:r,selectedView:a,currentPlanFilter:s,currentSharedByFilter:i,isListView:n}){e.type===ra.nb.FILE&&(r(T.UN({fileKey:e.file.key,entrypoint:"file tile",currentPlanFilter:s,currentSharedByFilter:i,viewMode:void 0!==n?n?"list":"grid":void 0})),(0,uH.K)(a)&&r(T.T5({index:t})),c.eD&&(0,av.sx)("Open File Click",{fileKey:e.file.key,fileRepoId:e.file.fileRepoId,uiSelectedView:JSON.stringify(a)}))}let u5=(e,t)=>{let r=ra.Tf.getName(e)||"",a=ra.Tf.getName(t)||"";return tw.Tt.compare(r,a)},u6=(e,t)=>{let r=(ra.Tf.getName(e)||"").toLowerCase(),a=(ra.Tf.getName(t)||"").toLowerCase();return r===a?0:r<a?-1:1},u3=(e,t)=>{if(e.type!==ra.nb.FILE||t.type!==ra.nb.FILE)return 0;let r=e.file,a=t.file;return r.createdAt<a.createdAt?1:-1},u7=(e,t)=>e.type!==ra.nb.PROTOTYPE||t.type!==ra.nb.PROTOTYPE?0:e.prototype.file_key<t.prototype.file_key?-1:1,u9=(e,t)=>{let r=ra.Tf.getAccessedAt(e),a=ra.Tf.getAccessedAt(t);return r&&a?r>a?1:-1:a?-1:r?1:0},me=(e,t)=>ra.Tf.getCreatedAt(e)>ra.Tf.getCreatedAt(t)?1:-1,mt=(e,t)=>{let r=ra.Tf.getTouchedAt(e),a=ra.Tf.getTouchedAt(t);return null===r||null===a?0:r>a?1:-1},mr=(e,t)=>e.type!==ra.nb.FILE&&e.type!==ra.nb.REPO||t.type!==ra.nb.FILE&&t.type!==ra.nb.REPO?0:(e.type===ra.nb.FILE?e.file.trashedAt:e.repo.trashed_at)>(t.type===ra.nb.FILE?t.file.trashedAt:t.repo.trashed_at)?1:-1;function ma({currentPlanFilter:e,currentSharedByFilter:t,emptyStateContent:r,emptyStateText:n,isDataPartial:l,isFolder:d,isEligbileForProTeamLockedRevampUI:m,newFileTile:_,overFilteredText:f,shouldLogVisibleTileCount:g=!1,sortFilterOptions:x,tileActions:b,tiles:v}){let y=(0,J.iZ)(),w=(0,eA._6)(),j="folder"===w.view?w.folderId:null,T=rl.M4.Folder.useValue(j).data,C=[y?.drafts_folder_id,y?.personal_drafts_folder_id].includes(T?.id),{showing:S,show:k,data:R}=(0,ot.L)(),A=(0,eD.FC)(),O=(0,sv.ol)(),F=T?.team_id||O?.id,P=(0,p.Rs)((0,eK.yQw)((0,uV._X)(uV.Pw.GROUP_7)&&F?{teamId:F}:null)),L=s.useMemo(()=>P.transform(({team:e})=>!!e?.canEdit),[P]),D=(0,i2.MF)({label:i2.A5.TilesView.canEditTeam,oldValue:sm.Qw.useMemoizedLoaded((0,s9.canEditTeam)(T?.team_id||O?.id||"",A)),newValue:L,enableFullRead:(0,uV.DQ)(uV.Pw.GROUP_7),contextArgs:{folderTeamId:T?.team_id,teamFromFileBrowserId:O?.id}}).unwrapOr(!1),M=s.useMemo(()=>P.transform(({team:e})=>!!e?.canAdmin).unwrapOr(!1),[P]);s.useEffect(()=>{let e="page_selected_view",t=uN.sn.get(e);if(t&&t.isRunning&&!t.isUnreliable){let t=uN.sn.tryStop(e);t&&(0,av.sx)("File Browser Tab Switch Page Load Time",{elapsedMs:t,selectedView:w.view},{forwardToDatadog:!0,batchRequest:!0})}},[w.view,j]);let{userStateLoaded:B,userExternallyRestricted:U,selectedBranchKeyByRepoId:W}=(0,s_.R)(e=>({userStateLoaded:e.userStateLoaded,userExternallyRestricted:(0,s9.isOrgUserExternallyRestrictedFromState)(A),selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId})),$=(0,i.wA)(),G=(0,eI.vt)(O?.id),V=!!O&&G,z=!!O&&!!m,H=x.tileSortFilterConfig.viewMode??oi.XU.GRID,K=H===oi.XU.LIST,Y="recentsAndSharing"===w.view&&w.tab===oU.G.SHARED_FILES,q=(e,t,r)=>e===oi.rJ.ANY||e===oi.rJ.SELF&&r.type===ra.nb.FILE&&r.file.creatorId===t||e===oi.rJ.SELF&&r.type===ra.nb.REPO&&r.branches[0].creator_id===t||e===oi.rJ.OTHER&&r.type===ra.nb.FILE&&r.file.creatorId!==t||e===oi.rJ.OTHER&&r.type===ra.nb.REPO&&r.branches[0].creator_id!==t,X=(e,t)=>{let r="design";switch(t.type===ra.nb.FILE?r=t.file.editorType:t.type===ra.nb.PINNED_FILE?r=t.file.editorType:t.type===ra.nb.OFFLINE_FILE&&(r=t.file.editorType),e){case oi.t2.ANY:return!0;case oi.t2.DESIGN:if(t.type===ra.nb.FILE||t.type===ra.nb.REPO||t.type===ra.nb.PINNED_FILE||t.type===ra.nb.OFFLINE_FILE)return"design"===r;return!1;case oi.t2.FIGJAM:if(t.type===ra.nb.FILE||t.type===ra.nb.PINNED_FILE||t.type===ra.nb.OFFLINE_FILE)return"whiteboard"===r;return!1;case oi.t2.PROTOTYPE:return t.type===ra.nb.PROTOTYPE;case oi.t2.SLIDES:if(t.type===ra.nb.FILE||t.type===ra.nb.PINNED_FILE||t.type===ra.nb.OFFLINE_FILE)return"slides"===r;return!1;case oi.t2.SITES:if(t.type===ra.nb.FILE||t.type===ra.nb.PINNED_FILE||t.type===ra.nb.OFFLINE_FILE)return"sites"===r;return!1;case oi.t2.COOPER:if(t.type===ra.nb.FILE||t.type===ra.nb.PINNED_FILE||t.type===ra.nb.OFFLINE_FILE)return"cooper"===r;return!1;case oi.t2.MAKE:if(t.type===ra.nb.FILE||t.type===ra.nb.PINNED_FILE||t.type===ra.nb.OFFLINE_FILE)return"figmake"===r;return!1;default:(0,E.xb)(e)}},Q=(e,t)=>!e||e===`${ra.Tf.getSharedBy(t)}`,Z=s.useCallback((e,t)=>{if("recentsAndSharing"===w.view&&w.tab===oU.G.SHARED_FILES||!e||!e.planId)return!0;let r=e.planId;switch(t.type){case ra.nb.FILE:return("org"===e.planType?t.file.parentOrgId:t.file.teamId)===r;case ra.nb.REPO:return("org"===e.planType?t.repo.parent_org_id:t.repo.team_id)===r;case ra.nb.PROTOTYPE:return("org"===e.planType?t.prototype.parent_org?.id:t.prototype.parent_team?.id)===r;case ra.nb.OFFLINE_FILE:return"org"===e.planType&&t.file.orgId===r;default:return!1}},[w]),ee=s.useCallback((e,t)=>{let r,a,s;let i=e.filter(e=>Q(t.filters.sharedBy,e)&&X(t.filters.fileType,e)&&q(t.filters.creator,A.user?.id,e)&&Z(t.filters.plan,e));if(r=Y?i.filter(e=>e.type===ra.nb.FILE||e.type===ra.nb.PROTOTYPE||e.type===ra.nb.REPO):i.filter(e=>e.type===ra.nb.FILE||e.type===ra.nb.REPO||e.type===ra.nb.OFFLINE_FILE),"recentsAndSharing"===w.view&&w.tab===oU.G.SHARED_FILES)return i;let n=t.sort.dir===oi.ue.DESC;switch(t.sort.key){case oi.C0.ACCESSED_AT:a=uS.f.byComparators(u9),s=i;break;case oi.C0.CREATED_AT:a=uS.f.byComparators(me),s=i;break;case oi.C0.TOUCHED_AT:a=uS.f.byComparators(mt),s=r;break;case oi.C0.NAME:if(C){a=uS.f.byComparators(u5,uS.f.byProperty("type")),s=i;break}let o=i.length<tw.Tw;a=uS.f.byComparators(o?u5:u6,uS.f.byProperty("type"),u3,u7),s=i;break;case oi.C0.TRASHED_AT:a=uS.f.byComparators(mr),s=r;break;case oi.C0.SHARED_AT:return i;default:return console.error("Unknown sort key",t.sort.key),[]}if(a=n?uS.f.reverse(a):a,s.sort(a),l)for(;s[s.length-1]?.type===ra.nb.OFFLINE_FILE;)s.pop();return s},[Y,Z,l,C,w,A.user?.id]),et=s.useMemo(()=>ee(v,x.tileSortFilterConfig),[ee,v,x.tileSortFilterConfig]),er=(0,ed.md)(ra.Y6),ea=s.useCallback((r,a,s)=>{u8({tile:r,index:s,dispatch:$,selectedView:w,currentPlanFilter:e,currentSharedByFilter:t,isListView:K}),function({tile:e,e:t,dispatch:r,selectedView:a,permissionsState:s,selectedBranchKeyByRepoId:i,renamingItem:n}){if(ra.Tf.isRenaming(e,n)||e.type===ra.nb.FILE&&e.file.trashedAt||e.type===ra.nb.REPO&&e.repo.trashed_at){t.preventDefault(),t.stopPropagation();return}let o=h.Ay.mac?t.metaKey:t.ctrlKey,l=null;o&&t.shiftKey?l=c.aw.FOCAL_TAB:o?l=c.aw.BACKGROUND_TAB:t.shiftKey&&(l=c.aw.NEW_WINDOW);let d=s.user;if(c.eD){let a;switch(l=l??c.aw.FOCAL_TAB,t.preventDefault(),t.stopPropagation(),e.type){case ra.nb.FILE:a=!!(e.file.isTeamTemplate&&(0,eL.LQ)(s)),c.eD.openFile({fileKey:e.file.key,title:e.file.name||"Untitled",fileEditorType:e.file.editorType,target:l,isBranch:(0,uG.Kz)(e.file),isLibrary:!!e.file.lastPublishedAt,isTeamTemplate:a,userId:d?.id});break;case ra.nb.PINNED_FILE:a=!!(e.file.isTeamTemplate&&(0,eL.LQ)(s)),c.eD.openFile({fileKey:e.file.key,title:e.file.name||"Untitled",fileEditorType:e.file.editorType,isTeamTemplate:a,target:l,userId:d?.id});break;case ra.nb.PROTOTYPE:c.eD.openPrototype(e.prototype.file_key,e.prototype.page_id,e.prototype.fig_file.name||"",l,d?.id);break;case ra.nb.REPO:let n=(0,uG.mr)(e.repo,e.branches,i);c.eD.openFile({fileKey:n.key,title:n.name,fileEditorType:n.editor_type,target:l,isBranch:(0,uG.Xm)(n),isLibrary:!!n.last_published_at,userId:d?.id});break;case ra.nb.OFFLINE_FILE:r(uU.NA({file:e.file,openNewFileIn:aw.ai.NEW_TAB,source:uK.U.OFFLINE_FILE_TILE}));break;default:(0,E.xb)(e)}return}if(null!=l){if(r(eR.oB()),e.type===ra.nb.OFFLINE_FILE){r(uU.NA({file:e.file,openNewFileIn:aw.ai.NEW_TAB,source:uK.U.OFFLINE_FILE_TILE})),t.preventDefault(),t.stopPropagation();return}if(t instanceof KeyboardEvent){let r=ra.Tf.getUrl(e,i);u.Ay.redirect(r,"_blank"),t.preventDefault(),t.stopPropagation()}return}t.preventDefault(),t.stopPropagation();let m=s.currentUserOrgId,_=s.currentTeamId,p="recentsAndSharing"===a.view||"folder"===a.view?a:void 0;r(uW.c5({planId:m||_,planType:m?oB.O.ORG:oB.O.TEAM}));let f={user:d,teamId:_,orgId:m,selectedView:a};switch(e.type){case ra.nb.FILE:(0,of.N7)(m,e.file.parentOrgId,_,e.file.teamId)?(0,of.QV)({file:{key:e.file.key,editorType:e.file.editorType||void 0}},f):r(eR.sf({view:"fullscreen",fileKey:e.file.key,editorType:uz.z4.getIsExtension()?uY.nT.DevHandoff:e.file.editorType?(0,uY.wN)(e.file.editorType):uY.nT.Design,prevSelectedView:p}));break;case ra.nb.PINNED_FILE:(0,of.N7)(m,e.file.parentOrgId,_,e.file.teamId)?(0,of.QV)({file:{key:e.file.key,editorType:e.file.editorType}},f):r(eR.sf({view:"fullscreen",fileKey:e.file.key,editorType:e.file.editorType?(0,uY.wN)(e.file.editorType):uY.nT.Design,prevSelectedView:p}));break;case ra.nb.PROTOTYPE:let g=e.prototype.fig_file;(0,of.N7)(m,g.parent_org_id,_,g.team_id)?(0,of.QV)({base:"proto",file:{key:g.key,editorType:g.editor_type||void 0},nodeId:e.prototype.page_id},f):r(eR.sf({view:"prototype",file:g,nodeId:e.prototype.page_id,prevSelectedView:p}));break;case ra.nb.REPO:{let t=(0,uG.mr)(e.repo,e.branches,i);if(!t)throw Error(`Branch not found for repo ${e.repo.id}`);let a=t.key;(0,of.N7)(m,t.parent_org_id,_,t.team_id)?(0,of.QV)({file:{key:a}},f):r(eR.sf({view:"fullscreen",fileKey:a,editorType:uY.nT.Design,prevSelectedView:p}));break}case ra.nb.OFFLINE_FILE:r(uU.NA({file:e.file,openNewFileIn:aw.ai.SAME_TAB,source:uK.U.OFFLINE_FILE_TILE}));break;default:(0,E.xb)(e)}}({tile:r,e:a,dispatch:$,selectedView:w,permissionsState:A,selectedBranchKeyByRepoId:W,renamingItem:er})},[K,e,t,$,A,W,w,er]),es=s.useCallback((r,a,s)=>{u8({tile:r,index:s,dispatch:$,selectedView:w,currentPlanFilter:e,currentSharedByFilter:t,isListView:K})},[K,e,t,w,$]),ei=s.useCallback((e,t,r)=>{let a=ra.Tf.getId(e);uM.$.start(a),k({data:{tile:e,targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:r}})},[k]),en=(0,ra.nw)(v),[eo,el]=s.useState([]),{setVisibleTiles:ec}=function({shouldLogVisibleTileCount:e,viewMode:t,sortedFilteredTilesLength:r}){let[a,i]=s.useState(null),n=(0,eA._6)().view,o=s.useRef(!1);return s.useEffect(()=>{let s=o.current;e&&!s&&a&&(av.az.trackDefinedEvent("file_browser.visible_tiles_count",{totalCount:r,visibleCount:a.length,viewMode:(0,oi.jq)(t),selectedView:n,viewportWidth:window.innerWidth,viewportHeight:window.innerHeight,isMobileDevice:h.Ay.mobile}),o.current=!0)},[a,e,t,r,n]),{visibleTiles:a,setVisibleTiles:i}}({shouldLogVisibleTileCount:g,viewMode:H,sortedFilteredTilesLength:et.length});if((0,uC.Cm)(eo),!function(e){let t=(0,eA._6)(),r=(0,i.wA)(),a=(0,uI.k9)(()=>{if("deletedFiles"===t.view)return[];let r=[];return e.forEach(e=>{switch(e.type){case ra.nb.FILE:r.push({fileKey:e.file.key});break;case ra.nb.REPO:let t=(0,ra.yF)(e);r.push({fileKey:t.key})}}),r},[t.view,e]),n=(0,p.p)(eK.hqi,a);s.useEffect(()=>{for(let{result:e,args:t}of n)if("loaded"===e.status&&e.data){let a=(0,u$.ZF)(e.data);r(t7.Lk({fileKey:t.fileKey,users:a}))}},[n,r])}(eo),0===et.length){let e=(()=>{if(v.length>0&&""!==f){let e=f??(0,N.t)("file_browser.tiles_view.default_overfiltered_text");return(0,a.jsx)("div",{className:u2,"data-test-id":"over-filtered-state-text",children:e})}let e="";return(n?e=n:(h.Ay.mobile||h.Ay.tablet)&&(e=(0,N.t)("file_browser.folder.this_project_is_empty")),e)?(0,a.jsx)("div",{className:u2,"data-test-id":"empty-state-text",children:e}):null})();if(e)return(0,a.jsx)("div",{className:u4,children:(0,a.jsxs)("div",{className:I.s.flex.$,children:[e,V&&(0,a.jsx)("div",{className:I.s.mr32.$,children:(0,a.jsx)(u0.R,{teamId:O.id,canEditTeam:D})}),z&&(0,a.jsx)("div",{className:I.s.mr32.$,children:(0,a.jsx)(uZ,{team:O,canAdminTeam:M})})]})});if(r)return(0,a.jsx)("div",{className:u4,children:r})}let eu=u4+(K?` ${u1._O} `:` ${u1.CK} `),em=v.length>0;if(!B&&!(0,o.k)().stop_rendering_tiles_view_loading_spinner)return(0,a.jsx)("div",{className:"tiles_view--loading--6rn3X",children:(0,a.jsx)(nt.k,{})});let e_=!!O?.restrictions_list?.includes(eM.P4.LOCKED),ep=V||e_&&z;return(0,a.jsxs)("div",{className:u4,children:[(0,a.jsxs)("div",{className:eu,children:[(0,a.jsxs)("div",{className:I.s.flex.$,children:[em&&(0,a.jsx)(uB.d,{sortConfig:x.tileSortFilterConfig.sort,handleOpenTile:es,items:et,sortBy:e=>{let t=x.tileSortFilterConfig,r=t.sort.dir===oi.ue.DESC?oi.ue.ASC:oi.ue.DESC;$(eS.JF({selectedView:w,config:{...t,sort:{key:e,dir:e===t.sort.key?r:t.sort.dir}},tab:"recentsAndSharing"===w.view?w.tab:void 0}))},viewType:K?oi.XU.LIST:oi.XU.GRID,updateRenderedItems:el,updateVisibleItems:ec,handleOpenDropdown:ei,checksForViewOnlyLabels:ep?{teamId:O.id,isLockedTeam:!0}:void 0}),em&&(V?(0,a.jsx)("div",{className:I.s.mr32.$,children:(0,a.jsx)(u0.R,{teamId:O.id,canEditTeam:D})}):z?(0,a.jsx)("div",{className:I.s.mr32.$,children:(0,a.jsx)(uZ,{team:O,canAdminTeam:M})}):(0,a.jsx)(uP,{canEditTeam:D,isDraftsFolder:C}))]}),!(h.Ay.mobile||h.Ay.tablet)&&_&&!U&&!em&&(0,a.jsxs)("div",{className:I.s.flex.$,children:[(0,a.jsx)("div",{className:"tiles_view--importPrompt--srrJn",children:(0,a.jsxs)("div",{className:u2,children:[(0,a.jsx)("div",{className:"tiles_view--emptyTitle--3Vwmu",children:d?(0,N.t)("file_browser.folder.this_project_doesn_t_have_any_files"):(0,N.t)("file_browser.folder.no_files_yet")}),(0,N.tx)("file_browser.folder.create_a_new_file_to_start_from_scratch_with_pptx")]})}),V?(0,a.jsx)("div",{className:I.s.mr32.$,children:(0,a.jsx)(u0.R,{teamId:O.id,canEditTeam:D})}):z?(0,a.jsx)("div",{className:I.s.mr32.$,children:(0,a.jsx)(uZ,{team:O,canAdminTeam:M})}):(0,a.jsx)(uP,{canEditTeam:D,isDraftsFolder:C})]})]}),(()=>{let e=R?.tile??null,t=R?.index;return(0,a.jsx)(r2.fu,{name:d?r5.e0.PROJECT_TILES_VIEW_DROPDOWN:r5.e0.TILES_VIEW_DROP_DOWN,enabled:S,properties:{tileType:e?.type,tileFileId:e?.type===ra.nb.FILE?e?.file.key:void 0},children:(0,a.jsx)(or.i,{tileActions:b,tile:e,selectedTiles:en,openTile:r=>{e&&ea(e,r,t)},dropdownVisible:S})})})()]})}var ms=r(335273),mi=r(706055);function mn(){let e=(0,Q.d)(),t=(0,i.d4)(e=>e.currentTeamId),r=(0,i.d4)(e=>e.tileSortFilterStateByView),n=(0,eI.vt)(),o=(0,eE.R)(t),l=(0,uh.xx)(e=>({tileSortFilterConfig:e,sortKeys:[oi.C0.TRASHED_AT,oi.C0.NAME,oi.C0.CREATED_AT,oi.C0.TOUCHED_AT]}))(r.deletedFiles),{creatorFilter:d,fileTypeFilter:c}=function(e){let t="your_files";switch(e.tileSortFilterConfig.filters.creator){case oi.rJ.SELF:t="your_files";break;case oi.rJ.OTHER:t="other_files";break;case oi.rJ.ANY:t="all";break;default:(0,E.xb)(e.tileSortFilterConfig.filters.creator)}let r="";switch(e.tileSortFilterConfig.filters.fileType){case oi.t2.DESIGN:r="design";break;case oi.t2.FIGJAM:r="whiteboard";break;case oi.t2.PROTOTYPE:r="prototype";break;case oi.t2.SLIDES:r="slides";break;case oi.t2.SITES:r="sites";break;case oi.t2.COOPER:r="cooper";break;case oi.t2.MAKE:r="figmake";break;case oi.t2.ANY:r="";break;default:(0,E.xb)(e.tileSortFilterConfig.filters.fileType)}return{creatorFilter:t,fileTypeFilter:r}}(l),u=(0,eY.XP)({reportErrorsToTeam:M.e.WAYFINDING}),{subscription:m,fetchNextPage:_,isFetchingNextPage:f}=function(e){let t=(0,p.Rs)(eK.R89,{...e,firstPageSize:55}),r=(0,s.useCallback)(()=>{let e=t.data?.trashedResources;"loaded"===t.status&&e&&e.hasNextPage()&&e.loadNext(55)},[t,55]),a="loaded"===t.status&&t.data.trashedResources.isLoadingNextPage,n=(0,s.useMemo)(()=>t.transform(e=>{let t=e.trashedResources;return t?t.reduce((e,t)=>{if(t.file&&t.file.trashedAt){var r;e.push((r=t.file,{type:ra.nb.FILE,file:{...r,signedPreviewThumbnailUrls:null},sharedWithYouFields:null}))}else if(t.repo&&t.repo.trashedAt){let r=function(e){if(!e.sourceFile)return null;let t=mi.H.toSinatra(e);return{type:ra.nb.REPO,repo:t,branches:[os.F.toSinatra(e.sourceFile)],selectedBranchKey:e.sourceFile.key}}(t.repo);r&&e.push(r)}return e},[]):[]}),[t]),o=(0,i.wA)();return(0,s.useEffect)(()=>{if(n.data){let e=n.data?.filter(e=>e.type===ra.nb.FILE).map(e=>os.F.toSinatra(e.file))||[],t=n.data?.filter(e=>e.type===ra.nb.REPO).map(e=>e.repo)||[];o(t7.uo({files:e})),o(t9.uo({repos:t}))}},[n.data,o]),{subscription:n,fetchNextPage:r,isFetchingNextPage:a}}({cursor:null,creatorFilter:d,fileTypeFilter:c,sortType:l.tileSortFilterConfig.sort.key===oi.C0.TRASHED_AT?"trashed_at":"name",sortDirection:l.tileSortFilterConfig.sort.dir===oi.ue.ASC?"asc":"desc",planId:u?.key.parentId??null,planType:u?.key.type??null,queryParams:null}),g=(0,s.useMemo)(()=>m.unwrapOr([]),[m]),{trackPerformanceEvent:h}=(0,ms.S)("trashed_resources_pagination_performance","livegraph",!0);(0,s.useEffect)(()=>{h("fetch_end")},[h,g.length]),(0,s.useEffect)(()=>{"errors"===m.status&&h("fetch_error",{errors:JSON.stringify(m.errors??{})})},[h,m.status,m.errors]),(0,s.useEffect)(()=>(h("fetch_start"),()=>{h("fetch_cancel")}),[h]);let x=s.useCallback(()=>{f||(h("fetch_next"),_())},[f,_,h]),b=l.tileSortFilterConfig.filters,v=l.tileSortFilterConfig.sort;return(0,a.jsxs)(es.A,{loadingElementId:"loading-content-pane",loaded:"loading"!==m.status,loadingElementClassName:I.s.pr32.$,children:[(0,a.jsx)(uE.B,{onShouldFetchNextPage:x,isFetchingNextPage:f,children:(0,a.jsx)(mo,{tiles:g,tileActions:{restore:!0,restoreToOtherFolders:!0,deleteForever:!0,duplicateToDrafts:!e},sortFilterOptions:l,isTeamLockedDueToStarterLimits:n,isEligbileForProTeamLockedRevampUI:o})},`${d}-${b.fileType}-${v.key}-${v.dir}`),(0,a.jsx)(cK.cx,{})]})}function mo({tiles:e,tileActions:t,sortFilterOptions:r,isEligbileForProTeamLockedRevampUI:s}){return(0,a.jsx)(ma,{tiles:e,newFileTile:!1,tileActions:t,sortFilterOptions:r,emptyStateText:(0,N.t)("file_browser.tool_bar.trashed_empty_state"),isEligbileForProTeamLockedRevampUI:s})}var ml=r(490799),md=r(718513),mc=r(224),mu=r(652992),mm=r(739964);function m_({canEditTeam:e}){var t;let r=(0,i.wA)(),s=(0,sv.ol)(),n=(0,eA.z3)(),o=(0,x.I7)("exp_fbg_project_limit_upsell"),l=a8.h.useTrackingContext({trigger:aF.b.FOLDER_UPSELL_CARD});if(!(t=(0,eY.X$)("FolderUpsellCard").unwrapOr(null))||!e||t.tier!==eM.Ag.STARTER||"recentsAndSharing"===n||"trashedFolders"===n||!o.getConfig().getValue("show_upsell",!1))return null;let d=(0,a.jsx)(r6.Us,{className:I.s.noWrap.cursorDefault.$,onClick:e=>{e.stopPropagation(),r((0,tC.to)({type:aA.V,data:{upsellSource:aF.b.FOLDER_UPSELL_CARD,teamId:s?.id}}))},trackingProperties:{trackingDescriptor:em.c.PROFESSIONAL_PLAN,...l},trusted:!0,children:(0,N.tx)("team_view.folder_upsell.professional_plan")});return(0,a.jsx)(r2.fu,{name:"Folder Upsell Card",properties:l,children:(0,a.jsxs)(r2.$z,{className:U()(I.s.flex.flexColumn.alignLeft.p24.$,"folder_upsell--card--m7-Lh"),onClick:()=>{r((0,tC.to)({type:mm.DV,data:{team:s,resource:mu.vL.FOLDER,action:t5.ZN.CREATE_FOLDER,currentPlan:mc.F.Plan.STARTER,upsellPlan:mc.F.Plan.PRO,editorType:null,upsellSource:aF.b.FOLDER_UPSELL_CARD}}))},trackingProperties:{trackingDescriptor:em.c.FOLDER_UPSELL_CARD},dataTestId:"folder_upsell_button",children:[(0,a.jsxs)("div",{className:I.s.relative.wFull.$,children:[(0,a.jsx)(md.X,{FileThumbnailComponent:mp}),(0,a.jsx)("div",{style:iV.sx.absolute.topHalf.leftHalf.add({transform:"translate(-50%, -50%)"}).$,children:(0,a.jsx)(uk.Y,{cornerRadius:20,backgroundColor:"brand",height:40,width:40,children:(0,a.jsx)(nz.In,{icon:"new-40",fill:"onbrand"})})})]}),(0,a.jsxs)(uk.Y,{direction:"vertical",padding:{top:16},spacing:0,height:"hug-contents",children:[(0,a.jsx)(C.E,{fontSize:13,fontWeight:"medium",children:(0,N.tx)("team_view.folder_upsell.upgrade_to_create_more_projects")}),(0,a.jsx)(C.E,{fontSize:11,color:"secondary",children:(0,N.tx)("team_view.folder_upsell.get_unlimited_everything",{professionalPlanLink:d})})]})]})})}function mp(){return(0,a.jsx)("div",{className:I.s.wFull.hFull.colorBg.$})}function mf({canEditTeam:e}){let t=(0,i.wA)(),r=(0,sv.ol)(),s=(0,eA.z3)(),n=a8.h.useTrackingContext({trigger:aF.b.FOLDER_UPSELL_CARD}),o=(0,x.I7)("exp_fbg_project_limit_upsell");if(!r||!e||(0,sx.w5)(r)||"recentsAndSharing"===s||"trashedFolders"===s||!o.getConfig().getValue("show_upsell",!1))return null;let l=(0,a.jsx)(r6.Us,{className:I.s.noWrap.cursorDefault.$,onClick:e=>{e.stopPropagation(),t((0,tC.to)({type:aA.V,data:{upsellSource:aF.b.FOLDER_UPSELL_CARD,teamId:r?.id}}))},trackingProperties:{trackingDescriptor:em.c.PROFESSIONAL_PLAN,...n},trusted:!0,children:(0,N.tx)("team_view.folder_upsell.professional_plan")});return(0,a.jsx)(r2.fu,{name:"Folder Upsell List",properties:n,children:(0,a.jsx)("div",{className:I.s.flex.mt16.bRadius8.b1.colorBorder.$,style:iV.sx.add({borderStyle:"dashed"}).$,children:(0,a.jsxs)(r2.$z,{className:U()(I.s.flex.alignLeft.gap12.py24.px16.bRadius8.wFull.pl36.$,"folder_upsell--list--2Higk"),onClick:()=>{t((0,tC.to)({type:mm.DV,data:{team:r,resource:mu.vL.FOLDER,action:t5.ZN.CREATE_FOLDER,currentPlan:mc.F.Plan.STARTER,upsellPlan:mc.F.Plan.PRO,editorType:null,upsellSource:aF.b.FOLDER_UPSELL_CARD}}))},trackingProperties:{trackingDescriptor:em.c.FOLDER_UPSELL_CARD},dataTestId:"folder_upsell_button",children:[(0,a.jsxs)("div",{className:U()(I.s.relative.flexShrink0.h40.w64.py4.px8.colorBgSecondary.bRadius4.$,"folder_upsell--listCard--qnkxf"),children:[(0,a.jsx)("div",{style:iV.sx.absolute.topHalf.leftHalf.add({transform:"translate(-50%, -50%)"}).$,children:(0,a.jsx)(uk.Y,{cornerRadius:12,backgroundColor:"brand",height:24,width:24,horizontalAlignItems:"center",verticalAlignItems:"center",children:(0,a.jsx)(nz.In,{icon:"plus-32",fill:"onbrand"})})}),(0,a.jsxs)(uk.Y,{direction:"vertical",spacing:4,children:[(0,a.jsxs)(uk.Y,{direction:"horizontal",spacing:4,children:[(0,a.jsx)(uk.Y,{cornerRadius:2,backgroundColor:"default"}),(0,a.jsx)(uk.Y,{cornerRadius:2,backgroundColor:"default"})]}),(0,a.jsxs)(uk.Y,{direction:"horizontal",spacing:4,children:[(0,a.jsx)(uk.Y,{cornerRadius:2,backgroundColor:"default"}),(0,a.jsx)(uk.Y,{cornerRadius:2,backgroundColor:"default"})]})]})]}),(0,a.jsxs)(uk.Y,{direction:"vertical",spacing:0,children:[(0,a.jsx)(C.E,{fontSize:13,children:(0,N.tx)("team_view.folder_upsell.upgrade_to_create_more_projects")}),(0,a.jsx)(C.E,{fontSize:11,color:"secondary",children:(0,N.tx)("team_view.folder_upsell.get_unlimited_everything",{professionalPlanLink:l})})]})]})})})}var mg=r(799228),mh=r(52659),mx=r(837956),mb=r(622097);let mv="folder_list_view--emptyState--8vmgw tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd";function my(e){let t=(0,i.d4)(e=>e.dropdownShown),r=(0,i.d4)(e=>e.currentUserOrgId),s=(0,i.d4)(e=>e.user),{folderList:n}=e,o=()=>e.viewMode===oi.XU.LIST,l=(0,eI.vt)(e.teamId),d=!!e.teamId&&!!e.isEligbileForProTeamLockedRevampUI,c=(0,eE.jn)(),u=e.teamId?{teamId:e.teamId,isLockedTeam:!!l||c}:void 0,m=(0,mg.H)(t);return 0===n.length?(0,a.jsx)(a.Fragment,{children:e.onCreateNewFolder&&!(0,eT.R$)(s,r)?(0,a.jsx)("div",{className:mv,children:e.canEditTeamContents?(0,a.jsxs)("div",{className:"x78zum5 xdt5ytf x6s0dn4 xl56j7k xou54vl",children:[(0,a.jsx)("div",{className:"xk50ysn",children:(0,N.tx)("team_view.folder_empty_view.no_projects_yet")}),(0,N.tx)("team_view.folder_empty_view.projects_help_you_organize"),(0,a.jsx)(tO.$n,{variant:"secondary",onClick:e.onCreateNewFolder,iconPrefix:(0,a.jsx)(tX.x,{}),children:(0,N.tx)("team_view.folder_empty_view.new_project")})]}):(0,N.tx)("team_view.folder_empty_view.this_team_does_not_have_any_projects_yet")}):null!=e.emptyStateText?(0,a.jsxs)("div",{className:"x78zum5 x1rzw5jd",children:[(0,a.jsx)("div",{className:mv,children:e.emptyStateText}),l&&(0,a.jsx)(u0.R,{teamId:e.teamId,canEditTeam:!!e.canEditTeamContents}),e.team&&d&&(0,a.jsx)(uZ,{team:e.team,canAdminTeam:!!e.canAdminTeam})]}):(0,N.tx)("team_view.folder_empty_view.no_projects")}):(0,a.jsxs)(a.Fragment,{children:[(()=>{let t=n.length>=2?1:1===n.length?0:void 0;return(0,a.jsxs)("div",{className:"x78zum5 x1q0g3np",children:[(0,a.jsxs)("div",{className:"xh8yej3",children:[(0,a.jsx)(mh.m,{checksForViewOnlyLabels:u,currentPlanFilter:e.currentPlanFilter,dataOnboardingKey:"project-card",dataOnboardingKeyIndex:t,folderList:n,isSharerInfoIncluded:e.isSharerInfoIncluded,onChangeSortOptions:e.onChangeSortOptions,trailingGridElements:l||c?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(m_,{canEditTeam:e.canEditTeamContents}),viewType:e.viewMode}),!l&&!c&&o()&&(0,a.jsx)(mf,{canEditTeam:e.canEditTeamContents})]}),(0,a.jsxs)("div",{className:"folder_list_view--infoCard--DzZGD",children:[l&&(0,a.jsx)(u0.R,{teamId:e.teamId,canEditTeam:!!e.canEditTeamContents}),e.team&&d&&(0,a.jsx)(uZ,{team:e.team,canAdminTeam:!!e.canAdminTeam})]})]})})(),m&&(0,a.jsx)(mx.p,{folder:m})]})}let mw={name:uS.f.byProperty("name",uS.f.LEXICOGRAPHICALLY),lastModified:uS.f.byProperty("folderLastUpdated"),team:uS.f.byProperty("folderTeamName",uS.f.LEXICOGRAPHICALLY),owner:uS.f.byProperty("folderOwnerName",uS.f.LEXICOGRAPHICALLY),sharedAt:uS.f.byProperty("folderSharedAt"),createdAt:uS.f.byProperty("created_at"),trashedAt:uS.f.byProperty("trashed_at")};function mj(e){let{folderList:t,...r}=e,n=(0,i.wA)(),o="trashedFolders"===e.selectedView.view,l="team"===e.selectedView.view,d="recentsAndSharing"===e.selectedView.view,c=(0,i.d4)(e=>e.teams),u=(0,i.d4)(e=>e.roles),m=(0,i.d4)(e=>e.tileSortFilterStateByView),_=s.useMemo(()=>{if(l){let e=m.team;return{viewMode:void 0!==e.viewMode?e.viewMode:oi.XU.GRID,sortKey:function(e){switch(e){case oi.C0.NAME:return"name";case oi.C0.TOUCHED_AT:return"lastModified";case oi.C0.CREATED_AT:return"createdAt";case oi.C0.TRASHED_AT:return"trashedAt";case oi.C0.ACCESSED_AT:case oi.C0.SHARED_AT:return"lastModified";case oi.C0.OWNER:return"owner";case oi.C0.SEARCH_RELEVANCE:case oi.C0.PROJECT_NAME:return"name";default:(0,E.xb)(e)}}(e.sort.key),sortDesc:e.sort.dir===oi.ue.DESC}}if(o){let e=m.trashedFolders;return{viewMode:void 0!==e.viewMode?e.viewMode:oi.XU.GRID,sortKey:(0,oi.jx)(e.sort.key)??"trashedAt",sortDesc:e.sort.dir===oi.ue.DESC}}if(!d)return{viewMode:oi.XU.GRID,sortKey:"lastModified",sortDesc:!0};{let e=m.recentsAndSharing;return{viewMode:void 0!==e.sharedProjects.viewMode?e.sharedProjects.viewMode:oi.XU.GRID,sortKey:(0,oi.jx)(e.sharedProjects.sort.key)??"lastModified",sortDesc:e.sharedProjects.sort.dir===oi.ue.DESC}}},[l,o,d,m.team,m.trashedFolders,m.recentsAndSharing]),p=s.useMemo(()=>{if(d)return e.folderList;let t=mw[_.sortKey];if(!t)return e.folderList;let r=_.sortDesc?uS.f.reverse(t):t,a=e.folderList.map(e=>({...e,...(0,mb.Z)({teams:c,roles:u},e)}));return a.sort(r),a},[d,_.sortKey,_.sortDesc,e.folderList,c,u]);return(0,a.jsxs)("div",{children:[o&&m.trashedFolders.filters.role===oi.Jh.CAN_BE_VIEWED&&(0,a.jsx)("div",{className:"x1yztbdb x1tudf5h x1m2p0i2",children:(0,a.jsx)(ml._,{dataTestId:"may-not-restore-or-permanently-delete-banner",color:ml.S.INFORMATION,text:(0,a.jsxs)("p",{className:"xk50ysn",children:[(0,a.jsx)("span",{className:"x1s688f",children:(0,N.tx)("file_browser.folder_list_view.may_not_restore_or_permanently_delete_banner")}),"\xa0",(0,N.tx)("file_browser.folder_list_view.may_not_restore_or_permanently_delete_banner_content")]})})}),(0,a.jsx)(my,{folderList:p,chunkSize:e.chunkSize,viewMode:_.viewMode,onChangeSortOptions:t=>{if(l){let r=t.sortKey===rc.Dq.NAME?oi.C0.NAME:oi.C0.TOUCHED_AT,a=t.sortDesc?oi.ue.DESC:oi.ue.ASC;n(eS.JF({selectedView:e.selectedView,config:{...m.team,sort:{key:r,dir:a}}}))}else n(eS.ZR({viewId:e.viewId,sortMode:{sortKey:t.sortKey,sortDesc:t.sortDesc}}))},...r})]})}function mT(){let e=(0,i.d4)(e=>e.currentUserOrgId),t=(0,sv.ol)(),r=(0,p.Rs)(eK.kQI,{id:t?t.id:""},{enabled:!!t?.id}),s=(0,p.Rs)(eK.TNJ,{id:t?t.id:""},{enabled:!!t?.id}),n=(0,i.d4)(e=>e.tileSortFilterStateByView),o=(0,eA._6)(),l=(0,eE.R)(t?.id),d=n.trashedFolders,[{data:c,status:u}]=(0,f.IT)((0,T.p5)({orgId:e,teamId:t?.id??null,roleFilter:d.filters.role})),m="loaded"===r.status&&!!r.data.team&&r.data.team.hasPermission,_="loaded"===s.status&&!!s.data.team&&s.data.team.hasPermission;return(0,a.jsx)(es.A,{loadingElementId:"loading-content-pane",delay:250,loaded:"loading"!==u,loadingElementClassName:I.s.pr32.$,children:(0,a.jsx)("div",{style:iV.sx.mt1.$,children:(0,a.jsx)(mj,{canAdminTeam:_,canEditTeamContents:m,chunkSize:c?.folders?.length||0,emptyStateText:(0,N.t)("file_browser.trash_project.trashed_empty_state"),folderList:c?.folders||[],isEligbileForProTeamLockedRevampUI:l,isSharerInfoIncluded:!1,selectedView:o,team:t,teamId:t?.id,useLGPerms:!0,viewId:ub.l})})})}var mE=(e=>(e.FILES="files",e.FOLDERS="folders",e))(mE||{});function mI(e){let t=(0,eA._6)();if("deletedFiles"!==t.view&&"trashedFolders"!==t.view)return(0,a.jsx)(a.Fragment,{});let r=(0,a.jsx)(uT,{currView:t}),s="folders"===e.selectedTab?(0,a.jsx)(mT,{}):(0,a.jsx)(mn,{});return(0,a.jsx)(iY.r,{viewBarSticky:!0,viewbar:r,content:s})}var mN=r(608914);let mC=[eb.Wb3,eb.Ult,eb.kmq,eb.USq,eb.jQF,eb.j0N,eb.Ob5,eb.Qlc,eb.I$z,eb.X5_,eb.LB2,eb.I5n,eb.Msu,eb.UmN,eb.Ql8,eb.Q16,eb.O5v,eb.rv,eb.HaT,eb.rQs,eb.YHe,eb.hxO,eb.sqw,eb.Duq,eb.yjU,eb.BTz,eb.I3H,eb.tZO,eb.LPt,eb.cJy,eb.tUL,eb.tBR,eb.K69,eb.Tp6,eb.XIg,eb.fQh,eb.O9D,eb.c6t,eb.NM0,eb.YPG,eb.j9$,eb.LQ8,eb.r3Y].map(e=>e.id);function mS({children:e}){return(0,a.jsx)(mN.A,{name:"FileBrowser",order:mC,children:e})}var mk=r(11);function mR({folderId:e,enabled:t=!0}){let r=(0,i.d4)(t=>t.tileSortFilterStateByView.folders.byId[e]??t.tileSortFilterStateByView.folders.default),a=(0,s.useMemo)(()=>({file_type:mA(r.filters.fileType),sort_order:r.sort.dir===oi.ue.ASC?"asc":"desc",sort_column:mO(r.sort.key)}),[r.filters.fileType,r.sort.dir,r.sort.key]);return(0,f.IT)((0,H.BU)({folderId:e,...a}),{enabled:t})}let mA=e=>{switch(e){case oi.t2.DESIGN:return"design";case oi.t2.FIGJAM:return"whiteboard";case oi.t2.PROTOTYPE:return"prototype";case oi.t2.SITES:return"sites";case oi.t2.SLIDES:return"slides";case oi.t2.COOPER:return"cooper";case oi.t2.MAKE:return"figmake";case oi.t2.ANY:return"";default:(0,E.xb)(e)}},mO=e=>{switch(e){case oi.C0.NAME:return"name";case oi.C0.CREATED_AT:return"created_at";case oi.C0.TOUCHED_AT:return"touched_at";default:return(0,mk.$D)(M.e.WAYFINDING,Error(`Attempting to sort by an unsupported sort key: ${e}`)),"created_at"}};var mF=r(840917),mP=r(257703),mL=r(355181),mD=r(205827),mM=r(736948),mB=r(692930),mU=r(557142),mW=r(272654),m$=r(140227),mG=r(696189);let mV=(0,tE.Ju)(function(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.teams)[e.teamId].subscription,n=e.paymentRequiresAction;return(0,s.useEffect)(()=>{mG.T.getHostedInvoicesPage({teamId:e.teamId}).then(({data:e})=>{(0,of.FJ)(e.meta.hosted_invoice_url,"_blank","noopener")})},[e.teamId]),(0,s.useEffect)(()=>{n||r===eM.Qh.INCOMPLETE||t(tC.ES({type:mV.type}))},[r,t,n]),(0,a.jsx)(ae.Dd,{title:(0,N.t)("payments.pending_subscription_modal_header"),hideCancel:!0,confirmText:(0,N.t)("payments.got_it"),trackedConfirmationProperties:{trackingDescriptor:em.c.CONFIRM_VERIFY_PAYMENT,trackingContextName:"Confirm Verify Payment"},children:(0,N.tx)("payments.pending_subscription_modal_description")})},"PENDING_SUBSCRIPTION_CHANGE_MODAL");var mz=r(425092);let mH="banners--warn--bC4ke",mK="banners--primaryCtaButton--tyhCJ",mY="banners--content--ciED3",mq="banners--titleSmall--ceZgU",mJ="banners--bold--qt00U",mX="banners--message--9BMLM",mQ="banners--messageSmall--YT-82",mZ="banners--secondaryCtaButton--uYrvi",m0="banners--ctaButtonGroup--r8cfU",m1="banners--closeButton--IXY-V",m4="banners--teamBannerWithBackground--CwS6V banners--banner--l8udl",m2="banners--teamUpgradeNotice--gqc9c",m8="banners--softWarningBanner--QK9Y5",m5="banners--softWarningBannerBlue--uQmhb";var m6=r(616591),m3=r(169256),m7=r(205778),m9=r(128912);function _e(e,t,r){let i=s.useMemo(()=>({canAdmin:(0,s9.canAdminOrg)(e.currentUserOrgId,e),canMember:(0,s9.canMemberOrg)(e.currentUserOrgId,e)}),[e]),n=(0,eY.px)(),o=(0,eY.j_)(n),l=(0,eY.Kd)(n),d=s.useMemo(()=>sm.Qw.transformAll([o,l],(e,t)=>({canAdmin:e,canMember:t})),[o,l]),c=(0,i2.MF)({oldValue:sm.Qw.useMemoizedLoaded(i),newValue:d,label:r,enableFullRead:(0,uV.DQ)(uV.Pw.GROUP_7),contextArgs:{callsite:"useOrgBannerContentQuery"}});return s.useMemo(()=>c.transform(({canAdmin:r,canMember:s})=>(function(e,t,r,s){let i;if(!e.currentUserOrgId||!(0,sx.wn)(e.currentUserOrgId,e))return null;let n=e.orgById[e.currentUserOrgId];if(!n)return null;let o=n.past_due_at&&(0,ec.A)(n.past_due_at).add(2,"weeks")>(0,ec.A)(new Date);if(!r&&o)return null;let l=e.orgUsersByOrgId[e.currentUserOrgId]??{},d=(0,ef.zR)(l).map(e=>(0,a.jsxs)("span",{className:mJ,children:[e.user.handle," (",e.user.email,")"]},e.id));return i=r?n.billing===mM.EZ.CHARGE_IMMEDIATELY?(0,N.tx)("payments.org_past_due_on_payment",{invoice:(0,a.jsx)("a",{onClick:()=>{t?.(eR.sf({view:"orgAdminSettings",orgAdminSettingsViewTab:eq.J7.BILLING}))},children:(0,N.tx)("payments.outstanding_invoice")}),orgName:n.name}):(0,N.tx)("payments.org_past_due_on_payment_invoiced",{email:(0,a.jsx)("b",{className:mJ,children:(0,ab.W4)()}),orgName:n.name}):(0,N.tx)("payments.please_reach_out_to_org_admins",{orgName:n.name,admins:s&&(0,a.jsxs)("span",{children:[" ",(0,a.jsx)(mP.T,{formatType:"disjunction",children:d})]}),numAdmins:d.length}),{severity:mz.c.WARN,title:(0,N.t)("payments.payment_not_received"),message:i,cta:null,onClickCta:null}})(e,t,r,s)),[t,c,e])}function _t(e){return e?.status==="open"&&!!e.payment_intent&&[t5.pk.REQUIRES_ACTION,t5.pk.REQUIRES_SOURCE_ACTION].includes(e.payment_intent.status)}function _r(e,t,r,i,n,l){let d=s.useMemo(()=>({canOwn:!!r&&(0,s9.canOwnTeam)(r,i),canAdmin:!!r&&(0,s9.canAdminTeam)(r,i),canEdit:!!r&&(0,s9.canEditTeam)(r,i),hasEditRoleOnTeam:!!r&&(0,s9.hasMinRole)((0,s9.getRolesForUserAndTeam)(r,i),mU.e6.EDITOR)}),[r,i]),c=(0,i2.MF)({oldValue:sm.Qw.useMemoizedLoaded(d),newValue:function(e){let t=(0,p.Rs)((0,eK.yQw)((0,uV._X)(uV.Pw.GROUP_7)&&e?{teamId:e}:null));return s.useMemo(()=>"disabled"===t.status?sm.Qw.loaded({canOwn:!1,canAdmin:!1,canEdit:!1,hasEditRoleOnTeam:!1}):t.transform(({team:e})=>({canOwn:e?.isOwner??!1,canAdmin:e?.canAdmin??!1,canEdit:e?.canEdit??!1,hasEditRoleOnTeam:e?.canEdit??!1})),[t])}(r),label:l,enableFullRead:(0,uV.DQ)(uV.Pw.GROUP_7),contextArgs:{callsite:"useBannerContentQuery",resourceType:e,resourceId:t?.id,teamId:r}}),m=_e(i,n,l);return s.useMemo(()=>sm.Qw.transformAll([m,c],(s,l)=>s||function(e,t,r,s,i,n){let l=r?s.teams[r]:null;if(r&&!l||"file"===e)return null;let d=s.currentTeamId,c=l&&l.subscription===eM.Qh.GRACE_PERIOD,m=s.billingSummary,_=l?.subscription===eM.Qh.INCOMPLETE,p=!!l?.org_id,f=!!l?.subscription,g=c&&!p&&f&&(_t(m?.last_monthly_invoice)||_t(m?.last_annual_invoice)),x=l&&(_||g),b=l&&l.subscription===eM.Qh.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED,v=n.canOwn,y=n.canAdmin,w=n.canEdit,j=l&&(0,sx.oc)(l.id,s),T="folder"===e?t:null,E=0,I={showReminder:!1,showAccessRestricted:!1},C="folder"===e&&!T,S=!!(0,o.k)().limited_plan_spaces&&(0,ab.Ay)().is_limited_team_plan&&C;if(s.user){let t=n.hasEditRoleOnTeam,a=["folder","team"].includes(e)&&t,i=(0,sp.cn)(s.user),o=s.userEduGracePeriods;C?d&&(0,sp.hP)(s.user.id,s.roles.byTeamId,s.teams[d])&&(I=(0,sp.df)(o,i),E=(0,sp.Me)(o)):r&&a&&(I=(0,sp.GU)(o,i,r,!!s.teams[r].student_team),E=(0,sp.qS)(o,r))}let k=l&&!(0,sx.n0)(l)&&!l.student_team&&T&&!(0,rk.Gi)(T),R=k&&T.is_invite_only,A=k&&T.is_view_only,O=T&&(0,rk.sp)(T),F=!O&&!l&&T&&(0,sx.ZZ)(T,s),P=()=>i?.(dg.WX({teamId:l.id,selectedView:s.selectedView})),L=()=>u.Ay.redirect("/education/apply",h.Ay.isIpadNative?void 0:"_blank"),D=()=>i?.(dg.WX({teamId:l.id,openInNewTab:!1,selectedView:{view:"team",teamId:l.id}})),M=()=>i?.(tC.to({type:aA.V,data:{upsellSource:aF.b.BANNER}})),B=(0,sx._b)(l),U=l&&l.subscription_raw!==eM.Qh.OK&&(0,sx.WQ)(l)&&y&&mD.ng.getProTrialStatus(l)!==mB.a.IN_TRIAL&&B,W=["team","folder"].includes(e)&&w&&(0,sv.cU)(l),$=w&&function(e,t){let r=e&&t[e.id]?.dismissed_legacy_team_upgrade_notice_banner;return(0,sv.zs)(e)&&!r}(l,s.userTeamFlags),G=(0,eT.R$)(s.user,s.currentUserOrgId),V=mD.ng.canSeeExpiredProTrialBanner(s.userTeamFlags,l,s),z=l&&s.userTeamFlags[l.id]?.[mD.lg],H=s.user?(0,sp.x$)(s.eduPeriodEnd,(0,sp.cn)(s.user)):1/0,K=H>0&&H!==1/0,Y=0===H,q=l&&l.student_team_state===eM.kU.STUDENT_TEAM_CURRENT,J=l&&l.student_team_state===eM.kU.STUDENT_TEAM_EXPIRED&&j,X=K&&v&&q,Q=Y&&v&&J,Z=K&&w&&q,ee=Y&&!w&&q;if(b)return{severity:mz.c.WARN,title:(0,N.t)("payments.locked"),message:y?(0,a.jsx)("span",{children:(0,N.tx)("payments.no_monthly_sub_over_editor_limit_admin.seat_rename",{contactSupport:(0,a.jsx)("a",{href:`mailto:${(0,ab.W4)()}`,children:(0,N.tx)("payments.contact_support")})})}):(0,a.jsx)("span",{children:(0,N.tx)("payments.no_monthly_sub_over_editor_limit.seat_rename")}),cta:y?(0,N.t)("payments.manage_plan"):null,onClickCta:y?()=>{i?.(eR.sf({view:"teamAdminConsole",teamId:r,teamAdminConsoleViewTab:eJ.Iv.SETTINGS}))}:null};if(V&&(j||w&&!z)){let e,t,s,n;return j?(e=w?(0,N.tx)("payments.pro_trial_expiry.locked_description_on_team",{teamName:l.name,lowerUsageLink:(0,a.jsx)(r2.$z,{onClick:e=>{e.preventDefault(),i?.(tC.to({type:m$.v,data:{teamId:r}}))},children:(0,N.tx)("payments.pro_trial_expiry.lower_usage")})}):(0,N.tx)("payments.pro_trial_expiry.locked_description_for_viewer_on_team",{teamName:l.name}),t=w?(0,N.tx)("payments.pro_trial_upgrade_cta.upgrade"):null,s=`${m8} `,n="Pro Trial Expiry Banner Locked"):(e=l?(0,N.tx)("payments.pro_trial.trial_ended_banner_message",{teamName:l.name}):(0,N.tx)("payments.pro_trial.trial_ended_banner_message.no_name"),t=(0,N.tx)("payments.pro_trial.trial_ended_banner_upgrade_cta"),s=`${m8} ${m5}`,n="Pro Trial Expiry Banner Unlocked"),{severity:mz.c.WARN_SOFT,title:(0,N.t)("payments.pro_trial.trial_ended_banner_title"),message:e,cta:t,onClickCta:w?D:void 0,svg:m3.A,bannerClassName:s,trackingContextName:n,dismissible:!j,onClose:j?void 0:()=>{r&&i?.(aq.bE({all_team_flags:[{team_id:r,flags:{[mD.lg]:!0}}]}))}}}if(S)return{severity:mz.c.WARN_SOFT,title:(0,N.tx)("file_browser.limited_space_banner.heading"),message:(0,N.tx)("file_browser.limited_space_banner.description"),cta:null,hideIcon:!0,bannerClassName:"banners--limitedSpaceBanner--Pq6k8"};if(X||Q||Z||ee){let e=()=>i?.(tC.to({type:mW.ZL,data:{teamId:l.id}}));if(X||Z)return{severity:mz.c.WARN_SOFT,title:(0,N.tx)("edu.banner.your_education_status_is_expiring_soon"),message:(0,N.tx)("edu.banner.to_keep_collaborating_upgrade_team",{teamName:l.name,verify:(0,a.jsx)(r6.Us,{href:"/education/apply",target:"_blank",trusted:!0,children:(0,N.tx)("edu.banner.verify_your_education_status")})}),cta:(0,N.tx)("edu.banner.learn_more"),onClickCta:e,svg:m6.A,bannerClassName:`${m8} ${m5}`,trackingContextName:"Edu Offboarding Banner"};if(Q)return{severity:mz.c.WARN_SOFT,title:(0,N.tx)("edu.banner.your_education_plan_has_expired"),message:(0,N.tx)("edu.banner.team_is_now_view_only_for_all_members",{teamName:l.name}),cta:(0,N.tx)("edu.banner.learn_more"),onClickCta:e,svg:m6.A,bannerClassName:m8,trackingContextName:"Edu Offboarding Banner"};if(ee)return{severity:mz.c.WARN_SOFT,title:(0,N.tx)("edu.banner.your_education_plan_has_expired"),message:(0,N.tx)("edu.banner.you_can_no_longer_edit_files",{teamName:l.name}),cta:(0,N.tx)("edu.banner.learn_more"),onClickCta:e,svg:m6.A,bannerClassName:m8,trackingContextName:"Edu Offboarding Banner"}}else if(J)return{severity:mz.c.WARN_SOFT,title:(0,N.tx)("edu.banner.team_s_education_status_has_expired",{teamName:l.name}),message:(0,N.tx)("edu.banner.move_or_duplicate_files_to_another_location_to_save_your_work"),cta:null,svg:m6.A,bannerClassName:m8,trackingContextName:"Edu Offboarding Banner"};else if(G){let e=s.user.external_restricted_org_id,t=(0,N.t)("external_collaboration_restricted.banner.restriction_description.no_org");if(e&&s.orgById[e]){let r=s.orgById[e];t=(0,N.t)("external_collaboration_restricted.banner.restriction_description",{organizationName:r.name})}return{severity:mz.c.WARN,title:(0,N.t)("external_collaboration_restricted.banner.title"),message:t,cta:null,ctaTrackingProperties:void 0,onClickCta:null}}else if(s.user&&["team","folder"].includes(e)&&I.showAccessRestricted){let e,t=(0,N.t)("banner.edu_grace_period.your_education_plan_has_expired");return l?(0,sp.eB)(s.user.id,s.roles.byTeamId,l)?e=(0,N.t)("banner.edu_grace_period.team_is_now_view_only_for_all_members",{teamName:l.name}):(0,sp.QS)(s.user.id,s.roles.byTeamId,l)?e=(0,N.t)("banner.edu_grace_period.you_can_no_longer_edit_files_in_team",{teamName:l.name}):(t=(0,N.t)("banner.edu_grace_period.your_education_plan_has_expired.is_member",{teamName:l.name}),e=(0,N.t)("banner.edu_grace_period.move_or_duplicate_files_to_another_location_to_save_your_work")):e=(0,N.t)("banner.edu_grace_period.education_team_members_need_to_verify_their_education_status"),{severity:mz.c.ANNOUNCEMENT,title:t,message:e,learnMoreUrl:"/education/",cta:(0,N.t)("banner.edu_grace_period.verify_status_button"),onClickCta:L,svg:m6.A,bannerClassName:m2}}else if(["team","folder"].includes(e)&&I.showReminder)return{severity:mz.c.ANNOUNCEMENT,title:(0,N.t)("banner.edu_grace_period.only_edu_grace_period_days_left",{daysLeft:E}),message:(0,N.t)("banner.edu_grace_period.to_keep_collaborating_on_figma_s_education_plan_please_verify_your_status_soon"),cta:(0,N.t)("banner.edu_grace_period.verify_status_button"),onClickCta:L,svg:m9.A};else if(R||A)return{severity:mz.c.WARN,title:(0,N.t)("payments.folder_locked"),message:(0,N.t)("payments.folder_locked_description",{projectType:"Invite"==(R?"Invite":"View")?(0,N.t)("payments.invite_only_projects"):(0,N.t)("payments.view_only_projects"),teamName:l.name}),learnMoreUrl:"/pricing",cta:w?(0,N.t)("payments.upgrade_now"):(0,N.t)("payments.contact_admin_for_details"),ctaTrackingProperties:w?{trackingDescriptor:em.c.UPGRADE_NOW,upsellSource:aF.b.BANNER}:void 0,onClickCta:w?P:null};else if(F&&"folder"===e)return(0,i2.HZ)({label:i2.A5.getBannerContent.personalProjectDeprecated,oldValue:F&&"folder"===e,newValue:!1,maxReports:3}),{severity:mz.c.WARN,title:(0,N.t)("payments.locked"),message:(0,N.t)("payments.projects_deprecated"),learnMoreUrl:"/pricing-faq#what-changes-for-me",cta:null,onClickCta:null};else if(O&&"folder"===e)return{severity:mz.c.WARN,title:(0,N.t)("payments.abandoned_project"),message:(0,N.t)("payments.abandoned_project_description"),cta:null,onClickCta:null};else if($){let e=(0,N.t)("payments.file_limit_unified",{figmaFiles:sx.WW,figjamFiles:sx.WW});W?$||(e=(0,N.t)("payments.file_limit_figjam",{figjamFiles:sx.WW})):e=(0,N.t)("payments.file_limit_figma",{figmaFiles:sx.WW});let t=()=>(0,a.jsx)("button",{type:"button",onClick:M,className:"banners--bannerInlineTextButton--GRx12",children:(0,N.tx)("payments.check_out_our_paid_plans")}),r=l?(0,a.jsx)("span",{children:(0,N.tx)("payments.team_over_starter_team_limit_with_button.legacy_team",{fileLimitString:e,checkoutOurPlans:t(),teamName:l.name})}):(0,a.jsx)("span",{children:(0,N.tx)("payments.team_over_starter_team_limit_with_button.no_legacy_team_present",{fileLimitString:e,checkoutOurPlans:t()})});return{severity:mz.c.ANNOUNCEMENT,title:(0,N.t)("payments.team_over_starter_team_limit_title"),message:r,cta:(0,N.t)("payments.upgrade_now"),ctaTrackingProperties:{trackingDescriptor:em.c.UPGRADE_NOW,upsellSource:aF.b.BANNER},onClickCta:P,svg:m7.A,bannerClassName:m2,trackingContextName:"Unified Legacy / Beta File Limit Banner"}}else if(U){let e=(0,ec.A)(l.grace_period_end).toDate(),t=(0,N.tx)("payments.pro_plan_ends_relative_time_string",{relative_time_string:(0,a.jsx)(ox.h1,{date:e})});return B||(t=(0,N.tx)("payments.pro_plan_ends_on_date",{end_date:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)})),{severity:mz.c.ANNOUNCEMENT,title:t,message:(0,N.t)("payments.pro_plan_ends_for_team_description",{teamName:l.name}),cta:(0,N.t)("payments.pro_plan_ends_button"),onClickCta:D,svg:B?m7.A:m3.A,trackingContextName:"Promo Code Expiration Banner",bannerClassName:B?m2:void 0}}else if(x){let e=_?(0,N.t)("payments.complete_team_payment_description",{teamName:l.name}):(0,N.t)("payments.complete_team_renewal_payment_description");return{severity:mz.c.WARN,title:(0,N.t)("payments.complete_payment"),message:e,cta:(0,a.jsx)(mL.V,{trackingProperties:{trackingDescriptor:em.c.VERIFY_PAYMENT,trackingContextName:"Verify Payment Banner"},onClick:()=>i?.(tC.to({type:mV,data:{teamId:r,paymentRequiresAction:!!g}})),children:(0,N.tx)("payments.complete_payment_cta")}),onClickCta:null}}return null}(e,t,r,i,n,l)),[m,c,e,t,r,i,n])}function _a(e){let t=(0,eD.FC)(),r=(0,i.d4)(e=>e.userEduGracePeriods),a=(0,i.d4)(e=>e.userFlags),n=(0,i.d4)(e=>e.userTeamFlags),o=(0,i.d4)(e=>e.selectedView),l=(0,i.d4)(e=>e.isFreeUser),d=(0,i.d4)(e=>e.userAnalyticsData),c=(0,i.d4)(e=>e.fileKeysByFolderId),u=s.useMemo(()=>({...t,checks:e.checks,fileKeysByFolderId:c,isFreeUser:l,selectedView:o,userAnalyticsData:d,userEduGracePeriods:r,userFlags:a,userTeamFlags:n}),[t,e.checks,c,l,o,d,r,a,n]);return _r(e.resourceType||eM.vt.FOLDER,e.resource||null,e.teamId||null,u,null,e.shadowReadLabel).transform(e=>!!e)}function _s(e,t){let r={...e};return"string"==typeof t.title&&(r.title=t.title),"string"==typeof t.message&&(r.message=t.message),r}var _i=r(578888);let _n=(0,a.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",children:[(0,a.jsx)("path",{d:"M0 24C0 10.7452 10.7452 0 24 0V0C37.2548 0 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48C10.7452 48 0 37.2548 0 24V24Z",fill:"var(--color-bg-inverse, black)"}),(0,a.jsx)("mask",{id:"mask0_4:25",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"48",height:"48",children:(0,a.jsx)("path",{d:"M0 24C0 10.7452 10.7452 0 24 0V0C37.2548 0 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48C10.7452 48 0 37.2548 0 24V24Z",fill:"var(--color-bg-inverse, black)"})}),(0,a.jsx)("g",{mask:"url(#mask0_4:25)"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 20H17.5C16.1193 20 15 21.1193 15 22.5C15 23.8807 16.1193 25 17.5 25H20L20 20ZM21 19.9963L21 25H21.6738C23.3383 25 24.9874 25.3196 26.5314 25.9416L28 26.5333V17.7761L27.3548 18.1614C25.4287 19.3116 23.2393 19.9428 21 19.9963ZM17.5 19H20.6897C22.8561 19 24.9821 18.4135 26.8421 17.3028L28.2437 16.4658C28.5769 16.2668 29 16.507 29 16.8951V27.2737C29 27.628 28.6418 27.8699 28.3132 27.7375L26.1577 26.8692C24.7325 26.2951 23.2103 26 21.6738 26H21.3286L22.5613 29.698C22.7771 30.3455 22.2951 31.0142 21.6126 31.0142H20.4415C19.5807 31.0142 18.8164 30.4634 18.5442 29.6467L17.3333 26.0142L17.3272 25.9958C15.4745 25.9057 14 24.375 14 22.5C14 20.567 15.567 19 17.5 19ZM18.3874 26.0142L19.4928 29.3304C19.6289 29.7388 20.0111 30.0142 20.4415 30.0142H21.6126L20.2792 26.0142H18.3874Z",fill:"var(--color-icon-oninverse, white)"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.5 22C32.5 21.1716 31.8284 20.5 31 20.5V19.5C32.3807 19.5 33.5 20.6193 33.5 22C33.5 23.3807 32.3807 24.5 31 24.5V23.5C31.8284 23.5 32.5 22.8284 32.5 22Z",fill:"var(--color-icon-oninverse, white)"})]});function _o(e){let{title:t,message:r,cta:s,ctaTrackingProperties:i,learnMoreUrl:n,onClickCta:o,severity:l,secondaryCTA:d,secondaryOnClickCta:c,svg:u,trackingContextName:m="Banner",contentStyles:_,reverseCtas:p,dismissible:f,onClose:g}=e;return l===mz.c.ANNOUNCEMENT?(0,a.jsx)(r2.fu,{name:m,properties:{severity:l,...e.tracking},children:(0,a.jsxs)("div",{className:mY,children:[u&&(0,a.jsx)(t0.B,{svg:u,useOriginalSrcFills_DEPRECATED:!0}),(0,a.jsxs)("div",{className:mX,children:[(0,a.jsx)("div",{className:mq,children:t}),(0,a.jsx)("div",{className:mQ,children:r})]}),(0,a.jsxs)(r6.e2,{reversed:p,className:m0,children:[o&&(0,a.jsx)(r6.vd,{className:mK,onClick:o,trackingProperties:i,children:s}),c&&(0,a.jsx)(r6.tM,{className:mZ,onClick:c,children:d}),f&&g&&(0,a.jsx)(aD.Jn,{className:m1,onClick:g})]})]})}):l===mz.c.EVENT?(0,a.jsx)(r2.fu,{name:m,properties:{severity:l,...e.tracking},children:(0,a.jsxs)("div",{className:`${mY} ${_}`,children:[(0,a.jsx)("div",{className:"banners--eventMegaphoneIcon--7J3rx",children:_n}),(0,a.jsxs)("div",{className:mX,children:[(0,a.jsx)("p",{className:mq,children:t}),(0,a.jsx)("p",{className:mQ,children:r})]}),(0,a.jsxs)(r6.e2,{className:m0,children:[o&&(0,a.jsx)(r6.vd,{className:mK,onClick:o,trackingProperties:i,children:s}),c&&(0,a.jsx)(r6.tM,{className:mZ,onClick:c,children:d}),f&&g&&(0,a.jsx)(aD.Jn,{className:m1,onClick:g})]})]})}):(0,a.jsx)(r2.fu,{name:m,properties:{severity:l,...e.tracking},children:(0,a.jsxs)("div",{className:`${mY} ${_}`,children:[!e.hideIcon&&(0,a.jsx)(t0.B,{svg:_i.A,className:"banners--warningIcon--A5YS-",autosize:l===mz.c.WARN_SOFT}),(0,a.jsxs)("div",{className:mX,children:[(0,a.jsx)("span",{className:"banners--title--OIA0P",children:t}),r,n&&(0,a.jsxs)("span",{children:["\xa0",(0,a.jsx)("a",{target:"_blank",rel:"noopener",href:n,children:(0,N.tx)("payments.learn_more")})]})]}),(0,a.jsxs)(r6.e2,{reversed:p,className:m0,children:[o&&(0,a.jsx)(r6.vd,{className:mK,onClick:o,trackingProperties:i,children:s}),!o&&(0,a.jsx)("div",{className:"banners--ctaMessage--5MB88",children:s}),f&&g&&(0,a.jsx)(aD.Jn,{className:m1,onClick:g})]})]})})}let _l=(0,i.Ng)(e=>({userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,currentOrgId:e.currentUserOrgId,selectedView:e.selectedView,userEduValidated:!!e.user?.student_validated_at,userEduGracePeriods:e.userEduGracePeriods,fileKeysByFolderId:e.fileKeysByFolderId,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData,...(0,s9.getPermissionsState)(e)}))(function(e){let t;let r=(0,p.Rs)(eK.UpR,{}),n=e.folderId?e.folders[e.folderId]:null,o=n?n.team_id:null,l=e.dispatch,d=o?e.teams[o]:null,c=!!d?.org_id,u=!!d?.subscription,m=(0,p.Rs)((0,eK.Ywy)(o?{teamId:o}:null)),_=s.useMemo(()=>m.transform(({team:e})=>!!e?.canAdmin),[m]).unwrapOr(!1);(0,s.useEffect)(()=>{o&&!c&&u&&_&&l(sr.Be({teamId:o}))},[l,o,c,u,_]);let f=(0,i.d4)(e=>e.teamBilling?.summary),g=_r(eM.vt.FOLDER,n??null,o,{eduPeriodEnd:r.data?.currentUser?.eduPeriodEnd,billingSummary:f,...e},e.dispatch,i2.A5.FolderBannerInner.bannerContent).unwrapOr(null);if(!g)return(0,a.jsx)("div",{});t=n?_s({resourceType:eM.vt.TEAM,teamId:o,folderId:n.id},g):_s({resourceType:"recents"},g);let h=g.severity===mz.c.WARN?mH:"",x=g.bannerClassName||"",b=`${m4} ${h} ${x}`;return(0,a.jsx)("div",{className:b,children:(0,a.jsx)(_o,{...g,tracking:t})})}),_d=()=>{let e=(0,i.d4)(e=>e.currentUserOrgId),t=(0,i.d4)(e=>e.currentTeamId),r=(0,p.Rs)((0,eK._aE)({currentOrgId:e,currentTeamId:t}));return"loaded"===r.status?r.data:null};function _c(){let e;let t=(0,i.wA)(),r=(0,i.d4)(e=>e.currentUserOrgId),s=(0,i.d4)(e=>e.currentTeamId),n=_d();r?e=n?.currentUser.baseOrgUser?.draftsProject:s&&(e=n?.currentUser.currentTeamUser?.draftsProject);let o=(0,i.d4)(e=>e.tileSortFilterStateByView),l=(0,eA._6)();if(!n||!e)return(0,a.jsx)(ux,{viewbarActions:[]});let d="deletedFiles"===l.view?(0,uh.xx)(uv)(o):(0,uh.xx)(rk.ZN)(e.id,o),c=[(0,a.jsx)(sz.ye,{config:d.tileSortFilterConfig},0),(0,a.jsx)(sz.mc,{dispatch:t,options:d,selectedView:l},1),(0,a.jsx)(sz.$c,{initialViewMode:d.tileSortFilterConfig.viewMode,onViewModeChange:e=>{(0,av.sx)("file view toggle",{viewType:e===oi.XU.GRID?"grid":"list"}),t(eS.JF({selectedView:l,config:{...d.tileSortFilterConfig,viewMode:e}}))}},2)];return(0,a.jsx)(ux,{viewbarActions:c})}let _u={open:!0,openNewTab:!0,restoreFromVersion:!0,share:!0,copyLink:!0,rename:!0,duplicate:!0,delete:!0,createBranch:!0,moveFile:!0},_m=(0,uh.xx)(rk.ZN);function __(e){let{sortFilterOptions:t,selectedBranchKeyByRepoId:r}=(0,s_.R)(t=>({sortFilterOptions:_m(e.folderId,t.tileSortFilterStateByView),selectedBranchKeyByRepoId:t.selectedBranchKeyByRepoId})),n=(0,mF.Rp)(),o=(0,i.d4)(({currentUserOrgId:e})=>e),l=(0,x.I7)("exp_aa_test_org_drafts");o&&l.getConfig();let d=()=>{},[c,u]=mR({folderId:e.folderId}),m=c.data?.folder,_=(0,eE.R)(m?.team_id),p=_a({resourceType:eM.vt.FOLDER,resource:m,teamId:m?.team_id||null,shadowReadLabel:i2.A5.DraftsPageView.hasBanner}).unwrapOr(!1);d=s.useCallback(()=>{!c.isFetchingNextPage&&c.hasNextPage&&u.fetchNextPage()},[c.isFetchingNextPage,c.hasNextPage,u]);let f=s.useMemo(()=>{let e=(c.data?.files||[]).map(e=>(0,ra.fA)(e)),t=c.data?.filesByRepoId||{};return[...e,...(c.data?.repos||[]).map(e=>({type:ra.nb.REPO,repo:e,branches:t[e.id],selectedBranchKey:r[e.id]||""})),...Object.values(n).filter(e=>e.orgId===o).map(ra.gB)]},[o,c.data?.files,c.data?.filesByRepoId,c.data?.repos,n,r]),h=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ma,{newFileTile:!0,tiles:f,tileActions:_u,sortFilterOptions:t,emptyStateText:"",isDataPartial:!!c.hasNextPage,isEligbileForProTeamLockedRevampUI:_}),(0,a.jsx)(cK.cx,{})]}),b="loaded"===c.status,v=(0,a.jsx)(es.A,{loadingElementId:"loading-content-pane",loaded:b,loadingElementClassName:I.s.pr32.$,children:(0,a.jsx)(uE.B,{onShouldFetchNextPage:d,children:h},`${t.tileSortFilterConfig.filters.fileType}`)});return(0,g.kF)("Drafts"),(0,g.WX)({markName:"MainBodyContent",isLoaded:b,contextArgs:{numFiles:c.transform(e=>e.files.length).unwrapOr(null)}}),(0,r2.T8)((0,a.jsx)(iY.r,{viewBarSticky:!0,banner:p?(0,a.jsx)(_l,{folderId:e.folderId}):void 0,content:v,viewbar:(0,a.jsx)(_c,{})}),r5.e0.FILE_BROWSER,{view:"drafts"})}var _p=r(957591),_f=r(427161),_g=r(369596),_h=r(93362),_x=r(136283),_b=r(408237),_v=r(880488),_y=r(561087);let _w=(0,tE.Ju)(function(e){let t,r;let n=(0,i.wA)(),[l,d]=s.useState(""),c=(0,i.d4)(e=>e.deletedReposById),u=(0,i.d4)(e=>e.fileByKey),{reposToDelete:m,draftsToDelete:_,deleteAllDraftsAsync:p,isDeleteAll:f,isPermanentDeletion:g}=e,h=_.map(e=>e.name).concat(m.map(e=>e.name)),x=h.length>1;t=g?x?(0,N.t)("file_browser.draft_delete_modal.header_multiple_files_delete",{fileCount:h.length}):(0,N.t)("file_browser.draft_delete_modal.header_single_file_delete",{fileName:h[0]}):x?(0,N.t)("file_browser.draft_delete_modal.header_multiple_files_trash",{fileCount:h.length}):(0,N.t)("file_browser.draft_delete_modal.header_single_file_trash");let b=(t,r)=>{if(t.length>0){if(g){let r=t.reduce((e,t)=>(e[t.key]=!0,e),{});n(_v.YK({fileKeys:r,userInitiated:!0,onSuccessCallback:e.onDeleteSuccess}))}else{let r=t.reduce((e,t)=>(e[t.key]=os.F.toSinatra(t),e),{});n(_v.VK({fileKeys:r,userInitiated:!0,onSuccessCallback:e.onDeleteSuccess,hideVisualBell:!0}))}}let a={};r.forEach(e=>{let t=c[e.id];if(t)a[e.id]=t;else{let t=e.default_file_key&&u[e.default_file_key];t&&(a[e.id]={repo:e,main_file:t})}}),r.length>0&&(g?n((0,_y.YM)({repoIds:Object.keys(a),userInitiated:!0})):n((0,_y.hT)({reposById:a,userInitiated:!0})))},v=()=>_h.k.deleteAllPersonalDrafts().then(()=>n(tl.F.enqueue({message:(0,N.t)("file_browser.draft_delete_modal.async_delete_drafts_scheduled")}))).catch(()=>n(tl.F.enqueue({message:(0,N.t)("file_browser.draft_delete_modal.async_delete_drafts_scheduled_error")}))),y=()=>{let{draftsToDelete:t,reposToDelete:r}=e;t.length+r.length>100?n(aY.s.error((0,N.t)("file_browser.draft_delete_modal.unable_to_delete",{maxSize:100}))):(e.setSynchronousFileTransferInProgress(t.length>0),b(t,r))},w=()=>{p?v():y(),e.onClose()},j=s.useMemo(()=>l.trim().toLowerCase()!==(0,N.t)("file_browser.draft_delete_modal.button_delete").toLocaleLowerCase(),[l]);r=g?x?(0,N.t)("file_browser.draft_delete_modal.permanently_delete_multiple_drafts",{fileCount:h.length}):(0,N.t)("file_browser.draft_delete_modal.permanently_delete_one_draft"):x?(0,N.t)("file_browser.draft_delete_modal.you_are_about_to_delete_multiple_drafts",{fileCount:h.length}):(0,N.t)("file_browser.draft_delete_modal.you_are_about_to_delete_single_draft",{fileName:h[0]});let T=g?(0,a.jsx)(r6.qM,{onClick:w,disabled:j,trackingProperties:{isDeletingDraftFromDTM:!0,isPermanentDeletion:g},dataTestId:"draft-delete-confirmation-button",children:(0,a.jsx)("span",{"data-tooltip":(0,N.t)("file_browser.draft_delete_modal.draft_deletion_tooltip",{deletionString:(0,N.t)("file_browser.draft_delete_modal.button_delete")}),"data-tooltip-type":j?r8.Ib.TEXT:null,"data-tooltip-max-width":180,"data-tooltip-show-above":!0,children:(0,o.k)().ps_trashed_drafts_enabled?(0,N.t)("file_browser.draft_delete_modal.button_permanently_delete_files",{numFiles:h.length}):(0,N.t)("file_browser.draft_delete_modal.button_delete")})}):(0,a.jsx)(r4.vd,{onClick:w,"data-testid":"draft-delete-confirmation-button",trackingProperties:{isDeletingDraftFromDTM:!0,isPermanentDeletion:g},children:(0,N.tx)("file_browser.draft_delete_modal.button_delete_files",{numFiles:h.length})});return(0,a.jsx)(r2.fu,{name:"draftDeleteModal",properties:{itemCount:h.length,isDeleteAsync:!!p,isDeleteAll:!!f},children:(0,a.jsx)(ae.OJ,{title:t,minWidth:480,maxWidth:480,onClose:e.onClose,truncateTitleText:!0,fixedCenter:!0,children:(0,a.jsxs)("div",{className:"draft_delete_modal--modalContent--QYGIS",children:[(0,a.jsxs)("p",{children:[r," ",!g&&(0,a.jsxs)("p",{children:[(0,a.jsx)("br",{}),(0,N.tx)("file_browser.draft_delete_modal.you_can_access_drafts_from_deleted_drafts_section",{fileCount:h.length})]})]}),(0,a.jsx)("p",{className:"draft_delete_modal--confirmationTextSpacing---MQEW",children:g&&(0,N.tx)("file_browser.draft_delete_modal.permanently_delete_multiple_drafts_confirmation",{deletionString:(0,N.t)("file_browser.draft_delete_modal.button_delete")})}),(0,a.jsxs)("form",{onSubmit:w,children:[g&&(0,a.jsx)("div",{children:(0,a.jsx)(_b.L,{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:"draft_delete_modal--deleteDraftsInput--pCTUB",dataTestId:"draft-delete-confirmation-input",onChange:e=>{d(e.currentTarget.value)},onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},spellCheck:!1,type:"text",value:l})}),(0,a.jsxs)("div",{className:"draft_delete_modal--footer--SRSo6",children:[(0,a.jsx)(r6.nR,{onClick:e.onClose,children:(0,N.tx)("modal.cancel")}),T]})]})]})})})},"DraftDeleteModal");var _j=r(899124),_T=r(532170),_E=r(270084);function _I(){return(0,a.jsx)("div",{children:(0,a.jsxs)(sA.Cs,{variant:"warn",children:[(0,a.jsx)(sO.Q,{title:(0,N.tx)("file_browser.drafts_to_move.move_your_drafts_by_august_21"),children:(0,N.tx)("file_browser.drafts_to_move.pre_migration_banner_description")}),(0,a.jsx)(ck.N,{href:"https://help.figma.com/hc/articles/18409526530967",newTab:!0,children:(0,N.tx)("file_browser.drafts_to_move.viewbar_learn_more_link")})]})})}function _N(){return(0,a.jsx)("div",{children:(0,a.jsxs)(sA.Cs,{variant:"warn",children:[(0,a.jsx)(sO.Q,{title:(0,N.tx)("file_browser.drafts_to_move.migration_will_begin_shortly"),children:(0,N.tx)("file_browser.drafts_to_move.last_chance_to_move_any_files")}),(0,a.jsx)(ck.N,{href:"https://help.figma.com/hc/articles/18409526530967",newTab:!0,children:(0,N.tx)("file_browser.drafts_to_move.viewbar_learn_more_link")})]})})}var _C=r(464758);let _S="drafts_to_move_page_view--fileCellDateSpan--xWiCm",_k="drafts_to_move_page_view--dateColumn--V3e9G drafts_to_move_page_view--column--jpRzM table--column--974RA",_R="drafts_to_move_page_view--emptyContentContainer--w1lwc",_A="drafts_to_move_page_view--emptyContentHeader--35cXt",_O=(0,il.jz)(iN.ISO),_F=(0,ab.ck)("c9f2d8cbce5754a2b6e3e3e81adf5fe313429577"),_P=(0,ab.ck)("6212099329ba7714b869112a09f8dfffce71edf5");var _L=(e=>(e.DRAFT_FILES="draft-files",e.DELETED_DRAFT_FILES="deleted-draft-files",e))(_L||{}),_D=(e=>(e.NONE="NONE",e.SYNCHRONOUS_DELETION_OR_MIGRATION="SYNCHRONOUS_DELETION_OR_MIGRATION",e.ASYNC_FILE_MIGRATION="ASYNC_FILE_MIGRATION",e.ASYNC_FILE_DELETION="ASYNC_FILE_DELETION ",e.TRANSFER_COMPLETED="TRANSFER_COMPLETED",e))(_D||{});function _M(){let e=(0,i.wA)();return(0,o.k)().dtm_deprecation_manual_migrate_button?(0,a.jsx)(tO.$n,{variant:"destructive",onClick:()=>{_h.k.migrateDtmDrafts().then(()=>{e(tl.F.enqueue({message:(0,N.t)("file_browser.draft_move_modal.async_draft_move_scheduled")}))})},children:(0,N.tx)("file_browser.drafts_to_move.migrate_drafts_now")}):(0,a.jsx)(a.Fragment,{})}function _B(e){let t=e=>{switch(e){case"draft-files":return(0,N.t)("file_browser.drafts_to_move.drafts");case"deleted-draft-files":return(0,N.t)("file_browser.drafts_to_move.deleted_drafts");default:(0,E.xb)(e)}},r=t=>{let r=_L[t].replace(/-/g,"_");(0,V.Cu)({text:r,name:"Drafts to move tab switch"},"cta_clicked"),e.setSelectedTab(_L[t])},s=Object.keys(_L).map(s=>(0,a.jsx)(_x.r,{tab:_L[s],onClick:()=>r(s),isSelected:e.selectedTab===_L[s],tabName:t(_L[s])},s));return(0,a.jsx)(sz.g2,{leftSide:(0,a.jsx)(_x.f,{tabs:s}),rightSide:[]})}function _U(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.selectedView),s=(0,oe.v)(),{item:n}=e,o=ra.Tf.getFileOrMainBranchKey(n)??"",l=e=>a=>{a.detail>1&&!ra.Tf.getTrashedAt(n)&&(u8({tile:e,index:0,dispatch:t,selectedView:r}),s(e,a),a.stopPropagation())},d=(0,ov.C)(n);return(0,a.jsxs)("div",{className:I.s.inlineFlex.minW0.$,children:[(0,a.jsxs)("button",{className:"drafts_to_move_page_view--draftThumbnail--whTtS",onClick:l(n),"data-testid":`fileTile-${o}`,children:[(0,a.jsx)(n7.e,{tile:n,noBorder:!0}),(0,a.jsx)("div",{className:"drafts_to_move_page_view--topLeftControls--kfCRe",children:(0,a.jsx)(rN.w4,{size:16,type:d})})]}),(0,a.jsxs)("div",{className:I.s.ml14.minW0.flex.flexColumn.itemSelfCenter.$,children:[(0,a.jsx)("button",{className:"drafts_to_move_page_view--fileName--U3mn4",onClick:l(n),children:ra.Tf.getName(n)}),e.shouldDisplayFileDates&&(0,a.jsxs)("div",{className:"drafts_to_move_page_view--fileCellDatesSection--LFnvg",children:[(0,a.jsx)("span",{className:_S,children:(0,N.tx)("file_browser.drafts_to_move.file_created_at_label",{timeDifference:(0,a.jsx)(ox.h1,{date:ra.Tf.getCreatedAt(n)})})}),(0,a.jsx)("span",{className:_S,children:(0,N.tx)("file_browser.drafts_to_move.file_last_modified_at_label",{timeDifference:(0,a.jsx)(ox.h1,{date:ra.Tf.getTouchedAt(n)??""})})})]})]})]})}function _W({currentFileTransferState:e}){let t="dark"===(0,nv.DP)(),r=e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ei.kt,{size:"large"}),(0,a.jsx)("p",{className:"drafts_to_move_page_view--transferContentHeader--ljikD",children:(0,N.tx)("file_browser.drafts_to_move.file_transfer_header",{transferType:"ASYNC_FILE_MIGRATION"===e?(0,N.tx)("file_browser.drafts_to_move.file_transfer_migration_type"):(0,N.tx)("file_browser.drafts_to_move.file_transfer_deletion_type")})}),(0,a.jsx)("p",{children:(0,N.tx)("file_browser.drafts_to_move.file_transfer_description")})]}),s=()=>(0,a.jsx)("div",{className:"drafts_to_move_page_view--slideIn--c-NGK",children:(0,a.jsxs)("div",{className:"drafts_to_move_page_view--animatedContentContainer--z1sdh",children:[(0,a.jsx)(_T.Gv,{src:t?_F:_P,containerClassName:"drafts_to_move_page_view--allDoneGif--mwZxC",height:100,width:100}),(0,a.jsx)("p",{className:_A,children:(0,N.tx)("file_browser.drafts_to_move.empty_header")}),(0,a.jsx)("p",{children:(0,N.tx)("file_browser.drafts_to_move.empty_body_text")})]})}),i=()=>(0,a.jsx)(ei.kt,{size:"large"});return(0,a.jsx)("div",{className:_R,children:(()=>{switch(e){case"ASYNC_FILE_MIGRATION":case"ASYNC_FILE_DELETION ":return r(e);case"TRANSFER_COMPLETED":return s();default:return i()}})()})}function _$(){let e=(0,i.wA)(),t=(0,i.d4)(e=>e.user?.personal_drafts_folder_id),r=(0,i.d4)(e=>e.fileKeysByFolderId),n=(0,i.d4)(e=>e.fileKeysByRepoId),l=(0,i.d4)(e=>e.repoIdsByFolderId),d=(0,i.d4)(e=>e.repos),c=(0,i.d4)(e=>e.fileByKey),u=(0,i.d4)(e=>e.selectedView),m=(0,i.d4)(e=>e.selectedBranchKeyByRepoId),_=(0,i.d4)(e=>e.userFlags),f=_.personal_draft_migration_scheduled,g=_.personal_draft_migration_completed,h=_.personal_draft_deletion_scheduled,b=_.personal_draft_deletion_completed,v=(0,i.d4)(e=>e.loadedFolders),y=(0,i.d4)(e=>e.deletedFilesByKey),w=(0,i.d4)(e=>e.deletedReposById),{windowInnerWidth:j}=(0,dJ.l)(),E=(0,p.Rs)((0,eK.vXh)({})),C=(0,p.Rs)((0,eK.Jzf)({projectId:t??""}),{enabled:!!t}),S=(0,oe.v)(),[k,R]=s.useState("draft-files"),[A,O]=s.useState(!1),[F,P]=s.useState("NONE"),[L,D]=s.useState(!1),[M,B]=s.useState(!1);s.useEffect(()=>{f&&(0,r3.rO)(f.updatedAt,g?.updatedAt)?P("ASYNC_FILE_MIGRATION"):h&&(0,r3.rO)(h.updatedAt,b?.updatedAt)?P("ASYNC_FILE_DELETION "):L?P("SYNCHRONOUS_DELETION_OR_MIGRATION"):P("NONE")},[f,g,h,b,L]),s.useEffect(()=>{e(T.h3({orgId:null}))},[e]);let W="loaded"===E.status,$=s.useMemo(()=>{if(!W)return[];let e=[];return E.data?.currentUser?.draftsFolderId&&e.push(E.data.currentUser.draftsFolderId),e},[W,E]),G=s.useMemo(()=>C.data?.project?.status!==_p.tT.Loaded?new Set:new Set((C.data?.project.data?.undeletedFilesHighLimit??[]).map(e=>e.key)),[C]),V=s.useMemo(()=>{if(C.data?.project?.status!==_p.tT.Loaded)return new Set;let e=new Set;return(C.data?.project.data?.undeletedFilesHighLimit??[]).forEach(t=>{t.fileRepoId&&e.add(t.fileRepoId)}),e},[C]),z=s.useCallback(e=>G.has(e),[G]),K=s.useCallback(e=>V.has(e),[V]);s.useEffect(()=>$.forEach(t=>W&&e((0,H.jl)({folderId:t,loadedFolders:v}))),[v,$,e,W]);let{getConfig:Y}=(0,x.I7)("ps_async_draft_move_limit",void 0,!0),q=Y().get("async_limit",100),J=W&&$.every(e=>e&&"loaded"===v[e]),X=s.useMemo(()=>Object.keys(y).map(e=>y[e]).filter(e=>!e.file_repo_id&&e.folder_id===t&&z(e.key)),[y,t,z]),Q=s.useMemo(()=>Object.keys(w).map(e=>w[e]).filter(e=>e&&e.main_file&&e.main_file.folder_id===t&&e.repo&&K(e.repo.id)),[w,t,K]),Z=s.useMemo(()=>$.flatMap(e=>l[e]).map(e=>d[e]).filter(e=>!!e&&K(e.id)),[$,d,l,K]),ee=s.useMemo(()=>$.flatMap(e=>r[e]).map(e=>c[e]).filter(e=>!!e&&z(e.key)),[$,c,r,z]);s.useEffect(()=>{let e=ee.length+Z.length,t=X.length+Q.length;J&&!M&&(0===e&&t>0&&R("deleted-draft-files"),B(!0))},[J,M,ee.length,Z.length,Q.length,X.length]);let et=s.useMemo(()=>ee.concat(X).map(e=>(0,ra.fA)(e)),[ee,X]),er="deleted-draft-files"===k?X:ee,ea=s.useMemo(()=>er.map(e=>(0,ra.fA)(e)),[er]),ei=s.useMemo(()=>Z.map(e=>{let t=n[e.id].map(e=>c[e]).filter(e=>!!e);return{type:ra.nb.REPO,repo:e,branches:t,selectedBranchKey:m[e.id]}}),[Z,m,c,n]),en=s.useMemo(()=>Q.map(e=>({type:ra.nb.REPO,repo:e.repo,branches:[e.main_file],selectedBranchKey:e.main_file?.key})),[Q]),eo="deleted-draft-files"===k?en:ei,el=en.concat(ei),ed=ea.concat(eo),ec=et.length>0||el.length>0,eu=ed.length>0,[em,e_]=s.useState([]),ep=()=>{e(tC.Ce()),O(!1)},ef=(t,r)=>{e(tl.F.enqueue({message:(0,N.t)("visual_bell.files_moved_to_folder",{fileCount:r,folderName:t})})),D(!1),e_([])},eg=()=>{D(!1),e_([])},eh=e=>{let t=[],r=[];return e.forEach(e=>{e.type===ra.nb.FILE&&t.push(e.file),e.type===ra.nb.REPO&&r.push(e.repo)}),{draftsToMove:t,reposToMove:r}},ex=t=>{let{draftsToMove:r,reposToMove:a}=eh(em);O(!0),e(tC.to({type:_w,data:{isPermanentDeletion:t,draftsToDelete:r,reposToDelete:a,deleteAllDraftsAsync:em.length>q,setSynchronousFileTransferInProgress:D,onDeleteSuccess:eg,onClose:ep}}))},eb=()=>{let{draftsToMove:t,reposToMove:r}=eh(em);O(!0),e(tC.to({type:_j.K,data:{draftsToMove:t,reposToMove:r,moveAllDraftsAsync:em.length>q,onMoveSuccess:ef,onClose:ep,setSynchronousFileTransferInProgress:D}}))},ev=function(e,t,r,s){let i=s>=1200,n=[{name:(0,N.t)("file_browser.drafts_to_move.table_header_name"),className:"drafts_to_move_page_view--nameColumn--sSZYF drafts_to_move_page_view--column--jpRzM table--column--974RA",getSortValue:e=>ra.Tf.getName(e),cellComponent:e=>(0,a.jsx)(_U,{item:e,shouldDisplayFileDates:!i})}];return i&&n.push({name:(0,N.t)("file_browser.drafts_to_move.table_header_last_modified"),className:_k,getSortValue:e=>ra.Tf.getTouchedAt(e)??"",cellComponent:e=>{let t=ra.Tf.getTouchedAt(e);return t?(0,a.jsx)(ox.h1,{date:t}):""}},{name:(0,N.t)("file_browser.drafts_to_move.table_header_created"),className:_k,getSortValue:e=>ra.Tf.getCreatedAt(e),cellComponent:e=>(0,a.jsx)(ox.h1,{date:ra.Tf.getCreatedAt(e)})}),n.push({name:"",className:"drafts_to_move_page_view--moveButtonColumn--Mvc2P drafts_to_move_page_view--column--jpRzM table--column--974RA",cellComponent:s=>0===r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r6.tM,{className:U()("drafts_to_move_page_view--openDraftButton--zXZGf",I.s.if(!!ra.Tf.getTrashedAt(s),I.s.invisible).$),onClick:e=>t(e,s),children:(0,N.tx)("file_browser.drafts_to_move.open_draft_button")}),(0,a.jsx)(r6.tM,{className:"drafts_to_move_page_view--moveDraftButton--GmBWa",onClick:t=>e(t,s),children:(0,N.tx)("file_browser.drafts_to_move.move_draft_button")})]}):(0,a.jsx)(a.Fragment,{})}),n}((t,r)=>{let{draftsToMove:a,reposToMove:s}=eh([r]);e(tC.to({type:_j.K,data:{draftsToMove:a,reposToMove:s,onMoveSuccess:ef,onClose:ep,setSynchronousFileTransferInProgress:D}})),t.stopPropagation()},(t,r)=>{u8({tile:r,index:0,dispatch:e,selectedView:u}),S(r,t),t.stopPropagation()},em.length,j),[ey,ew,ej]=(0,_g.z)({columnName:(0,N.t)("file_browser.drafts_to_move.table_header_last_modified"),isReversed:!0},ed,ev),eT=(0,a.jsxs)("div",{className:_R,children:[(0,a.jsx)("span",{className:_A,children:(0,N.tx)("file_browser.drafts_to_move.empty_header")}),(0,a.jsx)("span",{children:(0,N.tx)("file_browser.drafts_to_move.empty_content_description",{tab:(0,a.jsx)("button",{className:"drafts_to_move_page_view--emptyContentTab--GKlRP",onClick:()=>R("draft-files"===k?"deleted-draft-files":"draft-files"),children:"draft-files"===k?(0,N.t)("file_browser.drafts_to_move.deleted_drafts"):(0,N.t)("file_browser.drafts_to_move.drafts")})})})]});if("NONE"!==F)return(0,a.jsx)(_W,{currentFileTransferState:F});let eE=em.length<=0||em.length>q,eI="deleted-draft-files"===k||!(0,o.k)().ps_trashed_drafts_enabled,eN=(0,a.jsx)(es.A,{loadingElementClassName:"drafts_to_move_page_view--loadingPage--ZZyqG",loadingElementId:"loading-content-pane",loaded:J,children:eu?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"drafts_to_move_page_view--tableWrapper--b-sz2",children:(0,a.jsx)(_E.Cj,{actionBar:e=>(0,a.jsxs)("div",{className:"drafts_to_move_page_view--actionBarButtons--RUREB",children:[!eE&&(0,a.jsx)(r6.rb,{className:"drafts_to_move_page_view--deleteDraftsButton--Aesaa",onClick:()=>ex(eI),children:eI?(0,N.tx)("file_browser.drafts_to_move.bulk_delete_drafts_button"):(0,N.tx)("file_browser.drafts_to_move.bulk_trash_drafts_button")}),(0,a.jsx)(r6.vd,{className:"drafts_to_move_page_view--moveDraftsButton--fZf6H",disabled:eE,onClick:eb,children:(0,N.tx)("file_browser.drafts_to_move.bulk_move_drafts_button",{numSelected:em.length})})]}),actionBarClassName:U()("drafts_to_move_page_view--actionBar--BbYQh",{"drafts_to_move_page_view--actionBarHidden--l4K4A":A}),columns:ev,emptyContent:"",getItemKey:e=>ra.Tf.getFileOrMainBranchKey(e)??"",isLoading:!_C.s1,itemTypeContext:{itemType:"draftToMove",getSelectedCountString:e=>(0,N.t)("file_browser.drafts_to_move.selected_count_files",{numSelected:e})},items:ej,minContentWidth:728,onSelectedItemsChange:e_,onSetSortState:ew,rowHeightOverride:_O,scrollContainerInnerClassName:"drafts_to_move_page_view--scrollContainer--yiQAz",selectAllDisabled:ej.length>q,shouldRoundBordersForSelectedRows:!0,sortState:ey,styleOverrideClassNames:{row:"drafts_to_move_page_view--row--v9ugA",header:"drafts_to_move_page_view--header--qsyde",unselectedCheckbox:"drafts_to_move_page_view--visibleCheckbox--UOqli",batchActionClearButton:"drafts_to_move_page_view--batchActionClearButton--Qk923"}})})}):ec?eT:(0,a.jsx)(_W,{currentFileTransferState:"TRANSFER_COMPLETED"})});return(0,r2.T8)((0,a.jsx)(iY.r,{content:eN,viewbar:ec&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"drafts_to_move_page_view--dtmContainer--NcCUW",children:[J&&(0,o.k)().dtm_deprecation_pre_migration_onboarding&&(0,a.jsx)(_I,{}),J&&(0,o.k)().dtm_deprecation_migration_onboarding&&(0,a.jsx)(_N,{})]}),(0,a.jsx)("div",{className:"drafts_to_move_page_view--viewbar--wJ6Pu",children:(0,a.jsxs)("div",{className:"drafts_to_move_page_view--viewbarWarning--6T7y-",children:[(0,a.jsx)(_f.E,{className:"drafts_to_move_page_view--yellowIcon--xHN3r"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"drafts_to_move_page_view--viewbarHeading--02fvs",children:(0,N.tx)("file_browser.drafts_to_move.viewbar_heading")}),(0,a.jsxs)("ul",{className:"drafts_to_move_page_view--viewbarDescription--dV8s3",children:[(0,a.jsx)("li",{children:(0,N.tx)("file_browser.drafts_to_move.move_drafts_below")}),(0,a.jsx)("li",{children:(0,N.tx)("file_browser.drafts_to_move.drafts_for_personal_work")}),(0,a.jsx)("li",{children:(0,N.tx)("file_browser.drafts_to_move.access_to_drafts")})]}),(0,a.jsxs)("div",{className:"drafts_to_move_page_view--viewbarActions--v-cwt",children:[(0,a.jsx)(r6.vd,{className:"drafts_to_move_page_view--moveAllDraftsButton--9-TlX",onClick:()=>{O(!0),e(tC.to({type:_j.K,data:{reposToMove:el.map(e=>e.repo),draftsToMove:et.map(e=>e.file),onMoveSuccess:ef,isMoveAll:!0,moveAllDraftsAsync:et.length>q,onClose:ep,setSynchronousFileTransferInProgress:D}}))},children:(0,N.tx)("file_browser.drafts_to_move.move_all_drafts_button")}),(0,a.jsx)(r6.NY,{className:"drafts_to_move_page_view--learnMoreButton--lUnQ9 drafts_to_move_page_view--moveAllDraftsButton--9-TlX",href:"https://www.figma.com/blog/updates-to-how-drafts-work/",target:"_blank",children:(0,N.tx)("file_browser.drafts_to_move.viewbar_learn_more_link")}),(0,a.jsx)(_M,{})]})]})]})}),(0,a.jsx)("div",{className:"drafts_to_move_page_view--tabViewBarContainer--lsoH0",children:(0,a.jsx)(_B,{selectedTab:k,setSelectedTab:R})})]})}),r5.e0.FILE_BROWSER,{view:"draftsToMove",selectedTab:k})}function _G({org:e,currentResourceId:t,hasTrailingDivider:r}){let s=(0,i.wA)();return(0,a.jsx)(oL.J5,{text:e.name,onClick:r=>{s(eR.sf({view:"org",orgId:e.id,orgViewTab:tF.X.HOME})),(0,V.Cu)({clickedResourceType:"org",clickedResourceId:e.id,currentResource:t,orgId:e.id})},hasTrailingDivider:r})}var _V=r(209153);function _z({planEntity:e}){return(0,a.jsxs)(uk.Y,{spacing:4,children:[(0,a.jsx)(_V.H,{entityId:e.id,entityName:e.name,imgUrl:e.imgUrl??void 0}),(0,a.jsx)(C.E,{fontSize:13,color:"secondary",children:e.name})]})}function _H({team:e,currentResourceId:t,orgId:r,hasTrailingDivider:s}){let n=(0,i.wA)();return(0,a.jsx)(oL.J5,{text:e.name,onClick:a=>{n(eR.sf({view:"team",teamId:e.id})),(0,V.Cu)({clickedResourceType:"workspace",clickedResourceId:e.id,currentResource:t,orgId:r})},hasTrailingDivider:s})}var _K=r(7113);function _Y({workspace:e,currentResourceId:t,orgId:r,hasTrailingDivider:s}){let i=(0,_K.$)(),n=e.id===iD.O,o=!e.canRead;return(0,a.jsx)(oL.J5,{text:n?(0,N.t)("breadcrumbs.unassigned_license_group"):o?(0,N.t)("breadcrumbs.private_workspace_ellipses"):e.name,onClick:a=>{i(e.id,a),(0,V.Cu)({clickedResourceType:"workspace",clickedResourceId:e.id,currentResource:t,orgId:r})},hasTrailingDivider:s,disabled:n||o})}function _q({folderId:e}){let t=(0,p.Rs)(eK.L8O,{projectId:e}),r=t.data?.project||null,s=(0,Y.dq)(),i=(0,eY.X$)("FolderPageBreadcrumbs").unwrapOr(null),n=i?.key.type===eM.OL.ORG;if(!r?.team)return null;if(n||r.team.org?s!==r.team.org?.id:!r.team.canRead)return(0,a.jsx)(_z,{planEntity:r.team.org??r.team});let o=(0,X.Zr)(r.team.org);return(0,a.jsxs)(oL.A5,{children:[r.team.org&&(0,a.jsx)(_G,{org:r.team.org,currentResourceId:r.id,hasTrailingDivider:!0}),(r.team.workspace||o)&&r.team.org&&(0,a.jsx)(_Y,{workspace:r.team.workspace??{id:iD.O},currentResourceId:r.id,orgId:r.team.org.id,hasTrailingDivider:!0}),(0,a.jsx)(_H,{team:r.team,currentResourceId:r.id,orgId:r.team.org?.id,hasTrailingDivider:!1})]})}var _J=r(485103),_X=r(240735);let _Q="seen_folder_settings_disconnected_project_share_copy_onboarding",_Z="FOLDER_SETTINGS_DISCONNECTED_PROJECT_SHARE_COPY_ONBOARDING_KEY",_0=(0,ep.r1)(_Q);function _1({folder:e}){let t=(0,ed.md)(_0),r=s.useMemo(()=>{let t=(0,ea.oA)(e.mostRecentResourceConnection),r=!!t&&!!t.disconnectedAt,a=!!t&&!t.assetTransferRequestId,s=e.canTransferCopy;return sm.Qw.loaded(r&&a&&s)},[e]),{show:i,isShowing:n,complete:o}=(0,e_.e)({overlay:eb.j9$,priority:eg.N.DEFAULT_MODAL},[t,r]);(0,m.h)(()=>{i({canShow:(e,t)=>!e&&t})});let l=e=>(0,a.jsx)("span",{className:"folder_settings_disconnected_project_share_copy_onboarding_overlay--planName--0GWpT",children:e});return(0,a.jsx)(eh.rq,{arrowPosition:ex.F_.TOP,clickOutsideToHide:!0,description:(0,N.tx)("resource_connection.onboarding.share_a_project_copy_onboarding_description",{hostPlanName:l(ea.oA(e.mostRecentResourceConnection)?.hostPlanName),connectedPlanName:l(ea.oA(e.mostRecentResourceConnection)?.connectedPlanName)}),emphasized:!0,isShowing:n,onClose:o,primaryCta:{label:(0,N.tx)("general.got_it"),ctaTrackingDescriptor:em.c.GOT_IT,type:"button",onClick:o},shouldCenterArrow:ex.EL.FALLBACK,targetKey:_Z,title:(0,N.tx)("resource_connection.onboarding.share_a_project_copy_onboarding_title"),trackingContextName:"seen folder settings disconnected project share copy onboarding overlay",userFlagOnShow:_Q})}function _4(e){let{selectedView:t,userFlags:r,userTeamFlags:n,userEduVerified:o,isFreeUser:l,userAnalyticsData:d,...c}=(0,s_.R)(e=>({selectedView:e.selectedView,userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,userEduVerified:!!e.user?.student_validated_at,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData,...(0,s9.getPermissionsState)(e)})),u=(0,i.wA)(),m=(0,p.Rs)(eK.UpR,{}),{teamId:_,selectedTab:f}=e,g=c.teams[_]??null,h=!!g?.org_id,x=!!g?.subscription,b=(0,p.Rs)((0,eK.LKQ)(_?{teamId:_}:null)),v=s.useMemo(()=>b.transform(({team:e})=>!!e?.canAdmin),[b]).unwrapOr(!1),y=(0,i.d4)(e=>e.loadingState),w=sr.Be.loadingKeyForPayload({teamId:_}),j=(0,sh.VP)(y,w),T=(0,sh.D2)(y,w);(0,s.useEffect)(()=>{!j&&!T&&_&&!h&&x&&v&&u(sr.Be({teamId:_}))},[u,_,h,x,v,j,T]);let E=(0,i.d4)(e=>e.teamBilling?.summary),I=_r(eM.vt.TEAM,g,_,{selectedView:t,userFlags:r,userTeamFlags:n,selectedTab:f,isFreeUser:l,userAnalyticsData:d,eduPeriodEnd:m.data?.currentUser?.eduPeriodEnd,billingSummary:E,...c},u,i2.A5.TeamUpgradeBanner.bannerContent).unwrapOr(null);if(!I)return(0,a.jsx)("div",{});let N=_s({resourceType:eM.vt.TEAM,teamId:_},I),C=I.severity===mz.c.WARN?mH:"",S=I.bannerClassName||"",k=`${m4} ${C} ${S}`;return(0,a.jsx)("div",{className:k,children:(0,a.jsx)(_o,{...I,tracking:N})})}var _2=r(598926);function _8({folderId:e,pinnedFiles:t,tileActions:r}){let n=(0,i.wA)(),o=(0,eA._6)(),l=(0,J.TA)(),{showing:d,show:c,data:u}=(0,ot.L)(),m=(0,oe.v)(),_=s.useCallback((t,r,a)=>{m(t,r);let s=t.type===ra.nb.PINNED_FILE?t.file:null;(0,V.E9)(V.gH,s,{entrypoint:a,selectedView:o.view,resourceType:"folder",resourceId:e,pinDescription:"file open from pinned files for file named "+s?.name})},[m,o.view,e]),p=s.useCallback((e,t)=>{_(_3(e.file),t,"pinned files")},[_]),f=s.useCallback((e,t,r)=>{n(re.an()),n(re.PW({type:ru.F.PINNED_FILES,keys:e.map(e=>e.file.key)})),c({data:{tile:_3(e[0].file),targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:r}})},[n,c]),g=s.useCallback(t=>{if(1!==t.length)return;let r=t[0];r?.pinnedByUser?.id===l&&n(_2.z6({folderId:e,fileKey:r.file.key}))},[l,n,e]),h=s.useMemo(()=>t.filter(({file:e})=>!!e).map(e=>_3(e.file)),[t]),x=(0,ra.nw)(h),b=s.useMemo(()=>t.sort((e,t)=>e.file.createdAt>t.file.createdAt?1:-1),[t]);return(0,a.jsxs)("div",{className:I.s.px32.pb8.m0.$,children:[t.length>0?(0,a.jsx)(oa.A,{handleContextMenu:f,items:b,doNotFocusOnLoad:!0,getAriaLabel:e=>e.file.name,viewType:oi.XU.GRID,handleOpenItem:p,handleDeleteKey:g,gridViewProps:{containerStyle:_7.grid,renderTile:e=>(0,a.jsx)(_5,{pinnedFile:e,isDropdownOpen:d}),renderTileFooter:e=>(0,a.jsx)(_6,{pinnedFile:e}),renderTileDragImage:e=>(0,a.jsx)(rC.NM,{file:e.file,noBorder:!0})}}):(0,a.jsx)("div",{}),(()=>{let e=u?.tile??null;return(0,a.jsx)(or.i,{tile:e,selectedTiles:x,tileActions:r,openTile:t=>{e&&_(e,t,"pinned files: context menu")},dropdownVisible:d})})()]})}function _5({pinnedFile:e}){let t=_3(e.file);return(0,a.jsx)(n7.e,{tile:t,noBorder:!0,size:rW.y.SMALL})}function _6({pinnedFile:e}){return(0,a.jsxs)("div",{className:I.s.pt8.flex.flexColumn.$,children:[(0,a.jsx)("span",{className:I.s.ellipsis.textBodyLargeStrong.truncate.$,children:e.file.name}),(0,a.jsx)(C.E,{truncate:!0,showTooltipWhenTruncated:!0,color:"secondary",children:(0,N.t)("tile.file_tile.pinned_by_user",{name:e.pinnedByUser?.name??""})})]})}function _3(e){return{type:ra.nb.PINNED_FILE,file:e}}let _7={grid:{gridTemplateColumns:"x1g5i94c",userSelect:"x87ps6o",$$css:!0}};var _9=r(708845),pe=r(216696),pt=r(49598),pr=r(23271),pa=r(793009),ps=r(862913),pi=r(347702);let pn=new Set(["PM","ENG","DES","MKT","UR"]),po=(e,t)=>e?pe.Dw.loadingKeyForPayload({shelfType:l9.cS.FILE_BROWSER_RECOMMENDED_TEMPLATES,filterLabel:t}):pe.sz.loadingKeyForPayload({shelfType:l9.cS.FILE_BROWSER_RECOMMENDED_TEMPLATES}),pl=(0,pi.n)(e=>(function(e){if(!e)return"OTH";let t={"software-development":"ENG","user-research":"UR",design:"DES",marketing:"MKT","product-management":"PM",other:"OTH"};if(e in t)return t[e];let r={"project-manager":"PM",designer:"DES",developer:"ENG",marketer:"MKT","product-manager":"PM",consultant:"OTH",sales:"MKT","ux-researcher":"UR",student:"OTH",educator:"OTH"};return e in r?r[e]:e.endsWith("-developer")?"ENG":e.endsWith("-designer")?"DES":e.includes("Eng")||e.includes("Dev")?"ENG":e.includes("Des")?"DES":e.includes("Lead")||e.includes("Man")?"PM":"OTH"})(e?.profile?.job_title??"OTH"));var pd=r(198840),pc=r(79930),pu=r(961422),pm=r(878651);let p_=[eM._Y.WHITEBOARD,eM._Y.SLIDES],pp=(0,ed.eU)(!1);function pf(e){let t=(0,i.wA)(),r=pl((0,J.iZ)()),n=po(!1,r),o=(0,sh.oh)(n),l=(0,sh.mC)(n),d=pn.has(r)?r:l9.iF.ALL,c=(0,ed.Xr)(pp);s.useEffect(()=>(c(!0),()=>c(!1)),[c]),s.useEffect(()=>{if(!o&&!l)return t(pe.Dw({shelfType:l9.cS.FILE_BROWSER_TEMPLATES_BAR,filterLabel:d}))},[o,l,t,r,d]);let u=(0,i.d4)(e=>e.communityHub.shelves[l9.cS.FILE_BROWSER_TEMPLATES_BAR]||[]),m=s.useMemo(()=>{let e=new Map;return u.forEach(t=>{e.set(t.id,t.shelf_content.map(e=>e))}),e},[u]),_=s.useCallback(e=>{switch(e){case"All":return(0,N.t)("file_browser.templates_shelf.for_you");case"Brainstorm":return(0,N.t)("file_browser.templates_shelf.brainstorm");case"Reviews":return(0,N.t)("file_browser.templates_shelf.reviews");case"Meetings":return(0,N.t)("file_browser.templates_shelf.meetings");case"Planning":return(0,N.t)("file_browser.templates_shelf.planning");case"Diagram":return(0,N.t)("file_browser.templates_shelf.diagram");default:return null}},[]),p=s.useMemo(()=>{let e=[];return u.forEach(t=>{t.shelf_content.length>0&&e.push({tabKey:t.id,tabTitle:t.title,modifiedTabTitle:_(t.title)})}),e},[u,_]);return 0===p.length?null:(0,a.jsx)(r2.fu,{name:"topbar_templates_shown",children:(0,a.jsx)("div",{className:"templates_bar--container--0nCIh",children:(0,a.jsx)(pg,{tabNameToTemplatesMap:m,folderId:e.folderId,onClose:e.onClose,tabList:p,newFileFrom:e.newFileFrom})})})}function pg(e){let[t,r]=s.useState(e.tabList[0]),[i,n]=s.useState(e.tabNameToTemplatesMap.get(t.tabKey)??[]),[o,l]=s.useState(null),{sizeRef:d,numTemplates:c,templateWidth:u,templateHeight:m}=function(e){let t=(0,s.useRef)(null),[r,a]=(0,s.useState)(0),i=Math.min(r-4,2229);(0,s.useLayoutEffect)(()=>{a(t?.current?.offsetWidth??0)},[a,t]),(0,_9.wY)(t,e=>{a(e.width)});let n=(0,s.useMemo)(()=>i?Math.min(Math.floor((i+16)/187),e):0,[i,e]),o=n&&i?Math.floor((i-16*(n+1))/n):0,l=o?Math.floor(136*o/171):0;return{sizeRef:t,numTemplates:n,templateWidth:o,templateHeight:l}}(i?.length??0);s.useEffect(()=>{if(!e.tabList||0===e.tabList.length)return;let t=e.tabList[0];r(t),n(e.tabNameToTemplatesMap.get(t.tabKey)??[])},[e.tabList,e.tabNameToTemplatesMap]),s.useEffect(()=>{n(e.tabNameToTemplatesMap.get(t.tabKey)??[])},[t,e.tabNameToTemplatesMap]);let _=(0,a.jsx)(pv,{tabs:e.tabList,activeTab:t,setActiveTab:r});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"templates_bar--headerContainer--3-3sN",children:[(0,a.jsx)("div",{className:"templates_bar--headerLeft--p4T6m",children:(0,a.jsx)(ph,{})}),(0,a.jsx)("div",{className:"templates_bar--headerEnd--rI6SI",children:_}),(0,a.jsx)("div",{className:"templates_bar--headerRightOld--j-Via",children:(0,a.jsx)("div",{className:"templates_bar--closeButton--XeG8e",children:(0,a.jsx)(ee.K,{onClick:e.onClose,"aria-label":(0,N.t)("general.close"),children:(0,a.jsx)(et.A,{})})})})]}),(0,a.jsx)("div",{className:"templates_bar--body--PKvm-",ref:d,children:(0,a.jsx)("div",{className:"templates_bar--tilesContainer--OHkyf","data-testid":"templates-bar-tiles-container",children:i?.slice(0,c??0).map((r,s)=>a.jsx("div",{style:{width:u,height:m,marginRight:16},children:a.jsx(pb,{hubFile:r,rank:s,folderId:e.folderId,tab:t,duplicatingHubId:o,setDuplicatingHubId:l,newFileFrom:e.newFileFrom})},r.id))})})]})}function ph(){return(0,a.jsx)("div",{className:"templates_bar--headerTitle--6BSKy text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,N.tx)("file_browser.templates_shelf.interim_title")})}let px=e=>e===eM.y4.WHITEBOARD?"whiteboard":e===eM.y4.SLIDE_TEMPLATE?"piper":"design";function pb(e){let t=(0,i.wA)(),r=e.hubFile,s=r.id,n=null!==e.duplicatingHubId,o=e.duplicatingHubId===s,l=r&&(0,pd.a6)(e.hubFile),d=a=>{a.stopPropagation(),e.setDuplicatingHubId(s),t(pt.rL({hubFileId:s,hubFileName:l?.name||"this file",openInNewTab:!1,folderId:e.folderId,source:aw.f6.FILE_BROWSER_TEMPLATES_BAR,callback:t=>{e.setDuplicatingHubId(null),(0,V.Cu)({fileKey:t,rank:e.rank,templateId:s,productType:(0,pr.L)(r.viewer_mode)},"topbar_template_selected"),(0,pa._)("resource_inserted",{fileKey:t,resourceId:s,resourceName:l.name,resourceType:"template",templateType:pc.n.HubFile,triggeredFrom:e.newFileFrom,category:e.tab.tabTitle,templateCategory:e.tab.tabKey})}}))};return r?(0,a.jsx)(pu.zq,{containerStyle:"templates_bar--templatesTileContainer--yy7Q2",onClick:n?void 0:d,image:(0,a.jsxs)(pu.FK,{backgroundColor:(0,ps.Cn)(r.client_meta),removeBorder:!0,className:"templates_bar--templatesTileImage--y0sA9",customRatioClassName:"templates_bar--imageRatio--enx9l",children:[(0,a.jsx)(pu.zx.Cover,{children:(0,a.jsx)("button",{className:"templates_bar--hoverOverlay--bQBil browse_templates_modal--hoverOverlay--sFj3y",onClick:d,disabled:n})}),(0,a.jsx)(pu.zx.Center,{children:(0,a.jsx)("div",{className:U()("templates_bar--useTemplateButton--4KFhz",I.s.bRadius6.$),tabIndex:-1,children:(0,a.jsx)(aT.J,{brand:px(r.viewer_mode),children:(0,a.jsx)(tO.$n,{onClick:d,disabled:n,children:o?(0,a.jsx)(nt.k,{}):(0,N.tx)("file_browser.new_file_creation_topbar.use_templates")})})})}),(0,a.jsx)(pm.Ho,{image:e.overrideThumbnailUrl||r.thumbnail_url||void 0,isSet:!!e.overrideThumbnailUrl||!!r.thumbnail_is_set,isWhiteboard:r.viewer_mode===eM.y4.WHITEBOARD,hubFileId:r.id,alt:(0,pd.a6)(r).name,imageClassName:r.viewer_mode===eM.y4.SLIDE_TEMPLATE?"templates_bar--slidesThumbnailImage--uJ-8c templates_bar--thumbnailImage--ymHpx":"templates_bar--thumbnailImage--ymHpx",resizedThumbnailUrls:r.resized_thumbnail_urls})]}),bottomRow:(0,a.jsx)(pu.Wf.NameAndFileIconMetadata,{name:l.name,className:"templates_bar--tilesBottomRowContainer--GxsNx",textClassName:"templates_bar--tileBottomRowNameOnly--SMVhN text--fontPos11--2LvXf text--_fontBase--QdLsd",viewerMode:r.viewer_mode}),bottomRowStyle:"templates_bar--bottomRowStyle--a32JN"}):null}function pv(e){return(0,a.jsx)("div",{className:"templates_bar--tabs--a8HOf text--fontPos13--xW8hS text--_fontBase--QdLsd",style:iV.sx.add({columnGap:"26px"}).$,children:e.tabs.map(t=>(0,a.jsx)(py,{tab:t,isActive:t.tabKey===e.activeTab.tabKey,setActiveTab:e.setActiveTab},t.tabKey))})}function py(e){return(0,a.jsx)(sN.E,{className:U()("templates_bar--tab---drzF text--fontPos11--2LvXf text--_fontBase--QdLsd",{"templates_bar--activeTab--c7Hid":e.isActive}),onClick:()=>{(0,V.Cu)({triggeredFrom:"file-browser",category:e.tab.tabTitle},"template_shelf_category_toggled"),e.setActiveTab(e.tab)},children:e.tab.modifiedTabTitle??e.tab.tabTitle})}var pw=r(509505),pj=r(15667),pT=r(497540),pE=r(990299),pI=r(681697),pN=r(202542),pC=r(46262);let pS="connected_folder_empty_view--subtitle--eKq7-",pk="connected_folder_empty_view--betaTag--xypkD";function pR(e){var t;let{lgFolder:r,hostPlanName:s,user:n}=e,o=(0,i.wA)(),{properties:l}=(0,r2.j6)(),{handleUpgrade:d,getUpgradeEligibility:c,hasPendingRequest:u,getUpgradePathway:m}=(0,rI.wH)({folderId:r.id}),_=r.canCreateDesignFileWithReasons.result&&r.canEdit,p=(e=>{let t=c(eM.G_.DESIGN,_);return t===pN.q.CAN_UPGRADE?((0,V.Cu)({...l,trackingDescriptor:em.c.CREATE_FILE,licenseType:eM.G_.DESIGN,billableProductKey:(0,pT.F2)(eM.G_.DESIGN),needsUpgrade:!0}),d({afterUpgradeCallback:e,licenseType:eM.G_.DESIGN,upgradeReason:pC.i.CREATE_FILE,entryPoint:pj.tc.CREATE_FILE_EMPTY_CONNECTED_PROJECT})):t===pN.q.CANNOT_UPGRADE?()=>o(tl.F.enqueue({message:"Can't upgrade",error:!0})):e})((0,ay.$)({isDraftsFolder:(0,rk.T9)(r),editorType:eM._Y.DESIGN,newFileFrom:aw.f6.FILE_BROWSER_CONNECT_FOLDER_EMPTY_PAGE,contextClicked:"empty_connected_project_page",folderId:r.id})),f=()=>!_&&c(eM.G_.DESIGN)===pN.q.CANNOT_UPGRADE&&u(eM.G_.DESIGN),g=r.team?.org?.id,h=(0,eT.R$)(n,g),x=(0,pI.ud)(r)&&!h;return(0,a.jsxs)("div",{className:"connected_folder_empty_view--connectEmptyStateContainer--YGdYq",children:[(0,a.jsx)("div",{className:"connected_folder_empty_view--connectedEmptyHeading--UNTZ6",children:(0,N.tx)("file_browser.folder.what_s_a_connected_project_without_files")}),(0,a.jsxs)("div",{className:"connected_folder_empty_view--creationButtonsContainer--vedbb",children:[(0,a.jsx)(pA,{hideDisabledTooltip:f(),isDisabled:f(),onClick:p,showRequestSentTag:f(),showRequestTag:!_&&c(eM.G_.DESIGN)===pN.q.CAN_UPGRADE&&m(eM.G_.DESIGN)!==pN.J.AUTO_PATHWAY&&!u(eM.G_.DESIGN),subtitle:(0,N.t)("file_browser.folder.create_a_file_in_any_figma_product"),title:(0,N.t)("file_browser.folder.start_from_scratch")}),x&&(0,a.jsx)(pA,{title:(0,N.t)("file_browser.folder.use_existing_work"),onClick:()=>{r&&(o(T.gN(r.id)),o((0,pE.L)()))},subtitle:(0,N.t)("file_browser.folder.import_images_sketch_files_and_pdfs")})]}),(0,a.jsxs)("div",{className:pS,children:[(0,a.jsx)(pw.l,{className:"connected_folder_empty_view--libraryIcon--jFzUk"}),(0,a.jsx)("div",{children:(0,N.tx)("file_browser.folder.the_host_team_can_add_libraries",{hostPlanName:(0,a.jsx)("span",{className:"connected_folder_empty_view--bold--6ZKfX",children:s}),learnMoreLink:(0,a.jsx)("a",{className:"connected_folder_empty_view--learnMore--4py5l modal--blueLink--9GcJu blue_link--blueLink--9rlnd",href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects#h_01JMJDKJFD68CH88F663KG08AJ",target:"_blank",children:t||(0,N.tx)("resource_connection.request_modal.learn_more")})})})]})]})}function pA(e){let t=e.isDisabled,r=e.onClick,i=s.useRef(null),n=s.useCallback(e=>{r(e),i.current?.blur()},[r]),o=(0,da.qI)().unwrapOr(null);return(0,a.jsxs)("button",{className:U()("connected_folder_empty_view--creationButton--CQHPo",t&&"connected_folder_empty_view--disabled--eER6x"),ref:i,"data-testid":"connect_file_browser_create_file_button",tabIndex:0,disabled:t,onClick:t?void 0:n,"data-tooltip":e.isDisabled&&!e.hideDisabledTooltip&&o?o:void 0,"data-tooltip-type":r8.Ib.TEXT,children:[(0,a.jsx)("div",{className:"connected_folder_empty_view--creationIcon--ieYan",children:(0,a.jsx)(iq.e,{})}),(0,a.jsxs)("div",{className:"connected_folder_empty_view--productNameContainer--w-3vG",children:[(0,a.jsx)("span",{className:"connected_folder_empty_view--productName--19C6G",children:e.title}),(0,a.jsx)("span",{className:pS,children:e.subtitle})]}),e.showRequestTag&&(0,a.jsx)(r1.Ex,{className:pk,text:(0,N.t)("upgrades.request"),color:r1.zE.DEFAULT_TRANSLUCENT}),e.showRequestSentTag&&(0,a.jsx)(r1.Ex,{className:pk,text:(0,N.t)("upgrades.request_sent"),color:r1.zE.DEFAULT_TRANSLUCENT})]})}let pO={open:!0,openNewTab:!0,restoreFromVersion:!0,share:!0,copyLink:!0,rename:!0,duplicate:!0,delete:!0,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToFolder:!0,pinToWorkspace:!0};function pF(e){let t=(0,i.wA)(),r=(0,p.Rs)(eK.CH9,{folderId:e.folderId}),n=s.useMemo(()=>"loaded"===r.status?(r.data.project?.pinnedFiles||[]).filter(e=>!!e.file):[],[r]);s.useEffect(()=>{t(_2.MR({folderId:e.folderId,fileKeys:n.map(e=>e.file.key)}))},[n,t,e.folderId]);let o=s.useCallback(()=>{t(re.an())},[t]);return 0!==n.length?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"folder_page_view--pinnedHeader--YJufT",onMouseDown:o,children:(0,a.jsx)(C.E,{fontSize:13,color:"secondary",children:(0,N.tx)("file_browser.folder.pinned")})}),(0,a.jsx)(_8,{pinnedFiles:n,folderId:e.folderId,tileActions:e.tileActions})]}):null}function pP({files:e,filesByRepoId:t,folderId:r,hasBanner:n,isEditingLocked:o,lgFolder:l,repos:d,team:c,activeProjectConnection:u,infiniteScrollOptions:m}){let _=(0,J.Pc)(),p=(0,eE.R)(c?.id),f=(0,eE.jn)(),g=(0,i.d4)(e=>pL(r,e.tileSortFilterStateByView)),x=(0,i.d4)(e=>e.selectedBranchKeyByRepoId),b=(0,eI.vt)(c?.id),v=!!l&&(0,da.f3)(l),y=v&&!o,w=y?"":(0,N.t)("file_browser.folder.no_files_yet"),{shouldShowTemplatesBar:j,hideTemplatesBar:T}=function({folderId:e,hideTemplatesUserFlag:t,isShowingLockedRedesign:r,additionalVisibilityRequirements:a=!0}){let n=(0,i.wA)(),o=(0,J.TA)(),{data:l}=(0,da.nt)(e),d=!!l&&p_.every(e=>(0,da.d6)(l,e)),c=(0,i.d4)(eB.yK),u=(0,i.d4)(e=>e.userFlags[t]),m=(0,eY.X$)("useTemplatesBarVisibility").unwrapOr(null),_=m?.tier===eM.Ag.PRO||m?.tier===eM.Ag.STUDENT;return{shouldShowTemplatesBar:!h.Ay.mobile&&d&&!c&&!u&&!r&&_&&a,hideTemplatesBar:(0,s.useCallback)(()=>{n(eP.b({[t]:!0})),(0,V.Cu)({userId:o,opening:!1},"topbar_recommended_templates_toggled")},[o,n,t])}}({folderId:r,hideTemplatesUserFlag:"hide_recommended_templates_in_projects",isShowingLockedRedesign:b||f&&p,additionalVisibilityRequirements:!n}),E=[...(0,s.useMemo)(()=>e.map(e=>(0,ra.fA)(e)),[e]),...d.filter(e=>!e.trashed_at).map(e=>({type:ra.nb.REPO,repo:e,branches:t[e.id],selectedBranchKey:x[e.id]||""}))];return(0,a.jsx)(uE.B,{onShouldFetchNextPage:m.onShouldFetchNextPage,isFetchingNextPage:m.isFetchingNextPage,children:(0,a.jsxs)("div",{className:"folder_page_view--container---glyH",children:[j&&(0,a.jsx)(pf,{folderId:r,newFileFrom:aw.f6.FILE_BROWSER_TOPBAR_FOLDER,onClose:T}),(0,a.jsx)(pF,{folderId:r,repos:d,tileActions:pO}),(0,a.jsx)(ma,{newFileTile:y,tiles:E,tileActions:pO,sortFilterOptions:g,emptyStateText:w,emptyStateContent:(()=>{if(0===E.length&&u&&v)return(0,a.jsx)(pR,{lgFolder:l,hostPlanName:u.hostPlanName,user:_})})(),isFolder:!0,isEligbileForProTeamLockedRevampUI:p})]})})}let pL=(0,uh.xx)(rk.ZN);var pD=r(537307),pM=r(748636),pB=r(47801);let pU="CONNECTED_PROJECTS_PROJECT_PAGE_ONBOARDING_KEY";function pW({resourceConnection:e}){let t=(0,a.jsx)(a3.N,{href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects",newTab:!0,children:(0,N.tx)("resource_connection.onboarding.connected_projects_capitalized")}),r=(0,N.tx)("resource_connection.onboarding.connected_projects_are_just_like_normal_projects",{hostPlanName:e.hostPlanName,connectedProjects:t,connectedPlanName:e.connectedPlanName});return(0,a.jsx)(pB.b,{description:r,title:(0,N.tx)("resource_connection.onboarding.projects_are_better_together"),trackingContext:"Connected Projects Project Page Onboarding Modal",onboardingKey:pU,arrowPosition:pM.F_.BOTTOM})}var p$=r(433510),pG=r(504727),pV=r(190597),pz=r(493300),pH=r(930602);function pK(e){let t=(0,i.wA)(),r=s.useRef(null),n=(0,i.d4)(({dropdownShown:e})=>e),o=(0,i.d4)(t=>(0,rk.oq)(e.folder.id,t))??null,l=(0,Z.Q)({currentOrgId:o,currentTeamId:null}),d=s.useMemo(()=>{if("loaded"===l.status)return(0,z.T0)(l.data,e.folder.id)},[l,e.folder.id]);if("loaded"!==l.status)return(0,a.jsx)("div",{className:I.s.flex.itemsCenter.colorIcon.$,children:(0,a.jsx)(t0.B,{svg:pz.A})});let c=(0,z.gV)(l.data,o),u=e.dropdownKey&&n&&n.type===e.dropdownKey&&n.data&&n.data.targetRect,m=r.current&&n?.data?.targetRef===r.current&&n?.type===to.jU,_=r.current,p=[];return e.folder.canRead&&p.push((0,a.jsx)(nb.c$,{children:(0,N.tx)("file_browser.folder.share"),onClick:e.onShareClick},"share")),p.push((0,a.jsx)(nb.c$,{children:(0,a.jsxs)("div",{className:I.s.flex.justifyBetween.itemsCenter.w150.$,children:[(0,N.tx)("favorited_resources.add_to_sidebar"),(0,a.jsx)(t0.B,{svg:pH.A})]}),onClick:a=>{a.stopPropagation(),r.current&&t(eR.j7({type:to.jU,data:{targetRect:_.getBoundingClientRect(),targetRef:_,resourceId:e.folder.id}}))}},"add-to-favorites-section")),(0,a.jsxs)("span",{children:[(0,a.jsx)(sN.E,{className:U()(I.s.flex.itemsCenter.colorIcon.$,pV.HM),ref:r,onClick:r=>{e.dropdownKey&&_&&t(eR.j7({type:e.dropdownKey,data:{targetRect:_?.getBoundingClientRect()}}))},children:(0,a.jsx)(tJ.J,{})}),u&&(0,a.jsx)(pG.Cf,{targetRect:n.data.targetRect,minWidth:172,maxWidth:172,propagateCloseClick:!0,children:p}),m&&(0,a.jsx)(p$.t,{setFavorite:e.setFavorite,resourceId:e.folder.id,resourceType:eM.bk.FOLDER,favoriteId:d?.id,orgId:o,sections:(0,ea.oA)(l.data?.currentUser?.userSidebarSections)??[],customSectionOrdering:l.data.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[],userHasMaxFavorites:c})]})}var pY=r(37596),pq=r(494261),pJ=r(502422),pX=r(475472),pQ=r(388233),pZ=r(52714),p0=r(17478),p1=r(442144),p4=r(25249),p2=r(304671),p8=r(76789);function p5({lgFolder:e,currentOrgId:t}){return!e.canEdit&&!!e.plan?.isMember&&!e.team?.canAdmin&&null!==t}var p6=r(556466);let p3="seen_folder_settings_connected_projects_onboarding",p7=(0,ed.eU)(!1);function p9({folder:e,lgFolder:t,team:r}){let n=(0,i.wA)(),o=(0,i.d4)(e=>"folder"===e.selectedView.view&&e.selectedView.shouldShowRenameModal||!1),l=function(){let e=(0,eI.vt)(),t=(0,eE.jn)();return e||t}(),d=function(){let e=(0,i.Pj)();return(0,s.useCallback)(async t=>{try{await cJ.Ay.post(`/api/folders/${t}/claim`),e.dispatch(_2.qp({folderId:t})),(0,rk.qF)(t)||e.dispatch((0,H.jl)({folderId:t,loadedFolders:{}}))}catch(t){e.dispatch(aY.s.error(t.message||(0,N.t)("file_browser.file_browser_actions.claim_team_error")))}},[e])}(),c=s.useCallback(()=>d(t.id),[d,t.id]),u=function(e){let t=(0,i.wA)(),r=e.canEdit;return(0,s.useCallback)(()=>{e.name&&r&&t(tC.to({type:(0,p8.y)(),data:{folder:e}}))},[t,e,r])}(t);(0,m.h)(()=>{o&&u()});let _=(0,G.fn)()===G.ih.CONTROL,p=(0,i.d4)(e=>e.currentUserOrgId),f=(0,i.d4)(e=>e.teamRoleRequests),g=t.team?.org?.id,h=t.team?.id,x=p5({lgFolder:t,currentOrgId:p}),b=function({lgFolder:e}){let t=eN({project:e}),r=(0,p2.R)(),a=(0,i.d4)(e=>e.currentUserOrgId);return e.canEdit&&!e.isEditingLockedForUser&&t&&(!r||!p5({lgFolder:e,currentOrgId:a}))}({lgFolder:t}),v=(0,pQ.b)(t.plan?.tier),y=(0,pJ.BN)(p3),[w,j]=(0,ed.fp)(p7);s.useEffect(()=>{!w&&v&&((0,pJ.FC)(p3),j(!0))},[w,j,v]);let T=(t?.canConnect??!1)&&v,E="loaded"===y.status&&y.data<3&&!!T,I=()=>{n(tC.to({type:p4.W,data:{folderId:t.id}}))},C=t.canRead,S=s.useMemo(()=>{if(x&&f&&r&&f[r.id]&&f[r.id].status===pZ.c.PENDING)return f[r.id].id},[x,f,r]);s.useEffect(()=>{x&&p&&n((0,pX.Rw)())},[x,n,p]);let k=(0,rt.jm)(g,h),R=l?(0,N.t)("locked_team.label.tooltip"):void 0,A=l?r8.Ib.TEXT:void 0,O=(t,r,a)=>{let s={folder:e,entrypoint:"folder_page_view",sectionId:a,favoriteId:r};t?n(eF.Mv(s)):n(eF.jv(s))},F=function(e){let t=(0,mx.u)(e.id),r=e.canRead,i=e.team?.org?.id,n=(0,s.useMemo)(()=>t({folder:{...e,orgId:i??null},shouldShowJoinButton:!1}),[t,e,i]);return(0,s.useMemo)(()=>{let t=n.some(e=>e.items.length>0);if(r&&t)return{kind:iz.A.CUSTOM,key:iZ.DROPDOWN,element:(0,a.jsx)(no,{dataOnboardingKey:_Z,buttonAriaLabel:(0,N.t)("file_browser.folder.page_header_dropdown_label"),dropdownKey:`folder-${e.id}`,menuGroups:n})}},[r,n,e.id])}(t),P=t?.activeProjectResourceConnections?.[0];return(0,a.jsxs)(L.tH,{boundaryKey:"FolderPageViewHeader",fallback:L.H4.NONE_I_KNOW_WHAT_IM_DOING,severity:mk.DZ.Critical,sentryTags:{area:M.e.MONETIZATION_EXPANSION},children:[(0,a.jsx)(iK,{title:t.name,badge:P?(0,a.jsx)(rF.W,{hostPlanName:P?.hostPlanName,connectedPlanName:P?.connectedPlanName,large:!0,dataOnboardingKey:pU}):void 0,rightSideActions:(()=>{let e=[];if(!t.ownerRole&&t.team?.canAdmin&&e.push({kind:iz.A.CUSTOM,key:iZ.CLAIM,element:(0,a.jsx)(el.c,{variant:"secondary",onClick:c,children:(0,N.t)("file_browser.folder.join_as_owner")})}),b&&e.push({kind:iz.A.CUSTOM,key:iZ.NEW_RESOURCE,showOnMobile:!0,element:(0,a.jsx)(p6.FolderPageViewOmnicreateDropdown,{lgFolder:t,newFileFrom:aw.f6.FILE_BROWSER_TOPBAR_FOLDER})}),C){let t={kind:iz.A.CUSTOM,key:iZ.SHARE,element:(0,a.jsx)(el.c,{variant:"secondary",onClick:I,htmlAttributes:{"data-tooltip-type":A,"data-tooltip":R},disabled:l,children:(0,N.t)("file_browser.folder.share")})};e.push(t)}x&&e.push({kind:iz.A.CUSTOM,key:iZ.REQUEST_TO_EDIT,element:(0,a.jsx)(el.c,{variant:"secondary",onClick:()=>{S?n(pq.lT({requestId:S})):r&&n(tC.to({type:p1.$,data:{team:r,requesterCurrentLevel:mU.e6.VIEWER,source:"FolderPageView"}}))},children:void 0!==S?(0,N.t)("file_browser.team.cancel_request"):(0,N.t)("file_browser.team.request_to_edit")})}),e.push({kind:iz.A.CUSTOM,key:iZ.SETTINGS,element:(0,a.jsxs)("div",{className:"x1n2onr6",children:[(0,a.jsx)(el.Me,{variant:"secondary",size:"lg",onClick:()=>{n(tC.to({type:pY.l,data:{folderId:t.id}})),E&&v&&p0.H.upsertUserFlagWithCount(p3,3)},"aria-label":(0,N.t)("file_browser.folder_settings_modal.tooltip.settings"),htmlAttributes:{"data-tooltip":(0,N.t)("file_browser.folder_settings_modal.tooltip.settings")},children:(0,a.jsx)(pD.P,{})}),E&&(0,a.jsx)("div",{className:"x10l6tqk x1fo6t33 xzkxjte x170jfvy x1fsd2vl x6qnwee xorixrz"})]})}),_&&k&&e.push({kind:iz.A.CUSTOM,key:iZ.FAVORITE,element:(0,a.jsx)(nc.i,{setFavorite:O,favoriteType:eM.bk.FOLDER,resourceId:t.id,orgId:p,teamId:h,size:"lg"})});let s=(0,a.jsx)(pK,{dropdownKey:"project-overflow-dropdown",folder:t,onShareClick:I,setFavorite:O});return e.push({kind:iz.A.CUSTOM,key:iZ.PROJECT_OVERFLOW_MENU,showOnMobile:!0,hideOnDesktop:!0,element:s}),e})(),rightSideOfTitleAction:F}),!!P&&(0,a.jsx)(pW,{resourceConnection:P})]})}function fe({folderId:e}){let t=(0,p.Rs)(eK.L8O,{projectId:e});!function(e){let[t]=(0,f.IT)((0,eK.oFF)({projectId:e}),{enabled:!!(0,o.k)().folder_page_fix_tab_titles}),r=t.transform(e=>e.project?.name??null).unwrapOr(null);s.useEffect(()=>{r&&(0,rt.hL)(r)},[r])}(e);let r=(0,eD.FC)(),[n,l]=function(e){let t=!!(0,o.k)().file_browser_paginated_folder_full_reads,r=(0,H.LK)(e,!t),[a,i]=mR({folderId:e,enabled:!!t}),n=s.useCallback(()=>{t&&!a.isFetchingNextPage&&a.hasNextPage&&i.fetchNextPage()},[a.isFetchingNextPage,a.hasNextPage,i,t]),l=t?a:r;return(0,_J.I)("loaded"===l.status,(r,a,s)=>{0===r||a||s||av.az.trackDefinedMetric("file_browser.folder_files_load_time",{durationMs:r,isPaginated:!!t,folderId:e})}),[l,n]}(e),d=n.data?.folder,c=t.data?.project||null,u=(0,i.wA)(),m=(0,p.Rs)(eK.Udv,{id:e}),_=(0,eA._6)(),h="loaded"===m.status&&!m.data.project?.hasPermission||c?.trashedAt,x=c?.trashedAt,b=c?.isAbandonedDrafts&&c?.currentPlanUser?.permission===eM.Xn.ADMIN;s.useLayoutEffect(()=>{if(h||x){if(c?.team){let e=c.team.id;u(eR.sf({view:"team",teamId:e}))}else u(eR.sf({view:"recentsAndSharing"}))}b&&c.plan&&c.plan.key.parentId&&(c.plan.tier===eM.Ag.PRO?u(eR.sf({view:"abandonedDraftFiles",abandonedDraftFolderId:c.id,planId:c.plan.key.parentId,adminPlanType:oB.O.TEAM})):c.plan.key.type===eM.OL.ORG&&u(eR.sf({view:"abandonedDraftFiles",abandonedDraftFolderId:c.id,planId:c.plan.key.parentId,adminPlanType:oB.O.ORG})))},[u,m,c,h,x,b]);let v=r.teams[c?.teamId||""]||null;s.useEffect(()=>{c&&!c.inviteOnlyAt&&c.teamId&&!v&&u(_X.Jt({teamId:c.teamId}))},[u,c,v]);let y=c?.activeProjectResourceConnections?.[0],w=!!v&&!!c?.teamId,j=_a({resource:v,resourceType:eM.vt.TEAM,teamId:c?.teamId,shadowReadLabel:i2.A5.FolderPageView.hasBanner}).unwrapOr(!1)&&w,T=(0,Y.dq)(),E=(0,uh.xx)(rk.ZN),N=(0,i.d4)(t=>E(e,t.tileSortFilterStateByView)),C=!d||!c||"loaded"!==n.status||"loaded"!==t.status;if((0,g.kF)("Folder"),(0,g.WX)({markName:"MainBodyContent",isLoaded:!C,contextArgs:{numFiles:n.transform(e=>e.files.length).unwrapOr(null),isPaginated:!!(0,o.k)().file_browser_paginated_folder_full_reads}}),C)return(0,a.jsx)("div",{className:"folder_page_view--loading--ZkDG0",children:(0,a.jsx)(ei.kt,{})});let S={view:"project",folderId:e,canEdit:c.canEdit,userSpace:T?r5.qo.ORG:r5.qo.PERSONAL},k=(0,a.jsxs)("div",{className:"x78zum5 x167g77z x6s0dn4",children:[(0,a.jsx)(sz.ye,{config:N.tileSortFilterConfig}),(0,a.jsx)(sz.mc,{dispatch:u,options:N,selectedView:_}),(0,a.jsx)(sz.$c,{initialViewMode:N.tileSortFilterConfig.viewMode,onViewModeChange:e=>{(0,av.sx)("file view toggle",{viewType:e===oi.XU.GRID?"grid":"list"}),u(eS.JF({selectedView:_,config:{...N.tileSortFilterConfig,viewMode:e}}))}})]});return(0,r2.T8)((0,a.jsx)(iY.r,{content:(0,a.jsxs)("div",{className:I.s.flex.flexColumn.$,children:[(0,a.jsx)(pP,{activeProjectConnection:y?{id:y.id,hostPlanName:y.hostPlanName}:void 0,files:n.data.files,filesByRepoId:n.data.filesByRepoId,folderId:e,hasBanner:j,infiniteScrollOptions:{onShouldFetchNextPage:l,isFetchingNextPage:"isFetchingNextPage"in n&&n.isFetchingNextPage},isEditingLocked:c.isEditingLockedForUser,lgFolder:c,repos:n.data.repos,team:v}),(0,a.jsx)(cK.cx,{})]}),banner:v&&j?(0,a.jsx)(_4,{teamId:v.id}):void 0,toolbar:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p9,{folder:d,team:v,lgFolder:c}),(0,a.jsx)(_1,{folder:c})]}),viewbar:(0,a.jsx)(sz.g2,{leftSide:null,rightSide:k})}),r5.e0.FILE_BROWSER,S)}function ft(){let e;let t=(0,i.d4)(e=>e.currentTeamId),r=(0,eA._6)(),s=(0,p.Rs)(eK.RRC,{teamId:t??""},{enabled:!!t});if(!(0,o.k)().limited_plan_spaces)return null;if("loaded"!==s.status)e=(0,a.jsx)(ei.qc,{});else{let i=("loaded"===s.data.currentUser.status&&s.data.currentUser.data.teamProjectRoles||[]).filter(e=>!!e.project&&(!(0,o.k)().dtm_deprecation_org_downgrade||""!==e.project.path)).map(e=>{let t=e.project,r=t.activeProjectResourceConnections?.[0]??null;return{id:t.id,name:t.name,description:t.description,path:t.path,team_id:t.teamId,is_invite_only:!!t.inviteOnlyAt,is_view_only:!!t.viewOnlyAt,deleted_at:t.deletedAt?t.deletedAt.toISOString():null,updated_at:t.updatedAt.toISOString(),created_at:t.createdAt.toISOString(),touched_at:t.lastModifiedAt,shared_at:e.sharedWithYouFolder?.sharedAt.toISOString(),shared_by_user:e.sharedWithYouFolder?.sharedByUser,is_connected_project:!!r,resource_connection:r?{hostPlanName:r.hostPlanName,connectedPlanName:r.connectedPlanName}:null}});e=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(mj,{viewId:`limitedTeam-${t}`,folderList:i,selectedView:r,isSharerInfoIncluded:!0})})}return(0,r2.T8)((0,a.jsx)(iY.r,{content:(0,a.jsx)(a.Fragment,{children:e}),viewbar:(0,a.jsx)("div",{className:"limited_space_team_projects_page_view--viewbar--YMqKQ",children:(0,a.jsx)("div",{className:"limited_space_team_projects_page_view--viewbarHeading--mTm27",children:(0,N.tx)("file_browser.limited_space_team_projects.heading")})})}),r5.e0.FILE_BROWSER,{view:"limitedSpaceTeamProjects"})}function fr({orgId:e}){let t=(0,i.wA)(),r=(0,eY.D6)("ViewLibrariesAction");return(0,eY.Kd)(r).data?(0,a.jsx)(iz.K,{action:{kind:iz.A.BUTTON,key:iZ.VIEW_LIBRARIES,displayText:(0,N.t)("org_view.view_libraries"),onClick:()=>{t(eR.sf({view:"org",orgId:e,orgViewTab:tF.X.LIBRARIES}))}}}):null}function fa({canCreateTeam:e,isEnterpriseOrgDirectoryEnabled:t}){let r=(0,i.wA)();return t||!e?null:(0,a.jsx)(iz.K,{action:{kind:iz.A.CUSTOM,key:iZ.NEW_TEAM,element:(0,a.jsx)(tO.$n,{"aria-label":(0,N.t)("license_group_view.toolbar.new_team_button_aria_label"),variant:"primary",onClick:()=>{r(tC.to({type:iM.Uc,data:{}}))},iconPrefix:(0,a.jsx)(iq.e,{}),children:(0,N.t)("license_group_view.toolbar.new_team_button")})}})}function fs({orgId:e}){let t=(0,eB.LM)(e),{canCreateTeam:r,cannotCreateTeamReason:s}=(0,X.LM)({id:e},null);return"loaded"!==t.status||s===X.z4.LG_LOADING?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(fa,{canCreateTeam:r,isEnterpriseOrgDirectoryEnabled:t.data}),(0,a.jsx)(fr,{orgId:e},"org-library")]})}var fi=r(330108),fn=r(990058);function fo(){let e=(0,i.wA)(),t=(0,Y.dq)(),r=_e((0,s_.R)(e=>({...(0,s9.getPermissionsState)(e),selectedView:e.selectedView,userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData})),e,i2.A5.OrgDelinquencyBanner.bannerContent).unwrapOr(null);if(!r)return(0,a.jsx)("div",{});let s=_s({resourceType:"org",orgId:t},r),n=r.severity===mz.c.WARN?mH:"",o=`${m4} ${n}`;return(0,a.jsx)("div",{className:o,children:(0,a.jsx)(_o,{...r,tracking:s})})}var fl=r(346715),fd=r(401058),fc=r(239888);function fu(){let e=(0,eY.T5)("OrgConnectedProjectsContent"),t=e.unwrapOr(null),r=t?.connectionCount??0,i=(0,p.Rs)(eK.ifD,{planType:t?.key.type??null,planId:t?.key.parentId??""},{enabled:null!==t}),o=s.useMemo(()=>"loaded"!==i.status?[]:((0,ea.oA)(i.data?.planConnectedProjectsForUser)||[]).map(e=>{let t=(0,ea.oA)(e.project);return null!=t?(0,ro.W2)(t):null}).filter(e=>null!==e),[i]);return"loaded"!==e.status||"loaded"!==i.status?(0,a.jsx)("div",{className:I.s.flex.wFull.hFull.alignCenter.justifyCenter.$,children:(0,a.jsx)(nt.k,{htmlAttributes:{"data-testid":"loading-spinner"}})}):0===r?(0,a.jsx)("div",{className:"org_connected_projects_view--emptyContent---1eNq",children:(0,a.jsx)(fd.K,{entryPoint:fl.wR.CONNECTED_PROJECT_ORG_PAGE})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(fc.A,{}),(0,a.jsx)("div",{className:"org_connected_projects_view--tabContentContainer--qFQ6s",children:(0,a.jsx)("div",{className:I.s.wFull.$,children:(0,a.jsx)(mh.m,{folderList:o,dataOnboardingKeyIndex:void 0,onChangeSortOptions:n.lQ,viewType:oi.XU.GRID,isSharerInfoIncluded:!1})})})]})}var fm=r(162641),f_=r(172516);let fp="org_meta_content--container--b5Iq3";function ff({org:e}){return(0,a.jsxs)("div",{className:I.s.flex.flexColumn.rowGap16.$,children:[(0,a.jsx)(rV.Ro,{entity:e,size:36}),(0,a.jsx)(C.E,{fontWeight:"medium",fontSize:13,children:e.name})]})}function fg({handle:e}){let t=(0,i.wA)();return(0,a.jsx)("a",{href:new oH.xn({profileHandle:e}).href,className:f_.Be,onClick:r=>{r.metaKey||(r.preventDefault(),t(eR.sf({view:"communityHub",subView:"handle",handle:e})))},children:(0,a.jsxs)(C.E,{fontSize:11,children:["@",e]})})}function fh({orgId:e}){let t=(0,i.d4)(t=>(0,ef.Xy)(t.orgUsersByOrgId[e]).map(e=>e.user)),r=(0,i.wA)();return(0,a.jsx)(nF,{label:(0,N.t)("org_home_view_meta.admins"),members:t,onMemberClick:(e,t)=>{r(eR.sf({view:"user",userId:t.id,userViewTab:nP.o.INTERNAL_PROFILE}))},canLeave:!1})}function fx({org:e,orgStats:t}){let r=t?(0,a.jsxs)(C.E,{fontSize:11,color:"secondary",children:[(0,N.tx)("org_home_view_meta.member_count",{memberCount:t.memberCount.data}),(0,a.jsx)("span",{children:"\xa0\xb7\xa0"}),"workspaceCount"in t?(0,N.tx)("org_home_view_meta.workspace_count",{workspaceCount:t.workspaceCount.data}):(0,N.tx)("org_home_view_meta.team_count",{teamCount:t.discoverableTeamCount.data})]}):(0,a.jsx)(fm.Wi,{className:I.s.mb4.$,animationType:fm.JR.SHIMMER});return(0,a.jsxs)("div",{className:fp,children:[(0,a.jsx)(ff,{org:e}),(0,a.jsx)("span",{className:I.s.mt4.$,children:r}),e.community_profile_handle?(0,a.jsx)("span",{className:I.s.mt2.$,children:(0,a.jsx)(fg,{handle:e.community_profile_handle})}):null,(0,a.jsx)("span",{className:I.s.mt32.$,children:(0,a.jsx)(fh,{orgId:e.id})})]})}function fb({org:e}){let t=(0,p.Rs)(eK.nYs,{orgId:e.id});return(0,a.jsx)(fx,{orgStats:t.data?.org??null,org:e})}function fv({org:e}){let t=(0,p.Rs)(eK.kei,{orgId:e.id});return(0,a.jsx)(fx,{orgStats:t.data?.org??null,org:e})}function fy({org:e}){return(0,a.jsxs)("div",{className:fp,children:[(0,a.jsx)(ff,{org:e}),e.community_profile_handle?(0,a.jsx)("span",{className:I.s.mt4.$,children:(0,a.jsx)(fg,{handle:e.community_profile_handle})}):null,(0,a.jsx)("span",{className:I.s.mt4.$,children:(0,a.jsxs)(C.E,{fontSize:11,color:"secondary",children:[(0,N.tx)("payments_modal.guest_permission_disclaimer")," ",(0,a.jsx)("a",{className:f_.Be,href:"https://help.figma.com/hc/articles/360039957374",target:"_blank",rel:"noopener",children:(0,N.tx)("org_home_view_meta.learn_more")})]})})]})}var fw=r(887997);let fj=[tF.X.HOME,tF.X.YOUR_TEAMS,tF.X.CONNECTED_PROJECTS,tF.X.PLUGINS,tF.X.WIDGETS],fT=e=>{switch(e){case tF.X.HOME:return(0,N.t)("org_view.overview");case tF.X.YOUR_TEAMS:return(0,N.t)("org_view.your_teams");case tF.X.PLUGINS:return(0,N.t)("org_view.plugins");case tF.X.WIDGETS:return(0,N.t)("org_view.widgets");case tF.X.CONNECTED_PROJECTS:return(0,N.t)("org_view.connected_projects");default:return null}};function fE(e){let t=(0,i.wA)(),r=(0,eY.X$)("OrgPageViewBar").unwrapOr(null),n=(0,eY.H3)(r),o={[tF.X.HOME]:!0,[tF.X.WIDGETS]:!0,[tF.X.PLUGINS]:!0,[tF.X.YOUR_TEAMS]:!0,[tF.X.LIBRARIES]:!1,[tF.X.FONTS]:!1,[tF.X.CONNECTED_PROJECTS]:!0},l=e=>{t(eR.sf({view:"org",orgId:n??"",orgViewTab:e}))},[d,c,u]=nS.t.useManagedTabs(o,e.selectedTab,e=>{l(e)}),m=fj.map(e=>(0,s.createElement)(nS.t.Tab,{...d[e],key:e},fT(e)));return(0,a.jsx)(sz.g2,{leftSide:(0,a.jsx)(nS.t.TabStrip,{manager:u,children:m}),rightSide:[]})}var fI=r(609500);function fN({workspace:e,targetRect:t,isDropdownOpen:r}){let s=nx(),n=(0,Y.sZ)(),o=(0,i.wA)();if(!n||!r||!t)return null;let l=s({workspace:e,org:n});return(0,a.jsx)(tS.j,{parentRect:t,items:(0,nn.o)(l),dispatch:o,onSelectItem:e=>{e.callback&&e.callback("",null,o)},showPoint:!1,shouldUsePortal:!0})}var fC=r(314082),fS=r(332662);function fk(e){let{isSelected:t,isHovered:r}=e,{header:i,footer:n}=s.useMemo(()=>{if(e.queryResult&&"loaded"!==e.queryResult.status)return{header:(0,a.jsx)(fm.Qp,{className:"x100vrsf x1vqgdyp"}),footer:(0,a.jsx)(fm.Wi,{className:"x1oysuqx",dataTestId:"unassigned-workspace-tile-loading-text"})};let t=e.unassignedTeams||e.queryResult.data;return{header:(0,a.jsx)(rV.md,{teams:t,size:40,isHovered:r}),footer:(0,N.tx)("org_view.license_group.unassigned_tile.description",{teamCount:t.length})}},[e.queryResult,e.unassignedTeams,r]),o=(0,a.jsx)("span",{children:"\xa0"});return(0,a.jsx)(fS.a,{name:(0,N.t)("org_view.license_group.unassigned_tile.name"),headerLeft:i,headerRight:o,footerLeft:n,canView:!0,isCardActive:r||t,isSelected:t,isInItemsView:!0})}function fR(e){let t=(0,ed.md)(iR.Fd);return e.unassignedTeams?(0,a.jsx)(fk,{isSelected:e.isSelected,isHovered:e.isHovered,unassignedTeams:e.unassignedTeams}):(0,a.jsx)(fk,{isSelected:e.isSelected,isHovered:e.isHovered,queryResult:t})}var fA=r(347011),fO=r(474029),fF=r(412189);function fP(e){let t,r;let{workspace:n,isSelected:o,isHovered:l,onChildFocusChange:d}=e,[c,u]=s.useState(!1),m=(0,i.d4)(e=>e.currentUserOrgId),_=(0,fF.aq)(),p=n.colorConfig?.colors??[],f=e.isMainWorkspace?p[0]:void 0,g=(0,ed.md)((0,iR.aN)(n.id)),h=(0,fA.Y)(n.id,eM.bk.WORKSPACE,m),x=s.useMemo(()=>"loaded"===h.status&&void 0!==h.favorite,[h]);f&&(f=function(e,t,r){try{let a=(0,i_.H0)(t),s=(0,i_.kx)(a),i=(0,ip.oN)(t,!s,s);return r&&i!==t&&(0,av.sx)("workspace_background_color_adjusted_for_accessibility",{workspace_id:e,original_background_color:t,adjusted_background_color:i}),i}catch(e){console.error(e)}return t}(n.id,f,_()));let b=(0,i.wA)(),v=s.useCallback((e,t,r)=>{if(n){let a={workspace:{id:n.id,name:n.name??"",imgUrl:n.imgUrl},entrypoint:"workspace_tile",sectionId:r,favoriteId:t};e?b(eF.ZW(a)):b(eF.if(a))}},[b,n]);f&&((0,i_.kx)(f)?(t="org_page_view--workspaceTileTitleColorForDarkBackground--m6sFp",r="org_page_view--secondaryTextColorOnDarkBackground--7Ru-V"):(t="org_page_view--workspaceTileTitleColorForLightBackground---zSTU",r="org_page_view--secondaryTextColorOnLightBackground--68byE"));let y=(0,a.jsx)(rV.z6,{entity:n,size:40}),w=s.useMemo(()=>void 0!==e.teamCount?(0,N.tx)("org_view.license_group.team_count",{teamCount:e.teamCount}):"loaded"!==g.status?(0,a.jsx)(fm.Wi,{className:I.s.w64.$,dataTestId:"workspace-tile-teams-loading-text"}):(0,N.tx)("org_view.license_group.team_count",{teamCount:g.data}),[e.teamCount,g]),j=(0,a.jsxs)("div",{className:U()(I.s.flex.flexRow.itemsCenter.$,r),children:[(0,N.tx)("org_view.license_group.member_count",{memberCount:n.memberCount.data??0}),(0,a.jsx)("span",{children:"\xa0\xb7\xa0"}),w]}),T=(0,a.jsx)(fO.H,{setFavorite:v,favoriteType:eM.bk.WORKSPACE,resourceId:n.id,orgId:m}),E=n.orgAccess===eM.bU.SECRET?(0,a.jsx)("div",{className:I.s.ml4.$,"data-tooltip-type":r8.Ib.TEXT,"data-tooltip":(0,N.t)("workspace_table.secret_workspace_lock_tooltip"),"data-tooltip-subtext":(0,N.t)("workspace_table.secret_workspace_lock_tooltip_subtext"),"data-tooltip-timeout-delay":500,"data-tooltip-max-width":300,children:(0,a.jsx)(nz.In,{icon:"lock-16"})}):null,C=l||o||c||x;return(0,a.jsx)(fS.a,{backgroundColor:f,canView:!0,footerLeft:j,handleBlur:()=>{u(!1),d()},handleFocus:()=>{u(!0),d()},headerLeft:y,headerRight:T,isCardActive:C,isInItemsView:!0,isSelected:o,name:(0,a.jsx)("span",{className:t,children:n.name}),titleSubtitleRight:E})}function fL(){let e=(0,i.wA)(),t=(0,eD.FC)(),r=(0,Y.dq)(),n=(0,X.Au)(r),{canCreateTeam:l}=(0,X.LM)(r?{id:r}:null,null),d=function(e,{description:t,level:r=P.$.INFO,start:a=!0,context:i}={}){let n=(0,s.useRef)(F.J6.createVital(e,{level:r,description:t,context:i}));return(0,s.useEffect)(()=>{if(e.includes(" "))throw Error(`Vital name cannot include spaces: ${e}`);a&&n.current.start()},[a,e]),n.current}("OrgWorkspacesView.Load"),c=(0,ed.md)(iR.wT),{workspaceTeamCounts:u,unassignedTeams:m}=s.useMemo(()=>{let e=(c.data||[]).filter(e=>(0,iP.ox)(e,t));return{workspaceTeamCounts:(0,rd.ZM)(e),unassignedTeams:e.filter(e=>null===e.workspace_id||void 0===e.workspace_id)}},[t,c]),_=(0,p.Rs)(eK.bUn,{orgId:r}),f="loaded"!==c.status,{currentWorkspace:h,otherWorkspaces:x}=s.useMemo(()=>{let e=_.transform(e=>{let t=e.org?.workspaces??[];(0,tw.KQ)(t,"name");let r=t.find(e=>e.id===n.data),a=t.filter(e=>e.id!==r?.id);return(m.length>0||f)&&a.push(iD.O),{currentWorkspace:r,otherWorkspaces:a}});return"loaded"===e.status?e.data:{currentWorkspace:null,otherWorkspaces:[]}},[_,n,m,f]);s.useEffect(()=>{d.addContext({currentWorkspaceId:h?.id,workspaceQuery:n?.data}),"loaded"===_.status&&d.stop()},[h,_,d,n.data]);let b=s.useCallback(()=>{e(tC.to({type:iM.Uc,data:{}}))},[e]),v=!(0,o.k)().all_workspaces_incremental_load_teams,y="loaded"!==_.status||v&&f,w=_.transform(e=>e.org?.workspaces?.length??null).unwrapOr(null);if((0,g.kF)("OrgAllWorkspaces"),(0,g.WX)({markName:"MainBodyContent",isLoaded:!y,contextArgs:{numWorkspaces:w}}),y)return(0,a.jsx)(iO.X,{isLoading:!0});let j=h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"x1tudf5h",children:(0,a.jsx)(C.E,{color:"secondary",fontSize:11,children:(0,N.tx)("org_view.your_workspace")})}),(0,a.jsx)(fD,{items:[h],isMainWorkspace:!0,workspaceTeamCounts:u,waitForOrgTeamsToLoad:v,unassignedTeams:m,focusOnLoad:!0})]});return(0,a.jsxs)(a.Fragment,{children:[j,h&&(0,a.jsx)("div",{className:"x1tudf5h",children:(0,a.jsx)(C.E,{color:"secondary",fontSize:11,children:(0,N.tx)("org_view.other_workspaces")})}),0===x.length?(0,a.jsx)(fC.C,{onCreateTeam:l?b:void 0}):(0,a.jsx)(fD,{items:x,isMainWorkspace:!1,workspaceTeamCounts:u,waitForOrgTeamsToLoad:v,unassignedTeams:m,focusOnLoad:!h})]})}function fD({items:e,isMainWorkspace:t,waitForOrgTeamsToLoad:r,workspaceTeamCounts:i,unassignedTeams:n,focusOnLoad:o}){let{showing:l,show:d,data:c}=(0,c4.BK)("WORKSPACE_CONTEXT_MENU"),u=(0,_K.$)(),m=s.useCallback(e=>e===iD.O?(0,N.t)("org_view.license_group.unassigned_tile.name"):e.name,[]),_=s.useCallback((e,t)=>{u(e===iD.O?null:e.id,t)},[u]),p=s.useCallback((e,t)=>{let r=e[0];r!==iD.O&&d({data:{workspace:r,targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1}}})},[d]),f=s.useMemo(()=>({tileBorderRadius:16,nestedFocus:!1,containerStyle:fM.grid,renderTile:(e,s,{isSelected:o,isHovered:l})=>e===iD.O?(0,a.jsx)(fR,{isSelected:o,isHovered:l,unassignedTeams:r?n:void 0}):(0,a.jsx)(fP,{workspace:e,teamCount:r?i[e.id]??0:void 0,isSelected:o,isHovered:l,isMainWorkspace:t,onChildFocusChange:s})}),[t,n,i,r]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(oa.A,{viewType:oi.XU.GRID,isDraggable:!1,items:e,multiselectDisabled:!0,getAriaLabel:m,gridViewProps:f,handleOpenItem:_,handleContextMenu:p,doNotFocusOnLoad:!o}),l&&(0,a.jsx)(fN,{workspace:c.workspace,isDropdownOpen:l,targetRect:c.targetRect})]})}let fM={grid:{paddingTop:"x1p5oq8j",paddingBottom:"x1gan7if",paddingLeft:"x1tudf5h",paddingRight:"x1m2p0i2",paddingInlineStart:null,paddingInlineEnd:null,gridTemplateColumns:"x192fo39",$$css:!0}};function fB(e){let t=(0,i.d4)(t=>t.orgById[e.orgId]),r=(0,i.wA)(),n=(0,eB.LM)(e.orgId),o=(0,eY.D6)("OrgPageView"),l=(0,eY.Kd)(o),d=(0,eY.sI)(o);s.useEffect(()=>{l.unwrapOr(!1)&&(r(fi.Jt({includeMemberCount:!0,includeTopMembers:!1,includeProjectCount:!0})),r(fn.Pg({orgId:e.orgId})))},[l,e.orgId,r]);let c=null;switch(e.selectedTab){case tF.X.WIDGETS:c=(0,a.jsx)(fI.x,{});break;case tF.X.PLUGINS:c=(0,a.jsx)(fw.C,{});break;case tF.X.YOUR_TEAMS:c=(0,a.jsx)(fU,{});break;case tF.X.CONNECTED_PROJECTS:c=(0,a.jsx)(fu,{});break;case tF.X.HOME:case tF.X.FONTS:case tF.X.LIBRARIES:c="loading"===n.status?(0,a.jsx)(iO.X,{isLoading:!0}):n.data?(0,a.jsx)(fL,{}):(0,a.jsx)(fW,{})}let u=null;d.unwrapOr(!1)?u=(0,a.jsx)(fy,{org:t}):"loading"===n.status?u=(0,a.jsx)(fx,{orgStats:null,org:t}):n.data?u=(0,a.jsx)(fb,{org:t}):n.data||(u=(0,a.jsx)(fv,{org:t}));let m=(0,a.jsx)(fE,{selectedTab:e.selectedTab});return(0,a.jsx)(iY.r,{banner:(0,a.jsx)(fo,{}),viewbar:m,content:c,metaContent:u})}function fU(){let e=i$({workspaceId:null,onlyJoinedTeams:!0});return(0,a.jsx)(iU,{orgTeamsQuery:e,workspaceId:null})}function fW(){let e=i$({workspaceId:null,onlyJoinedTeams:!1});return(0,a.jsx)(iU,{orgTeamsQuery:e,workspaceId:null})}function f$(){let e=(0,i.wA)(),t=(0,J.Pc)();return(0,a.jsx)(iz.K,{action:{kind:iz.A.BUTTON,key:iZ.VIEW_COMMUNITY_PROFILE,onClick:()=>{e(eR.sf({view:"communityHub",subView:"handle",handle:t.community_profile_handle}))},displayText:(0,N.t)("internal_profile.view_community_profile"),styleClass:I.s.colorText.$}})}var fG=r(621155),fV=r(561485),fz=r(521178),fH=r(587457),fK=r(129695);function fY(e){let t=(0,eY.X$)("FileCreationPillButton"),r=(0,eY.YY)(t).unwrapOr(!1),s=(0,da.qI)().unwrapOr(null),i="";return r&&!e.isLoading&&e.showComingSoon?i=(0,N.t)("file_browser.creation_buttons.coming_soon"):e.isDisabled&&!e.isLoading&&s&&(i=s),(0,a.jsx)(fq,{...e,tooltipText:i})}function fq(e){let t=e.isDisabled||e.isLoading,r=(0,fH.O)();return(0,a.jsx)(aT.J,{brand:e.brand,children:(0,a.jsx)(sN.E,{...er.xk(fJ.button,"bake-filebrowser"===e.brand&&fJ.buttonFigmake,t&&fJ.buttonDisabled),onClick:e.onClick,"data-testid":e.isLoading?void 0:e.dataTestId,disabled:t,"data-onboarding-key":e.dataOnboardingKey,"data-tooltip":e.tooltipText,"data-tooltip-type":r8.Ib.TEXT,"data-tooltip-timeout-delay":50,children:(0,a.jsx)(es.x,{loaded:!e.isLoading,loadingSkeletonElement:(0,a.jsx)("div",{className:"x1yjdb4r",children:(0,a.jsx)(fm.Qp,{animationType:fm.JR.LIGHT_SHIMMER,className:"x10w6t97"})}),showElementBeforeLoaded:!0,children:(0,a.jsxs)("div",{className:"x1y1aw1k xwib8y2 xyfqnmn xnm25rq x78zum5 x6s0dn4 x167g77z",children:[(0,a.jsx)("div",{...er.xk(!t&&fJ.iconContainer,r?fJ.fileIconDisplayToggle:fJ.fileIconDisplayToggle1x),"data-testid":"file-icon",children:e.icon}),(0,a.jsx)("div",{...er.xk(!t&&fJ.iconContainer,r?fJ.plusIconDisplayToggle:fJ.plusIconDisplayToggle1x),"data-testid":"plus-icon",children:(0,a.jsx)(fK.J,{})}),(0,a.jsx)("span",{...er.xk(fJ.text),children:e.title})]})})})})}lO.Tj.border;let fJ={button:{"--x9h04y5":"x11l4ivk xrbdz5j xp8tnzm x1c7hbig x19ojyqu x1x2d8cx","--x1y950bd":"x17eetdp x1jys9c5 x1cjeetj x1mqyn81 x6g8fao x1nzpo8l","--x5hmtyg":"x1ulchi7 x12xxy4o x1bfvipf xxi3osj xnurnk3 xkhlbt9","--color-icon":"xn0whsw",flexShrink:"x2lah0s",borderRadius:"x1d36bvo",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,backgroundColor:"x1v8gsql x17c7w1w x1tt564c x8ge37t",boxShadow:"x6bkol7 xrhlwir xsfrc4e x129mn88",overflow:"xb3r6kr",overflowX:null,overflowY:null,$$css:!0},buttonFigmake:{"--color-icon":"xwa2v1s",$$css:!0},buttonDisabled:{"--color-icon":"xz8z4lq","--color-text":"x15kbib2",backgroundColor:"x1yjdb4r",boxShadow:"x6bkol7 x1icplyp",$$css:!0},text:{...aE.g.textBodyMedium,color:"xiuzu7u",$$css:!0},iconContainer:{backgroundColor:"xu5wzci",borderRadius:"x192jxwq",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},fileIconDisplayToggle:{display:"x1wbuj8u",$$css:!0},fileIconDisplayToggle1x:{display:"x1h4d7b8",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"x1a00udw",height:"xx3o462",$$css:!0},plusIconDisplayToggle:{display:"x1dtuv8b",$$css:!0},plusIconDisplayToggle1x:{display:"x1dtuv8b",width:"x1a00udw",height:"xx3o462",$$css:!0}};function fX({isDisabled:e,isLoading:t,newFileFrom:r}){let s=(0,ay.$)({isDraftsFolder:!0,editorType:eM._Y.COOPER,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return(0,a.jsx)(fY,{title:(0,N.t)("file_browser.creation_buttons.marketing_asset"),brand:"cooper",dataTestId:"new-cooper-file-button",icon:(0,a.jsx)(fz.u,{}),isDisabled:e,isLoading:t,onClick:s})}var fQ=r(510753);function fZ({isDisabled:e,isLoading:t,newFileFrom:r}){let s=(0,ay.$)({isDraftsFolder:!0,editorType:eM._Y.DESIGN,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return(0,a.jsx)(fY,{title:(0,N.t)("file_browser.creation_buttons.design"),brand:"design",dataTestId:"new-design-file-button",icon:(0,a.jsx)(fQ.z,{}),isDisabled:e,isLoading:t,onClick:s})}var f0=r(711533);function f1({isDisabled:e,isLoading:t,newFileFrom:r}){let s=(0,ay.$)({isDraftsFolder:!0,editorType:eM._Y.WHITEBOARD,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return(0,a.jsx)(fY,{title:(0,N.t)("file_browser.creation_buttons.figjam"),brand:"whiteboard",dataTestId:"new-whiteboard-file-button",icon:(0,a.jsx)(f0.D,{}),isDisabled:e,isLoading:t,onClick:s})}var f4=r(236383),f2=r(442612);function f8({isDisabled:e,isLoading:t,newFileFrom:r}){let s=(0,ay.$)({isDraftsFolder:!0,editorType:eM._Y.FIGMAKE,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return(0,a.jsx)(fY,{title:(0,N.t)("file_browser.creation_buttons.figmake"),brand:"bake-filebrowser",dataOnboardingKey:fG.O,dataTestId:"new-figmake-file-button",icon:(0,a.jsx)(f4.Z,{}),isDisabled:e,isLoading:t,onClick:s,showComingSoon:(0,f2.W)()})}var f5=r(835893);function f6(e){return(0,a.jsx)(sN.E,{className:"x2lah0s x1d36bvo xb3r6kr xbzrb6o x1v8gsql x13bsb82 xpzxyvc x1aqsfbg x6bkol7 x622810 xsfrc4e x13nvs6n",onClick:e.onClick,"data-testid":e.isLoading?void 0:e.dataTestId,"data-onboarding-key":e.dataOnboardingKey,"data-tooltip":e.tooltipText,"data-tooltip-type":r8.Ib.TEXT,children:(0,a.jsx)(es.x,{loaded:!e.isLoading,loadingSkeletonElement:(0,a.jsx)("div",{className:"x1yjdb4r",children:(0,a.jsx)(fm.Qp,{animationType:fm.JR.LIGHT_SHIMMER,className:"x10w6t97"})}),showElementBeforeLoaded:!0,children:(0,a.jsx)("div",{className:"xfawy5m",children:e.icon})})})}function f3({isLoading:e}){let t=(0,i.wA)();return(0,a.jsx)(f6,{dataTestId:"file-import-button",icon:(0,a.jsx)(f5.R,{}),isLoading:e,onClick:()=>{t((0,pE.L)())},tooltipText:(0,N.t)("file_browser.creation_buttons.import")})}lO.Tj.border;var f7=r(302575);function f9({isDisabled:e,isLoading:t,newFileFrom:r}){let s=(0,ay.$)({isDraftsFolder:!0,editorType:eM._Y.SITES,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return(0,a.jsx)(fY,{title:(0,N.t)("file_browser.creation_buttons.sites"),brand:"seascape",dataTestId:`new-${uY.oQ}-file-button`,icon:(0,a.jsx)(f7.$,{}),isDisabled:e,isLoading:t,onClick:s,showComingSoon:!(0,o.k)().sts_starter_enabled})}var ge=r(514205);function gt({isDisabled:e,isLoading:t,newFileFrom:r}){let s=(0,ay.$)({isDraftsFolder:!0,editorType:eM._Y.SLIDES,newFileFrom:r,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return(0,a.jsx)(fY,{title:(0,N.t)("file_browser.creation_buttons.slide_deck"),brand:"piper",dataTestId:"new-slides-file-button",icon:(0,a.jsx)(ge.T,{}),isDisabled:e,isLoading:t,onClick:s})}function gr({newFileFrom:e}){let t=(0,i.d4)(e=>e.user?.drafts_folder_id),{data:r,status:s}=(0,da.nt)(t),n=(0,ds.h)(r),o="loading"===s,l=n.map(({editorType:t,canCreate:r})=>{let s=!r;switch(t){case eM._Y.DESIGN:return(0,a.jsx)(fZ,{isDisabled:s,isLoading:o,newFileFrom:e},"design");case eM._Y.WHITEBOARD:return(0,a.jsx)(f1,{isDisabled:s,isLoading:o,newFileFrom:e},"whiteboard");case eM._Y.SLIDES:return(0,a.jsx)(gt,{isDisabled:s,isLoading:o,newFileFrom:e},"slides");case eM._Y.SITES:return(0,fV.oz)()?(0,a.jsx)(f9,{isDisabled:s,isLoading:o,newFileFrom:e},"seascape"):null;case eM._Y.COOPER:return(0,a.jsx)(fX,{isDisabled:s,isLoading:o,newFileFrom:e},"cooper");case eM._Y.FIGMAKE:return(0,a.jsx)(f8,{isDisabled:s,isLoading:o,newFileFrom:e},"figmake");default:(0,E.xb)(t)}}).filter(Boolean);return l.push((0,a.jsx)(f3,{isLoading:o},"import")),(0,g.WX)({markName:"FileCreateEntrypoint",isLoaded:"loaded"===s}),(0,a.jsx)(a.Fragment,{children:l})}function ga({from:e}){let t=s.useRef(null),r=s.useRef(null),[i,n]=s.useState(!1);return s.useLayoutEffect(()=>{let e=r.current,a=t.current;if(!e||!a)return;let s=()=>{n(a.offsetWidth<e.offsetWidth)};s();let i=new ResizeObserver(s);return i.observe(t.current),()=>i.disconnect()},[]),(0,a.jsxs)("div",{className:"xh8yej3 x9f619 x78zum5 x7v6yn8 xz9dl7a xsag5q8",ref:t,children:[(0,a.jsx)("div",{ref:r,...er.xk(gs.contentContainer,i&&gs.hide),children:(0,a.jsx)(gr,{newFileFrom:e})}),i&&(0,a.jsx)(du.R,{newFileFrom:e,dataOnboardingKey:fG.O}),(0,a.jsx)(cK.jS,{newFileFrom:e})]})}let gs={contentContainer:{display:"x3nfvp2",gap:"x167g77z",rowGap:null,columnGap:null,flexShrink:"x2lah0s",$$css:!0},hide:{visibility:"xlshs6z",$$css:!0}};var gi=r(591738);let gn=(0,ed.eU)(!1);var go=r(223926),gl=r.n(go);let gd=[lk.vt.FIGMAKE_TEMPLATE,lk.vt.SITE_TEMPLATE,lk.vt.COOPER_TEMPLATE_FILE,lk.vt.DESIGN_TEMPLATE,lk.vt.SLIDE_TEMPLATE,lk.vt.FIGJAM_TEMPLATE];function gc(){let e=(0,i.d4)(e=>e.user?.drafts_folder_id)??null,{data:t}=(0,da.nt)(e);return(0,s.useMemo)(()=>gd.filter(e=>{let r=(0,l7.J2)(e);return r&&t&&(0,da.d6)(t,r)}),[t])}var gu=r(263184),gm=r(54715),g_=r(552746),gp=r(14017),gf=r(372951),gg=r(994403),gh=r(773914);function gx({buttonProps:e,image:t,title:r,author:s}){return(0,a.jsxs)(sN.E,{className:"home_shelf_resource_tile--resourceTileButton--meEFU",...e,children:[(0,a.jsxs)("div",{className:"home_shelf_resource_tile--homeShelfResourceTile--1rgji",children:[(0,a.jsx)("div",{className:"home_shelf_resource_tile--homeShelfTileImageContainer--3fiyP",children:t}),(0,a.jsx)("div",{className:"home_shelf_resource_tile--title--O4Tfl",children:r})]}),s]})}function gb(){return(0,a.jsx)(gx,{buttonProps:{disabled:!0},image:(0,a.jsx)(fm.Qp,{className:"home_shelf_resource_tile--loadingImage--I9sFG home_shelf_resource_tile--loadingColor--AlSS5",animationType:fm.JR.NO_SHIMMER}),title:(0,a.jsx)(fm.Wi,{className:"home_shelf_resource_tile--loadingTitleText--8Q0Xx home_shelf_resource_tile--title--O4Tfl home_shelf_resource_tile--loadingColor--AlSS5",animationType:fm.JR.NO_SHIMMER}),author:(0,a.jsx)(fm.Wi,{className:"home_shelf_resource_tile--loadingAuthor--yKCwm home_shelf_resource_tile--author--m5FxW home_shelf_resource_tile--loadingColor--AlSS5",animationType:fm.JR.NO_SHIMMER})})}function gv({resource:e,isSelected:t,onFocus:r}){let n=(0,i.wA)(),o=(0,dz.Lj)(e),l=(0,s.useCallback)(()=>{(0,gh.FM)(n,e,{openInNewTab:!1,shouldUpdateUrl:!1}),(0,sM.kg)(e.resource_type,e.id)},[n,e]),d=s.useRef(null);s.useEffect(()=>{t&&d.current?.focus()},[t]);let c=(0,s.useMemo)(()=>({onClick:l,"aria-label":e.name,"aria-current":t,htmlAttributes:{onFocus:r},ref:d}),[l,t,e.name,r,d]);return(0,a.jsx)(gx,{buttonProps:c,image:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(gf.i,{resource:e,isSelected:t}),(0,a.jsx)("div",{className:"home_shelf_resource_tile--tileEditorIcon--QE-1U",children:(0,a.jsx)(gg.dn,{editorType:e.editor_types[0]})})]}),title:(0,a.jsx)("div",{className:"home_shelf_resource_tile--titleText--NFhch",children:e.name}),author:(0,a.jsxs)("div",{className:"home_shelf_resource_tile--subtitle--VMBH1",children:[(0,a.jsx)("span",{className:"home_shelf_resource_tile--author--m5FxW",children:(0,N.tx)("community.resource_tiles.by_author",{author:o})}),"\xa0\xa0\xb7\xa0\xa0",(0,a.jsxs)("div",{className:"home_shelf_resource_tile--metrics--riQEm",children:[(0,a.jsx)(gp.cz,{currentUserLiked:!1,likeCount:e.like_count,disableFontStyling:!0}),(0,a.jsx)(gp.i8,{usageCount:(0,cw.mk)(e),disableFontStyling:!0})]})]})})}let gy=211/244;var gw=r(496441),gj=r(792557);function gT(){let e=(0,sP.Om)(),t=(0,sP.tv)(),r=e&&t?new sP.au({...e,tab:sL.N$.COMMUNITY},t).href:"";return(0,a.jsxs)(gw._,{href:r,onClick:a=>{(0,sM.q5)(),a.preventDefault(),r?u.Ay.push(r):(0,mk.$D)(M.e.COMMUNITY,Error("NavigationTile: communityTabLink is empty"),{extra:{sharedRouteParams:e,sharedSearchParams:t}})},className:"xh8yej3 x5yr21d x78zum5 xdt5ytf x6s0dn4 x1nhvcw1 x1v2ro7d x1ypdohk xw4t3mb x1ocegsa xl61zd4 x1nl1fmu xln84v9 xgf1b7j x85jtft","aria-label":(0,N.t)("community.home_shelf.see_more_on_community"),children:[(0,a.jsxs)("div",{className:"x1lliihq x1n2onr6 x1vjfegm xh8yej3 x1mxnbhz x176lpz5 xb3r6kr xdr6sbx x1klh5xi",children:[(0,a.jsx)(lF.oW,{className:"x1vjfegm xxcbz4w x17muf8i x10l6tqk xm6i5cn x2e2xj7 x19y5rnk xbngzmg xgk9eko",src:(0,ab.ck)("2f1ddf99a93705a145b3e9258c29994c2bcc3296"),alt:""}),(0,a.jsx)(lF.oW,{className:"xhtitgo xzc2ltc xjndpiq x10l6tqk xm6i5cn x2e2xj7 x19y5rnk xbngzmg xgk9eko",src:(0,ab.ck)("3b5e7024cc8ec5912d46ce4c4f555f79de8afa22"),alt:""}),(0,a.jsx)(lF.oW,{className:"xzkaem6 x156by65 x1366x3a x10l6tqk xm6i5cn x2e2xj7 x19y5rnk xbngzmg xgk9eko",src:(0,ab.ck)("1922e9623fd798bcb563e1f4e9ae105b54d904b4"),alt:""}),(0,a.jsx)(t0.B,{svg:gj.A,className:"x10l6tqk xoegz02 xh8yej3 xqmqy1e xb9t1mx",svgWidth:"100%",svgHeight:"auto"})]}),(0,a.jsx)("span",{...er.xk(gE.linkText),children:(0,N.t)("community.home_shelf.see_more_on_community")})]})}let gE={linkText:{...aE.g.textBodyMediumStrong,width:"xh8yej3",textAlign:"xdpxx8g",color:"x1quhyk7",$$css:!0}};function gI(){let e=(0,i.wA)(),[t,r]=s.useState([]),[{data:n,status:o,errors:l}]=(0,f.IT)(lT.a.getHomeShelfContent({seenResourceIds:t})),d=function(){let e=(0,s.useRef)(null),[t,r]=(0,s.useState)(0),[a,i]=(0,s.useState)(0),[n,o]=(0,s.useState)(0),l=(0,s.useCallback)(e=>{let t=e-48,a=Math.floor((t-24-244*gy)/268);if(a<1){r(0),i(0),o(0);return}let s=Math.floor((t-24-24*(a=Math.min(a,16)))/(a+gy)),n=Math.floor(s*a+24*(a-1)),l=Math.floor(s*gy);r(a),i(n),o(l)},[]);return(0,s.useLayoutEffect)(()=>{let t=e.current;if(!t)return;l(t.clientWidth);let r=new ResizeObserver(e=>{l(e[0]?.target.clientWidth??0)});return r.observe(e.current),()=>r.disconnect()},[e,l]),(0,s.useMemo)(()=>({tileRowWidth:a,navigationSectionWidth:n,numberOfTiles:t,sizeRef:e}),[a,n,t,e])}(),c=function(e,t){let r=gc();return(0,s.useMemo)(()=>{let a=r.slice(),s=gl()(e,e=>e.resource_type),i=[];for(let r=0;r<e.length+a.length&&i.length!==t&&0!==a.length;r++){let e=(s[a[r%a.length]]??[]).shift();e?i.push(e):a.splice(r%a.length,1)}return i},[e,t,r])}(n?.data.meta.recommended_resources??[],d.numberOfTiles),{trackRejectedResources:u}=function({visibleResources:e}){let{trackResourceImpression:t}=(0,lS.GS)(),{properties:r}=(0,r2.j6)();return(0,s.useEffect)(()=>{e.forEach(e=>{t(e)})},[t,e]),{trackRejectedResources:(0,s.useCallback)(e=>{(0,av.sx)("community_home_shelf_resources_rejected",{rejectedResourceIds:e.join(),...r})},[r])}}({visibleResources:c}),m=(0,s.useCallback)(()=>{let t=c.map(e=>e.id);r(t),u(t),e(eP.b({refreshed_community_home_shelf_v2_recommendations:!0}))},[u,c,e]);if("errors"===o)return(0,mk.$D)(M.e.COMMUNITY,l),null;let _=d.numberOfTiles<2;return(0,a.jsx)("div",{ref:d.sizeRef,className:"x1p4momh",children:!_&&(0,a.jsxs)("div",{className:"xhv1u6h xuwania x1mxnbhz x1sjmt1f",children:[(0,a.jsxs)("div",{className:"x78zum5 x1qughib x6s0dn4 xp41m2r xettwda",children:[(0,a.jsx)("div",{...er.xk(gk.homeShelfTitle),children:(0,N.t)("community.home_shelf.title")}),(0,a.jsxs)("div",{className:"x78zum5 x1n2onr6 xncym2f x167g77z x6s0dn4",children:[(0,a.jsx)(ee.K,{"aria-label":(0,N.t)("community.home_shelf.refresh_label"),onClick:m,disabled:"loading"===o,children:(0,a.jsx)(gu._,{})}),(0,a.jsx)(ee.K,{"aria-label":(0,N.t)("community.home_shelf.dismiss_label"),onClick:()=>e(eP.b({dismissed_community_home_shelf_v2_recommendations:!0})),children:(0,a.jsx)(gm.f,{})})]})]}),(0,a.jsx)(gC,{sizingInfo:d,resources:c,isLoading:"loading"===o})]})})}function gN(){return(0,a.jsx)("div",{className:"x1cqoux5 xeuugli",children:(0,a.jsx)("div",{className:"x186iv6y xh8yej3 x176lpz5 x19y5rnk xo1570h"})})}function gC({resources:e,isLoading:t,sizingInfo:r}){let i=s.useRef(null),[n,o]=s.useState(null),[l,d]=s.useState(null),c=(0,s.useMemo)(()=>!t&&r.numberOfTiles>e.length?(0,om.y1)(r.numberOfTiles-e.length).map(e=>(0,a.jsx)(gN,{},e)):[],[r.numberOfTiles,e.length,t]),u=t?(0,om.y1)(r.numberOfTiles).map(e=>(0,s.createElement)("div",{className:"x1cqoux5 xeuugli",key:e},(0,a.jsx)(gb,{}))):e.map((e,t)=>(0,s.createElement)("div",{className:"x1cqoux5 xeuugli",key:e.id},(0,a.jsx)(gv,{resource:e,isSelected:l===t,onFocus:()=>{o(t),d(t)}})));return(0,a.jsxs)("div",{className:"x78zum5 x1665zp3",children:[(0,a.jsxs)(g_.S.div,{role:"grid",tabIndex:0,style:{width:r.tileRowWidth},className:"x78zum5 x1665zp3 xh8yej3 x1qughib",onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onFocus:e=>{e.target===i.current&&null===l&&(d(0),o(0))},onBlur:e=>{e.relatedTarget&&i.current?.contains(e.relatedTarget)||d(null)},ref:i,onKeyDown:t=>{if("ArrowRight"===t.key){t.preventDefault(),t.stopPropagation();let r=Math.min((n??0)+1,e.length-1);o(r),d(r)}else if("ArrowLeft"===t.key){t.preventDefault(),t.stopPropagation();let e=Math.max((n??0)-1,0);o(e),d(e)}},children:[u,c]}),(0,a.jsx)("div",{className:"x1lliihq x1i1rx1s x1hyhr7 xgcv3f"}),(0,a.jsx)("div",{style:{width:r.navigationSectionWidth},children:(0,a.jsx)(gT,{})})]})}function gS(){let e=(0,i.wA)();return(0,a.jsx)(L.tH,{team:M.e.COMMUNITY,boundaryKey:"RecommendedResourcesShelf",fallback:L.H4.NONE_I_KNOW_WHAT_IM_DOING,onError:()=>{e(tl.F.enqueue({message:(0,N.t)("general.root_error_boundary_title"),type:"react-error"}))},hasCustomWASMBuild:K.y4,children:(0,a.jsx)(r2.fu,{name:r5.e0.COMMUNITY_HOME_SHELF,children:(0,a.jsx)(gI,{})})})}let gk={homeShelfContainer:{margin:"x1p4momh",marginInline:null,marginInlineStart:null,marginLeft:null,marginInlineEnd:null,marginRight:null,marginBlock:null,marginTop:null,marginBottom:null,$$css:!0},homeShelf:{margin:"xhv1u6h",marginInline:null,marginInlineStart:null,marginLeft:null,marginInlineEnd:null,marginRight:null,marginBlock:null,marginTop:null,marginBottom:null,padding:"xuwania",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,borderRadius:"x1mxnbhz",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,background:"x1sjmt1f",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundRepeat:null,backgroundSize:null,$$css:!0},homeShelfHeader:{display:"x78zum5",justifyContent:"x1qughib",alignItems:"x6s0dn4",padding:"xp41m2r",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,height:"xettwda",$$css:!0},homeShelfHeaderActions:{display:"x78zum5",position:"x1n2onr6",left:"xncym2f",insetInlineStart:null,insetInlineEnd:null,gap:"x167g77z",rowGap:null,columnGap:null,alignItems:"x6s0dn4",$$css:!0},homeShelfTitle:{color:"x1akne3o",...aE.g.textHeadingSmall,$$css:!0},homeShelfTabContent:{display:"x78zum5",gap:"x1665zp3",rowGap:null,columnGap:null,$$css:!0},resourcesRow:{display:"x78zum5",gap:"x1665zp3",rowGap:null,columnGap:null,width:"xh8yej3",justifyContent:"x1qughib",$$css:!0},resourceWrapper:{flex:"x1cqoux5",flexGrow:null,flexShrink:null,flexBasis:null,minWidth:"xeuugli",$$css:!0},homeShelfDivider:{display:"x1lliihq",width:"x1i1rx1s",marginBottom:"x1hyhr7",borderLeft:"xgcv3f",borderLeftWidth:null,borderInlineStartWidth:null,borderInlineEndWidth:null,borderLeftStyle:null,borderInlineStartStyle:null,borderInlineEndStyle:null,borderLeftColor:null,borderInlineStartColor:null,borderInlineEndColor:null,$$css:!0},resourceTilePlaceholder:{aspectRatio:"x186iv6y",width:"xh8yej3",backgroundColor:"x176lpz5",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,border:"xo1570h",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:null,borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0}};var gR=(e=>(e.SHOW_NOTHING="SHOW_NOTHING",e.SHOW_HOME_SHELF="SHOW_HOME_SHELF",e))(gR||{});function gA(){let e=(0,ed.Xr)(gn),t=function(){let e=!!(0,i.d4)(e=>e.userFlags).dismissed_community_home_shelf_v2_recommendations,t=(0,i.d4)(({currentUserOrgId:e})=>e),r=(0,gi.aH)(),a=(0,i.d4)(({orgById:e})=>e),s=(0,eB.yK)({orgById:a,currentUserOrgId:t}),n=(0,i.d4)(e=>e.user?.drafts_folder_id)??null,o=gc(),l=(0,eI.vt)(),d=(0,eE.jn)();return h.Ay.mobile||!n||l||d||e||s||0===o.length||!r()?"SHOW_NOTHING":"SHOW_HOME_SHELF"}();return((0,s.useEffect)(()=>{e("SHOW_HOME_SHELF"===t)},[e,t]),"SHOW_NOTHING"===t)?null:(0,a.jsx)(gS,{})}var gO=r(693478),gF=r(29104),gP=r(53857);let gL={Banner:function(e){let t=(0,i.wA)(),r=e=>{t(eP.b({[e]:!0}))};return(0,a.jsx)(r2.fu,{name:e.trackingContextName,properties:{severity:mz.c.EVENT},children:(0,a.jsxs)("div",{...er.Ay.props(gD.wrapper,"large"===e.size&&gD.wrapperLarge),style:{backgroundColor:e.bgColor},children:[(0,a.jsx)("div",{className:"x78zum5 x6s0dn4 x1qughib x1iyjqo2 x1i71x30 x1rt4tut",children:e.children}),(0,a.jsx)(ee.K,{"aria-label":(0,N.t)("general.close"),onClick:()=>r(e.userFlag),children:(0,a.jsx)(et.A,{})})]})})},BannerContent:function(e){let t=e.copy?(0,a.jsx)("p",{...er.Ay.props(gD.copy,e.title?gD.copyColorSecondary:gD.copyColorPrimary),children:e.copy}):null,r=e.beta?(0,a.jsx)("div",{className:"x1rg5ohu",children:(0,a.jsx)(gP.E,{children:(0,N.t)("general.beta")})}):null;return(0,a.jsxs)("div",{children:[e.title?(0,a.jsxs)("div",{className:"xxymvpz x1nfngrj",children:[(0,a.jsx)("h2",{...er.Ay.props(gD.title,e.beta&&gD.titleBadgeSpacing),children:e.title}),r]}):null,t]})},useShouldShowBanner:function(e,t){return!!(!(0,tp.f)(e)&&(0,o.k)()[t])}};lO.Il.textBodyLargeFontFamily,lO.Il.textBodyMediumFontFamily,lO.Il.textBodyLargeFontSize,lO.Il.textBodyMediumFontSize,lO.Il.textBodyLargeFontWeight,lO.Il.textBodyMediumFontWeight,lO.Il.textBodyLargeLetterSpacing,lO.Il.textBodyMediumLetterSpacing,lO.Il.textBodyLargeLineHeight,lO.Il.textBodyMediumLineHeight;let gD={wrapper:{display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"x1qughib",padding:"x1hcpp98 x8lzctc",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,gap:"x1i71x30 x1rt4tut",rowGap:null,columnGap:null,$$css:!0},wrapperLarge:{padding:"x1tphvzp x8lzctc",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,$$css:!0},title:{fontFamily:"x17hqfcz xcw2j8d",fontSize:"xemv814 xi9x8a2",fontWeight:"x1ma9mv9 x84028e",letterSpacing:"x12638g3 x4lxrar",lineHeight:"xyny9ap x16r6qr4",display:"xt0psk2",color:"x1akne3o",$$css:!0},titleBadgeSpacing:{marginRight:"x17qaar8",marginInlineStart:null,marginInlineEnd:null,$$css:!0},copy:{fontFamily:"x17hqfcz xcw2j8d",fontSize:"xemv814 xi9x8a2",fontWeight:"x10p5zqr",letterSpacing:"x12638g3 x4lxrar",lineHeight:"xyny9ap x16r6qr4",$$css:!0},copyColorSecondary:{color:"x1n0bwc9",$$css:!0},copyColorPrimary:{color:"x1akne3o",$$css:!0}};var gM=r(160095),gB=r(152745),gU=r(68792);function gW({isoCode:e}){let t=gB.uk.includes(e||"UNKNOWN"),r="dark"===(0,nv.DP)();return(0,a.jsx)(g$,{trackingContextName:"July Release Notes Banner",darkModeBgColor:r?lO.Tj.bgFigjamSecondary:lO.Tj.bgSecondary,lightModeBgColor:r?lO.Tj.bgFigjamSecondary:lO.Tj.bgSecondary,registrationLink:t?"http://events.figma.com/Jul-rel-notes-APAC-2025/PrB":"https://events.figma.com/jul25-rel-notes/PrB",copy:t?(0,N.t)("banner.marketing_promo.july_release_notes.content_APAC"):(0,N.t)("banner.marketing_promo.july_release_notes.content")})}function g$({trackingContextName:e,darkModeBgColor:t,lightModeBgColor:r,copy:s,registrationLink:i}){let n="dark"===(0,nv.DP)();return(0,a.jsxs)(gL.Banner,{trackingContextName:e,bgColor:n?t:r,userFlag:"seen_july_release_notes_banner_2025",size:"small",children:[(0,a.jsxs)("div",{className:"x78zum5 x1q0g3np x1excjyp x6s0dn4 x1nhvcw1",children:[(0,a.jsx)(gG,{}),(0,a.jsx)(gL.BannerContent,{copy:s})]}),(0,a.jsx)(aT.J,{brand:"bake-filebrowser",children:(0,a.jsx)(gM.pW,{href:i,size:"lg",children:(0,N.t)("banner.marketing_promo.register")})})]})}function gG(){return(0,a.jsxs)("div",{className:"x1q0g3np x6s0dn4 x1nfngrj x78zum5 xi0feg2",children:[(0,a.jsx)(t0.B,{svg:gU.A,style:{fill:lO.Tj.icon}}),(0,a.jsx)("h2",{className:"xdpxx8g x1vzchgk x1ud3kw6 x1yuz8eb x1l13ptj xazcve0 xnq0rdo",children:(0,N.t)("banner.marketing_promo.release_notes.title")})]})}function gV(){let e=gL.useShouldShowBanner("seen_july_release_notes_banner_2025","marketing_promo_banner_july_release_notes"),t=gL.useShouldShowBanner("seen_figmake_launch_banner","marketing_promo_banner_figmake_launch"),r=ab.tl();return e?(0,a.jsx)(gW,{isoCode:r.iso_code}):t?(0,a.jsx)(gz,{}):null}function gz(){let e=(0,ay.$)({isDraftsFolder:!0,editorType:eM._Y.FIGMAKE,newFileFrom:aw.f6.FIGMAKE_LAUNCH_BANNER,contextClicked:"figmake_launch_banner_created"}),t=(0,i.d4)(e=>e.user?.drafts_folder_id),{data:r}=(0,da.nt)(t),s=(0,ds.h)(r).find(e=>e.editorType===eM._Y.FIGMAKE),n=(0,gF.a)(),o=(0,da.qI)().unwrapOr(null);if(!s)return null;let l=!s.canCreate,d=l&&o?o:void 0;return(0,a.jsxs)(gL.Banner,{trackingContextName:"Figmake Launch Banner",bgColor:lO.Tj.bgSelectedTertiary,userFlag:"seen_figmake_launch_banner",size:"large",children:[(0,a.jsxs)("div",{className:"x78zum5 x1i71x30 x6s0dn4 x1w5s15c x1fiy98q",children:[(0,a.jsx)("div",{className:"xsqpjig x78zum5 x100vrsf x1vqgdyp x14odnwx x2lah0s x6s0dn4 xl56j7k xfm0j5p",children:(0,a.jsx)(gO.e,{className:"x1849jeq x1gnnpzl xwa2v1s"})}),(0,a.jsx)(gL.BannerContent,{title:(0,N.t)("banner.marketing_promo.figmake_launch.title"),copy:(0,N.t)("banner.marketing_promo.figmake_launch.content"),beta:n})]}),(0,a.jsx)(aT.J,{brand:"bake-filebrowser",children:(0,a.jsx)(aT.J,{mode:"light",children:(0,a.jsx)(tO.WW,{onClick:e,disabled:l,htmlAttributes:{"data-tooltip":d,"data-tooltip-type":r8.Ib.TEXT},children:(0,N.t)("banner.marketing_promo.figmake_launch.cta")})})})]})}var gH=r(787018),gK=r(448654),gY=r(930338);function gq(e){let t=(0,p.Rs)(eK.ox,{resourceTypes:e.resourceTypes,firstPageSize:30,sortOrder:e.sortOrder,cursorColumn:e.sortKey,sharedBy:e.sharedBy||null,planId:e.planId||null,planType:e.planType||null,fileType:e.fileType||null,orgDeletedDrafts:e.orgDeletedDrafts||null}),r=(0,s.useCallback)(()=>{"loaded"===t.status&&t.data.sharedWithYouResources.hasNextPage()&&t.data.sharedWithYouResources.loadNext(30)},[t]),a="loaded"===t.status&&t.data.sharedWithYouResources.isLoadingNextPage;return{subscription:t,fetchNextPage:r,isFetchingNextPage:a}}function gJ(e){let t=(0,eA._6)(),r=(0,i.d4)(e=>e.tileSortFilterStateByView),n="recentsAndSharing"===t.view?r.recentsAndSharing.sharedFiles:r.sharedWithYou,o={tileSortFilterConfig:n,sortKeys:[oi.C0.SHARED_AT]},{subscription:l,fetchNextPage:d,isFetchingNextPage:c}=function(e){let{subscription:t,fetchNextPage:r,isFetchingNextPage:a}=gq({...e,resourceTypes:["file","file_repo","prototype"]});return{subscription:(0,s.useMemo)(()=>t.transform(e=>e.sharedWithYouResources.reduce((e,t)=>{if(t.sharedWithYouFile){let r=function(e){if(null==e||null==e.file)return null;let{file:t,...r}=e,a={...t,...r,editUrl:`${window.location.origin}/file/${t.key}/${(0,gY.sy)(t.name||"")}`,signedPreviewThumbnailUrls:null,trackTags:null};return(0,ra.fA)(os.F.toSinatra(a),{sharedAt:r.sharedAt,sharedByUser:r.sharedByUser})}(t.sharedWithYouFile);r&&e.push(r)}else if(t.sharedWithYouRepo){let r=function(e){let{repo:t,...r}=e;if(null===t)return null;let{branches:a,...s}=t,i=a?.filter(e=>null!=e)?.map(e=>ro.V1({...e,edit_url:e?`${window.location.origin}/file/${e.key}/${gY.sy(e.name||"")}`:"",client_meta:e.checkpointClientMeta}))??[],n=(0,ro.V1)({...s,...r});return(0,ro.V1)({type:ra.nb.REPO,repo:n,branches:i,selectedBranchKey:""},{repoPerms:(0,gK.zh)(t)})}(t.sharedWithYouRepo);r&&e.push(r)}else if(t.sharedWithYouPrototype){let r=function(e){let{prototype:t,...r}=e;if(null==t)return null;let a=(0,ro.V1)({...t,...r});return(0,ro.V1)({type:ra.nb.PROTOTYPE,prototype:a},{prototypePerms:(0,gH.R)(t)})}(t.sharedWithYouPrototype);r&&e.push(r)}return e},[])),[t]),fetchNextPage:r,isFetchingNextPage:a}}({sharedBy:n.filters.sharedBy??"",planId:n.filters.plan?.planId??"",planType:n.filters.plan?.planType??"",fileType:(e=>{switch(e){case oi.t2.DESIGN:return"design";case oi.t2.FIGJAM:return"whiteboard";case oi.t2.PROTOTYPE:return"prototype";case oi.t2.SITES:return"sites";case oi.t2.SLIDES:return"slides";case oi.t2.COOPER:return"cooper";case oi.t2.MAKE:return"figmake";case oi.t2.ANY:return null;default:(0,E.xb)(e)}})(n.filters.fileType)??"",sortOrder:n.sort.dir===oi.ue.ASC?"asc":"desc",sortKey:(0,oi.De)(n.sort.key)??"shared_at"}),u=(0,s.useMemo)(()=>l.unwrapOr([]),[l]),{trackPerformanceEvent:m}=(0,ms.S)("swy_files_pagination_performance","livegraph");(0,s.useEffect)(()=>{m("fetch_end")},[m,u.length]),(0,s.useEffect)(()=>{"errors"===l.status&&m("fetch_error",{errors:JSON.stringify(l.errors??{})})},[m,l.status,l.errors]),(0,s.useEffect)(()=>(m("fetch_start"),()=>{m("fetch_cancel")}),[m]);let _=(0,s.useCallback)(()=>{c||(m("fetch_next"),d())},[c,d,m]),p="loaded"===l.status;return(0,g.kF)("SharedFiles"),(0,g.WX)({markName:"MainBodyContent",isLoaded:p}),(0,a.jsx)(es.A,{loadingElementId:"loading-content-pane",delay:250,loaded:p,loadingElementClassName:I.s.pr32.$,children:(0,a.jsx)(uE.B,{onShouldFetchNextPage:_,children:(0,a.jsx)(ma,{currentPlanFilter:n.filters.plan,currentSharedByFilter:n.filters.sharedBy,emptyStateText:c?"":(0,N.t)("shared_with_you.no_items"),isEligbileForProTeamLockedRevampUI:e.isEligbileForProTeamLockedRevampUI,newFileTile:!1,sortFilterOptions:o,tileActions:{showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicate:!0,delete:!0,removeFromRecents:!1,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToWorkspace:!0},tiles:u})})})}function gX(e){let t=(0,eA._6)(),r=(0,sv.ol)(),n=(0,p.Rs)(eK.kQI,{id:r?.id||""},{enabled:!!r}),o=(0,p.Rs)(eK.TNJ,{id:r?.id||""},{enabled:!!r}),l=(0,i.d4)(e=>e.tileSortFilterStateByView),d="recentsAndSharing"===t.view?l.recentsAndSharing.sharedProjects:l.sharedWithYou,{subscription:c,fetchNextPage:u,isFetchingNextPage:m}=function(e){let{subscription:t,fetchNextPage:r,isFetchingNextPage:a}=gq({...e,resourceTypes:["folder"]});return{subscription:(0,s.useMemo)(()=>t.transform(e=>e.sharedWithYouResources.reduce((e,t)=>{if(t.sharedWithYouFolder){let{folder:r,...a}=t.sharedWithYouFolder;if(null==r)return e;let s=r.updatedAt.toString(),i=r.activeProjectResourceConnections?.[0]??null,n=(0,ro.V1)({...r,...a},{created_at:r.createdAt.toString(),updated_at:s,deleted_at:r.deletedAt?.toString()||null,touched_at:s,is_connected_project:!!i,resource_connection:i?{hostPlanName:i.hostPlanName,connectedPlanName:i.connectedPlanName}:null});e.push(n)}return e},[])),[t]),fetchNextPage:r,isFetchingNextPage:a}}({sharedBy:d.filters.sharedBy??"",planId:d.filters.plan?.planId??"",planType:d.filters.plan?.planType??"",orgDeletedDrafts:"",sortOrder:d.sort.dir===oi.ue.ASC?"asc":"desc",sortKey:(0,oi.De)(d.sort.key)??"shared_at"}),_=(0,s.useMemo)(()=>c.unwrapOr([]),[c]),f=(0,s.useMemo)(()=>_.map(e=>e.id),[_]),{trackPerformanceEvent:h}=(0,ms.S)("swy_projects_pagination_performance","livegraph");(0,s.useEffect)(()=>{h("fetch_end")},[h,f.length]),(0,s.useEffect)(()=>{"errors"===c.status&&h("fetch_error",{errors:JSON.stringify(c.errors??{})})},[h,c.status,c.errors]),(0,s.useEffect)(()=>(h("fetch_start"),()=>{h("fetch_cancel")}),[h]);let x=(0,s.useCallback)(()=>{m||(h("fetch_next"),u())},[m,u,h]),b="loaded"===n.status&&!!n.data.team&&n.data.team.hasPermission,v=!!o.unwrapOr({team:{hasPermission:!1}})?.team?.hasPermission,y="loaded"===c.status;return(0,g.kF)("SharedProjects"),(0,g.WX)({markName:"MainBodyContent",isLoaded:y}),(0,a.jsx)(es.A,{loadingElementId:"loading-content-pane",delay:250,loaded:y,loadingElementClassName:I.s.pr32.$,children:(0,a.jsx)(uE.B,{onShouldFetchNextPage:x,children:(0,a.jsx)(mj,{canAdminTeam:v,canEditTeamContents:b,chunkSize:_.length,currentPlanFilter:d.filters.plan,emptyStateText:m?"":(0,N.t)("shared_with_you.no_items"),folderList:_,isEligbileForProTeamLockedRevampUI:!!r&&e.isEligbileForProTeamLockedRevampUI,isSharerInfoIncluded:!0,selectedView:t,team:r,teamId:r?r.id:void 0,useLGPerms:!0,viewId:"shared-with-you-projects"})})})}var gQ=r(876838),gZ=r(937941),g0=r(502533),g1=r(790613),g4=r(684425),g2=r(362959);let g8=e=>(0,a.jsx)("span",{className:"unsubscribe_confirmation_modal--boldText--dNK-D",children:e}),g5=(0,tE.Ju)(function(e){let t=(0,i.wA)(),r=(0,J.iZ)();return r?(0,a.jsxs)(g4.u,{tintedModalBackground:!0,headerText:(0,N.t)("interstitial.unsubscribe_success_header"),children:[(0,a.jsx)("div",{className:g2.Yg,children:(0,N.tx)("interstitial.unsubscribe_success_subheader_with_address",{emailName:g8((()=>{switch(e.policyType){case"FileCommentActivity":return(0,N.t)("interstitial.comment_activity_digest");case"TeamCommentActivity":return(0,N.t)("interstitial.team_comment_digest");case"FeedWeeklyDigest":return(0,N.t)("interstitial.feed_weekly_digest");case"WorkspaceActivity":return(0,N.t)("interstitial.workspace_activity");default:(0,E.xb)(e.policyType)}})()),emailAddress:g8(r.email)})}),(0,a.jsx)(r6.nD,{onClick:()=>{t(tC.Lo())},className:"unsubscribe_confirmation_modal--button--j6qqT",children:(0,N.tx)("interstitial.done")}),(0,a.jsx)("button",{className:"unsubscribe_confirmation_modal--notificationSettingsButton--vmHlZ interstitial_modal--secondaryText--IC9Gu",onClick:()=>{t((0,tC.to)({type:g1.s,data:{tab:g1.c.NOTIFICATIONS}})),t(tC.aZ())},children:(0,N.tx)("interstitial.open_notifications_settings")})]}):null},"UNSUBSCRIBE_CONFIRMATION_INTERSTITIAL_MODAL");var g6=r(88484);let g3={showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicate:!0,delete:!0,removeFromRecents:!0,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToWorkspace:!0};function g7({isEligbileForProTeamLockedRevampUI:e}){let t=(0,i.d4)(e=>e.tileSortFilterStateByView.recentsAndSharing.recents);!function({sort:e,viewMode:t}){let r=t??oi.XU.GRID,a=s.useRef(e),i=s.useRef(r);i.current=r,s.useEffect(()=>{(0,o.k)().recents_sort_tracking&&av.az.trackDefinedEvent("file_browser.recents_sort_on_load",{sortKey:(0,oi._5)(a.current.key),sortDir:(0,oi.GB)(a.current.dir),viewMode:(0,oi.jq)(i.current)})},[]);let n=s.useRef(!0);s.useEffect(()=>{if((0,o.k)().recents_sort_tracking){if(n.current){n.current=!1;return}av.az.trackDefinedEvent("file_browser.recents_sort_updated",{sortKey:(0,oi._5)(e.key),sortDir:(0,oi.GB)(e.dir),viewMode:(0,oi.jq)(i.current)})}},[e.dir,e.key])}(t);let r=(0,oi.Gv)(t.filters.fileType),n=function({_editorTypeRaw:e}={}){let t="string"==typeof e,[r]=(0,rl.IT)(t?eK.gB$.Query({_editorTypeRaw:e}):eK.wZi.Query({})),a=s.useMemo(()=>r.transform(e=>"recentFiles2ByEditorType"in e.currentUser?e.currentUser.recentFiles2ByEditorType:e.currentUser.recentFiles2),[r]);s.useEffect(()=>{"loaded"===a.status&&(0,g6.eF)(a.data)},[a]);let i=s.useMemo(()=>a.transform(e=>(0,ro.YN)(e)),[a]);return s.useEffect(()=>{"loaded"===i.status&&(0,g6.Wn)(i.data)},[i]),s.useMemo(()=>i.transform(e=>e.recent_files.map(e=>(0,ra.fA)(e))),[i])}({_editorTypeRaw:r}),l=(0,g6.O8)(),d=s.useMemo(()=>l.transform(e=>e.map(ra.Nu)),[l]),c=function(){let e=(0,i.d4)(e=>e.recentRepos),t=(0,i.d4)(e=>e.selectedBranchKeyByRepoId);return s.useMemo(()=>e.map(e=>(0,ra.uy)(e,t)),[e,t])}(),u=function(){let e=(0,mF.Rp)();return s.useMemo(()=>Object.values(e).map(ra.gB),[e])}(),m=s.useMemo(()=>sm.Qw.merge([n,d],c,u),[u,n,d,c]),_=s.useMemo(()=>({tileSortFilterConfig:t,sortKeys:[oi.C0.NAME,oi.C0.CREATED_AT,oi.C0.ACCESSED_AT]}),[t]),p="loaded"===m.status;return(0,g.kF)("RecentFiles"),(0,g.WX)({markName:"MainBodyContent",isLoaded:p}),(0,a.jsxs)(es.A,{loadingElementId:"loading-content-pane",loaded:p,loadingElementClassName:I.s.pr32.$,children:[(0,a.jsx)(ma,{tiles:m.data,tileActions:g3,sortFilterOptions:_,newFileTile:!0,emptyStateText:null!==r?(0,N.t)("file_browser.tiles_view.default_overfiltered_text"):h.Ay.mobile||h.Ay.tablet?(0,N.t)("file_browser.tool_bar.recently_viewed_empty_state"):"",isEligbileForProTeamLockedRevampUI:e,shouldLogVisibleTileCount:!0}),(0,a.jsx)(cK.cx,{})]})}var g9=r(338617),he=r(181241);let ht=new class{constructor(){this.SharerFilterOptionsSchemaValidator=(0,he.vh)(),this.PlanFilterOptionsSchemaValidator=(0,he.vh)()}getSharerFilterOptions(e){return this.SharerFilterOptionsSchemaValidator.validate(async({xr:t})=>await t.get(`/api/shared_with_you/sharer_filter_options?resource_type[]=${e.resource_type}`))}getPlanFilterOptions(e){return this.PlanFilterOptionsSchemaValidator.validate(async({xr:t})=>await t.get(`/api/shared_with_you/plan_filter_options?resource_type[]=${e.resource_type}`))}};function hr(){return{"":{label:(0,N.t)("shared_with_you.filters.all_organizations")}}}let ha=rl.M4.Query({fetch:async e=>{let t=await ht.getPlanFilterOptions({resource_type:e}),r={};return t.data.meta.plan_filters.forEach(e=>{let t={label:e.label,plan_id:e.plan_id,plan_type:e.plan_type};e.plan_id&&(r[e.plan_id]=t)}),{...hr(),...r}}});function hs(){return{"":(0,N.t)("shared_with.you.filters.anyone")}}let hi=[oU.G.RECENTLY_VIEWED,oU.G.SHARED_FILES,oU.G.SHARED_PROJECTS],hn=e=>{switch(e){case oU.G.RECENTLY_VIEWED:return(0,N.t)("file_browser.recents_and_sharing_view.recent_files_tab_name");case oU.G.SHARED_PROJECTS:return(0,N.t)("file_browser.recents_and_sharing_view.shared_projects_tab_name");case oU.G.SHARED_FILES:return(0,N.t)("file_browser.recents_and_sharing_view.shared_files_tab_name");default:(0,E.xb)(e)}};function ho(e){let t=e.options.tileSortFilterConfig.filters.sharedBy,r=e.options.tileSortFilterConfig.filters.plan;return(0,a.jsxs)("div",{className:I.s.flex.flexWrap.gap8.$,children:[e.filters?.sharer&&Object.keys(e.filters?.sharer).length>1&&(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)(sz.qD,{userId:t}),(0,a.jsx)(sz.lI,{config:e.options.tileSortFilterConfig,filterOptions:e.filters.sharer,tab:e.tab})]}),e.filters?.plan&&Object.keys(e.filters?.plan).length>1&&(0,a.jsxs)(a.Fragment,{children:[r?.planId&&(0,a.jsx)(sz.lV,{planOption:e.filters.plan[r.planId]}),(0,a.jsx)(sz.FU,{config:e.options.tileSortFilterConfig,filterOptions:e.filters.plan,tab:e.tab})]}),e.filters?.fileType&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(sz.ye,{config:e.options.tileSortFilterConfig,tab:e.tab})})]})}function hl(e){let t=e.selectedTab,r=(0,i.wA)(),n=(0,eA._6)(),l=(0,i.d4)(e=>e.tileSortFilterStateByView),d=t===oU.G.SHARED_PROJECTS?["folder"]:["file","file_repo","prototype"],c=function(e){let[t,r]=(0,s.useState)(hs()),a=e.join("&resource_type[]=");return(0,s.useEffect)(()=>{ht.getSharerFilterOptions({resource_type:a}).then(({data:e})=>{r(e.meta.shared_by_filters.reduce((e,{user_id:t,label:r})=>({...e,[t]:r}),{...hs()}))})},[a]),t}(d),u=function(){let e=(0,J.TA)(),t=(0,i.d4)(e=>e.authedUsers),r=(0,i.d4)(e=>e.plans),a=(0,i.d4)(e=>e.orgById),s=(0,i.d4)(g9.P),n=(0,o.k)().limited_plan_spaces,l=e?t.byId[e]:null;return(n?r.map(e=>{let t="";if(e.plan_type===oB.O.ORG){let r=a[e.plan_id];t=r?.name??t}else{let r=s[e.plan_id];t=r?.name??t}return{label:t,plan_id:e.plan_id,plan_type:e.plan_type===oB.O.ORG?oB.O.ORG:oB.O.TEAM}}):(l?.plans??[]).map(e=>({label:e.name,plan_id:e.plan_id,plan_type:e.is_org?"org":"team"}))).reduce((e,t)=>({...e,[`${t.plan_id}`]:t}),{...hr()})}(),m=function(e){let t=e.join("&resource_type[]="),[r]=(0,rl.IT)(ha(t));return r.data||hr()}(d),_={[oi.cT.ALL]:(0,N.t)("shared_with_you.filters.org_deleted_drafts.all"),[oi.cT.SHARED]:(0,N.t)("shared_with_you.filters.org_deleted_drafts.shared"),[oi.cT.ORG_DELETED_DRAFTS]:(0,N.t)("shared_with_you.filters.org_deleted_drafts.deleted_user_drafts")},p={sharer:t!==oU.G.RECENTLY_VIEWED?c:void 0,plan:t===oU.G.RECENTLY_VIEWED?u:m,fileType:t!==oU.G.SHARED_PROJECTS,orgDeletedDrafts:t===oU.G.SHARED_PROJECTS?_:void 0},f=s.useMemo(()=>{let e;switch(t){case oU.G.RECENTLY_VIEWED:e=l.recentsAndSharing.recents;break;case oU.G.SHARED_FILES:e=l.recentsAndSharing.sharedFiles;break;case oU.G.SHARED_PROJECTS:e=l.recentsAndSharing.sharedProjects;break;default:(0,E.xb)(t)}return{tileSortFilterConfig:e,sortKeys:oU.o[t]}},[t,l]),g=e=>{e===oU.G.SHARED_FILES?(0,av.sx)("file_browser_shared_files"):e===oU.G.SHARED_PROJECTS&&(0,av.sx)("file_browser_shared_projects"),r(eR.sf({view:"recentsAndSharing",tab:e}))},h=(0,a.jsx)("div",{className:"x78zum5 x6s0dn4",children:(0,a.jsx)(sz.$c,{initialViewMode:f.tileSortFilterConfig.viewMode,onViewModeChange:e=>{(0,av.sx)("file view toggle",{viewType:e===oi.XU.GRID?"grid":"list"}),Object.keys(oU.G).map(t=>{r(eS.JF({selectedView:n,config:{...f.tileSortFilterConfig,viewMode:e},tab:oU.G[t]}))},r(eS.uV({viewId:"shared-with-you-projects",viewMode:e})))}})}),x=(0,a.jsx)(sz.mc,{options:f,selectedView:n,dispatch:r,tab:t}),b=(0,a.jsxs)("div",{className:I.s.flex.gap8.$,children:[x,h]},"sortWithViewOptions"),v=(0,a.jsx)(ho,{options:f,filters:p,tab:t},"recentsAndSharingTileFilters"),[y,w,j]=nS.t.useManagedTabs({[oU.G.RECENTLY_VIEWED]:!0,[oU.G.SHARED_FILES]:!0,[oU.G.SHARED_PROJECTS]:!0},e.selectedTab,e=>{g(e)}),T=hi.map((e,t)=>(0,a.jsx)(nS.t.Tab,{...y[e],children:hn(e)},t)),C=[v,b];return(0,a.jsx)(sz.g2,{leftSide:(0,a.jsx)(nS.t.TabStrip,{manager:j,children:T}),rightSide:C,rightSideMobile:C,shouldStackRightSideMobile:!0})}function hd(e){switch(e){case it.bb.ACCOUNT:return g1.c.ACCOUNT;case it.bb.COMMUNITY:return g1.c.COMMUNITY;case it.bb.NOTIFICATIONS:return g1.c.NOTIFICATIONS}}function hc(e){let t=(0,i.wA)(),r=(0,eE.R)(),n=_a({checks:{isEligbileForProTeamLockedRevampUI:r},shadowReadLabel:i2.A5.RecentsAndSharingPageView.hasBanner}).unwrapOr(!1),{selectedTab:o,accountModalTab:l,emailPolicyToUnsubscribeFrom:d}=e,c=(0,a.jsx)(hl,{selectedTab:o}),u=(0,_.ZC)(l),m=(0,_.ZC)(d);return(0,gZ.i)(),(0,gQ.V)(),(0,s.useEffect)(()=>{l&&l!==u?(t((0,tC.to)({type:g1.s,data:{tab:hd(l)}})),t(eR.sf({view:"recentsAndSharing"}))):d&&d!==m&&(g0.z.updateUserCommunicationPreference({channelType:"email",policyType:d,policySetting:"none"}).then(()=>{t((0,tC.to)({type:g5,data:{policyType:d}}))}).catch(e=>{t((0,tC.to)({type:g1.s,data:{tab:hd(it.bb.NOTIFICATIONS)}})),t(tl.F.dequeue({}))}),t(eR.sf({view:"recentsAndSharing"})))},[l,u,d,m,t]),(0,a.jsx)(iY.r,{banner:n?(0,a.jsx)(_l,{folderId:null}):(0,a.jsx)(gV,{}),viewbar:c,toolbar:(0,a.jsx)(gA,{}),viewBarSticky:!0,content:function(e,t){switch(e){case oU.G.SHARED_FILES:return(0,a.jsx)(gJ,{isEligbileForProTeamLockedRevampUI:t?.isEligbileForProTeamLockedRevampUI});case oU.G.SHARED_PROJECTS:return(0,a.jsx)(gX,{isEligbileForProTeamLockedRevampUI:t?.isEligbileForProTeamLockedRevampUI});case oU.G.RECENTLY_VIEWED:return(0,a.jsx)(g7,{isEligbileForProTeamLockedRevampUI:t?.isEligbileForProTeamLockedRevampUI});default:(0,E.xb)(e)}}(o,{isEligbileForProTeamLockedRevampUI:r})})}var hu=r(822011);function hm({teamId:e}){let t=(0,p.Rs)(eK.GyZ,{teamId:e}),r=t.data?.team||null,s=(0,Y.dq)();if(!r?.org)return null;if(s!==r.org.id)return(0,a.jsx)(_z,{planEntity:r.org});let i=(r.org?.workspaces?.length||0)>0&&r.plan?.tier===hu.Agb.ENTERPRISE;return(0,a.jsxs)(oL.A5,{children:[r.org&&(0,a.jsx)(_G,{org:r.org,currentResourceId:e,hasTrailingDivider:!!r.workspace||i}),(r.workspace||i)&&(0,a.jsx)(_Y,{workspace:r.workspace??{id:iD.O},currentResourceId:e,orgId:r.org?.id,hasTrailingDivider:!1})]})}var h_=r(417339),hp=r(373189),hf=r(511872),hg=r(857431),hh=r(663128);function hx(){return(0,a.jsxs)("div",{className:I.s.flex.p12.colorBgSelected.bRadius6.$,children:[(0,a.jsx)("div",{className:I.s.mr12.colorIcon.itemSelfCenter.$,children:(0,a.jsx)(t0.B,{svg:hh.A})}),(0,a.jsxs)("div",{children:[(0,N.tx)("sidebar.meta.this_team_is_for_education_users_only")," ",(0,a.jsx)(r6.Us,{target:"_blank",trusted:!0,href:"/education/",children:(0,N.tx)("org_home_view_meta.learn_more")})]})]})}function hb({team:e}){let t=(0,i.wA)(),r=(0,p.Rs)(eK.kQI,{id:e.id}),s=!!r.data?.team?.hasPermission,[{data:n}]=(0,f.IT)((0,H.Xg)({teamId:e.id})),o=(n||[]).filter(e=>""!==e.name).length,l=(0,x.I7)("exp_fbg_project_limit_upsell");if(!(!e.subscription&&!e.org_id&&s&&o>=sx.Wf)||l.getConfig().getValue("show_upsell",!1))return null;let d=(0,a.jsx)(r6.Us,{onClick:()=>{t((0,tC.to)({type:aA.V,data:{teamId:e.id,upsellSource:aF.b.STARTER_TEAM_FOOTER}}))},trusted:!0,trackingProperties:{trackingDescriptor:em.c.UPGRADE_TO_A_PAID_PLAN},"data-testid":"starterTeamUpsellFooterUpgradeLink",children:(0,N.tx)("file_browser.starter_team.upgrade_link")});return(0,a.jsx)(r2.fu,{name:"Starter Team Upsell Footer",children:(0,a.jsx)("div",{className:U()(I.s.flex.p32.mt16.bRadius6.justifyCenter.colorBorder.$,"starter_team_upsell_footer--borderStyle--pM4nA"),"data-testid":"starterTeamUpsellFooter",children:(0,a.jsxs)("div",{className:U()(I.s.flex.flexColumn.itemsCenter.lh24.$,"starter_team_upsell_footer--contentWrapper--H-soB"),children:[(0,a.jsx)("strong",{children:o===sx.Wf?(0,N.tx)("file_browser.starter_team.project_limit_warning",{maxProjects:sx.Wf}):(0,N.tx)("file_browser.starter_team.project_limit_warning_over_max_projects")}),(0,a.jsx)("p",{className:I.s.alignCenter.$,children:(0,N.tx)("file_browser.starter_team.project_limit_info",{upgradeLink:d})})]})})})}function hv(e){let t=(0,i.wA)(),r=s.useRef(null),n=(0,i.d4)(({dropdownShown:e})=>e),o=e.team.org_id??null,l=(0,Z.Q)({currentOrgId:o,currentTeamId:null}),d=s.useMemo(()=>{if("loaded"===l.status)return(0,z.T0)(l.data,e.team.id)},[l,e.team.id]);if("loaded"!==l.status)return(0,a.jsx)("div",{className:I.s.flex.itemsCenter.colorIcon.$,children:(0,a.jsx)(t0.B,{svg:pz.A})});let c=(0,z.gV)(l.data,o),u=e.dropdownKey&&n&&n.type===e.dropdownKey&&n.data&&n.data.targetRect,m=r.current&&n?.data?.targetRef===r.current&&n?.type===to.jU,_=r.current,p=[];return e.showInvite&&p.push((0,a.jsx)(nb.c$,{children:(0,N.tx)("file_browser.team.invite"),onClick:e.onInviteClick},"import")),p.push((0,a.jsx)(nb.c$,{children:(0,N.tx)("file_browser.team.view_members"),onClick:t=>e.onMembersClick(t)},"share")),p.push((0,a.jsx)(nb.c$,{children:(0,a.jsxs)("div",{className:I.s.flex.justifyBetween.itemsCenter.w150.$,children:[(0,N.tx)("favorited_resources.add_to_sidebar"),(0,a.jsx)(t0.B,{svg:pH.A})]}),onClick:a=>{a.stopPropagation(),r.current&&t(eR.j7({type:to.jU,data:{targetRect:_.getBoundingClientRect(),targetRef:_,resourceId:e.team.id}}))}},"add-to-favorites-section")),(0,a.jsxs)("span",{children:[(0,a.jsx)(sN.E,{className:U()(I.s.flex.itemsCenter.colorIcon.$,pV.HM),ref:r,onClick:r=>{e.dropdownKey&&_&&t(eR.j7({type:e.dropdownKey,data:{targetRect:_?.getBoundingClientRect()}}))},children:(0,a.jsx)(tJ.J,{})}),u&&(0,a.jsx)(pG.Cf,{targetRect:n.data.targetRect,minWidth:172,maxWidth:172,propagateCloseClick:!0,children:p}),m&&(0,a.jsx)(p$.t,{setFavorite:e.setFavorite,resourceId:e.team.id,resourceType:eM.bk.TEAM,favoriteId:d?.id,orgId:o,sections:(l.data?.currentUser?.userSidebarSections?(0,ea.oA)(l.data.currentUser.userSidebarSections):null)??[],userHasMaxFavorites:c,customSectionOrdering:l.data.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[]})]})}var hy=r(143832),hw=r(101188),hj=r(411990),hT=r(315794),hE=r(14223),hI=r(609392),hN=r(55043),hC=r(405965),hS=r(80578),hk=r(332447),hR=r(869776),hA=r(334833),hO=r(612716);let hF=(0,tE.Ju)(function({teamId:e,trackingProperties:t,hasSecondaryBtn:r=!0}){let n=(0,s.useMemo)(()=>(0,hA.To)(),[]),o=(0,i.wA)(),l=()=>{o(tC.Ce())},d=r?(0,a.jsx)(mL.V,{onClick:()=>{u.Ay.redirect("/pricing","_blank")},children:(0,N.t)("pro_onboarding.pro_feature_modal.compare_plans")}):null;return(0,a.jsx)(r2.fu,{name:"Pro Features Modal",properties:t??hk.S.getTrackingProperties(e),children:(0,a.jsx)(hO.n,{...n,dismissModal:l,clickPrimaryBtn:l,secondaryBtn:d,showPricing:!1,panelTitleSize:hO.I.LARGE,cardsClickable:!0})})},"ProFeaturesModal");var hP=r(53111);let hL=e=>({tileSortFilterConfig:e.team,sortKeys:[oi.C0.NAME,oi.C0.TOUCHED_AT]}),hD=(e,t,r)=>{let s=(0,uh.xx)(hL)(t);return[(0,a.jsx)(sz.mc,{dispatch:e,options:s,selectedView:r},0),(0,a.jsx)(sz.$c,{initialViewMode:s.tileSortFilterConfig.viewMode,onViewModeChange:t=>{(0,av.sx)("team folder view toggle",{viewType:t===oi.XU.GRID?"grid":"list"}),e(eS.JF({selectedView:r,config:{...s.tileSortFilterConfig,viewMode:t}}))}},1)]};function hM(){let e=(0,i.wA)(),t=(0,eA._6)(),r=hD(e,(0,i.d4)(e=>e.tileSortFilterStateByView),t);return(0,a.jsx)(sz.g2,{leftSide:null,rightSide:r})}function hB(e){let{team:t,orgTeamActionType:r}=e;switch(r){case iP.gO.CLICK_JOIN:case iP.gO.BYPASS_REQUEST:return(0,a.jsxs)(a.Fragment,{children:[(0,N.tx)("file_browser.team.no_permissions_message",{teamName:t.name}),(0,a.jsx)("br",{}),(0,N.tx)("file_browser.team.please_join_team")]});case iP.gO.CLICK_REQUEST:return(0,a.jsxs)(a.Fragment,{children:[(0,N.tx)("file_browser.team.no_permissions_message",{teamName:t.name}),(0,a.jsx)("br",{}),(0,N.tx)("file_browser.team.please_request_to_join_team")]});case iP.gO.CLICK_WITHDRAW:return(0,N.tx)("file_browser.team.request_to_join_team_is_pending",{teamName:t.name});default:return(0,N.tx)("file_browser.team.no_permissions_message",{teamName:t.name})}}function hU({team:e}){let t=(0,i.d4)(e=>e.currentUserOrgId),r=(0,i.d4)(e=>(0,s9.getPermissionsStateMemoized)(e)),s=(0,i.d4)(t=>t.teamRoleRequests[e.id]),n=(0,eY.D6)("TeamNonMemberJoinView"),o=(0,i2.MF)({oldValue:sm.Qw.loaded((0,s9.canAdminOrg)(t,r)),newValue:(0,eY.j_)(n),enableFullRead:(0,uV.DQ)(uV.Pw.GROUP_7),label:i2.A5.TeamNonMemberJoinView.canAdminOrg}).unwrapOr(!1),l=(0,iP.YP)(e,s,r,o),d=(0,i.wA)(),c=(0,a.jsxs)("div",{className:"team_page_view--nonMemberViewContainer--uleTt","data-testid":"non-member-join-content",children:[(0,a.jsxs)("div",{className:"team_page_view--header--sTxh6",children:[(0,a.jsx)(t4.nl,{team:e,size:t4.Pf.LARGE}),(0,a.jsx)("span",{className:"team_page_view--teamName--9MXYi text--fontPos18--rYXJb text--_fontBase--QdLsd",children:e.name})]}),(0,a.jsx)("div",{className:"team_page_view--joinOptionText--McFNQ text--fontPos14--OL9Hp text--_fontBase--QdLsd",children:(0,a.jsx)(hB,{team:e,orgTeamActionType:l})}),(0,a.jsx)("div",{className:"team_page_view--joinButton--waTM-",children:(0,a.jsx)(hT.m3,{team:e,onJoin:(0,fi.GR)(d,e.id),onLeave:()=>{d(tC.to({type:iB.p,data:{teamId:e.id}}))},isCardActive:!1})})]});return(0,a.jsx)(iY.r,{content:c})}function hW({teamId:e,selectedTab:t,upgradeModalType:r,showProOnboardingModal:n,showResourceConnectionInviteModal:o}){let l=(0,s_.R)(t=>t.teams[e]),d=(0,i.d4)(e=>e.currentUserOrgId),c=(0,i.d4)(e=>l&&l.org_id&&e.orgById[l.org_id]||null),u=(0,i.d4)(e=>e.loadingState),_=(0,i.wA)(),f=(0,eA._6)(),[g,h]=s.useState(!1);(0,h_.r)(e);let x=(0,hS.Z)(o),b=(0,hN.t)(x,o);s.useEffect(()=>{o&&b()},[o,b]);let v=(0,sb.Sh)(e).transform(e=>e.tier===eM.Ag.PRO||e.tier===eM.Ag.STUDENT).unwrapOr(!1);(0,p.Rs)(eK.yQw,{teamId:e});let y=(0,hC.dr)(e),w="loaded"===y.status,j=y.data,T={canAdminOrg:!!j?.canAdminOrg,canAdminTeam:!!j?.canAdmin,canEditTeam:!!j?.canEdit,canReadTeam:!!j?.canRead,canDeleteTeam:!!j?.canDelete,isInTeam:!!j?.isInTeam};(0,m.h)(()=>{let e=(0,hI.QL)("team_role_redemption");if(e&&parseInt(e)in mU.e6){let e=(0,hR.VE)();e&&_(tl.F.enqueue({message:e})),(0,hI.EM)("team_role_redemption")}}),s.useEffect(()=>{let e=hE.um.loadingKeyForPayload();(0,sh.VP)(u,e)||(0,sh.D2)(u,e)||_(hE.um())},[_,u]),s.useEffect(()=>{d&&_((0,pX.Rw)())},[_,d]),s.useEffect(()=>{if(l)h(!1);else{let t=fi.HD.loadingKeyForPayload({teamId:e}),r=`TEAM_GET_ACTION_${e}`;d&&!u[t]?_(fi.HD({teamId:e,disableFlashError:!0})):(0,sh.VP)(u,t)||(0,sh.VP)(u,r)||h(!0)}},[_,u,l,e,d]),s.useEffect(()=>{if(!l||l.org_id)return;let e=_X.m$.loadingKeyForPayload({teamId:l.id});if((0,sh.VP)(u,e)||(0,sh.D2)(u,e)||_(_X.m$({teamId:l.id})),t===eJ.A$.BILLING){(0,i2.HZ)({label:i2.A5.TeamPageView.selectTeamViewBillingTab,oldValue:!1,newValue:!0,maxReports:5});let e=sr.Be.loadingKeyForPayload({teamId:l.id});(0,sh.D2)(u,e)||(0,sh.VP)(u,e)||_(sr.Be({teamId:l.id}))}else if(t===eJ.A$.MEMBERS){let e=_X.m$.loadingKeyForPayload({teamId:l.id});(0,sh.VP)(u,e)||(0,sh.D2)(u,e)||_(_X.m$({teamId:l.id}))}else if(t===eJ.A$.SETTINGS){let e=sr.Be.loadingKeyForPayload({teamId:l.id});T.canAdminTeam&&v&&!(0,sh.VP)(u,e)&&!(0,sh.D2)(u,e)&&_(sr.Be({teamId:l.id}))}},[_,t,u,l,c,v,T.canAdminTeam]);let E=(0,J.Pc)(),I=(0,p.Rs)(eK.Cit,{teamId:e}),C=I.data?.team?.currentTeamUser,S=(0,p2.R)();s.useEffect(()=>{let e;if(!(l&&E&&C&&r)||!v)return;let a=r===eM.G_.WHITEBOARD?eM._Y.WHITEBOARD:eM._Y.DESIGN;a===eM._Y.DESIGN?e=C.designAccountTypeRequest?.status==="pending":a===eM._Y.WHITEBOARD&&(e=C.whiteboardAccountTypeRequest?.status==="pending"),!0===e&&_(aY.s.flash((0,N.t)("team_view.request_upgrade.request_already_sent"))),_(eR.sf({view:"team",teamId:l.id,teamViewTab:t}))},[_,l,E,C,r,v,t,S]),(0,m.h)(()=>{n&&_(tC.to({type:hP.C,data:{teamId:e}}))});let k=s.useRef(!1);s.useEffect(()=>{!k.current&&"team"===f.view&&f.assetTransferRequestId&&_(tC.to({type:(0,hp.S)(),data:{selectedAssetTransferRequest:f.assetTransferRequestId}})),k.current=!0});let R=g||!T.canReadTeam&&!d;return w?R?(0,a.jsx)(ne.S,{resourceType:it.Ft.TEAM}):l?T.canReadTeam?(0,a.jsx)(h$,{team:l,lgTeamPermissions:T,org:c,user:E,selectedTab:t}):(0,a.jsx)(hU,{team:l}):null:(0,a.jsx)(ei.qc,{})}function h$({team:e,lgTeamPermissions:t,org:r,user:o,selectedTab:l}){let d;let{canAdminOrg:c,canAdminTeam:u,canEditTeam:m,canReadTeam:_,isInTeam:p,canDeleteTeam:h}=t,[{status:x,data:b}]=(0,f.IT)((0,H.Xg)({teamId:e?.id}),{revalidateOnMount:!0}),v="loaded"===x,y=e.id,w=(0,eI.vt)(y),j=(0,eE.R)(y),T=(0,eE.jn)(),E=(0,i.d4)(e=>e.teamBilling),C=(0,i.wA)(),S=(0,eA._6)(),k=s.useCallback(t=>{let r={view:"team",teamId:e?e.id:"",teamViewTab:t};C(eR.sf(r))},[C,e]),R=(0,i.d4)(e=>e.avatarEditorState),A=(0,i.d4)(e=>e.teamRoleRequests),O=s.useMemo(()=>{if(e&&_)switch(e.org_access){case eM.bU.PRIVATE:return(0,N.t)("file_browser.team_header.closed_team_header");case eM.bU.SECRET:return(0,N.t)("file_browser.team_header.secret_team_header")}},[e,_]),F=s.useMemo(()=>{if(e&&_){if(e.org_access===eM.bU.PRIVATE)return(0,N.t)("file_browser.team_header.closed_team_subtitle");if(e.org_access===eM.bU.SECRET)return(0,N.t)("file_browser.team_header.secret_team_subtitle")}},[e,_]),P=s.useCallback((t,r,a)=>{if(e){let s={team:e,entrypoint:"team_page_view",sectionId:a,favoriteId:r};t?C(eF.DN(s)):C(eF.ox(s))}},[C,e]),L=()=>{C((0,H.SX)({where:rc.Ah.FolderListView,team:{...e,canEdit:!!t.canEditTeam}}))},D=()=>{C(eR.oB()),G(),k(eJ.A$.SETTINGS)},M=(0,hj.s)(),B=s.useCallback(()=>{M({teamId:y,canAdmin:t.canAdminTeam})},[M,y,t.canAdminTeam]),U=e?{team:e,billing:E,teamId:e.id}:void 0,W={view:"team",teamId:y,teamViewTab:eJ.A$.HOME},$=(0,hf.n)(hy.am.MEMBERS,U,!!t.canAdminTeam,!!t.canEditTeam,!!t.canReadTeam,W),G=(0,hf.n)(hy.am.SETTINGS,U,!!t.canAdminTeam,!!t.canEditTeam,!!t.canReadTeam,W);s.useEffect(()=>{l===eJ.A$.MEMBERS?$():l===eJ.A$.SETTINGS&&G()},[]),(0,g.kF)("Team"),(0,g.WX)({markName:"MainBodyContent",isLoaded:v,contextArgs:{numFolders:b?.length??null}}),d=e.org_id?v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(mj,{canAdminTeam:u,canEditTeamContents:m,folderList:b||[],isEligbileForProTeamLockedRevampUI:j,onCreateNewFolder:L,selectedView:S,team:e,teamId:y,viewId:`team-${y}`}),(0,a.jsx)(cK.cx,{})]}):(0,a.jsx)(ei.qc,{}):(0,a.jsx)(a.Fragment,{children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(mj,{canAdminTeam:u,canEditTeamContents:m,folderList:b||[],isEligbileForProTeamLockedRevampUI:j,onCreateNewFolder:L,selectedView:S,team:e,teamId:y,viewId:`team-${y}`}),(0,a.jsx)(cK.cx,{})]}):(0,a.jsx)(ei.qc,{})});let V=t.canAdminTeam?(0,a.jsx)(nm.FL,{entity:e,entityType:nu.ck.TEAM,avatarEditorState:R,size:40,dispatch:C,avatarSvg:rj.A,svgSizeRatio:.6}):(0,a.jsx)(t4.nl,{team:e,size:40,avatarSvg:rj.A,svgSizeRatio:.6}),z=!_,K=(0,hw.F)(),Y=(()=>{if(z)return;let t=K({onChangeTeamIconClick:()=>{C((0,n_.o)({team:e}))},onRenameClick:()=>{C(tC.to({type:(0,hg.h)(),data:{team:e}}))},selectedTeamPermissions:{canAdmin:u,canAdminOrg:c,canDelete:h,canView:_,isInTeam:p},team:e}),a=[];return(U&&(m&&(r||a.push({displayText:(0,N.t)("teams_table.view_team_members"),onClick:$}),a.push({displayText:(0,N.t)("team_view.settings.view_settings"),onClick:D})),r&&a.push({displayText:(0,N.t)("teams_table.view_team_members"),onClick:$})),a.length>0)?[{key:"team-page-header-menu-items",items:a},...t]:t})(),q=Y?{kind:iz.A.CUSTOM,key:iZ.DROPDOWN,element:(0,a.jsx)(no,{buttonAriaLabel:(0,N.t)("team_view.page_header_dropdown_label"),dropdownKey:`team-${e.id}`,menuGroups:Y})}:void 0,J=e.pro_team,X=e.student_team?(0,a.jsx)(hx,{}):(0,sx.w5)(e)?void 0:(0,a.jsx)(hb,{team:e});return(0,a.jsx)(iY.r,{content:(0,a.jsxs)(a.Fragment,{children:[d,X]}),viewbar:(0,a.jsx)(hM,{}),banner:(0,a.jsx)(_4,{teamId:y,selectedTab:l}),header:(0,a.jsx)(iK,{avatar:V,title:e.name,rightSideActions:function(e,t,r,s,i,o,l,d,c){let u=[],m=!!Object.keys(o).includes(e.id)&&o[e.id]?.status===pZ.c.PENDING,_=i.canAdminTeam&&!i.isInTeam,p={kind:iz.A.CUSTOM,key:iZ.FAVORITE,element:(0,a.jsx)(nc.i,{setFavorite:s,favoriteType:eM.bk.TEAM,resourceId:e.id,orgId:e.org_id,size:"lg"})};_&&u.push({kind:iz.A.CUSTOM,key:iZ.JOIN_TEAM,element:(0,a.jsx)(el.c,{variant:"secondary",onClick:(0,fi.GR)(t,e.id,mU.e6.ADMIN),children:(0,N.t)("file_browser.team.join_team")})});let f=c?r8.Ib.TEXT:void 0,g=c?(0,N.t)("locked_team.label.tooltip"):void 0;i.canEditTeam&&!(0,eT.R$)(r,e.org_id)?u.push({kind:iz.A.CUSTOM,key:iZ.NEW_PROJECT,element:(0,a.jsx)("div",{"data-tooltip":g,"data-tooltip-type":f,children:(0,a.jsx)(el.c,{"data-onboarding-key":"team-view-new-project-cta","data-testid":"team-view-new-project-cta",variant:"primary",disabled:c,"aria-label":(0,N.t)("project_creation.create_project"),iconPrefix:(0,a.jsx)(tX.x,{}),onClick:()=>{t((0,H.SX)({team:{...e,canEdit:i.canEditTeam},where:rc.Ah.FolderListView}))},children:(0,N.tx)("file_browser.team.add_project")})}),showOnMobile:!0}):!e.org_id||e.org_access===eM.bU.SECRET||_||i.canAdminTeam||u.push({kind:iz.A.CUSTOM,key:iZ.REQUEST_TO_EDIT,element:(0,a.jsx)(el.c,{variant:"primary",onClick:()=>{m?t(pq.lT({requestId:o[e.id]?.id})):t(tC.to({type:p1.$,data:{team:e,requesterCurrentLevel:mU.e6.VIEWER}}))},children:m?(0,N.t)("file_browser.team.cancel_request"):(0,N.t)("file_browser.team.request_to_edit")})}),u.push({kind:iz.A.CUSTOM,key:iZ.INVITE,element:(0,a.jsx)(el.c,{variant:"secondary",onClick:c?n.lQ:d,disabled:c,htmlAttributes:{"data-tooltip":g,"data-tooltip-type":f},children:(0,N.t)("file_browser.team.share")})}),e.org_id&&u.push(p);let h=(0,a.jsx)(hv,{dropdownKey:"team-overflow-dropdown",team:e,showInvite:!0,onInviteClick:d,onMembersClick:l,setFavorite:s});return u.push({kind:iz.A.CUSTOM,key:iZ.TEAM_OVERFLOW_MENU,showOnMobile:!0,hideOnDesktop:!0,element:h}),u}(e,C,o,P,t,A,e=>{e.stopPropagation(),C(eR.oB()),$(),k(eJ.A$.MEMBERS)},B,!!y&&w||T),rightSideOfTitleAction:q,pageHeaderIcon:void 0,badge:(0,a.jsxs)(uk.Y,{direction:"horizontal",children:[O?(0,a.jsx)("div",{className:I.s.ml4.mr4.$,"data-tooltip-type":r8.Ib.TEXT,"data-tooltip":O,"data-tooltip-offset-y":-4,"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200,"data-tooltip-subtext":F,children:(0,a.jsx)(na.$,{})}):void 0,J?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r2.fu,{name:r1._Y.PROFESSIONAL,properties:hk.S.getTrackingProperties(y),children:(0,a.jsx)(r2.$z,{type:"button",onClick:()=>{C(tC.to({type:hF,data:{teamId:e.id}}))},className:"team_page_view--pointerOnHover--at7fp",children:(0,a.jsx)(r1.Ex,{color:r1.zE.INFORMATIONAL,text:(0,N.t)("pro_onboarding.professional"),size:r1.vj.EXTRA_LARGE})})})}):void 0]})})})}var hG=r(931050),hV=r(211326),hz=r(520829),hH=r(661371),hK=r(559491),hY=r(881732),hq=r(672951),hJ=r(643789),hX=r(538504),hQ=r(258075);let hZ={ctrlKey:"metaKey"};function h0(e,t={}){let r=(0,i.wA)(),a=(0,i.Pj)(),n=s.useMemo(()=>({metaKey:e=>{let t=(0,uH.xS)(a.getState(),e);r(T.V3({url:t}))},...t}),[t,r,a]);return s.useCallback((t,a)=>{let s=e(a),i=Object.keys(n).find(e=>t[e]);if(i){let e=n[h.Ay.mac?i:hZ[i]||i];if(e){t.preventDefault(),e(s);return}}r(eR.sf(s))},[n,r,e])}var h1=r(24841),h4=r(124168),h2=r(834238);let h8="org_user_meta_content--teamsHeader--1p4jT org_user_meta_content--sectionHeader--snmkw text--fontPos13--xW8hS text--_fontBase--QdLsd";function h5(e){let t=(0,i.wA)(),r=(0,J.iZ)(),s=(0,h4.w)(e.user),n=(0,i.d4)(t=>t.currentUserOrgId===e.orgId),o=()=>{t((0,tC.to)({type:h2.u}))};return(0,a.jsx)("div",{className:I.s.flex.flexColumn.ml16.hFull.$,children:(0,a.jsx)(hV.x,{isLoading:e.isLoading,children:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"org_user_meta_content--userData--NrFpt",children:[(0,a.jsx)(t4.H8,{user:e.user,size:t4.Pf.LARGE}),(0,a.jsx)("div",{className:"org_user_meta_content--userName--JeBfv text--fontPos18--rYXJb text--_fontBase--QdLsd",children:e.title}),e.user.profile?.job_title&&(0,a.jsxs)("div",{className:"org_user_meta_content--jobTitle--bWmsS text--fontPos11--2LvXf text--_fontBase--QdLsd",children:[(0,a.jsx)(r1.Ex,{color:r1.zE.INVERT,text:(0,hX.lb)(e.user.profile?.job_title)}),e.userId===r?.id&&(0,a.jsx)("span",{className:"org_user_meta_content--blueLink--u44PB blue_link--blueLink--9rlnd",role:"button",tabIndex:0,onClick:o,children:(0,N.tx)("internal_profile.change_job_title")})]}),e.user.email&&(0,a.jsx)("div",{className:"org_user_meta_content--email--tgx7t text--fontPos13--xW8hS text--_fontBase--QdLsd",children:e.user.email}),(e.description||!e.isReadOnly)&&(0,a.jsx)(hQ.TI,{value:e.description??"",placeholder:(0,N.t)("internal_profile.add_a_description"),submit:e.submitDescription,formatter:hQ.qU,readOnly:e.isReadOnly,className:"org_user_meta_content--description--gYuxd text--fontPos13--xW8hS text--_fontBase--QdLsd"})]}),s&&e.user?.id===r?.id&&(0,a.jsx)(xe,{user:e.user}),n&&(0,a.jsxs)(en.P,{className:I.s.flexShrink1.bt1.bSolid.colorBorder.$,innerClassName:I.s.p16.borderBox.flex.flexColumn.$,children:[(0,a.jsx)("div",{className:h8,children:(0,N.tx)("internal_profile.teams")}),(0,a.jsx)(xt,{userId:e.userId,orgId:e.orgId}),(0,a.jsx)("div",{className:h8,children:(0,N.tx)("internal_profile.recent_projects")}),(0,a.jsx)(h7,{files:e.recents,isYourProfile:!e.isReadOnly})]})]})})})}function h6(e){let t=(0,J.iZ)(),r=(0,i.wA)();return(0,a.jsx)(h5,{submitDescription:t=>{r(h1.yJ({user:{id:e.userId,description:t},userInitiated:!0}))},isLoading:!e.user,isReadOnly:!t||t.id!==e.userId,description:e.user.description??null,title:e.user.name??e.user.handle??null,userId:e.userId,user:e.user,recents:e.recents,orgId:e.orgId})}function h3(e){let t=(0,i.wA)(),r=(0,J.iZ)();return(0,a.jsx)(h5,{isLoading:!e.user||!e.orgUser||!e.org,isReadOnly:!r||r.id!==e.userId,description:(e.orgId&&e.orgUser?e.orgUser.description:e.user.description)??null,title:e.user&&e.org?(0,N.t)("internal_profile.title",{userName:e.user.handle,orgName:e.org.name}):null,recents:e.recents,submitDescription:r=>{e.orgId&&e.orgUser&&t(fn.yJ({orgUser:{id:e.orgUser.id,org_id:e.orgId,description:r},userInitiated:!0}))},user:e.user,userId:e.userId,orgId:e.orgId})}function h7(e){let t=h0(e=>({view:"folder",folderId:e})),r=(0,s.useMemo)(()=>{let t=new Set;for(let r of e.files.status===hz.r.SUCCESS?e.files.value:[])r.folder_id&&t.add(r.folder_id);return Array.from(t).slice(0,10)},[e.files]),i=(0,hq.Cm)(r,e.files.status===hz.r.SUCCESS&&!!e.files.value),n=s.useMemo(()=>{if(e.files.status!==hz.r.SUCCESS||"loading"===i.status)return[];let t=[],a=[];if(!e.files)return t;let s=new Set;for(let n of e.files.value){let e=n.folder_id;if(!e||s.has(e)||!r.includes(e)||(s.add(e),""===n.folder_name||null==n.folder_name))continue;let o=!!i?.data?.[e],l={id:e,name:n.folder_name,teamName:n.team_name,canView:o};if(l.canView?t.push(l):a.push(l),t.length+a.length>=5)break}return t.concat(a)},[e.files,i,r]);return(0,a.jsx)(hV.x,{isLoading:e.files.status===hz.r.LOADING||"loading"===i.status,children:()=>(0,a.jsxs)("div",{children:[0===n.length&&(0,a.jsx)("div",{className:"org_user_meta_content--projectEmptyState--zusT6 text--fontPos11--2LvXf text--_fontBase--QdLsd",children:e.isYourProfile?(0,N.t)("internal_profile.your_recent_projects_will_appear_here"):(0,N.t)("internal_profile.their_recent_projects_will_appear_here")}),n.map(e=>(0,a.jsx)("div",{onClick:e.canView?r=>t(r,e.id):void 0,className:e.canView?"org_user_meta_content--project--t-Nos org_user_meta_content--projectBase--ofeuj text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa":"org_user_meta_content--dimProject--a1lrh org_user_meta_content--dim--aNVfK org_user_meta_content--projectBase--ofeuj text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",children:(0,a.jsx)("span",{"data-tooltip-type":r8.Ib.TEXT,"data-tooltip":e.canView?void 0:(0,N.t)("internal_profile.you_must_be_a_member_of_team_name",{teamName:e.teamName}),children:e.name})},e.id))]})})}function h9(e){return(0,a.jsxs)("div",{className:"org_user_meta_content--userProfileNotification--qHv4P",children:[(0,a.jsx)("div",{className:"org_user_meta_content--userProfileNotificationTitle--lDm8h text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",children:e.title}),(0,a.jsx)("div",{className:"org_user_meta_content--userProfileNotificationText--H2ZHJ text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",children:e.text}),(0,a.jsx)("div",{className:"org_user_meta_content--userProfileNotificationAction--NQLlj",children:e.action})]})}function xe(e){let{profile:t}=e.user,r=(0,i.wA)();return(0,a.jsx)(a.Fragment,{children:t?.images?null:(0,a.jsx)(h9,{title:(0,N.t)("internal_profile.profile_image_nudge.title"),text:(0,N.t)("internal_profile.profile_image_nudge.text"),action:(0,a.jsx)(r6.N_,{trusted:!0,className:"org_user_meta_content--userProfileNotificationActionLink--sVVav",onClick:()=>{r((0,n_.X)({entity:e.user,entityType:nu.ck.CURRENT_USER,shape:"CIRCLE"})),(0,V.Cu)({trackingContext:r5.e0.FILE_BROWSER,context:"job_title",text:"Update Photo"})},children:(0,N.tx)("internal_profile.profile_image_nudge.action")})})})}let xt=(0,i.Ng)((e,t)=>({permissionState:e}))(function(e){let[t,r]=s.useState(null);s.useEffect(()=>{_h.k.getTeams({userId:e.userId,orgId:e.orgId||void 0}).then(e=>{r(e.data.meta)}).catch(e=>{console.error("Unable to load org user teams",e)})},[e.userId,e.orgId]);let i=(0,s.useMemo)(()=>(t||[]).slice(0,10),[t]),n=(0,hJ.GG)(i.map(e=>e.id),!!i),o=h0(e=>({view:"team",teamId:e.id})),l=(i||[]).sort((e,t)=>{let r=n.data?.[e.id],a=n.data?.[t.id];return r&&!a?-1:!r&&a?1:0}),d=!i||"loaded"!==n.status;return(0,a.jsx)(hV.x,{isLoading:d,children:()=>(0,a.jsxs)("div",{className:I.s.flex.flexColumn.gap8.$,children:[l.map(e=>{let t=n.data?.[e.id];return(0,a.jsx)(rV.rE,{entity:e,size:12,hideFallbackInitial:!0,onClick:t?o:void 0,className:`org_user_meta_content--teamListItem--gXcF- text--fontPos13--xW8hS text--_fontBase--QdLsd ${t?"":"org_user_meta_content--dim--aNVfK"}`,"data-tooltip-type":r8.Ib.TEXT,"data-tooltip":t?void 0:(0,N.t)("internal_profile.you_re_not_a_member_of_this_team"),"data-tooltip-offset-y":4},e.id)}),i&&0===i.length&&(0,N.tx)("internal_profile.no_teams_in_common"),t&&t.length>10&&(0,a.jsx)("div",{className:"org_user_meta_content--numOtherTeamsRow--aAVva",children:(0,N.tx)("internal_profile.N_other_teams",{numOtherTeams:t.length-10})})]})})});var xr=r(300692);function xa(e){let t=(0,xr.i8)(e.publishedPlugins),r=(0,xr.LH)((0,xr.ky)(t,e.userId),e.org),s=Object.keys(r).map(e=>r[e]),i=(0,tw.LN)(s);return 0===i.length?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"user_org_resources--sectionHeader--MUg1j internal_user_profile_page_view--sectionHeader--3NNNT text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,N.tx)("file_browser.settings.plugins_published",{orgName:e.org.name})}),(0,a.jsxs)("div",{className:"user_org_resources--container---l25- profile_resources_grid--_resourcesGridTemplateColumns--19JO6",children:[i.map(e=>(0,a.jsx)(pm.cS,{pluginId:e.id,showInstallCount:!0,viewContext:"UserOrgResources"},`plugin-${e.id}`)),(0,a.jsx)(pm.hT,{numResources:i.length})]})]})}function xs(e){let{org:t}=e,r=(0,i.d4)(r=>(t&&t.id&&r.orgUsersByOrgId[t.id]||{})[e.user.id]);return t?(0,a.jsx)(h3,{orgId:t.id,recents:e.recents,userId:e.user.id,user:e.user,org:t,orgUser:r}):(0,a.jsx)(h6,{orgId:null,recents:e.recents,userId:e.user.id,user:e.user})}let xi={showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicateToDrafts:!0,delete:!0,removeFromRecents:!1,createBranch:!0,publishOrgTemplate:!1,moveFile:!0,pinToWorkspace:!1},xn=e=>{let t=e.user.id,r=(0,i.wA)(),l=(0,i.d4)(e=>e.selectedView),d=e.orgUser&&e.orgUser.org_id,c=(0,i.d4)(e=>e.currentUserOrgId),u=void 0===d?c:d,m=(0,i.d4)(e=>u&&e.orgById[u]||null),_=(0,o.k)().xr_debounce_threshold&&m,f="user"===l.view?l.userViewTab:void 0;s.useEffect(()=>{r((0,tC.ES)({type:hY.E}))},[r,f]);let g=(0,i.d4)(e=>e.userFlags);s.useEffect(()=>{g.seen_profile||r(eP.b({seen_profile:!0}))},[r,g.seen_profile]);let h=(0,i.d4)(e=>e.tileSortFilterStateByView.user),x=s.useMemo(()=>({srcTileSortFilterConfig:{filters:{creator:oi.rJ.ANY,fileType:oi.t2.ANY},sort:{key:oi.C0.ACCESSED_AT,dir:oi.ue.DESC}},tileSortFilterConfig:h,sortKeys:[oi.C0.NAME,oi.C0.CREATED_AT,oi.C0.ACCESSED_AT]}),[h]),b=s.useMemo(()=>{let e=new URLSearchParams;return u&&e.append("org_id",u),`/api/user/${t}/recents${""===e.toString()?"":"?"}${e.toString()}`},[t,u]),[v,y]=s.useState([]),[w,j]=s.useState([]),[T,I]=s.useState(!0),[C,S]=s.useState(null),[k,R]=s.useState(0),[A,O]=s.useState(0),F=s.useCallback(e=>{S(e),r(tl.F.enqueue({message:(0,N.t)("internal_profile.an_error_occurred"),error:!0}))},[r]),{fetchNext:P,hasMore:L}=(0,hH.WQ)(b,F,55),D=s.useCallback(async()=>{if(!L)return;let e=async()=>{try{let e=await P();if(!Array.isArray(e))return;(0,o.k)().livegraph_user_profile_full_read||y(t=>[...t,...e])}catch(e){F(e)}};await e()},[P,F,L]),{data:M,status:B,errors:U}=(0,p.Rs)(eK.F8N,{action:"edit",userId:t,firstPageSize:55,sortOrder:"DESC"},{enabled:!!(0,o.k)().livegraph_user_profile_dark_read});s.useEffect(()=>{if(U?.length){F(U[0]);return}if("loaded"===B&&M.userPublic?.paginatedRecentFiles.status==="loaded"){let e=M.userPublic?.paginatedRecentFiles.data,t=[];for(let r of e||[])null===r.file||r.file.parentOrgId!==u||r.file.isDraftFile||null!==r.file.trashedAt||t.push(function(e){return{key:e.file.key,name:e.file.name,timestamp:e.actionAt.getTime()/1e3,editor_type:e.file.editorType,folder_name:e.file.project?.name||"",folder_id:e.file.folderId,team_id:e.file.teamId,team_name:e.file.team?.name||"",thumbnail_url:e.file.signedThumbnailUrl,client_meta:e.file.clientMeta,thumbnail_guid:e.file.thumbnailGuid||null,edit_url:e.file.editUrl,source_file_name:e.file.sourceFile?.name||null,has_file_link_password:!!e.file.hasFileLinkPassword,link_access:e.file.linkAccess}}(r));(0,o.k)().livegraph_user_profile_full_read&&y(t),j(t),t.length<55&&A<3&&e?.hasNextPage()&&!e?.isLoadingNextPage&&(e?.loadNext(55),O(e=>e+1),I(!1))}},[M,B,U,F,u,A]),s.useEffect(()=>{(async()=>{v.length<55&&k<3&&(await D(),R(e=>e+1),I(!1))})()},[k]),(0,i2.u8)({oldValue:v,newValue:w,label:i2.A5.InternalUserProfilePageView.InternalUserProfileViewInner,oldValueReady:v.length>=55||k>=3,newValueReady:M?.userPublic?.paginatedRecentFiles.status==="loaded"&&(w.length>=55||A>=3),enableShadowRead:!!(0,o.k)().livegraph_user_profile_dark_read,comparator:(0,i2.st)({ignore:e=>e.includes("handoff_url")||e.includes("timestamp")||e.includes("thumbnail_url")||e.includes("link_access")||e.includes("has_file_link_password")})});let W=s.useMemo(()=>v.filter(e=>{switch(h.filters.fileType){case oi.t2.ANY:return!0;case oi.t2.DESIGN:return"design"===e.editor_type;case oi.t2.FIGJAM:return"whiteboard"===e.editor_type;case oi.t2.PROTOTYPE:return!1;case oi.t2.SITES:return"sites"===e.editor_type;case oi.t2.SLIDES:return"slides"===e.editor_type;case oi.t2.COOPER:return"cooper"===e.editor_type;case oi.t2.MAKE:return"figmake"===e.editor_type;default:(0,E.xb)(h.filters.fileType)}}),[v,h]),$=s.useMemo(()=>C?{status:hz.r.FAILURE,error:C}:T?{status:hz.r.LOADING}:{status:hz.r.SUCCESS,value:W},[T,C,W]),G=(0,hG.J)(()=>m&&m.community_profile_id?r(hK.pZ({profileId:m.community_profile_id})):Promise.resolve([]),[r,m]),V="user"===l.view&&l.userViewTab===nP.o.INTERNAL_PROFILE_POSTS?nP.o.INTERNAL_PROFILE_POSTS:nP.o.INTERNAL_PROFILE,z=f===nP.o.INTERNAL_PROFILE?[(0,a.jsx)("div",{className:"internal_user_profile_page_view--hideFilterRightPadding--fd-Z-",children:(0,a.jsx)(sz.ye,{config:x.tileSortFilterConfig})},"sort-filter")]:[],[H,K,Y]=nS.t.useManagedTabs({[nP.o.INTERNAL_PROFILE]:!0,[nP.o.INTERNAL_PROFILE_POSTS]:!0},V,e=>{r(eR.sf({view:"user",userId:t,userViewTab:e}))}),q=(0,a.jsx)(sz.g2,{leftSide:_?(0,a.jsxs)(nS.t.TabStrip,{manager:Y,children:[(0,a.jsx)(nS.t.Tab,{...H[nP.o.INTERNAL_PROFILE],children:(0,N.t)("internal_profile.file_contributions")},nP.o.INTERNAL_PROFILE),(0,a.jsx)(nS.t.Tab,{...H[nP.o.INTERNAL_PROFILE_POSTS],children:(0,N.t)("internal_profile.posts")},nP.o.INTERNAL_PROFILE_POSTS)]}):(0,a.jsx)("div",{className:"internal_user_profile_page_view--sectionHeader--3NNNT text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,N.tx)("internal_profile.file_contributions")}),rightSide:z}),J=s.useCallback((e,t,a)=>{u8({tile:e,index:a,dispatch:r,selectedView:l,isListView:!1})},[l,r]),{showing:X,show:Q,data:Z}=(0,ot.L)(),ee=s.useCallback((e,t,r)=>{Q({data:{tile:e,targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:r}})},[Q]),et=s.useMemo(()=>$.status===hz.r.SUCCESS?$.value.map(e=>(function(e){let t={...e,name:e.source_file_name?e.source_file_name+": "+e.name:e.name,description:null,created_at:"",url:"",creator_id:"",deleted_at:null,trashed_at:null,trashed_user_id:null,has_proto_link_password:!1,license:null,proto_link_access:null,touched_at:new Date(1e3*e.timestamp).toString(),prototype_url:"",updated_at:"",file_repo_id:null,source_file_key:null,is_try_file:!1};return(0,ra.fA)(t)})(e)):[],[$]);return(0,r2.T8)((0,a.jsx)(iY.r,{scrollableContainerClass:"internal_user_profile_page_view--pageContainer--FQu11",containerClass:"internal_user_profile_page_view--pageContainerInner--2Ep2e",content:!e.userNotInPlan&&(0,a.jsxs)("div",{className:"internal_user_profile_page_view--content--X0lTp",children:[(0,a.jsx)("div",{className:"internal_user_profile_page_view--viewbar--eprew",children:q}),f===nP.o.INTERNAL_PROFILE&&(G.status===hz.r.SUCCESS&&$.status===hz.r.SUCCESS?(0,a.jsxs)(a.Fragment,{children:[m&&(0,a.jsx)(xa,{userId:t,org:m,publishedPlugins:G.value}),(0,a.jsxs)(en.P,{children:[(0,a.jsx)(uB.d,{items:et??[],handleOpenTile:J,handleOpenDropdown:ee,sortConfig:h.sort,viewType:oi.XU.GRID,gridContainerStyle:xl.grid,sortBy:n.lQ}),(()=>{let e=Z?.tile??null;return(0,a.jsx)(r2.fu,{name:r5.e0.TILES_VIEW_DROP_DOWN,enabled:X,properties:{tileType:e?.type,tileFileId:e?.type===ra.nb.FILE?e?.file.key:void 0},children:(0,a.jsx)(or.i,{tileActions:xi,selectedTiles:e?[e]:[],tile:e,openTile:()=>{e?.type===ra.nb.FILE&&(0,rt.Tq)(r,e.file)},dropdownVisible:X})})})()]})]}):(0,a.jsx)(ei.qc,{})),f===nP.o.INTERNAL_PROFILE_POSTS&&m&&(0,a.jsx)(ud,{currentOrgId:m.id,selectedUser:e.user})]}),metaContent:(0,a.jsx)(xs,{user:e.user,recents:$,org:m,orgUser:e.orgUser})}),r5.e0.USER_DETAILS,{view:"org_user",userId:t})};function xo(e){return(0,a.jsx)(xn,{user:e.user,orgUser:e.orgUser,userNotInPlan:e.userNotInPlan},e.user.id)}let xl={grid:{paddingRight:"x1m2p0i2",paddingLeft:"x163pfp",paddingInlineStart:null,paddingInlineEnd:null,paddingBottom:"x1gan7if",$$css:!0}},xd=(e,t,r)=>e&&e.id===r?Promise.resolve(e):_h.k.getUser({userId:r}).then(e=>e.data.meta).catch(e=>{throw t(aY.s.error("Failed to get user",5e3)),console.warn("Failed to get user files"),e}),xc=(e,t,r)=>r?e(fn.I1({orgId:r,userId:t,allowNoOrgUser:!0})):Promise.resolve(null),xu={[nP.o.INTERNAL_PROFILE]:{Component:xo},[nP.o.INTERNAL_PROFILE_POSTS]:{Component:xo},[nP.o.PLUGINS]:{Component:s.Fragment}};function xm(e){return(0,a.jsx)(e.component,{...e.context})}function x_(e){let t=(0,i.wA)(),r=(0,J.iZ)(),s=e.orgId,o=(0,i.d4)(e=>e.currentUserOrgId),l=void 0===s?o:s,d=(0,eY.T5)("UserPageView").unwrapOr(null),c=(0,hG.J)(()=>Promise.all([xd(r,t,e.userId),xc(t,e.userId,l)]).then(([r,a])=>(l&&!a&&t(tl.F.enqueue({type:"org_user_not_found",message:d?.name?(0,N.t)("org_user_actions.org_user_not_found",{userHandle:r.handle,planName:d.name}):(0,N.t)("org_user_actions.org_user_not_found_without_plan_name",{userHandle:r.handle}),error:!0,onDismiss:n.lQ})),(0,rt.hL)(r.handle),{userNotInPlan:!!(l&&!a),userId:e.userId,user:r,orgUser:a,profileHandle:r.community_profile_handle||null,on404Redirect:a?()=>{t(eR.sf({view:"user",userId:e.userId,orgId:l,userViewTab:nP.o.INTERNAL_PROFILE}))}:()=>{u.Ay.redirect("/404")}})),[t,r,l,e.userId,d]),{tab:m}=e;if(!m)return null;let{Component:_}=xu[m];return(0,a.jsx)(hV.x,{className:"user_page_view--loadingContainer--vr9Zb",state:c,failure:void 0,children:t=>(0,a.jsx)(xm,{component:_,tab:m,userId:e.userId,context:t})})}function xp({workspaceId:e}){let t=(0,Y.sZ)(),r=(0,X.P)(t.id,e);return"loaded"!==r.status?null:"Unassigned"===r.data?(0,a.jsx)(oL.A5,{children:(0,a.jsx)(xg,{org:t,workspaceId:e})}):(0,a.jsx)(oL.A5,{children:(0,a.jsx)(xf,{org:t,workspaceId:e,workspace:r.data})})}function xf({org:e,workspaceId:t,workspace:r}){let s=iv(r);return(0,a.jsx)(xg,{org:e,workspaceId:t,parentBackgroundColor:s})}function xg({org:e,workspaceId:t,parentBackgroundColor:r}){let s=(0,i.wA)();return(0,a.jsx)(oL.jT,{text:e.name,parentBackgroundColor:r,onClick:r=>{s(eR.sf({view:"org",orgId:e.id,orgViewTab:tF.X.HOME})),(0,V.Cu)({clickedResourceType:"org",clickedResourceId:e.id,currentResource:t,orgId:e.id})}})}function xh({showingFileBrowserLoader:e}){let t=(0,eA._6)();s.useEffect(()=>{(0,V.o5)(t)},[t]);let r=function(){let e=(0,i.wA)(),t=(0,J.Pc)(),r=(0,Y.dq)(),n=(0,eA._6)(),o=(0,sv.cD)(),l=(0,Y.sZ)(),d=(0,i.d4)(e=>e.search),c=function(){let e=eN({project:"drafts"});return s.useCallback(({from:t})=>e?[(0,a.jsx)(ga,{from:t},t)]:[],[e])}();switch(n.view){case"resourceHub":if(!(0,oD.yl)())return null;return{pageHeaderContent:(0,a.jsx)(cG,{}),pageContent:(0,a.jsx)(cU,{})};case"deletedFiles":return{pageHeaderContent:(0,N.t)("file_browser.tool_bar.trash"),pageContent:(0,r2.T8)((0,a.jsx)(mI,{selectedTab:mE.FILES},"trashed"),r5.e0.FILE_BROWSER,{view:"trashed"})};case"litmus":if(!(0,cz.OF)())return null;switch(n.subView){case"projects":return{pageHeaderContent:"Litmus",pageContent:(0,a.jsx)(cV.AJ,{})};case"feed":return{pageHeaderContent:"Litmus",pageContent:(0,a.jsx)(cV.YA,{})}}case"trashedFolders":return{pageHeaderContent:(0,N.t)("file_browser.tool_bar.trash"),pageContent:(0,r2.T8)((0,a.jsx)(mI,{selectedTab:mE.FOLDERS},"trashed"),r5.e0.FILE_BROWSER,{view:"trashed"})};case"draftsToMove":return{pageHeaderContent:(0,N.t)("file_browser.tool_bar.drafts_to_move"),pageContent:(0,a.jsx)(_$,{},"draftsToMove")};case"folder":if(n.folderId===t?.drafts_folder_id)return{pageHeaderContent:(0,N.t)("file_browser.tool_bar.drafts"),pageHeaderActions:c({from:aw.f6.FILE_BROWSER_TOPBAR_DRAFTS}),pageContent:(0,r2.T8)((0,a.jsx)(__,{folderId:n.folderId,userId:t.id},"drafts"),r5.e0.FILE_BROWSER_DRAFTS,{orgId:r,teamId:o})};return{pageContent:(0,r2.T8)((0,a.jsx)(fe,{folderId:n.folderId},`folder-${n.folderId}`),r5.e0.FOLDER_PAGE,{orgId:r,teamId:o,folderId:n.folderId}),pageHeaderContent:(0,a.jsx)(_q,{folderId:n.folderId}),pageHeaderDividerHidden:!0};case"workspace":switch(n.subView){case te.V0.ADMIN:return{pageHeaderContent:(0,a.jsx)(xp,{workspaceId:n.workspaceId}),pageHeaderDividerHidden:!0,pageContent:(0,r2.T8)((0,a.jsx)(R.y$,{workspaceId:n.workspaceId,selectedTab:n.selectedTab}),r5.e0.WORKSPACE_ADMIN_SETTINGS_PAGE,{workspaceId:n.workspaceId,workspaceViewTab:n.selectedTab})};case te.V0.DIRECTORY:return{pageHeaderContent:(0,a.jsx)(xp,{workspaceId:n.workspaceId??null}),pageHeaderDividerHidden:!0,pageContent:(0,r2.T8)(n.workspaceId?(0,a.jsx)(oF,{workspaceId:n.workspaceId},n.workspaceId):(0,a.jsx)(i4,{}),r5.e0.WORKSPACE_DIRECTORY_PAGE,{workspaceId:n.workspaceId,workspaceGroupViewTab:n.selectedTab})};default:(0,E.xb)(n)}case"licenseGroup":if(n.subView===e9.GN.ADMIN)return{pageContent:(0,r2.T8)((0,a.jsx)(R.VY,{licenseGroupId:n.licenseGroupId,selectedTab:n.selectedTab}),r5.e0.LICENSE_GROUP_ADMIN_SETTINGS_PAGE,{licenseGroupId:n.licenseGroupId,licenseGroupViewTab:n.selectedTab})};(0,E.xb)(n);case"org":return{pageHeaderContent:l?(0,a.jsx)(ad,{}):void 0,pageHeaderActions:[(0,a.jsx)(fs,{orgId:n.orgId},"org-page-header-actions")],pageContent:(0,r2.T8)((0,a.jsx)(fB,{orgId:n.orgId,selectedTab:n.orgViewTab}),r5.e0.ORG_PAGE,{orgId:n.orgId,orgViewTab:(n.orgViewTab===tF.X.HOME?"HOME":n.orgViewTab)||""})};case"orgAdminSettings":let u=(0,S.aO)(n.orgAdminSettingsViewTab,n.orgAdminSettingsViewSecondaryTab,{showResourceConnectionInviteModal:!!n.showResourceConnectionInviteModal,showResourceConnectionFlyout:!!n.showResourceConnectionFlyout});return{pageContent:(0,r2.T8)((0,a.jsx)(R.vW,{selectedTab:n.orgAdminSettingsViewTab,selectedSecondaryTab:u,selectedExtensionId:n.selectedExtensionId,selectedWorkspaceId:n.selectedWorkspaceId,showResourceConnectionInviteModal:n.showResourceConnectionInviteModal,showResourceConnectionFlyout:n.showResourceConnectionFlyout}),r5.e0.ORG_ADMIN_SETTINGS_PAGE,{orgId:r,orgViewTab:n.orgAdminSettingsViewTab,source:n.orgAdminSettingsViewTab||"dashboard",orgViewSecondaryTab:u})};case"abandonedDraftFiles":return{pageContent:(0,r2.T8)((0,a.jsx)(R.dZ,{abandonedDraftFolderId:n.abandonedDraftFolderId,planType:n.adminPlanType,planId:n.planId}),r5.e0.ABANDONED_DRAFTS_PAGE,n.adminPlanType===oB.O.ORG?{orgId:n.planId}:{teamId:n.planId})};case"orgDomainManagement":let m=(0,a.jsxs)(oL.A5,{children:[(0,a.jsx)(oL.J5,{text:(0,N.t)("general.admin"),onClick:()=>{e(eR.sf({view:"orgAdminSettings",orgAdminSettingsViewTab:eq.J7.DASHBOARD}))},hasTrailingDivider:!0}),(0,a.jsx)(oL.J5,{text:(0,N.t)("org_dashboard.settings"),onClick:()=>{e(eR.sf({view:"orgAdminSettings",orgAdminSettingsViewTab:eq.J7.SETTINGS}))},hasTrailingDivider:!1})]});return{pageContent:(0,r2.T8)((0,a.jsx)(R.Oe,{}),r5.e0.ORG_DOMAIN_MANAGEMENT_PAGE,{orgId:r}),pageHeaderContent:m};case"billingGroupDashboard":return{pageContent:(0,r2.T8)((0,a.jsx)(R.wu,{selectedTab:n.selectedTab}),r5.e0.BILLING_GROUP_DASHBOARD_SETTINGS_PAGE,{orgId:r,orgViewTab:n.selectedTab})};case"recentsAndSharing":let _=n.tab??oU.G.RECENTLY_VIEWED,p=c({from:aw.f6.FILE_BROWSER_TOPBAR_RECENTS});return{pageHeaderContent:(0,N.t)("file_browser.tool_bar.recents"),pageHeaderActions:p,pageContent:(0,r2.T8)((0,a.jsx)(hc,{selectedTab:_,userId:t.id,accountModalTab:n.accountModalTab,emailPolicyToUnsubscribeFrom:n.emailPolicyToUnsubscribeFrom}),r5.e0.FILE_BROWSER,{view:"recentsAndSharing",userSpace:r?r5.qo.ORG:r5.qo.PERSONAL})};case"resourceUnavailable":return{pageContent:(0,a.jsx)(ne.S,{resourceType:n.resourceType})};case"search":{let{searchScope:e,query:t}=d.parameters,r=!h.Ay.mobile;return{pageHeaderContent:(0,a.jsx)(xx,{query:t}),pageContent:(0,r2.T8)((0,a.jsx)(sz.bS,{}),r5.e0.UNIFIED_SEARCH,{showInternalModal:r&&e!==oW.Rx.COMMUNITY,showCommunityModal:r&&e===oW.Rx.COMMUNITY})}}case"seatRequests":return{pageContent:(0,r2.T8)((0,a.jsx)(A.m,{}),r5.e0.SEAT_REQUESTS_PAGE,{orgId:r,teamId:o,planType:n.adminPlanType})};case"limitedTeamSharedProjects":return{pageContent:(0,a.jsx)(ft,{})};case"team":{let e=n.teamViewTab??eJ.A$.HOME;return{pageContent:(0,r2.T8)((0,a.jsx)(hW,{teamId:n.teamId,selectedTab:e,upgradeModalType:n.upgradeModalType,showProOnboardingModal:n.isProUpgrade,showResourceConnectionInviteModal:n.showResourceConnectionInviteModal},`team-${n.teamId}`),r5.e0.TEAM_PAGE,{teamId:n.teamId,userSpace:r?r5.qo.ORG:r5.qo.PERSONAL,orgId:r}),pageHeaderContent:(0,a.jsx)(hm,{teamId:n.teamId}),pageHeaderDividerHidden:!0}}case"teamAdminConsole":{let e=n.teamAdminConsoleViewTab??(n.isProTeam?eJ.Iv.DASHBOARD:eJ.Iv.MEMBERS),t=(0,k.X$)(e,n.teamAdminConsoleViewSecondaryTab,{showResourceConnectionInviteModal:!!n.showResourceConnectionInviteModal,showResourceConnectionFlyout:!!n.showResourceConnectionFlyout});return{pageContent:(0,r2.T8)((0,a.jsx)(R.JC,{teamId:n.teamId,selectedTab:e,selectedSecondaryTab:t,showResourceConnectionInviteModal:n.showResourceConnectionInviteModal,showResourceConnectionFlyout:n.showResourceConnectionFlyout}),r5.e0.TEAM_ADMIN_PAGE,{teamId:n.teamId,teamAdminConsoleViewTab:e,teamAdminConsoleViewSecondaryTab:t})}}case"teamFeed":return{pageHeaderContent:(0,a.jsx)(oL.A5,{children:(0,a.jsx)(oL.J5,{text:(0,N.t)("fig_feed.feed"),onClick:()=>{e(eR.sf({view:"teamFeed"}))},hasTrailingDivider:!1})}),pageContent:(0,a.jsx)(xb,{postUuid:n.postUuid,creatorId:n.creatorId})};case"user":return{pageHeaderContent:(0,N.t)("internal_profile.profile"),pageHeaderActions:t.community_profile_handle&&t.id===n.userId?[(0,a.jsx)(f$,{},"viewCommunityProfileAction")]:void 0,pageContent:(0,a.jsx)(x_,{userId:n.userId,tab:n.userViewTab,orgId:n.orgId})};case"orgIdpManagement":let f=(0,a.jsxs)(oL.A5,{children:[(0,a.jsx)(oL.J5,{text:(0,N.t)("general.admin"),onClick:()=>{e(eR.sf({view:"orgAdminSettings",orgAdminSettingsViewTab:eq.J7.DASHBOARD}))},hasTrailingDivider:!0}),(0,a.jsx)(oL.J5,{text:(0,N.t)("org_dashboard.settings"),onClick:()=>{e(eR.sf({view:"orgAdminSettings",orgAdminSettingsViewTab:eq.J7.SETTINGS}))},hasTrailingDivider:!1})]});return{pageContent:(0,r2.T8)((0,a.jsx)(R.T3,{}),r5.e0.ORG_IDP_MANAGEMENT_PAGE,{orgId:r}),pageHeaderContent:f};default:return null}}();if(!r)return null;let{CustomPageLayout:n,pageContent:o}=r;return n?(0,a.jsx)(mS,{children:(0,a.jsx)(n,{children:!e&&o})}):(0,a.jsx)(mS,{children:(0,a.jsx)(ik,{showingFileBrowserLoader:e,pageHeaderContent:r.pageHeaderContent,pageHeaderActions:r.pageHeaderActions,pageHeaderDividerHidden:r.pageHeaderDividerHidden,children:o})})}function xx(e){return e.query?(0,a.jsxs)("div",{className:I.s.flex.columnGap8.$,children:[(0,a.jsx)("span",{className:I.s.flexShrink0.$,children:(0,a.jsx)(C.E,{color:"secondary",children:(0,N.tx)("search.search_results_for")})}),(0,a.jsxs)("div",{className:I.s.flex.fontMedium.minW0.$,children:["\u201C",(0,a.jsx)(C.E,{truncate:!0,children:e.query}),"\u201D"]})]}):(0,a.jsx)("div",{className:I.s.flex.columnGap8.$,children:(0,a.jsx)("span",{className:I.s.flexShrink0.$,children:(0,a.jsx)(C.E,{color:"secondary",children:(0,N.tx)("search.search_results")})})})}function xb(e){return(0,oM.w)()?(0,a.jsx)(ug,{postUuid:e.postUuid,creatorId:e.creatorId}):null}var xv=r(997907),xy=r(381913),xw=r(998877),xj=r(975542),xT=r(278106),xE=r(925885),xI=r(351260);let xN="add_collaborators--emailListItem--dnvC-";function xC({selectedView:e}){let[t,r]=s.useState(["","",""]),n=(0,i.d4)(t=>t.teams[e.teamId]),o=(0,i.d4)(e=>e.teamCreation),l=(0,i.d4)(e=>e.payment),d=(0,i.wA)(),c=s.useCallback(()=>{n&&d(eR.sf({view:"team",teamId:n.id}))},[d,n]),u=s.useCallback((e,a)=>{if(a>=t.length)return;let s=[...t];s[a]=e,r(s)},[t]),m=s.useCallback(()=>{r([...t,""])},[t]),_=s.useCallback(()=>{let e=!!o.isEduTeam;l.promo?d(xE.g_({teamId:n.id,teamName:n.name,previousView:{view:"team",teamId:n.id}})):e?d(dg.Vm({teamId:n.id,showBreadcrumbs:!0})):d(eR.sf({view:"teamUpgrade",teamFlowType:it.SC.UPGRADE_EXISTING_TEAM,teamId:n.id,paymentStep:sn.tn.UPGRADE_NEW_TEAM,previousView:{view:"team",teamId:n.id},planType:it.Sc.TEAM}))},[d,n,l.promo,o.isEduTeam]),p=s.useCallback(()=>t.filter(e=>e).map(e=>e.trim()),[t]),f=s.useCallback(()=>{d((0,xI.rq)({emails:p(),resourceType:eM.vt.TEAM,resourceIdOrKey:n.id,level:mU.e6.EDITOR,teamId:n.id,onSuccess:()=>{d(_X.r1({loading:!1})),_()}}))},[p,n,_,d]);return(0,a.jsx)(r2.fu,{name:"Add Collaborators",properties:{teamId:n?.id},children:(0,a.jsx)("div",{children:(0,a.jsxs)(xw.O,{menu:(0,a.jsx)(xy.X,{onClick:c,children:(0,a.jsx)(t0.B,{svg:u_.A,className:"add_collaborators--modalCloseX--sJGp5"})}),children:[(0,a.jsx)(xT.J,{index:2}),(0,a.jsx)(xj.JR,{children:(0,N.tx)("team_creation.add_your_collaborators")}),(0,a.jsx)(xj.Kh,{children:(0,N.tx)("team_creation.you_can_update_user_permissions_on_the_team_page_after_setting_up")}),(0,a.jsxs)("div",{className:"add_collaborators--formContainer--zTKXv",children:[(0,a.jsx)("div",{className:"add_collaborators--emailInputsContainer--19ZBc",children:t.map((e,t)=>(0,a.jsx)(r6.il,{className:xN,value:e,onChange:e=>u(e.target.value,t),maxLength:255,placeholder:(0,N.t)("team_creation.email")},`collaborator-email-input-${t}`))}),(0,a.jsx)(r6.nR,{className:xN,onClick:m,children:(0,N.tx)("team_creation.add_another")}),(0,a.jsx)("div",{className:"add_collaborators--spacing--2VA7s"}),(0,a.jsxs)("div",{className:"add_collaborators--ctaContainer--VGMvb",children:[(0,a.jsx)(r6.nD,{disabled:0===p().length,onClick:f,trackingProperties:{numCollaborators:p().length},children:(0,N.tx)("team_creation.continue")}),(0,a.jsx)(r6.Ph,{onClick:_,trusted:!0,children:(0,N.tx)("team_creation.skip_for_now")})]})]})]})})})}var xS=r(553184),xk=r(407352),xR=r(701982),xA=r(435872),xO=r(327522),xF=r(725909),xP=r(458609);let xL=["folder","team","search","recentsAndSharing"];function xD(){let e=(0,i.d4)(e=>e.autosave),t=(0,eA._6)(),r=(0,xk.yZ)(),{unsyncedFiles:s,localUnsyncedFiles:n}=(0,mF.Gg)();return!r||null!=e.lastSnoozeTime&&Date.now()-e.lastSnoozeTime<864e5?null:(s.length>0||n.length>0)&&xL.includes(t.view)?(0,a.jsx)(xB,{unsyncedFiles:s,localUnsyncedFiles:n}):null}let xM=!1;function xB(e){let t=(0,i.wA)();s.useEffect(()=>{let e=()=>{t(xA.Jw())};return xF.hp.register(xF.a,e),function(){xF.hp.unregister(xF.a,e),t(tC.ES({type:xR.EO.type}))}},[t]);let r=(0,eA._6)(),[n,o]=s.useState(!1);s.useEffect(()=>{xM||(xM=!0,(0,xS.Mw)()),n||(o(!0),(0,av.sx)("Autosave Notification",{hasUnsyncedFiles:e.unsyncedFiles.length>0,hasLocalUnsyncedFiles:e.localUnsyncedFiles.length>0,firstUnsyncedFile:e.unsyncedFiles.length>0?e.unsyncedFiles[0].fileKey:null,firstLocalUnsyncedFile:e.localUnsyncedFiles.length>0?e.localUnsyncedFiles[0].fileKey:null,view:r.view},{forwardToDatadog:!0}))},[t,e.unsyncedFiles,e.localUnsyncedFiles,n,r]);let l=(0,J.iZ)(),d=[...e.unsyncedFiles,...e.localUnsyncedFiles];if(0===d.length||!l)return(0,a.jsx)(a.Fragment,{});let c=d.length>1,m=d[0],_=(0,xO.y8)(m)?m.file.name:m.name,p=_.length>40?_.substring(0,40)+"\u2026":_,f=c?(0,N.t)("autosave.notification.message.more_than_one_file"):(0,N.t)("autosave.notification.message.one_file",{fileName:p}),g=c?(0,N.tx)("autosave.notification.action_review"):(0,N.tx)("autosave.notification.action_open_to_sync");return(0,a.jsxs)("div",{className:"autosave_notification--notification--u3sx0 text--_negText--j9g-L",children:[(0,a.jsx)(t0.B,{className:"autosave_notification--icon--uvtXB",svg:xP.A,width:"24",height:"24"}),(0,a.jsx)("div",{className:"autosave_notification--message--yAhFz",children:f}),(0,a.jsxs)("div",{className:"autosave_notification--actions--dk-yq",children:[(0,a.jsx)("div",{className:"autosave_notification--mainAction--sidqJ autosave_notification--action--Brz-5",onClick:()=>{c?t(tC.to({type:xR.EO})):(0,xO.y8)(m)?u.Ay.redirect((0,ri.r1)(os.F.toLiveGraph(m.file),!0),"_blank"):t(uU.NA({file:m,openNewFileIn:aw.ai.NEW_TAB,source:uK.U.AUTOSAVE_NOTIFICATION}))},children:g}),(0,a.jsx)("div",{className:"autosave_notification--action--Brz-5",onClick:()=>{(0,av.sx)("Autosave Notification Snooze",{files:d.length,firstFile:m.fileKey}),t(xA.zE(Date.now()))},children:(0,N.tx)("autosave.notification.action_later")})]})]})}var xU=r(667500);let xW="team-org-access-dropdown";function x$(e){let t=(0,i.wA)(),r=e.dropdownShown&&e.dropdownShown.type===xW;return(0,a.jsxs)("div",{className:"team_org_access_dropdown--orgAccess--JAIwP",children:[(0,a.jsxs)("button",{className:"team_org_access_dropdown--select--lqx54",onClick:e=>{e.stopPropagation(),e.preventDefault(),r?t(eR.oB()):t(eR.j7({type:xW}))},children:[(0,eT.ZP)()[e.orgAccess],(0,a.jsx)(t0.B,{svg:rq.A,className:"team_org_access_dropdown--downCaret--INuva"})]}),r&&(0,a.jsx)("div",{className:"team_org_access_dropdown--orgAccessDropdownContainer--iVvqn",children:(0,a.jsxs)(nb.ms,{className:"team_org_access_dropdown--orgAccessDropdown--zJupm",children:[(0,a.jsx)(nb.MM,{checked:e.orgAccess===eM.bU.PUBLIC,onClick:()=>{e.onChangeOrgAccess(eM.bU.PUBLIC)},children:(0,eT.ZP)()[eM.bU.PUBLIC]}),(0,a.jsx)(nb.MM,{checked:e.orgAccess===eM.bU.PRIVATE,onClick:()=>{e.onChangeOrgAccess(eM.bU.PRIVATE)},children:(0,eT.ZP)()[eM.bU.PRIVATE]}),(0,a.jsx)(nb.MM,{checked:e.orgAccess===eM.bU.SECRET,onClick:()=>{e.onChangeOrgAccess(eM.bU.SECRET)},children:(0,eT.ZP)()[eM.bU.SECRET]})]})})]})}let xG="team_creation--createTeamText--VjY8f";function xV({currentTeamId:e,currentUserOrgId:t,user:r,selectedView:n,dropdownShown:o,teamCreation:l,orgById:d}){var c;let m=(0,i.wA)(),[_,p]=(0,s.useState)(null),[f,g]=(0,s.useState)(eM.bU.PUBLIC),h=n.ignoreCurrentPlan,x=t&&!h?d[t]:null,b=!e&&!t,v=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(v.current)for(let e=0;e<v.current.elements.length;e++){let t=v.current.elements[e];if(!t.value){t.focus();break}}t&&!h&&(0,av.sx)("team_creation_started",{user_id:r?.id??"",org_id:t})},[t,r,h]);let y=e=>{e.preventDefault(),e.stopPropagation(),_?(m((0,pX.KQ)({teamName:_,orgAccess:f,dontRedirect:!!n.onSubmitReturnToPrevView,ignoreCurrentPlan:h})),n.onSubmitReturnToPrevView&&m(eR.sf((0,u.Gl)()||{view:"recentsAndSharing"}))):m(aY.s.error((0,N.t)("team_creation.your_team_name_cannot_be_empty")))},w=!(t&&!h)&&!n.onSubmitReturnToPrevView,j=b?null:(0,a.jsx)(xy.X,{onClick:()=>{m(eR.sf((0,u.Gl)()||{view:"recentsAndSharing"}))},children:(0,a.jsx)(t0.B,{svg:u_.A,className:"team_creation--modalCloseX--TTg32"})});return(0,a.jsx)(r2.fu,{name:"Team Creation",children:(0,a.jsx)("div",{children:(0,a.jsxs)(xw.O,{menu:j,children:[w&&(0,a.jsx)(xT.J,{index:1}),(0,a.jsxs)("form",{ref:v,onSubmit:y,children:[(0,a.jsx)(xj.JR,{children:(0,N.tx)("team_creation.create_a_team_title")}),(0,a.jsxs)("div",{className:"team_creation--newTeamContainer--43mWz team_creation--newTeamContainerBase--nwYzU",children:[(0,a.jsxs)("div",{className:"team_creation--teamNameContainer--B6Pc3",children:[(0,a.jsx)("div",{className:"team_creation--teamNameLabel--ohZWy",children:(0,N.tx)("team_creation.team_name_label")}),(0,a.jsx)(r6.il,{value:_||"",onChange:e=>{p(e.target.value)},className:"team_creation--newTeamInput--PdjEW",maxLength:255,placeholder:(0,N.t)("team_creation.team_name_input_placeholder")})]}),x?(0,a.jsxs)("div",{className:"team_creation--orgTeamSettings--bDW2R",children:[(0,a.jsxs)("div",{className:I.s.flex.$,children:[(0,a.jsx)("div",{className:I.s.fontSemiBold.$,children:(0,N.tx)("team_creation.access_within_the_organization")}),(0,a.jsx)(x$,{orgAccess:f,dropdownShown:o,onChangeOrgAccess:e=>{g(e)}})]}),(0,a.jsx)("div",{className:xG,children:(c=x.name,{[eM.bU.PUBLIC]:(0,N.tx)("org_access_strings.public.description_with_org_name",{orgName:c}),[eM.bU.PRIVATE]:(0,N.tx)("org_access_strings.closed.description_with_org_name",{orgName:c}),[eM.bU.SECRET]:(0,N.tx)("org_access_strings.secret.description_with_org_name",{disclaimerLabel:(0,a.jsx)("span",{className:I.s.fontSemiBold.$,children:(0,N.tx)("org_access_strings.secret.description.disclaimer_label")}),orgName:c})})[f]})]}):(0,a.jsx)("div",{className:xG,children:(0,N.tx)("team_creation.after_creating_a_team_you_can_invite_others_to_join")}),(0,a.jsx)(r6.nD,{className:t?"team_creation--createTeamButtonOrg--2rnOw":"team_creation--createTeamButton--C8IV7",type:"submit",disabled:l.loading,onClick:y,children:(0,N.tx)("team_creation.create_team_button")})]})]})]})})})}function xz({selectedView:e}){let t=(0,i.wA)(),r=(0,Y.dq)(),s=(0,i.d4)(e=>e.orgById),n=(0,J.iZ)(),o=(0,i.d4)(e=>e.currentTeamId),l=(0,c4.Um)(),d=(0,i.d4)(e=>e.teamCreation);return(0,eT.R$)(n,r)?(u.Ay.redirect("/"),t(aY.s.error((0,N.t)("team_creation.missing_team_creation_controls"))),null):(0,a.jsx)(xV,{currentTeamId:o,currentUserOrgId:r,user:n,dropdownShown:l,teamCreation:d,orgById:s,selectedView:e})}let xH="team_restore--page--cMEe2",xK="team_restore--section--AmfWe",xY="team_restore--button--C-gOz";function xq({selectedView:e}){let t,r;let n=(0,i.wA)(),[o,l]=s.useState(!1),d=e.teamId,c=(0,i.d4)(e=>e.teams[d]);s.useEffect(()=>{l(!0),aJ.$.getDeleted({teamId:d}).then(({data:e})=>{n(_X.bE({team:e.meta})),l(!1)}).catch(e=>{400!==e.status&&(n(eR.sf({view:"recentsAndSharing"})),n(aY.s.error(`${e.data.message}`))),l(!1)})},[n,d]);let u=()=>{n(eR.sf({view:"recentsAndSharing"}))},m=(0,a.jsx)(r6.vd,{className:xY,onClick:u,children:(0,N.tx)("team_restore.back")});if(c){if(c.deleted_at){let e=(0,ec.A)(c.deleted_at).add(28,"days").toDate();t=(0,N.t)("team_restore.confirm_restore_header",{teamName:c.name}),r=(0,a.jsxs)("div",{children:[(0,N.tx)("team_restore.confirm_restore"),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,N.tx)("team_restore.confirm_restore_deadline",{deleteDeadline:e})]}),m=(0,a.jsx)(r6.vd,{className:xY,onClick:()=>{n(_X.I9({teamId:d}))},children:(0,N.tx)("team_restore.restore")})}else t=(0,N.t)("team_restore.ineligible"),r=(0,N.t)("team_restore.questions_contact_support",{supportEmail:(0,ab.W4)()})}else{if(o)return(0,a.jsx)("div",{className:xH,children:(0,a.jsx)("div",{className:xK,children:(0,a.jsx)(ei.kt,{})})});t=(0,N.t)("team_restore.expired_header"),r=(0,a.jsxs)("div",{children:[(0,N.tx)("team_restore.expired"),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,N.tx)("team_restore.questions_contact_support",{supportEmail:(0,ab.W4)()})]})}return(0,a.jsx)(r2.fu,{name:"Team Restore",properties:{teamId:d},children:(0,a.jsx)(xw.O,{menu:(0,a.jsx)(t0.B,{svg:u_.A,onClick:u,className:"team_restore--modalCloseX--XNErW"}),children:(0,a.jsx)("div",{className:xH,children:(0,a.jsxs)("div",{className:xK,children:[(0,a.jsx)("div",{className:"team_restore--header--NgU8v text--fontPos20--Bcz97 text--_fontBase--QdLsd",children:t}),(0,a.jsx)("div",{className:"team_restore--text--F18dW text--fontPos12--YsUAh text--_fontBase--QdLsd",children:r}),m]})})})})}var xJ=r(527262),xX=r(6519),xQ=r(307841),xZ=r(514043);function x0(e){let t=(0,J.iZ)(),[r,n]=s.useState(()=>(0,xZ.LN)()),o=aF.b.UPGRADE_NEW_TEAM,l=(0,i.wA)(),d=(0,xQ.sx)(),c=(t,a)=>{let s=e.selectedView;l(dg.WX({teamId:e.selectedView.teamId,selectedView:s,newTeam:!0,currency:r,billingPeriod:a}))},u=null===e.selectedView.teamId?void 0:()=>{let r=t?.id;if(r){let t={userId:r,orgId:null,teamId:e.selectedView.teamId};l(T._l({workspace:t,view:{view:"allProjects"}}))}else l(eR.sf({view:"team",teamId:e.selectedView.teamId}))},m=()=>{l(dg.Bq({currency:r,upsellSource:o}))},_=e=>{n(e),l(eR.oB())},p=e.selectedView.teamId,f=s.useRef(null);return(0,a.jsx)(r2.fu,{name:"Upgrade Team",properties:{teamId:p,step:sn.tn.UPGRADE_NEW_TEAM},children:(0,a.jsx)("div",{className:"legacy_upgrade--teamUpgrade--auGJz",children:(0,a.jsxs)(xw.O,{menu:(0,a.jsx)(xy.X,{onClick:()=>{let r=t?.id,a=e.selectedView.teamId,s={view:"recentsAndSharing"};r&&a?l(T._l({workspace:{userId:r,teamId:a,orgId:null},view:e.selectedView.previousView||s})):l(eR.sf(e.selectedView.previousView||s))},children:(0,a.jsx)(t0.B,{svg:u_.A,className:"legacy_upgrade--closeButton--zJ0JO"})}),pageRef:f,children:[(0,a.jsx)(xT.J,{index:3}),(0,a.jsx)(r2.fu,{name:"Upgrade New Team",properties:{teamId:p,trackingDescriptor:em.c.UPGRADE_YOUR_TEAM},children:(0,a.jsxs)("div",{className:U()(e.className,"step_upgrade_new_team--container--BixhQ"),children:[(0,a.jsx)(xj.JR,{className:"step_upgrade_new_team--stepTitleComparisonChart--yyzB5 step_upgrade_new_team--stepTitle--yFYG8",children:(0,a.jsx)("span",{children:(0,N.tx)("plan_details.choose_your_team_plan")})}),d?(0,a.jsx)("div",{className:I.s.mxAuto.$,style:iV.sx.add({width:"1049px"}).$,children:(0,a.jsx)(xJ.P,{upsellSource:o,currency:r,updateCurrency:_,chooseStarterPlan:u,chooseProPlan:e=>c(null,e),chooseOrgPlan:m,planComparisonModalHeaderOverride:null})}):(0,a.jsx)(xX.O,{currency:r,chooseStarterPlan:u,chooseProPlan:e=>c(null,e),chooseOrgPlan:m,updateCurrency:_,upsellSource:o,parentRef:f})]})})]})})})}var x1=r(176973),x4=r(880308),x2=r(846003),x8=r(236856),x5=r(170564),x6=r(463586),x3=r(184216),x7=r(638715);class x9 extends s.PureComponent{constructor(){super(...arguments),this._isMounted=!1,this.timer=null,this.controller=new AbortController,this.payload=null,this.fetchScheduledDowntimeInfo=async()=>{let e=this.controller?.signal,t=(0,ab.ck)("011a24693cd9b63ea5492d50d7713dfb7ed18ea6"),r=await fetch(t,{signal:e,cache:"no-cache"}),a=await r.json(),s={finished:a.finished,warningDurationMs:Number(a.warning_ms),notifDurationMs:Number(a.notif_ms),pollIntervalMinutes:Number(a.poll_interval_minutes),downtimeStartDate:new Date(a.timestamp+" UTC"),minLengthMinutes:Number(a.estimated_length_min),maxLengthMinutes:Number(a.estimated_length_max),helpcenterUrl:a.helpcenter_url};return(0,o.k)().display_downtime_banner_force&&(s.warningDurationMs*=1e3,s.notifDurationMs*=1e3),"hostname"in a&&(s={...s,renderOnHostname:a.hostname}),s},this.onTick=()=>{null!=this.payload&&this.props.dispatch(x3.Z.onTick({payload:this.payload,hostname:window.location.hostname,currentTimeMs:Date.now()}))},this.poll=async()=>{for(;this._isMounted;)try{let e=await this.fetchScheduledDowntimeInfo();this._isMounted&&(this.payload=e,this.timer||(this.onTick(),this.timer=setInterval(this.onTick,3e4)))}catch(e){"AbortError"!==e.name&&console.warn(e)}finally{let e=this.payload&&60*this.payload.pollIntervalMinutes||900;await (0,x8.fm)(1e3*e)}}}componentDidMount(){this._isMounted=!0,this.poll()}componentWillUnmount(){this._isMounted=!1,this.controller?.abort(),this.timer&&clearInterval(this.timer)}render(){return null}}function be(e){let{dispatch:t,downtime:r}=e,a=s.useCallback(e=>()=>{t(e)},[t]),i=s.useCallback((e,t)=>()=>{u.Ay.unsafeRedirect(e,"_blank"),a(t)},[a]),n=s.useCallback(e=>(0,N.t)("downtime_banner.ongoing.figma_will_be_entering_a_maintenance_period",{minutes:e}),[]),l=s.useMemo(()=>(0,N.t)("downtime_banner.ongoing.currently_undergoing_maintenance"),[]),d=s.useRef(e.notifications),c=s.useCallback(()=>{d.current.length>0&&t(x6.Q.dequeue({type:x5._.DOWNTIME}))},[t,d]);return s.useEffect(()=>{let{payload:e,status:s,hidingDowntimeNotif:d,notifMinutesRemaining:u}=r;if((0,o.k)().display_downtime_banner){switch(s){case x7.A.Imminent:case x7.A.Warning:if(e&&null!=u&&d!==x7.y.warningHidden){let r=n(u),s=i(e.helpcenterUrl,x3.Z.hideWarningNotif()),o=a(x3.Z.hideWarningNotif());t(x6.Q.dequeue({type:x5._.DOWNTIME})),t(x6.Q.enqueue({notification:{type:x5._.DOWNTIME,message:r,acceptCallback:s,dismissCallback:o}}))}break;case x7.A.Ongoing:if(e&&d!==x7.y.ongoingHidden){let r=i(e.helpcenterUrl,x3.Z.hideOngoingNotif()),s=a(x3.Z.hideOngoingNotif());t(x6.Q.dequeue({type:x5._.DOWNTIME})),t(x6.Q.enqueue({notification:{type:x5._.DOWNTIME,message:l,acceptCallback:r,dismissCallback:s}}))}break;case x7.A.Finished:c()}return()=>{c()}}},[r,t,n,i,a,l,c]),null}x9.displayName="DowntimePoller";var bt=r(995935),br=r(745256);function ba(){let e=(0,bt.W)();return(0,a.jsx)(br.Y,{prioritizedBanners:e,location:"file_browser"})}var bs=r(163189);function bi(e){let t=(0,i.wA)(),r=(0,i.d4)(e=>e.fileImport.step),n=(0,pI.B2)().unwrapOr(!1),[o,l]=s.useState(!1),d=s.useCallback(()=>l(!0),[]),c=s.useCallback(()=>l(!1),[]),u=s.useCallback(e=>{l(!1),n&&t((0,pI.b6)(e))},[t,n]);return(0,a.jsxs)(tn.Y,{className:I.s.flex.flexColumn.$,isDragTarget:pI.al,onTargetDragEnter:d,onTargetDragLeave:c,onTargetDrop:u,children:[e.children,n&&(0,a.jsx)(bn,{step:r,dragging:o})]})}function bn({step:e,dragging:t}){switch(e){case bs.Y5.CONFIRM_PDF_IMPORT:case bs.Y5.IMPORT_REPO:return null;case bs.Y5.START:case bs.Y5.FILE_IMPORT_WITH_CANCELED_PDF:case bs.Y5.FILE_IMPORT_WITH_CONFIRMED_PDF:return(0,a.jsx)("div",{className:t?"file_browser_drop_zone--dragTargetDragging--giyPY file_browser_drop_zone--dragTargetNormal--TOR0f":"file_browser_drop_zone--dragTargetNormal--TOR0f"});default:(0,E.xb)(e)}}function bo(e){return(0,a.jsx)(L.tH,{boundaryKey:"FileBrowserDropZone",fallback:(0,a.jsx)(a.Fragment,{children:e.children}),team:M.e.WAYFINDING,children:(0,a.jsx)(bi,{...e})})}let bl="file_browser_view--filebrowserHtml--v2BLN",bd="file_browser_view--filebrowserBody--6MX2i",bc="file_browser_view--desktop--5VrC1";function bu(){let e=(0,i.wA)(),t=(0,Y.dq)(),r=(0,c4.Um)(),E=(0,J.iZ)(),I=(0,eA._6)(),C=xv.q_.useIsLoading(),S=(0,i.d4)(e=>e.payment),k=(0,i.d4)(e=>e.currentTeamId),R=(0,Q.d)(),A=(0,i.d4)(e=>e.downtime),O=(0,i.d4)(e=>e.notifications);!function(){let e=(0,i.Pj)(),t=s.useMemo(()=>(0,x4.g)(),[]),r=(0,p.Rs)(eK.__y,{cacheNonce:t});s.useEffect(()=>{if("loaded"===r.status&&r.data.currentUser.assetTransferReload.status===ea.tT.Loaded){let t=(0,ea.oA)(r.data.currentUser.assetTransferReload);if(!t)return;let a=ab.Ay().user_data?.id,s=e.getState(),i="folder"===s.selectedView.view&&s.selectedView.folderId===t.folderId,n="team"===s.selectedView.view&&s.selectedView.teamId===t.teamId,o="folder"===s.selectedView.view&&s.folders[s.selectedView.folderId],l=o&&o.team_id===t.teamId,d=t.folderId?i:n||l,c={view:"folder",folderId:t.folderId||""},u={view:"team",teamId:t.teamId||"",teamViewTab:eJ.A$.HOME};if(a&&t.userId===a){let r={userId:t.userId,orgId:t.destOrgId},a=t.folderId?c:u;if(d){let s=t.folderId?(0,N.t)("realtime.asset_reload.project_has_been_transferred_redirecting"):(0,N.t)("realtime.asset_reload.team_has_been_transferred_redirecting");e.dispatch(tl.F.enqueue({message:s})),setTimeout(()=>{e.dispatch(T._l({workspace:r,view:a}))},2e3)}else e.dispatch(T.Dj({reason:"asset transfer reload",delay:T.RH.DEFAULT}))}}},[e,r])}(),d.Tf.enableEventSending({allowResourceTracking:!0}),(0,m.h)(()=>{E&&e(xA.Jw())}),(0,f.IT)((0,x1.XZ)({currentOrgId:t??void 0,currentTeamId:k??void 0,fileTags:["figjam_template","figma_basics"]}),{enabled:(0,o.k)().create_starter_files_from_file_browser&&it.Gn.includes(I.view)});let[F,P]=s.useState(0),[L,D]=s.useState(0),[M,B]=s.useState(!1);(0,m.h)(()=>(document.body.classList.add(bd),document.documentElement.classList.add(bl),(0,g.$o)(),(0,V.I0)(I,t,k,R),(0,x.hW)("exp_aa_test_file_browser_view").catch(n.lQ),()=>{document.body.classList.remove(bd),document.documentElement.classList.remove(bl),(0,g.$E)(),e(tC.AS())})),s.useEffect(()=>{if(c.eD||(0,l.ce)()){let e=document.createElement("div");return e.classList.add("file_browser_view--desktopBackground--kte3I"),document.body.appendChild(e),document.body.classList.add(bc),()=>{document.body.classList.remove(bc),document.body.removeChild(e)}}},[]);let U=(0,_.ZC)(I);s.useEffect(()=>{U&&U!==I&&((0,x2.SW)(U,I)&&window.scrollTo(0,0),M?B(!1):(P(L+1),D(L+1)))},[U,I,M,L]),s.useEffect(()=>{"teamCreation"===I.view&&I.fromNewTab&&e(T.Dw({previousView:I.previousView,onSubmitReturnToPrevView:I.onSubmitReturnToPrevView,isEduTeam:I.isEduTeam,ignoreCurrentPlan:!0}))},[I,e]);let W=h.uG;if(!function(){let e=(0,eA._6)(),t=(0,i.wA)(),r=(0,J.TA)(),a=null;("teamUpgrade"===e.view||"promoReview"===e.view||"eduReview"===e.view)&&(a=e.teamId);let n=(0,p.Rs)((0,eK.yY6)(a?{teamId:a}:null)),o=s.useMemo(()=>n.transform(({team:e})=>{if(!e)return!1;let t=!(0,sx.a5)(e)||mD.ng.getProTrialStatusLG(e)===mB.a.IN_TRIAL;return e.canAdmin||e.canEdit&&t}),[n]);s.useEffect(()=>{"loaded"===o.status&&!o.data&&a&&(r?t(T._l({workspace:{userId:r,teamId:a,orgId:null},view:{view:"allProjects"}})):t(eR.sf({view:"team",teamId:a})))},[r,t,o.data,o.status,a])}(),"teamUpgrade"===I.view)return I.paymentStep===sn.tn.UPGRADE_NEW_TEAM?(0,a.jsx)(x0,{selectedView:I}):(0,a.jsx)(v.q,{selectedView:I});if("teamCreation"===I.view)return I.fromNewTab?null:(0,a.jsx)(xz,{selectedView:I});if("addCollaborators"===I.view)return(0,a.jsx)(xC,{selectedView:I});if("orgSelfServe"===I.view)return(0,a.jsx)(y.G,{step:I.step||mM.X1.Initial,initialDesignSeats:I.initialDesignEditors||0,orgMigrated:!!I.orgMigrated,dropdownShown:r,newTeamProps:I.newTeamProps,upsellSource:I.upsellSource,entryPoint:I.entryPoint});if("teamRestore"===I.view)return(0,a.jsx)(xq,{selectedView:I});if("promoReview"===I.view)return(0,a.jsx)(w.z,{promo:S?.promo,selectedView:I});if("eduReview"===I.view)return(0,a.jsx)(j.w,{selectedView:I});return E?t||k?(0,a.jsxs)(xU.C.Provider,{value:{goBack:()=>{L>0&&(history.back(),D(L-1),B(!0))},goForward:()=>{L<F&&(history.forward(),D(L+1),B(!0))},canGoBack:L>0,canGoForward:L<F},children:[W&&(0,a.jsx)(b.R,{userIdForTracking:E?.id}),(0,a.jsxs)(bo,{children:[(0,a.jsx)(ba,{}),(0,a.jsx)(be,{downtime:A,notifications:O,dispatch:e}),(0,a.jsx)(xD,{}),(0,a.jsx)(xh,{showingFileBrowserLoader:C})]})]}):(console.error("No current organization or team plan set for user. Redirecting to /files"),u.Ay.redirect("/files"),null):(console.error(`Signed out page: unrecognized route ${u.Ay.location.pathname}, redirecting to /`),u.Ay.redirect("/"),null)}},847117:(e,t,r)=>{r.r(t),r.d(t,{FileImportModal:()=>Z,FileRow:()=>ei,ImportModal:()=>ee,fileImportStats:()=>es,getFooterButtons:()=>et,getStatusComponents:()=>er,useCloseTabWarningWhenImportInProgress:()=>el,useCurrentFolderTeam:()=>ea});var a=r(486106),s=r(7378),i=r(514228),n=r(465776),o=r(437088),l=r(38914),d=r(272243),c=r(479687),u=r(256203),m=r(251970),_=r(724052);r(82433);var p=r(601108),f=r(449184),g=r(876459),h=r(103090),x=r(288654),b=r(637027),v=r(445814),y=r(858013),w=r(347284),j=r(589278),T=r(617427),E=r(303541),I=r(941192),N=r(142086),C=r(156213),S=r(370443),k=r(831799),R=r(314264),A=r(224),O=r(528509),F=r(81459),P=r(612685),L=r(191312),D=r(43951),M=r(465071),B=r(193867),U=r(165519),W=r(652992),$=r(163189),G=r(630077),V=r(739964),z=r(165054),H=r(11),K=r(769),Y=r(713695);let q="file_import_modal--scrollContainer--rcZDu";function J(e){let{fileImport:t,onDone:r,onCancel:c}=e,m=o.hS({open:e.open,onClose:e.onClose}),_=(0,i.wA)(),p=es(t),f=0===p.remainingFiles,g=ea(),h=(0,i.d4)(e=>"folder"===e.selectedView.view?e.selectedView.folderId:null),x=Y.M4.Folder.useValue(h).data,[v,T]=(0,s.useState)(K.uf.IMPORTING_FILES);el(v===K.uf.IMPORTING_FILES||v===K.uf.ATTACHING_BRANCH);let I=x?.name||(0,E.t)("file_browser.tool_bar.drafts"),N=v===K.uf.SUCCESS?(0,E.t)("file_browser.file_import_view.imported_to_folder",{folderName:I}):(0,E.t)("file_browser.file_import_view.import_to_folder",{folderName:I}),{statusIcon:C,statusMessage:S,statusMessageSecondary:k}=function(e,t,r){let s=null,i=null,o=null,l=er(e===K.uf.SUCCESS,t,r);switch(e){case K.uf.IMPORTING_FILES:s=l.statusIcon,i=l.statusMessage,o=l.statusMessageSecondary;break;case K.uf.ATTACHING_BRANCH:s=(0,a.jsx)(y.kt,{imageBacked:!0,testId:"loadingSpinner"}),i=(0,E.tx)("file_browser.file_import_view.repo.attaching_branch"),o=(0,a.jsx)("span",{className:j.s.textBodyMedium.$,children:(0,E.tx)("file_browser.file_import_view.to_continue_working",{openANewTabLink:(0,a.jsx)(b.Us,{href:window.location.href,target:"_blank",trusted:!0,"data-testid":"openANewTabLink",children:(0,E.tx)("file_browser.file_import_view.open_a_new_tab_link")})})});break;case K.uf.SUCCESS:s=l.statusIcon,i=l.statusMessage,t.importedFiles===t.totalFiles&&(i=(0,E.tx)("file_browser.file_import_view.repo.success")),o=l.statusMessageSecondary;break;case K.uf.ERROR:s=(0,a.jsx)(u.R,{}),i=(0,E.tx)("file_browser.file_import_view.repo.error");break;default:(0,n.xb)(e)}return s&&i?{statusIcon:s,statusMessage:i,statusMessageSecondary:o}:((0,H.$D)(z.e.SCENEGRAPH_AND_SYNC,Error("Missing status in repo import")),{statusIcon:(0,a.jsx)(u.R,{}),statusMessage:(0,E.tx)("file_browser.file_import_view.repo.error"),statusMessageSecondary:null})}(v,p,I),R=et({isImportComplete:f,fileImport:t,onDone:r,team:g,dispatch:_,stats:p,shouldShowMoveToProjectButton:!1,onMoveToProject:()=>{},filesToMove:[],onCancel:c});return(0,s.useEffect)(()=>{if(f){T(K.uf.ATTACHING_BRANCH);let e=Object.values(t.files),r=e.find(e=>e.name.includes("branch tip"))?.fileKey,a=e.find(e=>e.name.includes("branch point"))?.fileKey,s=e.find(e=>e.name.includes("main tip"))?.fileKey;r&&a&&s?(0,K.yA)(r,a,s).then(()=>{T(K.uf.SUCCESS)}).catch(()=>{T(K.uf.ERROR)}):(T(K.uf.ERROR),console.error("Missing branch key, branch point key, or main tip key files"))}},[f,t.files]),(0,a.jsx)(l.bL,{manager:m,width:480,children:(0,a.jsxs)(d.vo,{children:[(0,a.jsx)(d.Y9,{children:(0,a.jsx)(d.hE,{children:N})}),(0,a.jsx)(d.nB,{children:t&&(0,a.jsx)(w.P,{innerClassName:j.s.flex.flexColumn.$,className:q,children:Object.values(t.files).map(e=>(0,a.jsx)(ei,{file:e},`file-import-${e.id}`))})}),(0,a.jsx)(d.wi,{children:(0,a.jsxs)("div",{className:j.s.flex.flexRow.wFull.justifyBetween.py8.gap16.bt1.bSolid.colorBorder.$,children:[(0,a.jsxs)("div",{className:j.s.flex.flexRow.itemsCenter.gap8.$,children:[C&&(0,a.jsx)("div",{className:j.s.flex.itemsCenter.justifyCenter.h32.w32.$,children:C}),S&&(0,a.jsx)("span",{className:j.s.fontSemiBold.$,children:S}),k&&(0,a.jsx)("span",{className:j.s.ml8.$,children:k})]}),(0,a.jsx)("div",{children:R})]})})]})})}var X=r(653470);let Q="import_progress_modal";function Z(){let e=(0,i.wA)(),{fileImport:t}=(0,h.R)(e=>({fileImport:e.fileImport})),r=()=>{e(C.Ce()),e(F.cY())},s=()=>{e(F.yD())},o=()=>{e(F.cY())},l=(()=>{switch(t.step){case $.Y5.CONFIRM_PDF_IMPORT:return(0,a.jsx)(X.PdfConfirmationModal,{fileImportDescription:(0,E.tx)("file_browser.file_import_view.select_pdf_source_description",{pdfCount:es(t).pdfCount}),onConfirm:t=>{e(F._9(t))},onCancel:()=>{e(F.AU()),s()}});case $.Y5.IMPORT_REPO:return(0,a.jsx)(J,{fileImport:t,onDone:r,onCancel:s,onMoveToProject:o,onClose:()=>e(C.Ce()),open:!0});case $.Y5.START:case $.Y5.FILE_IMPORT_WITH_CANCELED_PDF:case $.Y5.FILE_IMPORT_WITH_CONFIRMED_PDF:return(0,a.jsx)(ee,{fileImport:t,onDone:r,onCancel:s,onMoveToProject:o});default:(0,n.xb)(t.step)}})();return(0,a.jsx)(k.fu,{name:Q,children:l})}function ee({fileImport:e,onDone:t,onCancel:r,onMoveToProject:n}){let c=(0,i.wA)(),u=ea(),m=es(e),_=(0,i.d4)(e=>e.selectedView),p=(0,M.X$)("ImportModal").unwrapOr(null),f=p?.tier!==L.Ag.STARTER,g=0===m.remainingFiles,h=(0,i.d4)(e=>"folder"===e.selectedView.view?e.folders[e.selectedView.folderId]:null),b=(0,O.Gi)(h),v=(0,B.K)(_);el(!g);let y=h?.name||(0,E.t)("file_browser.tool_bar.drafts"),j=g?(0,E.t)("file_browser.file_import_view.imported_to_folder",{folderName:y}):(0,E.t)("file_browser.file_import_view.import_to_folder",{folderName:y}),{statusIcon:T,statusMessage:I,statusMessageSecondary:N}=er(g,m,y),C=f&&(b||v)&&m.importedFiles>=1,k=(0,s.useMemo)(()=>(function(e,t){let r=[];if(!e)return r;for(let e of Object.values(t))e.fileKey&&r.push({fileKey:e.fileKey});return r})(C,e.files),[C,e.files]),A=(0,x.p)(D.NSA,k),F=et({isImportComplete:g,fileImport:e,onDone:t,team:u,dispatch:c,stats:m,shouldShowMoveToProjectButton:C,onMoveToProject:n,filesToMove:(0,s.useMemo)(()=>(function(e){let t=[];for(let r of e){let e=r.result.data?.file;e&&t.push({key:e.key,name:e.name,folder_id:e.folderId,team_id:e.teamId,editor_type:e.editorType,is_team_template:e.isTeamTemplate,parent_org_id:e.parentOrgId})}return t})(A),[A]),onCancel:r}),P=o.hS({open:!0,onClose:()=>{(0,R.Cu)({trackingContext:Q,trackingDescriptor:S.c.FILE_IMPORT_X_BUTTON,text:"dismiss"}),e.queue.length?r():t()},preventUserClose:!g});return(0,a.jsx)(l.bL,{manager:P,width:480,children:(0,a.jsxs)(d.vo,{children:[(0,a.jsx)(d.Y9,{children:(0,a.jsx)(d.hE,{children:j})}),(0,a.jsx)(d.nB,{padding:0,children:(0,a.jsx)(w.P,{className:"x78zum5 xdt5ytf x1mhq5o4",className:q,children:Object.values(e.files).map(e=>(0,a.jsx)(ei,{file:e},`file-import-${e.id}`))})}),(0,a.jsxs)(d.wi,{children:[(0,a.jsxs)("div",{className:"x78zum5 x6s0dn4 x167g77z",children:[T,I&&(0,a.jsx)("span",{className:"xkezfkh",children:I}),N&&(0,a.jsx)("span",{className:"xet2fuk",children:N})]}),(0,a.jsx)(d.jk,{children:F})]})]})})}function et({isImportComplete:e,fileImport:t,onDone:r,team:s,dispatch:i,stats:n,shouldShowMoveToProjectButton:o,onMoveToProject:l,filesToMove:d,onCancel:c}){var u;if(!e)return[(0,a.jsx)(T.$z,{variant:"destructive",onClick:c,htmlAttributes:{"data-testid":"cancelButton"},children:(0,E.tx)("file_browser.file_import_view.cancel")},"cancelButton")];if(t.failedOnFileLimit)return[(0,a.jsx)(T.$z,{variant:"primary",onClick:()=>{r(),null!=s&&i((0,C.to)({type:V.DV,data:{team:s,resource:n.hasMakeFile&&!(0,p.k)().bake_starter_limit?W.Bi.FIGMAKE:W.vL.FILE,action:G.ZN.IMPORT_FILES,editorType:n.editorType,multipleResources:n.failedFiles>1,currentPlan:A.F.Plan.STARTER,upsellPlan:A.F.Plan.PRO,upsellSource:U.b.CREATE_NEW_FILE}}))},htmlAttributes:{"data-testid":"nextButton"},children:(0,E.tx)("file_browser.file_import_view.next")},"nextButton")];let m=[(u=o?"secondary":"primary",(0,a.jsx)(T.$z,{variant:u,onClick:r,htmlAttributes:{"data-testid":"doneButton"},children:(0,E.tx)("file_browser.file_import_view.done")},"doneButton"))];return o&&m.push(function({onMoveToProject:e,filesToMove:t,stats:r,dispatch:s}){return(0,a.jsx)(T.$z,{variant:"primary",onClick:()=>{e(),(0,f.sx)("file_import.move_to_project.button_clicked",{numFiles:r.importedFiles}),1===t.length&&t[0]?(0,N.h)(t[0],null,s,void 0,void 0,void 0,!0):(0,N.O)(t,[],s,!0)},htmlAttributes:{"data-testid":"moveToProjectButton"},children:(0,E.tx)("file_browser.file_import_view.move_to_project")},"moveToProjectButton")}({onMoveToProject:l,filesToMove:d,stats:n,dispatch:i})),m}function er(e,t,r){let s=null,i=null,n=null;return e?t.importedFiles===t.totalFiles?(i=(0,a.jsx)("div",{className:j.s.fontSemiBold.inline.$,children:(0,E.tx)("file_browser.file_import_view.file_import_all_succeeded",{totalFiles:t.totalFiles,folder:r})}),s=(0,a.jsx)(c.l,{"data-testid":"checkIcon"})):(i=(0,a.jsx)("div",{className:j.s.fontSemiBold.inline.$,children:(0,E.tx)("file_browser.file_import_view.file_import_progress_to_folder",{importedFiles:t.importedFiles,totalFiles:t.totalFiles,folder:r})}),s=(0,a.jsx)(u.R,{"data-testid":"warningIcon"}),t.canceledFiles>0&&(n=(0,E.tx)("file_browser.file_import_view.file_import_cancel"))):(s=(0,a.jsx)(y.kt,{imageBacked:!0,testId:"loadingSpinner"}),i=(0,E.tx)("file_browser.file_import_view.file_import_progress",{processedFiles:t.processedFiles,totalFiles:t.totalFiles}),n=(0,a.jsx)("span",{className:j.s.textBodyMedium.$,children:(0,E.tx)("file_browser.file_import_view.to_continue_working",{openANewTabLink:(0,a.jsx)(b.Us,{href:window.location.href,target:"_blank",trusted:!0,"data-testid":"openANewTabLink",children:(0,E.tx)("file_browser.file_import_view.open_a_new_tab_link")})})})),{statusIcon:s,statusMessage:i,statusMessageSecondary:n}}function ea(){return(0,i.d4)(e=>{if("folder"===e.selectedView.view){let t=e.selectedView.folderId&&e.folders[e.selectedView.folderId]?.team_id;if(null!=t)return e.teams[t]}return null})}function es(e){let t=Object.keys(e.files).length,r=e.queue.length,a=0,s=0,i=0,o=0,l=0,d=new Set;for(let t in e.files){let r=e.files[t];if(r){switch(r.status){case $.mO.SUCCESS:case $.mO.WARNING:a++;break;case $.mO.CANCELED:s++;break;case $.mO.FAILURE:i++;break;case $.mO.WAITING:case $.mO.BUSY:o++;break;default:(0,n.xb)(r.status)}(0,$.kI)(r.name)&&l++,d.add((0,$.NU)(r))}}return{totalFiles:t,remainingFiles:r,processedFiles:t-r,importedFiles:a,canceledFiles:s,failedFiles:i,pendingFiles:o,editorType:1===d.size&&Array.from(d)[0]||null,hasMakeFile:d.has(L._Y.FIGMAKE),pdfCount:l}}function ei(e){let{file:t}=e,r=null;return t.status===$.mO.CANCELED?r=(0,E.tx)("file_browser.file_import_view.file_row_import_cancel"):t.message&&(r=Array.isArray(t.message)?t.message.map((e,t)=>(0,a.jsx)("div",{children:e},t)):t.message),(0,a.jsx)(eo,{status:t.status,fileKey:t.fileKey,children:(0,a.jsx)("div",{className:j.s.flex.itemsCenter.justifyBetween.flex1.pl8.pr16.textBodyMedium.$,children:(0,a.jsxs)("div",{className:j.s.flex.gap8.if(r,j.s.itemsStart,j.s.itemsCenter).$,children:[(0,a.jsx)("div",{className:j.s.flex.justifyCenter.h32.w32.itemsCenter.$,children:(0,a.jsx)(en,{file:t})}),(0,a.jsxs)("div",{className:j.s.if(r,j.s.pb6).$,children:[(0,a.jsx)("div",{className:j.s.truncate.lh32.$,style:I.sx.add({maxWidth:"384px"}).$,"data-tooltip":t.name,"data-tooltip-type":"text",children:t.name}),r&&(0,a.jsxs)("div",{className:j.s.flex.flexColumn.mt4.colorTextSecondary.$,children:[r,t.cta&&(0,a.jsx)(b.Us,{className:j.s.colorTextSecondary.underline.ml8.$,role:"button",onClick:t.cta.action,trusted:!0,"data-testid":"ctaLink",children:t.cta.text})]})]})]})})})}function en({file:e}){switch(e.status){case $.mO.BUSY:case $.mO.WAITING:return(0,a.jsx)(y.kt,{imageBacked:!0,testId:"fileRowLoadingSpinner"});case $.mO.FAILURE:case $.mO.CANCELED:return(0,a.jsx)(m.A,{"data-testid":"failIcon",className:j.s.colorIconDanger.$});case $.mO.SUCCESS:case $.mO.WARNING:let t=(0,$.NU)(e);return(0,a.jsx)(v.w4,{size:16,type:(0,v.Y8)(t)});default:(0,n.xb)(e.status)}}function eo(e){let{fileKey:t,status:r,children:s}=e;if(r!==$.mO.SUCCESS&&r!==$.mO.WARNING)return s;let i=t?(0,P.jN)({file:{key:t}}):void 0;return i?(0,a.jsxs)(b.Ph,{href:i,target:"_blank",trusted:!0,className:"file_import_modal--fileRowWrapperLink--3JOhD","data-testid":"fileLink",trackingProperties:{action:"Import Modal - File Link Clicked"},children:[s,(0,a.jsx)(_.S,{})]}):s}function el(e){let t=(0,s.useCallback)(e=>{e.preventDefault()},[]);(0,s.useEffect)(()=>(e&&(window.addEventListener("beforeunload",t),g.eD?.setIsImporting(!0)),()=>{window.removeEventListener("beforeunload",t),g.eD?.setIsImporting(!1)}),[e,t])}},797841:(e,t,r)=>{r.r(t),r.d(t,{FileRestoreFromVersionModal:()=>g});var a=r(486106),s=r(514228),i=r(449184),n=r(637027),o=r(347284),l=r(303541),d=r(78808),c=r(156213),u=r(805373),m=r(221114),_=r(519092);let p="file_restore_from_version_modal--fileRestoreText--my8Lq";function f(e){let t=e.version,r=function(e){if(e.participating_images_dict){let[t,r]=Object.entries(e.participating_images_dict)[0]||[];if(t)return{name:t,imageUrl:r}}return{name:e.user.handle,imageUrl:e.user.img_url}}(t);return(0,a.jsxs)("div",{className:"file_restore_from_version_modal--fileRestoreRow--ZAJ4y",children:[(0,a.jsxs)("div",{className:"file_restore_from_version_modal--fileRestoreDecoration--ZXtyF",children:[r&&(0,a.jsx)(u.Ro,{className:"file_restore_from_version_modal--fileRestoreAvatar--Ub3UH",size:30,entity:{img_url:r.imageUrl}}),e.connector&&(0,a.jsx)("div",{className:"file_restore_from_version_modal--fileRestoreConnector--mhORY"})]}),(0,a.jsxs)("div",{className:"file_restore_from_version_modal--fileRestoreData--AQgSJ",children:[t.label&&(0,a.jsx)("div",{className:"file_restore_from_version_modal--fileRestoreLabel--a6Shk ellipsis--ellipsis--Tjyfa",children:t.label||""}),t.description&&(0,a.jsx)("div",{className:p,children:t.description}),(0,a.jsx)("div",{className:p,children:(0,a.jsx)(m.Cr,{time:t.touched_at})}),(0,a.jsx)("div",{className:"file_restore_from_version_modal--fileRestoreUser--Bv60C",children:r?.name??""})]}),(0,a.jsx)(n.N_,{onClick:e.callback,className:"file_restore_from_version_modal--fileRestoreAction--414BR",trusted:!0,children:(0,l.tx)("file_restore_from_version_modal.restore")})]})}function g(e){let t=(0,s.wA)(),r=r=>{(0,i.sx)("restore_version_from_modal",{fileKey:e.fig.key,versionId:r}),t(c.Ce()),t(d.PF({fileKey:e.fig.key,versionId:r}))},n=e.versions.filter(e=>!e.disabled);return(0,a.jsx)(_.OJ,{title:(0,l.t)("file_restore_from_version_modal.restore_from_version_history"),maxWidth:396,onClose:()=>{t(c.Lo())},children:(0,a.jsx)("div",{className:"file_restore_from_version_modal--fileRestorePanel--pMNT2",children:(0,a.jsx)(o.P,{width:396,children:n.map((e,t)=>(0,a.jsx)(f,{version:e,callback:()=>r(e.id),connector:t+1!==n.length},e.id))})})})}},556466:(e,t,r)=>{r.d(t,{FolderPageViewOmnicreateDropdown:()=>R});var a=r(486106),s=r(950366),i=r(765689),n=r(465776),o=r(687776),l=r(334471),d=r(191312),c=r(680166),u=r(202542),m=(e=>(e.CAN_CREATE="CAN_CREATE",e.CANNOT_CREATE="CANNOT_CREATE",e.CAN_AUTO_UPGRADE="CAN_AUTO_UPGRADE",e.CAN_REQUEST_UPGRADE="CAN_REQUEST_UPGRADE",e.UPGRADE_PENDING="UPGRADE_PENDING",e))(m||{}),_=r(514228),p=r(964548),f=r(421640),g=r(681697),h=r(7378),x=r(934246),b=r(165054),v=r(11),y=r(303541),w=r(302958),j=r(15667),T=r(61705),E=r(370443),I=r(831799),N=r(314264),C=r(497540),S=r(528509),k=r(46262);function R({lgFolder:e,newFileFrom:t}){let r=function({lgFolder:e}){let{getUpgradeEligibility:t,hasPendingRequest:r,getUpgradePathway:a}=(0,c.wH)({folderId:e.id});return(0,l.h)(e).map(({editorType:s,canCreate:l})=>{let c=(()=>{if(l)return"CAN_CREATE";if(!function({editorType:e,lgFolder:t}){let r=(0,o.av)(t)[e];if(!r)return!1;if(r.result)return!0;if(!t.canEdit)return!1;let a=r.publicDenyReasons;return 1===a.length&&a[0]===d.QK.FOLDER_CREATE_FILE_DENY_UNLICENSED_USERS}({lgFolder:e,editorType:s}))return"CANNOT_CREATE";let c=(0,i.Ci)(s);if(!c)return"CANNOT_CREATE";let m=t(c),_=r(c);switch(m){case u.q.CAN_UPGRADE:let p=a(c);switch(p){case u.J.AUTO_PATHWAY:case u.J.ADMIN_AUTO_PATHWAY:return"CAN_AUTO_UPGRADE";case u.J.PROVISIONAL_PATHWAY:case u.J.RE_REQUEST_PATHWAY:return _?"UPGRADE_PENDING":"CAN_REQUEST_UPGRADE";default:(0,n.xb)(p)}case u.q.CANNOT_UPGRADE:return _?"UPGRADE_PENDING":"CANNOT_CREATE";case u.q.UPGRADE_NOT_NEEDED:return l?"CAN_CREATE":"CANNOT_CREATE";default:(0,n.xb)(m)}})(),m=(()=>{switch(c){case"CAN_CREATE":case"CAN_AUTO_UPGRADE":case"CAN_REQUEST_UPGRADE":return!1;case"CANNOT_CREATE":case"UPGRADE_PENDING":return!0;default:(0,n.xb)(c)}})();return{editorType:s,fileCreationOptionState:c,isDisabled:m}})}({lgFolder:e}),R=function({newFileFrom:e,lgFolder:t,fileCreationOptions:r}){let a=(0,_.wA)(),s=function({lgFolder:e,newFileFrom:t}){let r=(0,_.wA)(),a=(0,T.E)({isDraftsFolder:(0,S.T9)(e),newFileFrom:t,folderId:e.id}),{properties:s}=(0,I.j6)(),{handleUpgrade:o}=(0,c.wH)({folderId:e.id});return(0,h.useCallback)(({editorType:e,contextClicked:t,fileCreationOptionState:l})=>{let d=function({editorType:e,fileCreationOptionState:t,createFile:r,handleUpgradeBuilder:a,dispatch:s}){switch(t){case m.CAN_CREATE:return r;case m.CANNOT_CREATE:case m.UPGRADE_PENDING:return x.lQ;case m.CAN_AUTO_UPGRADE:case m.CAN_REQUEST_UPGRADE:return n=>(function({event:e,editorType:t,fileCreationOptionState:r,createFile:a,handleUpgradeBuilder:s,dispatch:n}){let o=(0,i.Ci)(t);if(!o){(0,v.$D)(b.e.MONETIZATION_UPGRADES,Error("Editor type has no corresponding license type for file creation upgrade flow"),{extra:{editorType:t,fileCreationOptionState:r}}),n(w.F.enqueue({message:(0,y.t)("general.an_error_occurred"),error:!0}));return}s({afterUpgradeCallback:a,licenseType:o,upgradeReason:k.i.CREATE_FILE,entryPoint:j.tc.CREATE_FILE_PROJECT_VIEW})(e)})({event:n,editorType:e,createFile:r,dispatch:s,fileCreationOptionState:t,handleUpgradeBuilder:a});default:(0,n.xb)(t)}}({fileCreationOptionState:l,createFile:a({editorType:e,contextClicked:t}),handleUpgradeBuilder:o,editorType:e,dispatch:r}),c=function({editorType:e,fileCreationOptionState:t,trackingContextProperties:r}){let a=(0,i.Ci)(e),s=(()=>{switch(t){case m.CAN_CREATE:case m.CANNOT_CREATE:case m.UPGRADE_PENDING:return!1;case m.CAN_AUTO_UPGRADE:case m.CAN_REQUEST_UPGRADE:return!0;default:(0,n.xb)(t)}})();return{...r,trackingDescriptor:E.c.CREATE_FILE,licenseType:a,billableProductKey:a&&(0,C.F2)(a),needsUpgrade:s}}({editorType:e,fileCreationOptionState:l,trackingContextProperties:s});return e=>{(0,N.Cu)(c),d(e)}},[a,s,r,o])}({lgFolder:t,newFileFrom:e});return{newFiles:r.map(({editorType:e,fileCreationOptionState:t,isDisabled:r})=>(0,p.p)({editorType:e,isDisabled:r,isLoading:!1,showRequestLabel:t===m.CAN_REQUEST_UPGRADE,showRequestSentLabel:t===m.UPGRADE_PENDING,onClick:s({editorType:e,contextClicked:(0,f.V)(e),fileCreationOptionState:t})})),import:(0,g.ud)(t)?(0,p.u)({isLoading:!1,dispatch:a}):null}}({lgFolder:e,newFileFrom:t,fileCreationOptions:r}),A=r.filter(e=>e.fileCreationOptionState===m.CAN_REQUEST_UPGRADE).map(e=>(0,i.Ci)(e.editorType)).filter(Boolean).sort().join(",");return(0,a.jsx)(s.a,{menuItems:R,trackingProperties:{requestableLicenseTypes:A,hasRequestableLicenses:!!A}})}},596856:(e,t,r)=>{r.d(t,{S:()=>n,n:()=>o});var a=r(27355);let{useRegisterMenu:s,isOpenAtom:i}=(0,r(498709).K)(),n=()=>(0,a.fp)(i)[0],o=443==r.j?s:null},950366:(e,t,r)=>{r.d(t,{a:()=>v,R:()=>y});var a=r(486106),s=r(514228),i=r(515363),n=r(227834),o=r(860955),l=r(859253),d=r(7378),c=r(632989),u=r(149844),m=r(888808),_=r(82433),p=r(303541);let f=d.forwardRef(function(e,t){let r=e["aria-expanded"];return(0,a.jsxs)(c.E,{ref:t,..._.xk(g.button,r&&"false"!==r&&g.buttonActive),...e,children:[(0,a.jsx)(u.e,{"aria-hidden":!0}),(0,a.jsxs)("div",{className:"x78zum5 x1v2ro7d x6s0dn4",children:[(0,p.t)("file_browser.tool_bar.create"),(0,a.jsx)(m.k,{"aria-hidden":!0})]})]})}),g={button:{display:"x78zum5",gap:"x167g77z",rowGap:null,columnGap:null,paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",paddingLeft:"x163pfp",paddingRight:"xmzs88n",paddingInlineStart:null,paddingInlineEnd:null,alignItems:"x6s0dn4",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,color:"x1tk3asg","--color-icon":"xwa2v1s",backgroundColor:"xu5wzci x3sfz7g xazsp2l x1roy7tt x14nhee1",boxShadow:"xb67q6v xn3n4wp x1swp962",overflow:"xb3r6kr",overflowX:null,overflowY:null,minWidth:"x1pshirs",$$css:!0},buttonActive:{backgroundColor:"xs07v55",boxShadow:"xb67q6v",$$css:!0}};var h=r(596856);function x({menuItems:e,trackingProperties:t,disabled:r,dataOnboardingKey:s}){let{getTriggerProps:i,manager:n}=o.b();return(0,h.n)(n),(0,a.jsxs)(o.bL,{manager:n,children:[(0,a.jsx)(f,{...i(),disabled:r,"data-onboarding-key":s}),(0,a.jsx)(l.f,{menuItems:e,trackingProperties:t})]})}var b=r(421640);function v(e){let t=(0,b.k)();return(0,i.WX)({markName:"FileCreateEntrypoint",isLoaded:!0}),(0,a.jsx)(x,{...e,disabled:t})}function y({newFileFrom:e,forceOpenNewTab:t,dataOnboardingKey:r}){let i=(0,s.d4)(e=>e.user?.drafts_folder_id),o=(0,n.Q)({newFileFrom:e,forceOpenNewTab:t,folderId:i,contextClicked:"recents_file_creation_thumbnails_created"});return(0,a.jsx)(v,{menuItems:o,dataOnboardingKey:r})}},421640:(e,t,r)=>{r.d(t,{V:()=>o,k:()=>l});var a=r(191312),s=r(53721),i=r(522082),n=r(231614);function o(e){return({[a._Y.DESIGN]:"toolbar_design_created",[a._Y.WHITEBOARD]:"toolbar_figjam_created",[a._Y.SLIDES]:"toolbar_slides_created",[a._Y.SITES]:`toolbar_${s.oQ}_created`,[a._Y.COOPER]:`toolbar_${s.sq}_created`,[a._Y.FIGMAKE]:`toolbar_${s.GJ}_created`})[e]}function l(){let e=(0,n.vt)(),t=(0,i.jn)();return e||t}},653470:(e,t,r)=>{r.r(t),r.d(t,{PdfConfirmationModal:()=>x});var a=r(486106),s=r(7378),i=r(465776),n=r(807535),o=r(437088),l=r(38914),d=r(272243),c=r(308099),u=r(932270),m=r(270045),_=r(763686),p=r(589278),f=r(617427),g=r(303541),h=r(370443);function x({fileImportDescription:e,onConfirm:t,onCancel:r}){let[x,b]=(0,s.useState)(void 0),v=(0,s.useMemo)(()=>{let e=(0,n.U)(_.h62).map(e=>({key:e,value:_.h62[e],label:function(e){switch(e){case _.h62.MIRO:return"Miro";case _.h62.MURAL:return"Mural";case _.h62.LUCID:return"Lucid";case _.h62.JAMBOARD:return"Jamboard";case _.h62.UNKNOWN:return(0,g.t)("file_browser.file_import_view.select_pdf_source_input_unknown_value");default:(0,i.xb)(e)}}(e)}));return e.sort((e,t)=>e.key===t.key?0:e.key===_.h62.UNKNOWN?1:t.key===_.h62.UNKNOWN?-1:e.label.localeCompare(t.label)),e},[]),y=(0,s.useCallback)(e=>{b(e)},[]),w=(0,s.useCallback)(()=>{x&&t(_.h62[x])},[t,x]),j=o.hS({open:!0,onClose:r,preventUserClose:!0});return(0,a.jsx)(l.bL,{manager:j,width:"fit-content",children:(0,a.jsxs)(d.vo,{children:[(0,a.jsx)(d.Y9,{children:(0,a.jsx)(d.hE,{children:(0,g.t)("file_browser.file_import_view.select_pdf_source_header")})}),(0,a.jsx)(d.nB,{children:(0,a.jsxs)("div",{className:p.s.flex.flexColumn.pt4.gap16.textBodyMedium.$,children:[(0,a.jsx)("div",{children:e}),(0,a.jsx)("form",{className:p.s.mb8.$,children:(0,a.jsx)(c.b,{legend:(0,a.jsx)(u.q,{children:(0,g.tx)("file_browser.file_import_view.select_pdf_source_input_legend")}),value:x,onChange:y,children:v.map(e=>(0,a.jsx)(c.c,{value:e.value,label:(0,a.jsx)(m.J,{className:p.s.textBodyMedium.$,children:e.label}),children:e.key===_.h62.UNKNOWN&&(0,g.tx)("file_browser.file_import_view.select_pdf_source_input_unknown_disclaimer")},e.key))})})]})}),(0,a.jsx)(d.wi,{children:(0,a.jsxs)(d.jk,{children:[(0,a.jsx)(f.$z,{variant:"secondary",onClick:r,trackingProperties:{trackingDescriptor:h.c.FILE_IMPORT_X_BUTTON,text:"dismiss"},children:(0,g.tx)("modal.cancel")}),(0,a.jsx)(f.$z,{variant:"primary",disabled:!x,onClick:w,children:(0,g.tx)("modal.confirm")})]})})]})})}},891073:(e,t,r)=>{r.r(t),r.d(t,{RevokeProjectTransferModal:()=>f});var a=r(486106),s=r(514228),i=r(437088),n=r(38914),o=r(272243),l=r(521428),d=r(589278),c=r(303541),u=r(302958),m=r(156213),_=r(831799),p=r(747039);function f(e){let{pending:t,canRevokeProjectTransfer:r,isTransferTeam:f=!1}=e,g=(0,s.wA)(),h=i.hS({open:e.open,onClose:e.onClose}),x=t.id,b=t.source_user_email,v=t.destination_user_email,y=t.is_transfer_copy,w=()=>{p.S.deleteAssetTransferRequest({id:x}).then(()=>{g(u.F.enqueue({message:(0,c.t)("revoke_transfer_modal.visual_bell.transfer_revoked")}))},e=>{g(u.F.enqueue({message:(0,c.t)("revoke_transfer_modal.visual_bell.something_went_wrong"),error:!0}))})};return(0,a.jsx)(_.fu,{name:"Asset Transfer Revoke Modal",properties:{pendingInviteId:x},children:(0,a.jsx)(n.bL,{manager:h,width:"lg",children:(0,a.jsxs)(o.vo,{children:[(0,a.jsx)(o.Y9,{children:(0,a.jsx)(o.hE,{children:(0,c.t)("revoke_transfer_modal.header_title")})}),(0,a.jsxs)(o.nB,{scrolling:"none",children:[(0,a.jsx)("div",{className:d.s.py8.$,children:f?(0,c.tx)("revoke_transfer_modal.transfer_details_team",{sourceUserEmail:b,destinationUserEmail:v}):y?(0,c.tx)("revoke_transfer_modal.transfer_copy_details",{sourceUserEmail:b,destinationUserEmail:v}):(0,c.tx)("revoke_transfer_modal.transfer_details",{sourceUserEmail:b,destinationUserEmail:v})}),(0,a.jsx)("div",{className:d.s.py8.$,children:(0,c.tx)("revoke_transfer_modal.function_explanation")})]}),(0,a.jsx)(o.wi,{children:(0,a.jsxs)(o.jk,{children:[(0,a.jsx)(l.$n,{variant:"secondary",onClick:e.onClose,children:(0,c.t)("revoke_transfer_modal.go_back")}),(0,a.jsx)(l.$n,{variant:"destructive",onClick:()=>{w(),g(m.Lo())},disabled:!r,children:(0,c.t)("revoke_transfer_modal.revoke")})]})})]})})})}},277163:(e,t,r)=>{r.d(t,{f:()=>o});var a=r(486106),s=r(129884),i=r(778125),n=r(954184);function o(e){return(0,a.jsx)(i.Me,{className:"addition_button--button--X9H6b","data-onboarding-key":e.data_onboarding_key,"data-tooltip":e.data_tooltip,"data-tooltip-show-immediately":e.disabled||void 0,"data-tooltip-type":s.Ib.TEXT,disabled:e.disabled,innerText:e.innerText,isBackgroundTransparent:e.isBackgroundTransparent,onClick:e.onClick,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter,svg:n.A})}},102598:(e,t,r)=>{r.r(t),r.d(t,{FolderUpdateDescriptionModal:()=>l});var a=r(486106),s=r(514228),i=r(303541),n=r(598926),o=r(815584);function l({folder:e}){let t=(0,s.wA)();return(0,a.jsx)(o.c,{initialName:e.description??"",title:(0,i.t)("resource_rename_modal.edit_description"),placeholder:"",submitText:(0,i.t)("resource_rename_modal.save"),onRename:r=>t(n.ub({folderId:e.id,description:r.trim()})),allowEmptyString:!0,maxLength:200})}},430756:(e,t,r)=>{r.r(t),r.d(t,{FolderCreationModal:()=>er});var a=r(486106),s=r(7378),i=r(514228),n=r(437088),o=r(38914),l=r(272243),d=r(438674),c=r(547944),u=r(601108),m=r(416935),_=r(288654),p=r(637027),f=r(490799),g=r(858013),h=r(589278),x=r(617427),b=r(303541),v=r(34809),y=r(598926),w=r(156213),j=r(985254),T=r(831799),E=r(864281),I=r(388233),N=r(372672),C=r(191312),S=r(43951),k=r(349248),R=r(336853),A=r(12796),O=r(915142),F=r(913057),P=r(165519),L=r(557142),D=r(761870),M=r(696396),B=r(393279),U=r(27355),W=r(207101),$=r(621515),G=r(545877),V=r(268271),z=r(425180),H=r(11928),K=r(858282),Y=r(6204);let q=(0,G.r1)("seen_sharing_clarity_project_modal_overlay"),J="sc_project_creation_permission_onboarding_key";function X(){let e=(0,U.md)(q),{show:t,isShowing:r,complete:s}=(0,$.e)({overlay:Y.QpH,priority:V.N.DEFAULT_MODAL},[e]);(0,W.h)(()=>{t({canShow:e=>!e})});let i=(0,a.jsx)("a",{href:"https://help.figma.com/hc/articles/360038006494-Create-a-new-project",className:h.s.colorTextOnbrand.underline.$,children:(0,b.tx)("rcs.sharing_clarity.learn_more")});return(0,a.jsx)(z.rq,{arrowPosition:K.F_.LEFT_TITLE,description:(0,a.jsx)("p",{children:(0,b.tx)("rcs.sharing_clarity.project_creation_permissions_description",{learnMoreLink:i})}),disableHighlight:!0,emphasized:!0,isShowing:r,onClose:s,targetKey:J,title:(0,b.tx)("rcs.sharing_clarity.project_creation_permissions_title"),trackingContextName:"Sharing Clarity Project Creation Permission Onboarding",zIndex:H.R.MODAL})}var Q=r(907616),Z=r(986349),ee=r(154112);let et="folder_creation_modal--sectionHeader--EcWYc text--fontPos11--2LvXf text--_fontBase--QdLsd";function er(e){let t=(0,i.wA)(),[r,U]=s.useState(""),[W,$]=s.useState(!1),[G,V]=s.useState(0),z=C.eD.TEAM_ACCESS_EDIT,H=E.h.useTrackingContext({trigger:P.b.FOLDER_CREATION_MODAL}),K=(0,i.d4)(e=>e.contacts),Y=(0,i.d4)(e=>e.dropdownShown),q=(0,i.d4)(e=>e.autocomplete),er=(0,N.iZ)(),ea=(0,_.Rs)(S.mCn,{teamId:e.teamId}),es=(0,_.Rs)(S.sMZ,{name:"seen_connected_project_in_project_creation_onboarding"}),ei=!!es.data?.currentUser?.userFlagByName,en=(0,u.k)().sc_workspace_audience,eo=s.useMemo(()=>{if("loading"===ea.status||!ea.data)return null;let t=ea.data.team;if(!t)return null;let r="loaded"===t.workspace.status?t.workspace.data:void 0,a={id:e.teamId,name:t.name,imgUrl:t.imgUrl,subscription:t.subscription,student_team:!!t.studentTeamAt,grace_period_end:t.gracePeriodEnd,restrictions_list:t.restrictionsList,canAdmin:t.canAdmin,canEdit:t.canEdit,sharing_audience_control:t.sharingAudienceControl},s=t.org&&{id:t.org.id,name:t.org.name,img_url:t.org.imgUrl,org_domains:(0,k.vy)(t.org.orgDomains),domain_capture:t.org.domainCapture,invite_whitelist_guest_invite_setting:t.org.inviteWhitelist?.guestInviteSetting};return{team:a,plan:t?.plan,org:s||null,workspace:r}},[ea,e.teamId]),el=eo&&eo.team,ed=eo&&eo.org,ec=eo&&eo.plan,eu=(0,I.b)(ec?.tier),em=1===G&&ec?.tier!==C.Ag.STARTER&&eu&&!ei,e_=ed&&ed.org_domains?ed.org_domains:{domains:[],isFetching:!1,fetchedAt:null},ep=s.useCallback(()=>el&&el.sharing_audience_control!==C.PQ.ORG_EDIT&&el.sharing_audience_control!==C.PQ.ORG_VIEW?el.sharing_audience_control===C.PQ.WORKSPACE_EDIT||el.sharing_audience_control===C.PQ.WORKSPACE_VIEW?Q._9.WORKSPACE:Q._9.INVITE_ONLY:Q._9.ORG,[el]),ef=s.useCallback(()=>el&&(el.sharing_audience_control===C.PQ.ORG_EDIT||el.sharing_audience_control===C.PQ.WORKSPACE_EDIT)?Q.J4.EDIT:Q.J4.VIEW,[el]),[eg,eh]=s.useState(ep()),[ex,eb]=s.useState(ef()),[ev,ey]=s.useState(L.e6.EDITOR);s.useEffect(()=>{eh(ep()),eb(ef())},[ep,ef]);let ew=()=>{1===G?V(0):(t(w.Lo()),t(v.bx()))},ej=e=>(0,O.t9)(e,ed,e_),eT=e=>{let t=(0,u.k)().folder_creation_restricted_guests_err_ui&&ed?.invite_whitelist_guest_invite_setting!=null;return(0,O.yI)(e,K.usersByEmail[e]||e,ed,e_,er.email,t?(0,b.t)("project_creation.restricted_against_adding_external_users"):null)},eE=()=>ed&&ed.domain_capture&&e_.domains.length>0?(0,D.Z)(q).filter(e=>(0,m.xf)(e)&&!(0,R.H_)(e_.domains,e)):[],eI=e=>{if(ed&&ed?.invite_whitelist_guest_invite_setting==null&&e.length>0){t((0,w.to)({type:ee.F,data:{emails:e,onConfirm:()=>{eN()},popStack:!0,orgName:ed.name}}));return}},eN=()=>{let a;eg===Q._9.ORG?a=ex===Q.J4.EDIT?C.PQ.ORG_EDIT:C.PQ.ORG_VIEW:eg===Q._9.WORKSPACE?a=ex===Q.J4.EDIT?C.PQ.WORKSPACE_EDIT:C.PQ.WORKSPACE_VIEW:eg===Q._9.INVITE_ONLY&&(a=C.PQ.INVITE_ONLY),t(y.vt({shouldRedirect:!e.modalShown,name:r.trim(),teamId:e.teamId,isInviteOnly:void 0,isViewOnly:void 0,sharingAudienceControl:ed?a:void 0,teamAccess:z,inviteEmails:(0,D.Z)(q),inviteLevel:ev,orgId:ed?.id,onFolderCreated:e.onFolderCreated}))},eC=n.hS({open:e.open,onClose:ew}),eS=0===G?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"folder_creation_modal--nameHeader--MgNL8 folder_creation_modal--sectionHeader--EcWYc text--fontPos11--2LvXf text--_fontBase--QdLsd",children:(0,b.t)("project_creation.name")}),(0,a.jsx)(p.ks,{"aria-label":(0,b.t)("project_creation.project_name"),autoFocus:!0,className:"folder_creation_modal--folderNameInput--Lcn4c",maxLength:p.wG,minLength:1,onBlur:()=>$(!1),onChange:e=>U(e.target.value),onFocus:()=>$(!0),placeholder:(0,b.t)("project_creation.ex_growth_experiments"),required:!0,value:r}),0===r.trim().length&&!W&&(0,a.jsx)("div",{className:"folder_creation_modal--inputErrorMessage--AGzQC",children:(0,b.t)("project_creation.project_name_empty")}),ed&&el&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:et,"data-onboarding-key":J,children:(0,b.t)("project_creation.who_has_access")}),(0,a.jsx)(X,{}),(0,a.jsx)(Q.YU,{resourceType:C.vt.FOLDER,value:eg,onChange:eh,org:ed,team:el,audienceAccessLevel:ex,workspace:en?eo.workspace:void 0}),eg!==Q._9.INVITE_ONLY&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:et,children:(0,b.t)("folder_permissions_modal.what_they_can_do")}),(0,a.jsx)(Q.Iz,{selectedPermissionsLevel:ex,setSelectedPermissionsLevel:eb}),(0,a.jsx)("div",{className:"folder_creation_modal--subtitle--H3qLc text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd",children:ex===Q.J4.VIEW?(0,b.t)("project_creation.can_view_and_comment"):(0,b.t)("project_creation.can_create_and_edit_files")})]})]})]}):(()=>{let e=ed?ed.id:null,r=[L.e6.EDITOR,L.e6.VIEWER];return(0,a.jsx)("div",{className:"folder_creation_modal--stepTwoContainer--7Oi4o",children:(0,a.jsx)(B.e,{SearchResultComponent:Z.o6,TokenComponent:Z.gy,autocomplete:q,dispatch:t,dropdownKey:"permissions-invite-dropdown",dropdownShown:Y,fixedAutocompleteResults:!0,getSearchResults:t=>(0,F.Wj)(t,K.usersByEmail,er,[],e,null,null,{inviteLevel:ev,source:"folder-creation-modal"}),getSelectText:A.C1,getTokenIdentifier:e=>(0,R.Ts)(e.content)?e.content.email:e.content,inviteLevel:ev,joinLinkShown:!1,onInviteLevelChange:ey,options:r,placeholderText:(0,b.t)("team_creation.add_a_name_or_email"),searchResultToken:ej,shouldAutoFocus:!0,useContainerRefForWidth:!0,validateToken:eT,validateTokensAsEmail:!0})})})();return(0,a.jsx)(T.fu,{name:M.e0.CREATE_NEW_PROJECT_MODAL,properties:{teamId:el?.id,...H},children:(0,a.jsx)(o.bL,{manager:eC,width:"lg",children:(0,a.jsxs)("div",{className:"folder_creation_modal--multiContents--U8sJ8",children:[(0,a.jsxs)(l.vo,{children:[(0,a.jsx)(l.Y9,{children:(0,a.jsx)(l.hE,{children:0===G?(0,b.t)("project_creation.create_project"):(0,b.t)("project_creation.add_people_to_project_name",{projectName:r})})}),(0,a.jsx)(l.nB,{children:eo?eS:(0,a.jsx)("div",{className:"folder_creation_modal--loading--9KmQd",children:(0,a.jsx)(g.qc,{})})}),eo&&(0,a.jsxs)(l.wi,{children:[(0,a.jsx)("div",{className:"folder_creation_modal--footer--9Hie8 folder_creation_modal--subtitle--H3qLc text--fontPos11--2LvXf text--_fontBase--QdLsd",children:(0,b.tx)("project_creation.step_number_of_max_steps",{currentStep:G+1,maxSteps:2})}),(0,a.jsxs)(l.jk,{children:[(0,a.jsx)(x.$z,{onClick:ew,variant:"secondary",children:0===G?(0,b.tx)("project_creation.cancel"):(0,b.tx)("project_creation.back")}),(0,a.jsx)(x.$z,{variant:"primary",onClick:()=>{if(0===G)V(1);else if(ed){let e=eE();e.length>0?eI(e):eN()}else eN()},disabled:0===G&&0===r.trim().length,children:0===G?(0,b.tx)("general.continue"):(0,b.tx)("project_creation.create_project")})]})]})]}),em&&(0,a.jsx)(l.Wk,{children:(0,a.jsx)(f._,{color:f.S.INFORMATION,icon:(0,a.jsx)(c.U,{}),onDismiss:()=>{t(j.b({seen_connected_project_in_project_creation_onboarding:!0}))},text:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:h.s.textBodyMediumStrong.$,children:(0,b.t)("project_creation.figma_has_connected_projects")}),(0,a.jsx)("p",{children:(0,b.tx)("project_creation.learn_more_about_the_benefit",{learnMore:(0,a.jsx)(d.N,{newTab:!0,href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects",children:(0,b.t)("file_browser.team_settings.learn_more")})})})]})})})]})})})}},507428:(e,t,r)=>{r.d(t,{l:()=>a});let a="trashed-projects"},406351:(e,t,r)=>{r.r(t),r.d(t,{AddPinModal:()=>y});var a=r(486106),s=r(7378),i=r(514228),n=r(465776),o=r(165054),l=r(819288),d=r(288654),c=r(11),u=r(573154),m=r(303541),_=r(984674),p=r(156213),f=r(314264),g=r(943101),h=r(43951),x=r(698840),b=r(687448),v=r(147337);function y({fileKey:e,source:t,open:r,onClose:n}){let _=(0,i.wA)(),y=(0,b.p)((0,m.t)("file_browser.pinning.pin_modal.confirmation_bell"),"file-browser-workspace-add-pin"),j=(0,d.Rs)(h.wtK,{fileKey:e}),T=function(e){let[t,r]=s.useState(!1),a="loaded"===e.status&&e.data.file&&!e.data.file.canPinToWorkspace&&e.data.file.canEdit;return a&&!t&&r(!0),a||t}(j);if("loaded"!==j.status)return null;let{file:E}=j.data;if(!E)return(0,c.$D)(o.e.WAYFINDING,Error("AddPinModal unable to lookup file by ID")),_(p.Lo()),null;let I=E.computedWorkspace?.workspace;if(!I)return(0,c.$D)(o.e.WAYFINDING,Error("AddPinModal opened for file with no workspace")),_(p.Lo()),null;let N=g.F.toSinatra(E),C=async e=>{try{await x.p.pinFile({resourceType:v.AH,resourceId:I.id,fileKey:E.key,description:e,shouldUpdatePermissions:T}),(0,f.E9)("file_browser_file_pinned_to_resource",E,{resourceType:v.AH,resourceId:I.id,source:t,pinDescription:(0,l._Z)(e)}),y(I.id)}catch(e){throw _(u.s.error((0,m.t)("file_browser.pinning.pin_modal.error"))),e}},S=T?(0,a.jsx)(w,{file:E,workspace:I}):null;return(0,a.jsx)(b.N,{title:(0,m.t)("file_browser.pinning.pin_modal.pin_file_to_workspace"),confirmText:(0,m.t)("file_browser.pinning.pin_file"),onSubmit:C,file:N,initialDescription:null,warningContent:S,open:r,onClose:n})}function w({file:e,workspace:t}){let r=e.parentOrgId;(0,n.B1)(r);let s=(0,i.d4)(({orgById:e})=>e[r].name);return(0,a.jsx)(_.E,{children:(0,m.tx)("file_browser.pinning.update_permissions.content",{workspaceName:t.name,permission:(0,a.jsx)(_.E,{fontWeight:"bold",children:(0,m.tx)("file_browser.pinning.update_permissions.content.permission",{orgName:s})})})})}},551245:(e,t,r)=>{r.r(t),r.d(t,{DeletePinModal:()=>b});var a=r(486106),s=r(7378),i=r(514228),n=r(165054),o=r(819288),l=r(288654),d=r(11),c=r(441305),u=r(573154),m=r(303541),_=r(314264),p=r(372672),f=r(191312),g=r(43951),h=r(698840),x=r(687448);function b({pinnedFileId:e,open:t,onClose:r}){let b=(0,p.TA)(),v=(0,i.wA)(),y=(0,x.p)((0,m.t)("file_browser.pinning.delete_pin_modal.confirmation_bell"),"file-browser-workspace-delete-pin"),[w,j]=s.useState(!1),T=(0,l.Rs)(g.qBf,{pinnedFileId:e});if("loaded"!==T.status)return null;let{pinnedFile:E}=T.data;if(!E)return(0,d.$D)(n.e.WAYFINDING,Error("DeletePinModal unable to lookup pinned file by ID")),r(),null;if(E.resourceType!==f.K.WORKSPACE)return(0,d.$D)(n.e.WAYFINDING,Error("DeletePinModal opened for pinned file with non-workspace resource type"),{extra:{resourceType:E.resourceType}}),r(),null;let I=async t=>{t.preventDefault();try{j(!0),await h.p.deletePin({pinnedFileId:e}),(0,_.E9)("file_browser_file_unpinned_from_resource",E.file,{resourceId:E.resourceId,resourceType:E.resourceType,isPinCreator:E.creator?.id===b,pinDescription:(0,o._Z)(E.description)}),y(E.resourceId),r()}catch(e){v(u.s.error((0,m.t)("file_browser.pinning.delete_pin_modal.error")))}finally{j(!1)}};return(0,a.jsx)(c.R,{title:(0,m.t)("file_browser.pinning.delete_pin_modal.header"),confirmText:(0,m.t)("file_browser.pinning.delete_pin_modal.confirm"),onConfirm:I,destructive:!0,isLoading:w,open:t,onClose:r,children:(0,m.t)("file_browser.pinning.delete_pin_modal.content")})}},331804:(e,t,r)=>{r.r(t),r.d(t,{EditPinModal:()=>g});var a=r(486106),s=r(514228),i=r(165054),n=r(288654),o=r(11),l=r(573154),d=r(303541),c=r(156213),u=r(943101),m=r(191312),_=r(43951),p=r(698840),f=r(687448);function g({pinnedFileId:e,open:t,onClose:r}){let g=(0,s.wA)(),h=(0,f.p)((0,d.t)("file_browser.pinning.pin_modal.edit.confirmation_bell"),"file-browser-workspace-edit-pin"),x=(0,n.Rs)(_.vgO,{pinnedFileId:e});if("loaded"!==x.status)return null;let{pinnedFile:b}=x.data;if(!b)return(0,o.$D)(i.e.WAYFINDING,Error("EditPinModal unable to lookup pinned file by ID")),g(c.Lo()),null;if(b.resourceType!==m.K.WORKSPACE)return(0,o.$D)(i.e.WAYFINDING,Error("EditPinModal opened for pinned file with non-workspace resource type"),{extra:{resourceType:b.resourceType}}),g(c.Lo()),null;let v=b.resourceId,y=async t=>{try{await p.p.updatePin({pinnedFileId:e,description:t}),h(v)}catch(e){throw g(l.s.error((0,d.t)("file_browser.pinning.pin_modal.edit.error"))),e}},w=u.F.toSinatra(b.file);return(0,a.jsx)(f.N,{title:(0,d.t)("file_browser.pinning.pin_modal.edit_pin_description"),confirmText:(0,d.t)("file_browser.pinning.pin_modal.save"),onSubmit:y,file:w,initialDescription:b.description,open:t,onClose:r})}},687448:(e,t,r)=>{r.d(t,{N:()=>U,p:()=>W});var a=r(486106),s=r(7378),i=r(514228),n=r(437088),o=r(38914),l=r(272243),d=r(521428),c=r(256203),u=r(687265),m=r(82433),_=r(819288),p=r(445814),f=r(858013),g=r(457828),h=r(589278),x=r(303541),b=r(302958),v=r(767868),y=r(226458),w=r(929976),j=r(543100),T=r(386952),E=r(858344),I=r(934246),N=r(27355),C=r(536384),S=r.n(C),k=r(580638),R=r(347284),A=r(925868),O=r(50769),F=r(813700),P=r(672640),L=r(433187);function D({buttonClassName:e,onInsert:t,closeOnInsert:r}){let[i,n]=s.useState(null),o=s.useRef(null),l=s.useCallback(()=>{o.current&&n(o.current.getBoundingClientRect())},[n]),d=s.useCallback(e=>{t(e),r&&n(null)},[t,r,n]);return(0,a.jsxs)("button",{className:e,ref:o,onClick:l,children:[(0,a.jsx)(P.In,{icon:"smiley-32"}),i&&(0,a.jsx)(L._,{onInsert:d,onCancel:()=>n(null),targetRect:i})]})}let M={library:{list:()=>Promise.resolve([]),search:()=>Promise.resolve([]),maxResultsLength:()=>0}};function B({placeholder:e,text:t,onChange:r,maxLength:n,onSubmit:o,textAreaClassName:l}){let d=(0,i.wA)(),c=N.zl.get(O.ph),[u,m]=s.useState(!1),p=s.useRef(null),f=s.useCallback(e=>{e.preventDefault(),e.stopPropagation(),p.current&&p.current.focus()},[]),g=(0,_.Kq)(t,{includeTrailingWhitespace:!0});return(0,a.jsxs)("div",{className:"emoji_text_area--textAreaContainer--4FHeL",onClick:f,children:[(0,a.jsxs)(R.P,{className:S()(h.s.flexGrow1.overflowAuto.maxWFull.borderBox.if(u,h.s.bb1.bSolid.colorBorder).$,l),innerClassName:h.s.hFull.$,children:[(0,a.jsx)(F.iX,{ref:p,className:h.s.pt16.px16.borderBox.if(u,h.s.pb4).$,currentOrgUsers:{orgUsers:{}},dispatch:d,editorOnClear:I.lQ,editorOnInsert:I.lQ,mentionables:M,messageMeta:t,mountInputFocused:!0,onCancel:I.lQ,onFocus:I.lQ,onSubmit:o??I.lQ,onUpdateTextArea:I.lQ,placeholderText:e,setIsEditorFocused:I.lQ,submitOnEnter:!1,typeahead:c,updateMessage:([e,t])=>{r(e)}}),(0,a.jsx)(A.a,{onInitialLoad:e=>m(!e),onIntersectionChange:e=>m(!e.isIntersecting)})]}),(0,a.jsxs)("div",{className:h.s.flex.justifyBetween.itemsCenter.pl12.pr16.py12.$,children:[(0,a.jsx)(D,{buttonClassName:"emoji_text_area--emojiPickerButton--CGYqF",onInsert:e=>{if(p.current){let t=k.dN.get(e.id);t&&(p.current.insertEmoji(t),p.current.focus())}},closeOnInsert:!0}),n&&(0,a.jsxs)("div",{className:h.s.if(g>n,h.s.colorTextDanger,h.s.colorTextSecondary).cursorDefault.$,children:[g,"/",n]})]})]})}function U({title:e,confirmText:t,onSubmit:r,file:i,initialDescription:u,warningContent:b,open:w,onClose:T}){let[E,I]=s.useState(u??[]),[N,C]=s.useState(!1),S=(0,j.fA)(i),k=(0,v.l)(i.folder_id),R=(0,_.Kq)(E,{includeTrailingWhitespace:!0}),A=R<=100&&R>0,O=s.useCallback(async()=>{if(A)try{C(!0),await r(E),T()}finally{C(!1)}},[r,A,T,E]),F=n.hS({open:w,onClose:T}),P=(0,y.C)(S),L=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:h.s.p16.gap16.flex.flexColumn.$,children:[(0,a.jsxs)("div",{className:h.s.flex.flexColumn.gap16.$,children:[(0,a.jsx)("div",{children:(0,a.jsx)(g.e,{tile:S,borderRadius:6})}),(0,a.jsxs)("div",{className:"x78zum5 x1q0g3np x1v2ro7d x6s0dn4",children:[(0,a.jsx)(p.w4,{size:16,type:P}),(0,a.jsxs)("div",{className:h.s.flex.flexColumn.gap2.flexGrow1.justifyCenter.overflowHidden.cursorDefault.$,children:[(0,a.jsx)("div",{...m.Ay.props($.title),children:i.name}),"loaded"===k.status&&k.data?(0,a.jsx)("div",{...m.Ay.props($.subtitle),children:k.data}):null]})]})]}),(0,a.jsx)(B,{placeholder:(0,x.t)("file_browser.pinning.pin_modal.description_textarea_placeholder"),text:E,onChange:I,onSubmit:O,maxLength:100,textAreaClassName:h.s.maxH100.$})]}),b?(0,a.jsxs)("div",{className:h.s.colorBgWarningTertiary.px16.py12.flex.columnGap8.$,children:[(0,a.jsx)(c.R,{className:h.s.flexShrink0.$}),(0,a.jsx)("span",{children:b})]}):null]});return(0,a.jsx)(o.bL,{manager:F,width:"lg",children:(0,a.jsxs)(l.vo,{children:[(0,a.jsx)(l.Y9,{children:(0,a.jsx)(l.hE,{children:e})}),(0,a.jsx)(l.nB,{padding:0,children:L}),(0,a.jsx)(l.wi,{children:(0,a.jsxs)(l.jk,{children:[(0,a.jsx)(d.$n,{variant:"secondary",onClick:T,children:(0,x.tx)("modal.cancel")}),N?(0,a.jsx)(d.$n,{disabled:!0,children:(0,a.jsx)(f.kt,{className:h.s.colorIconOnbrand.$})}):(0,a.jsx)(d.$n,{disabled:!A,variant:"primary",onClick:O,children:t})]})})]})})}function W(e,t){let r=(0,i.wA)(),a=(0,T._6)();return s.useCallback(s=>{let i;("workspace"!==a.view||a.subView!==E.V0.DIRECTORY)&&(i={text:(0,x.t)("file_browser.pinning.pin_modal.confirmation_bell.view_workspace"),action:()=>{r(w.sf({view:"workspace",subView:E.V0.DIRECTORY,workspaceId:s,selectedTab:E.dN.TEAMS}))}}),r(b.F.enqueue({type:t,message:e,button:i}))},[r,e,t,a])}let $={title:{...u.g.textBodyMediumStrong,$$css:!0},subtitle:{...u.g.textBodyMedium,$$css:!0}}},7113:(e,t,r)=>{r.d(t,{$:()=>m});var a=r(7378),s=r(514228),i=r(612521),n=r(63728);if(443==r.j)var o=r(976345);var l=r(929976),d=r(845253),c=r(858344);if(443==r.j)var u=r(247093);function m(){let e=(0,d.dq)(),t=(0,s.wA)();return a.useCallback((r,a)=>{if(t(o.kg({clickedResourceType:"workspace",resourceIdOrKey:r??void 0})),(0,n.Fo)(a)||a.shiftKey){let t=`/files/${e}/workspace/${r??u.O}/directory/teams`;i.Ay.redirect(t,"_blank"),a.preventDefault()}else t(l.sf({view:"workspace",subView:c.V0.DIRECTORY,workspaceId:r,selectedTab:c.dN.TEAMS}))},[e,t])}},831725:(e,t,r)=>{r.d(t,{h:()=>b});var a=r(486106),s=r(7378),i=r(656233),n=r(303541),o=r(409644),l=r(514228),d=r(976345),c=r(315794),u=r(332662),m=r(929976),_=r(314264),p=r(212807),f=r(471068),g=r(805373),h=r(697906);function x(e){let[t,r]=s.useState(!1),i=(0,l.wA)(),n=(0,l.d4)(e=>e.selectedView),o=(0,p.FC)(),x=e.team,b=()=>{(0,_._J)("file_browser_team_click",x.id,o,{selectedView:"recentsAndSharing"===n.view?n.tab||f.G.RECENTLY_VIEWED:n.view,viewMode:"grid"}),i(d.kg({clickedResourceType:"team",resourceIdOrKey:x.id})),i(m.sf({view:"team",teamId:x.id}))},v=e.selectedTeamId===e.team.id,y=t||v;return(0,a.jsx)(u.a,{canView:!0,description:x.description,headerLeft:(0,a.jsx)(g.Ro,{className:h.rP,entity:x,size:40}),headerRight:(0,a.jsx)(c.m3,{team:x,onLeave:e.onLeave,isCardActive:y}),isCardActive:y,isSelected:v,name:x.name,onClick:t=>{1===t.detail?e.setSelectedTeamId(e.team.id):2===t.detail&&b()},onMouseOut:()=>{r(!1)},onMouseOver:()=>{r(!0)}})}function b(e){let t=e.teams;(0,i.KQ)(t,"name");let[r,l]=s.useState(void 0);return(0,a.jsx)(o.X,{emptyView:(0,n.tx)("team_tile.guest.no_teams.info",{orgName:e.orgName}),children:t.map(t=>(0,a.jsx)(x,{team:t,onLeave:e.onLeave,selectedTeamId:r,setSelectedTeamId:l},t.id))})}},409644:(e,t,r)=>{r.d(t,{X:()=>l});var a=r(486106),s=r(443820),i=r(536384),n=r.n(i),o=(e=>(e.Medium="Medium",e.Large="Large",e))(o||{});function l(e){let t;return e.isLoading?(0,a.jsx)("div",{className:"tile_grid--loadingContainer--1gQIv",children:(0,a.jsx)(s.k,{htmlAttributes:{"data-testid":"loading-spinner"}})}):!e.children||Array.isArray(e.children)&&!e.children.length?(0,a.jsx)("div",{className:"tile_grid--emptyContainer--y8P1H text--fontPos11--2LvXf text--_fontBase--QdLsd",children:e.emptyView}):(t="Large"===e.tileSize?"tile_grid--gridLarge--EZC2-":"tile_grid--gridMedium--fzult",(0,a.jsx)("div",{className:n()("tile_grid--gridContainer--cn4vx",e.containerClassName),children:(0,a.jsx)("div",{className:t,children:e.children})}))}},637169:(e,t,r)=>{r.d(t,{$:()=>S,A:()=>A});var a=r(486106),s=r(7378);if(443==r.j)var i=r(614223);var n=r(763686),o=r(700578),l=r(27355),d=r(449184),c=r(169182),u=r(617427),m=r(303541),_=r(272488),p=r(370443),f=r(453826),g=r(621515),h=r(37051),x=r(104740),b=r(731583),v=r(62612),y=r(268271),w=r(858282),j=r(419216),T=r(532170),E=r(6204),I=r(888478),N=r(722541);let C=(0,c.ck)("bfb358109ac5994e69048d8390d3a0c334253aa8"),S="rfd-upsell-page-title";function k({nodeToHighlight:e,complete:t}){let[r,n]=s.useState(null),o=s.useRef(null),l=(0,v._X)({subscribeToUpdates_expensive:!0}),d=s.useCallback(()=>{o.current&&n(o.current.absoluteBounds.height*l.zoomScale)},[l.zoomScale]);return s.useEffect(()=>{if(!e){n(null);return}let t=`dev-page-change-upsell-${e}`,r=(0,b.EE)(t,[e],e=>{o.current=e.position,d()});return o.current=r.currentNodePosition[e]?.position||null,d(),()=>{(0,b.lB)(t)}},[e,d]),(0,a.jsxs)(j.NJ,{arrowPosition:w.F_.LEFT_TITLE,backgroundColor:"var(--color-bg)",className:N.R3,closeButtonClassName:N.b,dismissModal:t,hideIfArrowPositionDoesNotMatch:!0,hideIfTargetLost:!0,isCanvasNode:!0,leftOffset:12,noAnimation:!0,shouldNotWrapInParagraphTag:!0,targetKey:e,topOffset:r?-r/2-15:0,width:240,children:[(0,a.jsx)("div",{className:N.Xq,children:(0,m.t)("dev_handoff.rfd_signals_upsell.mark_as_ready")}),(0,a.jsx)("div",{className:N.O6,children:(0,a.jsx)("div",{className:N.zu,children:(0,m.t)("dev_handoff.rfd_signals_upsell.description")})}),(0,a.jsx)("div",{className:N.JP,children:(0,a.jsx)(i.J,{brand:"dev-handoff",children:(0,a.jsx)(u.$z,{trackingProperties:{trackingDescriptor:p.c.MARK_READY_FOR_DEV},variant:"primary",onClick:function(){e&&(t(),h.z4.setNodesReady(!0,[e],"dev-node-change-upsell",null))},children:(0,m.t)("dev_handoff.rfd_signals_upsell.mark_ready_for_dev")})})})]})}function R(e){d.az.trackDefinedEvent("activation.rfd_signal_upsell.disqualification_reason",{reason:e,upsellSubject:"page"})}function A(){let[e,t]=s.useState("show_page_tooltip"),[r,d]=s.useState(null),[c,h]=(0,l.fp)(I.hj),b=(0,l.Xr)(I.d1),A=(0,l.md)(I.Sp),O=(0,l.Xr)(I.Sp),F=(0,x.Z)("dev-handoff-rfd-signals-page-upsell"),P=(0,_.cR)(),{show:L,complete:D,uniqueId:M,isShowing:B}=(0,g.e)({overlay:E.ZNl,priority:y.N.HIGH_PRIORITY_MODAL,experiment:{check:P,predicate:e=>e,postCheck:()=>!0}});async function U(){c&&r&&n.Egt&&(await (0,o.UN)().setCurrentPageAsync(r),n.Egt.replaceSelection([c],!0),await F(await (0,v.QZ)({nodeId:c,alwaysPan:!0}),{alwaysNavToSimilarViewport:!0}),t("show_node_tooltip"))}return(s.useEffect(()=>{b({fn:D})},[D,b]),(0,f.E)(M,["page_name_changed_with_rfd_indicator"],e=>{if(!e.properties.pageId){R("no_page_id");return}if(A){R("already_seen_upsell_this_session");return}let t=(0,o.UN)().get(e.properties.pageId);if(!t){R("page_not_found");return}let r=function(e){let t=null,r=0,a=new Set;return function e(s){if(!a.has(s.guid)){if("FRAME"===s.type&&s.childCount>r&&s.canHaveStatus){let e=function e(t){let r=0;if(t.childCount>0)for(let a of t.childrenNodes)r+=1+e(a);return a.add(t.guid),r}(s);e>r&&(r=e,t=s)}s.childCount>0&&s.childrenNodes?.forEach(e)}}(e),t}(t);if(!r){R("no_upsell_frame_for_page");return}d(e.properties.pageId),h(r.guid),L({onShow:()=>O(!0)})}),B)?"show_page_tooltip"===e?(0,a.jsxs)(j.NJ,{arrowPosition:w.F_.LEFT_TITLE,backgroundColor:"var(--color-bg)",className:N.R3,closeButtonClassName:N.b,dismissModal:D,leftOffset:12,noAnimation:!0,shouldNotWrapInParagraphTag:!0,targetKey:S,width:240,children:[(0,a.jsx)("div",{className:N.Rg,children:(0,m.t)("dev_handoff.rfd_signals_upsell.title")}),(0,a.jsxs)("div",{className:N.O6,children:[(0,a.jsx)("div",{className:N.j,children:(0,a.jsx)(T.GV,{src:C,width:240})}),(0,a.jsx)("div",{className:N.zu,children:(0,m.t)("dev_handoff.rfd_signals_upsell.page_upsell.description")})]}),(0,a.jsx)("div",{className:N.JP,children:(0,a.jsx)(i.J,{brand:"dev-handoff",children:(0,a.jsx)(u.$z,{trackingProperties:{trackingDescriptor:p.c.SHOW_ME_HOW},variant:"primary",onClick:U,children:(0,m.t)("dev_handoff.rfd_signals_upsell.page_upsell.show_me_how")})})})]}):c?(0,a.jsx)(k,{nodeToHighlight:c,complete:D}):null:null}},231188:(e,t,r)=>{r.d(t,{i:()=>_});var a=r(486106);if(443==r.j)var s=r(443068);if(443==r.j)var i=r(640510);if(443==r.j)var n=r(465535);if(443==r.j)var o=r(342207);var l=r(82433),d=r(613863),c=r(347011),u=r(433510),m=r(129884);function _({favoriteType:e,orgId:t,resourceId:r,setFavorite:_,monochrome:f,teamId:g,size:h="md",dataTestId:x="favorite-star-button"}){let b=(0,c.Y)(r,e,t,g),v=(0,d._)({subscription:b,orgId:t,resourceId:r,setFavorite:_});return"loaded"!==b.status?(0,a.jsx)("div",{...l.Ay.props(f&&p.monochromePlaceholder),children:(0,a.jsx)(s.K,{variant:"secondary",disabled:!0,size:h,"aria-label":v.tooltip,htmlAttributes:{"data-tooltip-type":m.Ib.TEXT,"data-tooltip":v.tooltip,"data-tooltip-timeout-delay":50,"data-testid":"favorite-star-placeholder"},children:(0,a.jsx)(i.c,{"data-testid":"favorite-star-placeholder-unfavorited-icon"})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.K,{ref:v.buttonRef,"aria-label":v.tooltip,"aria-pressed":!!b.favorite,htmlAttributes:{"data-tooltip-type":m.Ib.TEXT,"data-tooltip":v.tooltip,"data-tooltip-timeout-delay":50,"data-testid":x},onClick:v.toggle,variant:"secondary",size:h,children:b.favorite?(0,a.jsx)(n._,{style:f?void 0:{"--color-icon":o.Tj.iconfavorite},"data-testid":`${x}-favorited-icon`}):(0,a.jsx)(i.c,{"data-testid":`${x}-unfavorited-icon`})}),!!t&&v.isDropdownShown&&(0,a.jsx)(u.t,{currentSectionId:b.favorite?.resource.sidebarSectionId??void 0,customSectionOrdering:b.orderedSidebarSections??[],"data-testid":"organize-favorite-menu",favoriteId:b.favorite?.id,orgId:t,resourceId:r,resourceType:e,sections:b.userSidebarSections??[],setFavorite:_,userHasMaxFavorites:b.hasMaxFavorites})]})}let p={monochromePlaceholder:{display:"xjp7ctv","--color-border-disabled":"x1qgxxjq",$$css:!0}}},858319:(e,t,r)=>{r.d(t,{u:()=>c});var a=r(7378),s=r(514228),i=r(748726),n=r(14223),o=r(372672),l=r(915142),d=r(158283);function c({prepopulatedEmail:e,parentOrg:t,orgDomains:r}){let c=(0,s.wA)(),u=(0,s.d4)(e=>e.contacts),m=(0,o.Pc)();a.useEffect(()=>{c(n.um())},[c]);let _=r??d.ls,p=a.useCallback(e=>(0,l.yI)(e,u.usersByEmail[e]||e,null,_,m.email),[u.usersByEmail,m.email,_]);return a.useEffect(()=>{if(e){let t=p(e);c(i.hZ({tokens:[t],inputValue:"",errorMessage:""}))}},[e,p,c]),a.useEffect(()=>()=>{c(i.cL())},[c]),{validateToken:p,searchResultToken:a.useCallback(e=>(0,l.t9)(e,t,_),[_,t])}}},912149:(e,t,r)=>{r.d(t,{w:()=>i});var a=r(538504),s=r(372672);function i({rolesToDefaultToOther:e}={}){let t=s.iZ()?.profile.job_title,r=(0,a.HB)(t);return e&&e.includes(r)?"other":r}},283343:(e,t,r)=>{r.d(t,{S:()=>l});var a=r(514228),s=r(989992),i=r(941249),n=r(18797),o=r(869776);function l(e){let t=(0,a.d4)(e=>e.loadingState),r=(0,a.d4)(e=>e.teamJoinLinks);return!function(e,t,r){let a=!(0,n.VP)(t,(0,o.OL)(e))&&!(0,n.aF)(t,(0,o.OL)(e))&&!r;return(0,n.VP)(t,(0,o.OL)(e))||(0,n.VP)(t,i.ui.loadingKeyForPayload({teamId:e}))||(0,n.VP)(t,(0,o._M)(e))||a}(e,t,r)?s.Qw.loaded(r?.url):s.Qw.loading()}},698840:(e,t,r)=>{r.d(t,{p:()=>s});var a=r(910117);let s=new class{async pinFile({resourceType:e,resourceId:t,fileKey:r,description:s,shouldUpdatePermissions:i}){await a.Ay.post(`/api/pinned_files/${e}/${t}`,{file_key:r,description:s,should_update_permissions:i})}async updatePin({pinnedFileId:e,description:t}){await a.Ay.put(`/api/pinned_files/${e}`,{description:t})}async deletePin({pinnedFileId:e}){await a.Ay.del(`/api/pinned_files/${e}`)}}},624465:(e,t,r)=>{r.d(t,{W:()=>A,l:()=>R});var a=r(486106),s=r(7378),i=r(514228),n=r(656233),o=r(601108),l=r(27355),d=r(714362),c=r(303541),u=r(156213),m=r(124493);if(443==r.j)var _=r(8833);var p=r(224),f=r(186343),g=r(722362),h=r(516028),x=r(191312),b=r(345997),v=r(165519),y=r(652992),w=r(630077),j=r(320600),T=r(646972),E=r(32128);if(443==r.j)var I=r(521144);var N=r(965813),C=r(739964),S=r(999099),k=r(29287);let R=(0,l.eU)(!1);function A({clientX:e,clientY:t,pageIds:r,selectedView:A,shouldShowDuplicateOption:O}){let F=(0,i.wA)(),P=(0,i.d4)(e=>e.mirror.appModel),L=(0,h.q5)(),D=(0,g.p8)("pagesList"),M=(0,f.HZ)(),B=p.F.useShouldHideStarterCtaForOpenFile(),U=(0,E.cT)(),W=(0,T.hZ)(),$=1===r.length&&void 0!==r[0]?function({pageId:e,openFile:t,pagesList:r,team:a,shouldShowDuplicateOption:s,shouldPaywallForDraftsPageLimitV1:i,dispatch:n,hideUpsellPlanCta:l,isFileReadOnly:_,isK12OrgStudent:f}){var g;let h=r.length,j=r.filter(e=>!e.isDivider).length,T=r.find(t=>t.nodeId===e),E=!!T&&T.isDivider,R=r=>(0,k.HZ)()&&T&&t&&t.editorType===x._Y.WHITEBOARD?[{separator:!0},{name:"create-slides-outline-from-figjam",callback:()=>(0,k.$t)({pageGuids:[e],dispatch:r,source:S.E.FJ_PAGE_MENU})}]:[];if(_||f)return[{action:"page-copy-link",args:{nodeId:e}},...R(n)];let A=()=>(0,o.k)().move_page_to_new_file&&T&&t?((0,d.ED)("getPageMoveMenuItem","Parameters",{pageId:e,folderId:"1",fileKey:t.key}),{name:"page-move-to-new-file",callback:()=>{!function(e,t,r,a,s={},i=!0){if(!e)return;let n={...s,type:N.A.FILE,fileKey:e.key,file:e,afterFileMove:void 0,isMovePageToNewFile:i,page_id:r};t(u.to({type:(0,I.J)(),data:n}))}({key:t.key,name:t.name,folder_id:t.folderId,team_id:t.teamId,editor_type:t.editorType},n,e)}}):null,O=s?(g=E?(0,c.t)("fullscreen_actions.divider-duplicate"):(0,c.t)("fullscreen_actions.page-duplicate"),t&&((0,b.J9)({openFile:t,pageCount:h})||i({openFile:t,pageCount:h}))?{name:"page-duplicate",callback:()=>{n((0,u.to)({type:C.DV,data:{team:a,resource:y.vL.PAGE,action:w.ZN.DUPLICATE_PAGE,editorType:t.editorType,currentPlan:p.F.Plan.STARTER,upsellPlan:p.F.Plan.PRO,hideUpsellPlanCta:l,upsellSource:v.b.CREATE_NEW_PAGE}}))},displayText:g}:{action:"page-duplicate",args:{nodeId:e},loadingIndicatorString:"Duplicating",displayText:g}):null;return E?[O,A(),{action:"page-delete",args:{nodeIds:[e]},loadingIndicatorString:"Deleting",displayText:(0,c.t)("fullscreen_actions.divider-delete")}]:[{action:"page-copy-link",args:{nodeId:e}},{separator:!0},{action:"page-rename",args:{nodeId:e},displayText:(0,c.t)("fullscreen_actions.pages-rename",{pageCount:1})},O,A(),{separator:!0},{action:"page-delete",callback:()=>n(m.PK({})),args:{nodeIds:[e]},loadingIndicatorString:"Deleting",disabled:1===j,displayText:(0,c.t)("fullscreen_actions.pages-delete",{pageCount:1})},...R(n)]}({pageId:r[0],team:L?L.team:null,shouldShowDuplicateOption:O,openFile:L,pagesList:D,shouldPaywallForDraftsPageLimitV1:M,dispatch:F,hideUpsellPlanCta:B,isFileReadOnly:U,isK12OrgStudent:W}):function({pageIds:e,pagesList:t,dispatch:r,isFileReadOnly:a,isK12OrgStudent:s}){if(a||s)return[];let i=new Set(t.filter(e=>!e.isDivider).map(e=>e.nodeId)),n=e.filter(e=>i.has(e)),o=n.length;return 0===o?[]:[{action:"batch-page-rename",args:{nodeIds:n},displayText:(0,c.t)("fullscreen_actions.pages-rename",{pageCount:o})},{separator:!0},{action:"page-delete",callback:()=>r(m.PK({})),args:{nodeIds:n},loadingIndicatorString:"Deleting",displayText:(0,c.t)("fullscreen_actions.pages-delete",{pageCount:o}),disabled:i.size<=o},...(t=>{if(!(0,k.HZ)())return[];let r=l.zl.get(h.yV);return r&&r.editorType===x._Y.WHITEBOARD?[{separator:!0},{name:"create-slides-outline-from-figjam",callback:()=>(0,k.$t)({pageGuids:Array.from(e),dispatch:t,source:S.E.FJ_PAGE_MENU})}]:[]})(r)]}({pageIds:r,pagesList:D,dispatch:F,isFileReadOnly:U,isK12OrgStudent:W});return(0,s.useEffect)(()=>(l.zl.set(R,!0),()=>{l.zl.set(R,!1)}),[]),(0,a.jsx)("div",{className:`${_.Dm}`,children:(0,a.jsx)(j.Q,{appModel:P,menuItems:(0,n.WI)($),dispatch:F,selectedView:A,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!1,isLimitedDevMode:!1,recordingKey:"pageMenu"})})}},646972:(e,t,r)=>{if(r.d(t,{h5:()=>f,hZ:()=>m,hs:()=>g,mb:()=>p,sv:()=>h}),443==r.j)var a=r(465776);var s=r(186343),i=r(516028),n=r(845253),o=r(372672),l=r(32128),d=r(146384);let c=/^Page \d+$/;var u=(e=>(e.FILE_LOADING="fileLoading",e.K_12="k12",e.READ_ONLY="readOnly",e.PERSONAL_DRAFT="personalDraft",e))(u||{});function m(){let e=(0,n.sZ)(),t=!!e?.k12_google_org,r=o.iZ()?.profile?.job_title;return t&&"student"===r}function _(){let e=(0,i.q5)(),t=(0,l.cT)(),r=m();return e?r?"k12":t?"readOnly":(0,d.Qy)(e)?"personalDraft":null:"fileLoading"}var p=(e=>(e.ADD_PAGE="addPage",e.VIEW_PAGES="viewPages",e))(p||{});function f({nonDividerPageCount:e}){let t=_(),r=(0,s.nn)(),i=r&&!c.exec(r);if("fileLoading"===t)return null;if(e>1||i)return"viewPages";switch(t){case null:return"addPage";case"readOnly":case"personalDraft":return"viewPages";case"k12":return null;default:(0,a.xb)(t)}}function g(){return null===_()}function h(){return null===_()}},239014:(e,t,r)=>{r.d(t,{c0:()=>E,Jc:()=>N});var a=r(486106),s=r(165054);if(443==r.j)var i=r(632989);if(443==r.j)var n=r(530496);var o=r(27355),l=r(989992),d=r(239603),c=r(536384),u=r.n(c),m=r(901889),_=r(288654),p=r(723791),f=r(520829),g=r(11),h=r(858013),x=r(204891),b=r(385855),v=r(303541),y=r(516028),w=r(43951),j=r(787550),T=r(932601);function E({pageRowRef:e,pagesListRef:t,nodeId:r,nodeName:s,pageThumbnail:l,isLoading:d}){let c=(0,y.q5)(),_=(0,m.hC)(),p=(0,o.Xr)(T.qp);if(!c||!t.current||!e.current)return null;let g=t.current.getBoundingClientRect().left+t.current.getBoundingClientRect().width,w=g-16,E=`calc(${g}px + var(--spacer-2, 0.5rem))`,I=e.current.getBoundingClientRect().top,N=e.current.getBoundingClientRect().height;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{position:"fixed",zIndex:10,left:w+"px",top:I+"px",height:N+"px",width:"32px"}}),(0,a.jsxs)("div",{"data-testid":"PageSummaryPreview",className:"page_summary_preview--previewContainer--kx2Uy",style:{left:E,top:I+N/2},children:[(0,a.jsxs)("div",{className:"page_summary_preview--thumbnailContainer--a-jPQ",children:[(0,a.jsx)("div",{"data-testid":"FileThumbnail",children:(0,a.jsx)(b.V,{thumbnailType:(0,x.lv)(c.editorType,!1),thumbnailUrl:l?.thumbnail_url??null,clientMeta:l?.thumbnail_meta??c.clientMeta,noBorder:!0})}),(0,a.jsx)(i.E,{"aria-label":(0,v.t)("pages_panel.summary_preview.update_preview"),className:u()("page_summary_preview--refreshButton--XAvPe",{"page_summary_preview--alwaysShowRefreshButton--M3IDC":!l}),onClick:()=>{c&&!d&&(_("figjam_pages_summary.preview_refreshed",{previewPageId:r}),p(f.r.LOADING),j.S.updatePageCheckpointThumbnails({fileKey:c.key}).catch(()=>{_("figjam_summary_preview.page_thumbnails_request_failed_increment_metric",{})}))},htmlAttributes:{"data-tooltip":(0,v.t)("pages_panel.summary_preview.update_preview"),"data-tooltip-type":"text","data-testid":"RefreshPreviewButton"},children:d?(0,a.jsx)(h.kt,{testId:"LoadingSpinner",size:"small",className:"page_summary_preview--loadingSpinner--FXocO"}):(0,a.jsx)(n.o,{})})]}),(0,a.jsx)("div",{className:"page_summary_preview--pageTitleContainer--Yk-qK text--fontPos13--xW8hS text--_fontBase--QdLsd",children:s})]})]})}let I=d.z.record(d.z.object({thumbnail_url:d.z.string(),thumbnail_meta:d.z.object({}).passthrough().transform(e=>JSON.stringify(e)),created_at:d.z.string().optional()}));function N(e){let t=(0,y.q5)(),r=(0,_.Rs)(w.SPC,{fileKey:t?.key??""},{enabled:!!(t?.key&&e)});return l.Qw.useTransform(r,e=>{if(e?.file?.pagesSignedThumbnailData.status!==p.tT.Loaded)return null;try{if(!e?.file?.pagesSignedThumbnailData.data)return null;let t=JSON.parse(e.file.pagesSignedThumbnailData.data);return I.parse(t)}catch(r){return(0,g.$D)(s.e.FIGJAM,Error(`PageSummaryPreview: Failed to parse page thumbnail data. Error: ${r.message}.`),{tags:{fileKey:t?.key},extra:{parsedPageThumbnails:e?.file?.pagesSignedThumbnailData.data}}),null}})}},181448:(e,t,r)=>{r.d(t,{v:()=>W,G:()=>U});var a=r(486106),s=r(7378),i=r(514228);if(443==r.j)var n=r(95419);if(443==r.j)var o=r(632989);if(443==r.j)var l=r(381239);if(443==r.j)var d=r(241412);if(443==r.j)var c=r(125190);if(443==r.j)var u=r(501876);if(443==r.j)var m=r(215698);var _=r(763686),p=r(601108),f=r(27355),g=r(536384),h=r.n(g),x=r(806412),b=r(714743),v=r(303541),y=r(302958),w=r(888478),j=r(637169),T=r(976749),E=r(952446),I=r(623300),N=r(84367),C=r(167249),S=r(129884),k=r(624465),R=r(63728),A=r(896988),O=r(626177);function F({value:e,setValue:t,recordingKey:r,isDisabled:i,stopRenaming:n}){let o=(0,s.useRef)(null);(0,s.useEffect)(()=>{o.current?.select()},[]);let l=x.v_(r,"keydown",e=>{if(e.keyCode===R.Uz.ESCAPE)n(!1),e.stopPropagation();else if(e.keyCode===R.Uz.ENTER)e.preventDefault(),n(!0);else{if(e.keyCode!==R.Uz.TAB)return(0,A.jr)(e,A.W0.NO),x.aH;e.preventDefault(),n(!0)}}),d=x.AF(r,"change",e=>{i||t(e.currentTarget.value)}),c=x.iQ(r,"blur",()=>{n(!0)});return(0,a.jsx)(O.ks,{autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"page_rename_input--input--s2o7Q",innerRef:o,onBlur:c,onChange:d,onKeyDown:l,spellCheck:!1,value:e})}var P=r(214758);if(443==r.j)var L=r(255111);if(443==r.j)var D=r(871428);function M({editorType:e}){switch(e){case _._YF.DESIGN:return(0,a.jsx)(l.k,{});case _._YF.WHITEBOARD:return(0,a.jsx)(b.B,{svg:D.A});case _._YF.SLIDES:return(0,a.jsx)(d.l,{});default:return null}}function B(e){let{isActive:t,isDivider:r,pageType:s,hasMultiplePageTypes:i}=e;return r||!i?null:(0,a.jsx)("div",{className:h()(P.n6,{[P.vu]:t}),children:(0,a.jsx)(M,{editorType:s})})}function U({pageType:e,hasMultiplePageTypes:t,nodeId:r,nodeName:o,isRenaming:l,startRenaming:d,stopRenaming:c,renamingPagePendingName:u,setRenamingPagePendingName:m,isActive:g,shouldShowGuids:N,onMouseDownCallback:R,onMouseUpCallback:A,onMouseMoveCallback:O,onClickCallback:D,reorderingPageGuids:M,selectedPageGuids:U,onContextMenuCallback:G,showMemoryUsage:V,showInFileMemoryPercentage:z,isOffline:H,isComparingChanges:K,pageToNumChanges:Y,versionHistory:q,isDivider:J,pagesList:X,index:Q,activePageShouldUseBrandColor:Z,shouldUseButtonRow:ee}){let et=(0,i.wA)(),er="whiteboard"===(0,T.lg)(),[ea,es]=s.useState(!1),ei=(0,f.md)(k.l),en=(0,f.md)(w.Yh),eo=(0,C.Fk)((e,t,r)=>(0,p.k)().gate_memory_usage_computations&&!r?null:e.get(t)?.nodeMemoryUsage,r,z),el=(0,C.Fk)((e,t,r)=>(0,p.k)().gate_memory_usage_computations&&!r?null:e.get(t)?.rootMemoryUsage,r,z),ed=s.useMemo(()=>(0,I.Fy)(X,r)===_.xal.LOADED,[r,X]),ec=_.h3O.getSessionState()===_.kul.JOINED,eu=s.useMemo(()=>H&&!ec&&!ed&&_.h3O.isIncrementalSession(),[H,ed,ec]),em=x.Pt("pagesPanel","row",Q)||"",e_=x.rf(em,"contextmenu",e=>{e.preventDefault(),!eu&&G&&G({nodeId:r,e})}),ep=x.rf(em,"dblclick",()=>{eu||l||d(r)}),ef=x.rf(em,"click",e=>{if(!J&&!l){if(eu){et(y.F.enqueue({type:"offline-page-switch",message:(0,v.t)("fullscreen.pages_panel.unavailable_offline")}));return}D(r,e)}}),eg=s.useCallback(e=>{eu||l||R(r,e)},[l,r,R,eu]),eh=s.useCallback(e=>{l||O(r,e)},[l,r,O]),ex=s.useCallback(e=>{l||A(r,e)},[l,r,A]),eb=s.useCallback(()=>(0,n.uy)(eo)||(0,n.uy)(el)?"":(0,E.pr)(eo,el,!0),[eo,el]),ev=K&&Y?.get(r)||0,ey=q?.activeId&&"current_version"===q.activeId,ew=V&&z&&!l&&ey,ej=!K&&!l,eT=J&&!g&&!l,eE=er&&!l&&g&&U?.length===0,eI=h()({[P.mB]:eT,[P.oG]:!eT,[P.sl]:g,[P.sR]:eE&&ea&&ei,[P.Pl]:Z,[P.Dq]:0===M.length&&0===U.length,[P.As]:ee},0!==M.length||0!==U.length?U.includes(r)?P.wH:M.includes(r)?P.iB:0===M.length?P.Dq:"":""),eN=s.useRef(null),eC=s.useRef(!1),eS=s.useCallback(e=>{c(e),eC.current=!0},[c]);s.useLayoutEffect(()=>{!l&&eC.current&&eN.current&&(eN.current.focus(),eC.current=!1)},[l]);let ek=l&&(0,a.jsx)(F,{value:u||"",setValue:m,stopRenaming:eS,recordingKey:em,isDisabled:eu}),eR=eu&&!eT&&(0,a.jsx)("div",{className:P.Nr,"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline",children:(0,a.jsx)(b.B,{className:P.VQ,svg:L.A,"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"})}),eA=(0,p.k)().version_diffing&&K&&ev>0&&(0,a.jsx)("div",{className:P.Sp,children:ev}),eO=eE&&!t?(0,a.jsx)($,{accessibleLabel:ee?(0,v.t)("fullscreen.pages_panel.page_row.more_actions",{pageName:o}):void 0,onContextMenuCallback:G,nodeId:r,isMoreActionsActive:ea,setIsMoreActionsActive:es,isPageContextMenuOpen:ei,shouldAbsolutePositionButton:ee}):null,eF=(0,a.jsxs)(a.Fragment,{children:[!ee&&ek,eT?(0,a.jsx)("span",{className:P.jE,"data-testid":"pageDivider"}):!l&&(0,a.jsx)("div",{className:P.Nz,children:(0,a.jsx)("span",{className:eu?P.YW:P.KE,children:N?`${o} (${r})`:o})}),(0,a.jsxs)("div",{className:P.q8,children:[ej&&(0,a.jsx)(W,{pageGuid:r,fallback:(0,a.jsx)(B,{isActive:g,isDivider:J,pageType:e,hasMultiplePageTypes:t}),hideBackground:!0}),eR,ew&&(0,a.jsx)("span",{className:eu?P.hi:P.VC,dir:"auto",children:eb()}),eA,!ee&&eO]})]});return ee?l?(0,a.jsxs)("div",{className:eI,"data-onboarding-key":en===r?j.$:"",draggable:!1,onContextMenu:e_,children:[ek,(0,a.jsxs)("div",{className:P.q8,children:[eR,eA]})]}):(0,a.jsxs)("div",{className:"pages_panel_row--pageRowContainer--oVnTb",children:[(0,a.jsx)("button",{ref:eN,"aria-current":g?"page":void 0,className:eI,"data-onboarding-key":en===r?j.$:"",draggable:!1,onClick:ef,onContextMenu:e_,onDoubleClick:ep,onMouseDown:eg,onMouseMove:eh,onMouseUp:ex,type:"button",children:eF}),eO]}):(0,a.jsx)("div",{className:eI,"data-onboarding-key":en===r?j.$:"",draggable:!1,onClick:ef,onContextMenu:e_,onDoubleClick:ep,onMouseDown:eg,onMouseMove:eh,onMouseUp:ex,children:eF})}function W({pageGuid:e,margin:t,fallback:r=null,hideBackground:s=!1}){let i=(0,N.J2)(_.Ez5.currentSceneState().numReadyNodesByPage),n=(0,N.J2)(_.Ez5.currentSceneState().numCompletedNodesByPage),o=i.has(e)?i.get(e)>0:_.glU.nodeStatusesOnPage(e).includes(_.zIx.BUILD),l=n.has(e)?n.get(e)>0:_.glU.nodeStatusesOnPage(e).includes(_.zIx.COMPLETED);return l&&!o?(0,a.jsx)(c.g,{className:"pages_panel_row--pageCompleted--gzdWd","data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("dev_handoff.status.completed"),"data-testid":"pageCompletedIndicator"}):o||l?(0,a.jsx)(u.O,{className:h()("pages_panel_row--pageReady--XaDiG",{"pages_panel_row--hideBackground--22Ike":s}),style:t?{[t]:"8px"}:void 0,"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("dev_handoff.tag.ready_to_build"),"data-testid":"pageReadyIndicator"}):r}function $({accessibleLabel:e,onContextMenuCallback:t,nodeId:r,isMoreActionsActive:i,isPageContextMenuOpen:n,setIsMoreActionsActive:l,shouldAbsolutePositionButton:d}){let c=s.useRef(null);return s.useEffect(()=>{n||l(!1)},[n,l]),(0,a.jsx)(o.E,{ref:c,"aria-label":e,htmlAttributes:d?void 0:{onDoubleClick:e=>e.stopPropagation()},onClick:e=>{l(!0);let a=c.current?.getBoundingClientRect();a&&t({nodeId:r,e,clientX:a.x+-4,clientY:a.y+a.height+10})},className:h()("pages_panel_row--pageMoreActionsButton--5Rty9",{"pages_panel_row--pageMoreActionsButtonActive--2dmC-":i&&n,"pages_panel_row--pageMoreActionsAbsolutePosition--S-xcp":d}),"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.pages_panel.more_pages_actions"),"data-tooltip-show-above":!0,children:(0,a.jsx)(m.A,{className:"pages_panel_row--pageMoreActionsIcon--kzZVn"})})}},479340:(e,t,r)=>{r.d(t,{Uz:()=>p,_k:()=>f,oP:()=>_});var a=r(7378),s=r(27355),i=r(63728),n=r(455680),o=r(741237),l=r(186343),d=r(32128),c=r(932601),u=(e=>(e.RANGE="range",e.INDIVIDUAL="individual",e))(u||{});function m(e){return(0,i.Fo)(e)?"individual":e.shiftKey?"range":null}function _(e){return!!m(e)}function p({pagesList:e,isDisabled:t,selectedPageIds:r,startRenaming:s,cancelMultiselect:o,cancelReordering:l}){(0,a.useEffect)(()=>{if(t)return;let a=t=>{let a=(0,d.Pe)(e),c=r.filter(t=>{let r=a[t];return void 0!==r&&!e[r].isDivider}).sort((e,t)=>a[e]-a[t]);if(0!==c.length)switch(t.keyCode){case i.Uz.ESCAPE:o(),l();break;case i.Uz.R:(0,i.Fo)(t)&&(1===c.length?s(c[0]):n.Y5.triggerActionInUserEditScope("batch-page-rename",{args:{nodeIds:c}}))}};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[t,e,r,o,l,s])}function f(e){let[t,r]=(0,s.fp)(c.cE),i=(0,l.dh)(),d=(0,a.useCallback)(()=>{r(e=>e.length?[]:e)},[r]),u=(0,a.useCallback)((a,s)=>{let l=m(s);switch(l&&((0,o.tJ)([]),n.Y5.commit()),l){case"individual":return r(t.includes(a)?t.filter(e=>e!==a):0===t.length&&i!==a?[i,a]:[...t,a]),!0;case"range":{let s=0===t.length?i:t[t.length-1],n=e.findIndex(e=>e.nodeId===s),o=e.findIndex(e=>e.nodeId===a),l=Math.min(n,o),d=Math.max(n,o),c=new Set(t),u=e.slice(l,d+1).map(e=>e.nodeId);return c.has(u[0])&&c.has(u[u.length-1])?r(t.filter(e=>!u.includes(e))):r([...t,...u.filter(e=>!c.has(e))]),!0}case null:return d(),!1}},[d,e,i,t,r]);return{selectedPageIds:t,handleMultiselectClick:u,cancelMultiselect:d}}},790868:(e,t,r)=>{r.d(t,{c:()=>h});var a=r(7378),s=r(514228),i=r(763686),n=r(700578),o=r(27355),l=r(901889),d=r(502364),c=r(888478),u=r(445197),m=r(186343),_=r(623300),p=r(516028),f=r(833988),g=r(932601);function h(e){let t=(0,m.dh)(),[r,h]=(0,o.fp)(g.l7),[x,b]=(0,o.fp)(g.oZ),v=(0,p.q5)(),y=(0,s.wA)(),w=(0,m.rE)(),j=(0,s.d4)(e=>e.versionHistory),T=(0,l.am)(),E=(0,f.W)(),I=(0,o.Xr)(c.Yh),N=(0,a.useCallback)(e=>{h(e),i.glU?.triggerActionInUserEditScope("track-page-rename",{args:{nodeId:e}})},[h]),C=(0,a.useCallback)(()=>h(null),[h]),S=(0,a.useCallback)(async()=>{if(!r)return;let a=(0,n.UN)().get(r),s=a?.name,o=x||"",l=await (0,m.zO)({openFile:v,pageNode:a,pageName:o});if((0,m.CQ)({openFile:v,pageId:r,newName:o,oldName:s,trackRenamePage:()=>T("page_commit_rename",{nodeId:t,isDivider:l},{forwardToDatadog:!0})}),l&&t===r){let r=e.findIndex(e=>e.nodeId===t),a=r+1,s=e[a];for(;s&&s.isDivider;)a+=1,s=e[a];if(s)(0,u.J)(()=>(0,m.$P)(s.nodeId,t,j,y,(0,_.Fy)(e,s.nodeId)===i.xal.LOADED,T));else{let a=r-1,s=e[a];for(;s&&s.isDivider;)a-=1,s=e[a];s?(0,u.J)(()=>(0,m.$P)(s.nodeId,t,j,y,(0,_.Fy)(e,s.nodeId)===i.xal.LOADED,T)):w(null)}}h(e=>e===r?null:e),E({newTitle:o,nodeType:"PAGE"}),s!==o&&(0,f.d)(o).length>0&&(I(r),(0,d.YQ)({id:"page_name_changed_with_rfd_indicator",properties:{pageId:r}}))},[e,w,r,h,x,v,t,j,T,y,E,I]);return{renamingPageId:r,startRenaming:N,cancelRenaming:C,commitRenaming:S,pendingPageName:x,setPendingPageName:b}}},948780:(e,t,r)=>{r.d(t,{C:()=>l});var a=r(7378),s=r(763686),i=r(189185),n=r(901889),o=r(32128);function l(e){let[t,r]=(0,a.useState)([]),l=(0,a.useRef)(null),[d,c]=(0,a.useState)(null),u=t.length>0,m=(0,n.U)(),_=(0,a.useCallback)(e=>{r(e),c(null),l.current=null},[]),p=(0,a.useCallback)(()=>{r(e=>e.length?[]:e),c(null),l.current=null},[]),f=(0,a.useCallback)((e,r)=>{if(t.includes(e)){c(null);return}let a=r.target;d&&d.dragOverPageId===e&&l.current||(l.current=a.getBoundingClientRect());let s=r.clientY-l.current.top<l.current.height/2?"before":"after";c(t=>t&&t.dragOverPageId===e&&t.insertPosition===s?t:{dragOverPageId:e,insertPosition:s})},[d,t]),g=(0,a.useCallback)(()=>!d||!u||t.includes(d.dragOverPageId)?(p(),!1):(i.l7.user("reorder-pages",()=>{let r=(0,o.Pe)(e);"before"===d.insertPosition?[...t].sort((e,t)=>(r[e]??Number.MAX_SAFE_INTEGER)-(r[t]??Number.MAX_SAFE_INTEGER)).forEach(e=>{s.Egt?.pageMoveBeforePage(e,d.dragOverPageId)}):[...t].sort((e,t)=>(r[t]??Number.MAX_SAFE_INTEGER)-(r[e]??Number.MAX_SAFE_INTEGER)).forEach(e=>{s.Egt?.pageMoveAfterPage(e,d.dragOverPageId)})}),p(),m("page_reorder",{reorderedPageIds:t,dragOverPageId:d.dragOverPageId,insertPosition:d.insertPosition},{forwardToDatadog:!0}),!0),[e,u,t,p,d,m]);return{isReordering:u,reorderingPageIds:t,startReordering:_,cancelReordering:p,commitReordering:g,draggingState:d,updateDraggingState:f}}},162932:(e,t,r)=>{r.d(t,{i:()=>L});var a=r(486106),s=r(7378),i=r(514228),n=r(915765),o=r(521428),l=r(821217),d=r(976845),c=r(443820),u=r(632989),m=r(437088),_=r(38914),p=r(272243),f=r(537307),g=r(601108),h=r(236327),x=r(714743),b=r(617427),v=r(160095),y=r(303541),w=r(929976),j=r(156213),T=r(941249),E=r(283343),I=r(12796),N=r(557142),C=r(129884),S=r(102752),k=r(504727),R=r(926061);let A="team_join_link_permissions--loadedViewWrapper--LjAIr",O="team_join_link_permissions--urlText--jcjRH ellipsis--ellipsis--Tjyfa";var F=r(769773);let P=(0,n.s)((e,t,r)=>e(T.do({teamId:t,level:r}))),L=(0,i.Ng)(e=>({teamJoinLinks:e.teamJoinLinks}),null,(e,t,r)=>({...e,...r,...t}))(function(e){let{dispatch:t,teamId:r,initialInviteLevel:i,teamPermissions:n}=e,[l,d]=(0,s.useState)(i),c=(0,E.S)(r),u="loading"===c.status,m=c.data;(0,s.useEffect)(()=>(P(t,r,i),()=>{t(T.F1(null))}),[t,r,i]);let _=e.teamPermissions.canEdit&&!!e.teamJoinLinks?.url&&e.includeCopyLinkButton,p=s.useCallback(()=>{t(j.$O({type:U,data:{resetLink:()=>{t(T.Nw({teamId:r,level:l,shouldShowVisualBell:!0}))}}}))},[t,r,l]),f=s.useCallback(()=>(0,a.jsx)(D,{dropdownShown:e.dropdownShown,resetInviteLinks:p,disableInviteLinks:()=>t(T.ui({teamId:r})),loading:u,canAdmin:n.canAdmin}),[t,e.dropdownShown,u,p,n.canAdmin,r,,]),g=s.useCallback(()=>{m&&t(T.LN({teamId:e.teamId,url:m,source:T.Kq.TEAM_PERMISSIONS_MODAL}))},[t,e.teamId,m]),h=s.useMemo(()=>e.includeCopyLinkButton?(0,a.jsx)(o.$n,{onClick:g,disabled:!m,children:(0,y.tx)("team_join_links.copy_link")}):f(),[g,e.includeCopyLinkButton,m,f]);return!u&&!e.teamJoinLinks||!n.canAdmin&&e.teamJoinLinks?.disabled?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:_?{justifyContent:"space-between"}:{justifyContent:"flex-start"},className:"team_join_link_permissions--inviteLinkTitleWrapper--LSkbL",children:[(0,a.jsx)("span",{className:"team_join_link_permissions--inviteHeader--80xpy",children:(0,y.tx)("team_join_links.invite_link")}),_&&f()]}),"loading"===c.status||e.teamJoinLinks?.url?(0,a.jsx)(M,{dropdownShown:e.dropdownShown,getPermissionDescriptionText:e.getPermissionDescriptionText,showDropdownSeparators:e.showDropdownSeparators,setLevel:e=>{l!==e&&(d(e),t(T.do({teamId:r,level:e,shouldShowFailureMessage:!0,callbackOnFailure:()=>d(l)})))},currentLevel:l,url:u?void 0:e.teamJoinLinks?.url,inviteLevels:n.canEdit?[N.e6.VIEWER,N.e6.EDITOR]:[N.e6.VIEWER],teamId:e.teamId,button:h}):(0,a.jsx)(B,{turnOnInviteLinks:()=>t(T.Nw({teamId:r,level:l}))})]})});function D(e){let t=(0,i.wA)(),r="team-link-settings-dropdown",n=s.createRef(),o=()=>e.dropdownShown?.type===r;return(0,a.jsxs)(l.o,{eventListeners:["onMouseDown"],children:[(0,a.jsx)("div",{ref:n,children:(0,a.jsx)(d.d,{"aria-expanded":o(),disabled:e.loading,"aria-label":(0,y.t)("team_join_links.team_invite_link_settings"),onClick:()=>{let e=n.current?.getBoundingClientRect();o()?t(w.oB()):e&&t(w.j7({type:r,data:{targetRect:e}}))},htmlAttributes:{"data-tooltip-type":C.Ib.TEXT,"data-tooltip":(0,y.t)("team_join_links.team_invite_link_settings")},children:(0,a.jsx)(f.P,{})})}),o()&&(0,a.jsxs)(k.Cf,{targetRect:e.dropdownShown.data.targetRect,maxWidth:140,minWidth:140,lean:"left",propagateCloseClick:!0,children:[(0,a.jsx)(h.c$,{onClick:e.resetInviteLinks,children:(0,y.tx)("team_join_links.reset_invite_links")}),e.canAdmin&&(0,a.jsx)(h.c$,{onClick:e.disableInviteLinks,children:(0,y.tx)("team_join_links.turn_off_invite_links")})]})]})}function M(e){let t=(0,i.wA)(),r="join-link-permission-level-dropdown",s=e.currentLevel===N.e6.VIEWER?"-32px":"-61px",n=(0,a.jsxs)("div",{className:"team_join_link_permissions--linkAndDropdown--dOdkB",children:[(0,a.jsxs)("span",{className:"team_join_link_permissions--urlSection--fh6VF",children:[!e.url&&(0,a.jsx)(c.k,{}),e.url&&(0,a.jsx)("span",{className:O,children:e.url})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(u.E,{onClick:a=>{a.stopPropagation(),e.url&&(e.dropdownShown?t(w.oB()):t(w.j7({type:r})))},className:"team_join_link_permissions--permissionLevelDropdown--xuQLz role_row--select--6VpSS",children:[(0,a.jsx)("span",{children:(0,I.C1)(e.currentLevel)}),(0,a.jsx)("div",{className:"team_join_link_permissions--caretWrapper--OXpki role_row--caretWrapper--P1Mak",children:(0,a.jsx)(x.B,{svg:F.A})})]}),e.dropdownShown&&e.dropdownShown.type===r&&(0,a.jsx)(h.ms,{className:"team_join_link_permissions--permissionLevelDropdownOptions--cgu-T",style:{marginTop:s},children:e.inviteLevels.map((t,r)=>(0,a.jsx)(h.MM,{checked:t===e.currentLevel,onClick:()=>e.setLevel(t),children:(0,I.C1)(t)},r))})]})]}),o=(0,a.jsxs)("div",{className:"team_join_link_permissions--linkAndDropdownV2--7DFWL",children:[(0,a.jsxs)("div",{className:"team_join_link_permissions--urlSectionV2--YS4eI",children:[!e.url&&(0,a.jsx)(c.k,{}),e.url&&(0,a.jsx)("span",{className:O,children:e.url})]}),(0,a.jsx)("div",{className:"team_join_link_permissions--permissionLevelDropdownWrapper--yCu62",children:(0,a.jsx)(R.b8,{value:e.currentLevel,options:e.inviteLevels,getPermissionName:I.C1,getPermissionDescription:e.getPermissionDescriptionText,showSeparators:e.showDropdownSeparators,onChange:e.setLevel})})]});return(0,a.jsxs)("div",{className:A,children:[(0,g.k)().team_permission_modal_styling?o:n,e.button]})}function B(e){return(0,a.jsxs)("div",{className:A,children:[(0,y.tx)("team_join_links.share_a_secret_link_people_can_use_to_join_your_team")," ",(0,a.jsx)(v.Ph,{href:"#",onClick:e.turnOnInviteLinks,children:(0,y.tx)("team_join_links.turn_on_invite_links")})]})}let U="RESET_LINKS_CONFIRMATION_MODAL";(0,S.Ju)(function(e){let t=(0,i.wA)(),r=m.hS({open:e.open,onClose:e.onClose});return(0,a.jsx)(_.bL,{width:"md",manager:r,children:(0,a.jsxs)(p.vo,{children:[(0,a.jsx)(p.Y9,{children:(0,a.jsx)(p.hE,{children:(0,y.tx)("team_join_links.reset_invite_links")})}),(0,a.jsx)(p.nB,{children:(0,y.tx)("team_join_links.modal_description")}),(0,a.jsx)(p.wi,{children:(0,a.jsxs)(p.jk,{children:[(0,a.jsx)(b.$z,{variant:"secondary",onClick:()=>t(j.Lo()),children:(0,y.tx)("team_join_links.cancel")}),(0,a.jsx)(b.$z,{variant:"destructive",onClick:()=>{e.resetLink(),t(j.Lo())},children:(0,y.tx)("team_join_links.reset_links")})]})})]})})},U)},683241:(e,t,r)=>{r.d(t,{R:()=>v});var a=r(486106),s=r(7378),i=r(521428),n=r(536384),o=r.n(n),l=r(449184),d=r(414007),c=r(169182),u=r(778880),m=r(160095),_=r(303541),p=r(370443),f=r(831799);let g="mobile_download_prompt--mobilePromptTitle--7Tgsn text--fontPos13--xW8hS text--_fontBase--QdLsd",h="mobile_download_prompt--mobilePromptOptionTitle--mMUYW text--fontPos13--xW8hS text--_fontBase--QdLsd",x="mobile_download_prompt--mobilePromptOptionImage--Cp9zK",b="mobile_download_prompt_dismissed";function v(e){let{isCompact:t}=e,r=u.aR?"https://apps.apple.com/us/app/figma-mirror/id1152747299#":"https://play.google.com/store/apps/details?id=com.figma.mirror",n=(0,d.UG)(),g=!t&&!!e.renderBlockingPrompt,[v,j]=s.useState(!g),[T,E]=s.useState(!g);s.useEffect(()=>{null===n.get(b)&&(j(!1),E(!1))},[n,g]);let I=()=>{g||(j(!0),(0,l.sx)("mobile_web_mobile_app_download_prompt_dismissed",{userId:e.userIdForTracking}),setTimeout(()=>{E(!0)},300),n.set(b,!0))};return null!==n.get(b)?null:(0,a.jsx)(f.fu,{name:"Mobile Download Prompt",children:(0,a.jsx)("div",{className:o()({"mobile_download_prompt--overlay--OzW6J":!0,"mobile_download_prompt--overlayClosed--2FWpY":v,"mobile_download_prompt--overlayAnimateEnd--dBvI0":T}),style:{transitionDuration:"300ms"},onClick:I,children:(0,a.jsxs)("div",{className:o()("mobile_download_prompt--mobilePromptContainer--FKz5e","mobile_download_prompt--mobileDownloadPromptContainer--FaI33",{"mobile_download_prompt--mobileDownloadPromptContainerClosed--DHusv":v,"mobile_download_prompt--mobileDownloadPromptContainerFullHeightBlocking--B100f":g}),onClick:e=>{e.stopPropagation()},children:[(0,a.jsx)("div",{className:o()("mobile_download_prompt--mobilePromptDescriptionContainer--1PhoH",{"mobile_download_prompt--fullHeightPrompt--U6KWw":g}),children:t?(0,a.jsx)(w,{}):(0,a.jsx)(y,{renderBlockingPrompt:g??!1})}),(0,a.jsx)("hr",{className:o()({"mobile_download_prompt--mobilePromptHR--UpOqS":!0,"mobile_download_prompt--fullWidthHR--B-2i1":g})}),(0,a.jsxs)("div",{className:"mobile_download_prompt--mobilePromptGrid--Mvqf-",children:[(0,a.jsx)("img",{className:x,src:(0,c.ck)("249f0f055b922ecef6bffc592a8420e7e6eddcea"),alt:(0,_.t)("file_browser.mobile_prompt.app_image_alt")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:h,children:(0,_.tx)("file_browser.mobile_prompt.app_title")}),(0,a.jsx)("p",{className:"mobile_download_prompt--mobilePromptOptionDescription--APlZp text--fontPos11--2LvXf text--_fontBase--QdLsd",children:g?(0,_.tx)("file_browser.mobile_prompt.app_description_new"):(0,_.tx)("file_browser.mobile_prompt.app_description")})]}),(0,a.jsx)(m.pW,{size:"lg",trackingProperties:{userId:e.userIdForTracking,appLink:r,trackingDescriptor:p.c.MOBILE_WEB_MOBILE_APP_DOWNLOAD_PROMPT_CLICKED},width:"fill",href:r,children:(0,_.tx)("file_browser.mobile_prompt.app_action")}),!g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{className:x,src:(0,c.ck)("741698fed49afa5e8f3becdd906e66d32c8e7fae"),alt:(0,_.t)("file_browser.mobile_prompt.browser_image_alt")}),(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:h,children:(0,_.tx)("file_browser.mobile_prompt.browser_title")})}),(0,a.jsx)(i.Pw,{onClick:I,variant:"secondary",children:(0,_.tx)("file_browser.mobile_prompt.browser_action")})]})]})]})})})}function y(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{className:"mobile_download_prompt--mobilePromptImage--U2Yqj",src:(0,c.ck)("5f1dc37f397dbddf711d3d950bee5dd46c07fc72"),alt:(0,_.t)("file_browser.mobile_prompt.image_alt")}),(0,a.jsxs)("div",{className:"mobile_download_prompt--mobilePromptTitleContainer--o8VIK",children:[(0,a.jsx)("h2",{className:g,children:e.renderBlockingPrompt?(0,_.tx)("file_browser.mobile_prompt.modal_title_blocking"):(0,_.tx)("file_browser.mobile_prompt.modal_title")}),(0,a.jsx)("p",{className:"mobile_download_prompt--mobilePromptSubTitle--GFR67 text--fontPos13--xW8hS text--_fontBase--QdLsd",children:e.renderBlockingPrompt?(0,_.tx)("file_browser.mobile_prompt.modal_body_blocking"):(0,_.tx)("file_browser.mobile_prompt.modal_body")})]})]})}function w(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("h2",{className:g,children:(0,_.tx)("file_browser.mobile_prompt.modal_title_compact")})})}},352835:(e,t,r)=>{r.d(t,{h:()=>n});var a=r(486106),s=r(7378),i=r(587457);let n=(0,s.memo)(function(e){return(0,i.O)()?(0,a.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.5 5h-2V4h2zm1 0a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1zm-8 5h2v2h-2zm-1 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1zm3-6h-2v3h2zm-2-1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm7 9h-2V8h2zm1 0a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1z",clipRule:"evenodd"})}):(0,a.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11 5H9V4h2zm1 0a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1zm-8 5h2v2H4zm-1 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1zm3-6H4v3h2zM4 3a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm7 9H9V8h2zm1 0a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1z",clipRule:"evenodd"})})})},547944:(e,t,r)=>{r.d(t,{U:()=>s});var a=r(486106);let s=(0,r(7378).memo)(function(e){return(0,a.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0m1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0m3 5a1 1 0 1 1 2 0v2.5a.5.5 0 0 0 1 0V10a2 2 0 1 0-4 0v2.5a.5.5 0 0 0 1 0zM5 9a1 1 0 0 0-1 1v2.5a.5.5 0 0 1-1 0V10a2 2 0 1 1 4 0v2.5a.5.5 0 0 1-1 0V10a1 1 0 0 0-1-1m7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0m1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0",clipRule:"evenodd"})})})},860164:(e,t,r)=>{r.d(t,{L:()=>n});var a=r(486106),s=r(7378),i=r(587457);let n=(0,s.memo)(function(e){return(0,i.O)()?(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M20 12a8 8 0 1 1-16 0 8 8 0 0 1 16 0m1 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0m-5.146-.354-3.5-3.5a.5.5 0 0 0-.708 0l-3.5 3.5a.5.5 0 0 0 .708.708L11.5 9.707V15.5a.5.5 0 0 0 1 0V9.707l2.646 2.647a.5.5 0 0 0 .708-.708",clipRule:"evenodd"})}):(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M19 11.5a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0m1 0a8.5 8.5 0 1 1-17 0 8.5 8.5 0 0 1 17 0m-5.146-.354-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 0 0 .708.708L11 9.707V14.5a.5.5 0 0 0 1 0V9.707l2.146 2.147a.5.5 0 0 0 .708-.708",clipRule:"evenodd"})})})},202688:(e,t,r)=>{r.d(t,{o:()=>s});var a=r(486106);let s=(0,r(7378).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M2.5 9.497a1 1 0 0 1 .62-.925l8.119-3.343a2 2 0 0 1 1.522 0l8.12 3.343a1 1 0 0 1 0 1.85l-.881.362v4.718a.5.5 0 0 1-1 0v-4.306l-1 .412v4.394c0 .64-.328 1.148-.706 1.505-.375.355-.865.629-1.387.838-1.05.42-2.432.657-3.907.657s-2.857-.237-3.907-.657c-.522-.21-1.012-.483-1.387-.838C6.328 17.15 6 16.642 6 16.002v-4.394L3.12 10.42a1 1 0 0 1-.62-.924M7 12.019v3.983c0 1.105 2.239 2 5 2s5-.895 5-2v-3.983l-4.238 1.746a2 2 0 0 1-1.524 0zM3.5 9.497l1.313.54 6.806 2.803a1 1 0 0 0 .762 0l6.806-2.803 1.313-.54-1.313-.541-6.806-2.803a1 1 0 0 0-.762 0L4.813 8.956z",clipRule:"evenodd"})})})},749199:(e,t,r)=>{r.d(t,{k:()=>s});var a=r(486106);let s=(0,r(7378).memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m12.705 15.816-.705-.7-.705.7L9 18.096V6.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v11.597zm1.59 2.99L12 16.526l-2.295 2.28c-.631.627-1.705.18-1.705-.71V6.5A1.5 1.5 0 0 1 9.5 5h5A1.5 1.5 0 0 1 16 6.5v11.597c0 .89-1.074 1.336-1.705.71",clipRule:"evenodd"})})})}}]);

//# debugId=71899a6a-dd95-51af-bca1-e90c2c7cb454

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/48f0b7f8f2894e4df6229069c60175c7e913b1e1/0c62c2fd-98bccbc26a5d47e0.min.js.map