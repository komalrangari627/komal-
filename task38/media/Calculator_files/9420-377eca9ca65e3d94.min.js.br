"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="269ce345-46da-5a63-9d33-3221447b8716")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[9420],{278106:(e,r,t)=>{t.d(r,{J:()=>i});var a=t(486106),n=t(514228),o=t(975542),s=t(303541);function i({index:e}){let r=(0,n.d4)(e=>!!e.payment.promo);return(0,a.jsxs)("div",{className:"team_creation_breadcrumbs--stepBreadcrumbs--tP08U step_breadcrumb--stepBreadcrumbs--E4Woe",children:[(0,a.jsx)(o.On,{selected:1===e,number:1,text:(0,s.t)("team_creation.name_your_team")}),(0,a.jsx)(o.On,{selected:2===e,number:2,text:(0,s.t)("team_creation.add_team_members")}),!r&&(0,a.jsx)(o.On,{selected:3===e,number:3,text:(0,s.t)("team_creation.finish_setup")})]})}},795870:(e,r,t)=>{t.d(r,{wn:()=>M,Ix:()=>v,dl:()=>G,lo:()=>P});var a=t(7378),n=t(165054),o=t(449184),s=t(651849),i=t(169182),c=t(11),d=t(910117),l=t(303541),_=t(231762),u=t(831101);function m({defaultCountry:e,initialAddress:r}={}){let[t,n]=(0,a.useState)({...(0,u.EB)(e),...r??{}}),o=async()=>{try{await d.Ay.post("/api/validate_address",{address:t})}catch(e){return(0,_.J)(e)||e.message}return null};return{address:t,updateAddress:e=>{n(r=>({...r,...e}))},trimAddress:()=>{let e;for(e in t)t[e]=t[e].trim()},validateAddress:o}}var p=t(394825),E=t(514043),I=t(148137);let T={API_CONNECTION_ERROR:"api_connection_error",API_ERROR:"api_error",AUTHENTICATION_ERROR:"authentication_error",CARD_ERROR:"card_error",INVALID_REQUEST_ERROR:"invalid_request_error",RATE_LIMIT_ERROR:"rate_limit_error",VALIDATION_ERROR:"validation_error"},y=Object.values(T);function g(e){return!!e&&"object"==typeof e&&y.includes(e.type)}function h(e){return g(e)&&e.type===T.CARD_ERROR}function f(e){return g(e)&&e.type===T.VALIDATION_ERROR}function S(e){return g(e)&&"setup_intent_authentication_failure"===e.code}var R=(e=>(e.NETSUITE_ITEM_ID_ORG_DESIGN_DEPRECATED="2011",e.NETSUITE_ITEM_ID_ORG_FIGJAM_DEPRECATED="2635",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_DEPRECATED="2636",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_DEPRECATED="2637",e.NETSUITE_ITEM_ID_ORG_DESIGN_JPY_DEPRECATED="3092",e.NETSUITE_ITEM_ID_ORG_FIGJAM_JPY_DEPRECATED="3082",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_JPY_DEPRECATED="3071",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_JPY_DEPRECATED="3075",e.NETSUITE_ITEM_ID_ORG_DESIGN_EUR_DEPRECATED="3090",e.NETSUITE_ITEM_ID_ORG_FIGJAM_EUR_DEPRECATED="3084",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_EUR_DEPRECATED="3073",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_EUR_DEPRECATED="3077",e.NETSUITE_ITEM_ID_ORG_DESIGN_GBP_DEPRECATED="3091",e.NETSUITE_ITEM_ID_ORG_FIGJAM_GBP_DEPRECATED="3083",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_GBP_DEPRECATED="3072",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_GBP_DEPRECATED="3076",e.NETSUITE_ITEM_ID_ORG_DESIGN_CAD_DEPRECATED="3089",e.NETSUITE_ITEM_ID_ORG_FIGJAM_CAD_DEPRECATED="3085",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_CAD_DEPRECATED="3074",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_CAD_DEPRECATED="3078",e.NETSUITE_ITEM_ID_ORG_DESIGN="190686",e.NETSUITE_ITEM_ID_ORG_FIGJAM="190681",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN="190657",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM="190669",e.NETSUITE_ITEM_ID_ORG_DESIGN_JPY="190685",e.NETSUITE_ITEM_ID_ORG_FIGJAM_JPY="190680",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_JPY="190656",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_JPY="190668",e.NETSUITE_ITEM_ID_ORG_DESIGN_EUR="190683",e.NETSUITE_ITEM_ID_ORG_FIGJAM_EUR="190678",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_EUR="190654",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_EUR="190665",e.NETSUITE_ITEM_ID_ORG_DESIGN_GBP="190684",e.NETSUITE_ITEM_ID_ORG_FIGJAM_GBP="190679",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_GBP="190655",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_GBP="190667",e.NETSUITE_ITEM_ID_ORG_DESIGN_CAD="190682",e.NETSUITE_ITEM_ID_ORG_FIGJAM_CAD="190677",e.NETSUITE_ITEM_ID_ENTERPRISE_DESIGN_CAD="190653",e.NETSUITE_ITEM_ID_ENTERPRISE_FIGJAM_CAD="190665",e))(R||{}),D=t(57562),N=t(834575),b=t(347702),x=t(640017),C=t(613896);function A(e,r,t){let a=t[e];return a&&!a.match(/rgba|color/)?a:("dark"===r?{colorBg:"#2c2c2c",colorBgSelected:"#4a5878",colorBorder:"#444",colorBorderBrand:"#105cad",colorBorderDanger:"#963323",colorBorderSelected:"#0c8ce9",colorIcon:"#fff",colorIconDanger:"#f24822",colorIconSecondary:"rgba(255, 255, 255, 0.7)",colorText:"#fff",colorTextBrand:"#7cc4f8",colorTextDanger:"#fca397",colorTextDisabled:"rgba(255, 255, 255, 0.4)",colorTextSecondary:"rgba(255, 255, 255, 0.7)"}:{colorBg:"#fff",colorBgSelected:"#e5f4ff",colorBorder:"#e6e6e6",colorBorderBrand:"#bde3ff",colorBorderDanger:"#ffc7c2",colorBorderSelected:"#0d99ff",colorIcon:"#191919",colorIconDanger:"#e03e1a",colorIconSecondary:"rgba(0, 0, 0, 0.5)",colorText:"rgba(0, 0, 0, 0.9)",colorTextBrand:"#007be5",colorTextDanger:"#dc3412",colorTextDisabled:"rgba(0, 0, 0, .3)",colorTextSecondary:"rgba(0, 0, 0, .5)"})[e]}let v="stripe-payment-element",P=(0,b.D)(e=>{let{address:r,updateAddress:t,trimAddress:s,validateAddress:d}=m({defaultCountry:e.defaultCountry,initialAddress:e.initialBillingAddress}),{address:T,updateAddress:y,trimAddress:R}=m({defaultCountry:e.defaultCountry,initialAddress:e.initialShippingAddress}),[b,P]=(0,a.useState)(null),[M,G]=(0,a.useState)(e.initialVatGstId??""),[B,U]=(0,a.useState)(null),[k,j]=(0,a.useState)(e.initialRegionalVatGstId??""),[J,$]=(0,a.useState)(e.initialCustomerLegalName??""),[F,L]=(0,a.useState)(e.initialNameOnPaymentMethod??""),V=(0,a.useRef)(null),Y=(0,i.Ay)().user_data,H=function(){let e=(0,x.yM)(),r=(0,x.DP)();return{loader:"never",fonts:[{family:"Inter",src:`url(${(0,i.CZ)("webfont/1/Inter-Regular.woff2?v=3.10")})`,weight:"400"}],appearance:{labels:"floating",variables:{fontFamily:C.sq,fontSizeBase:"13px",borderRadius:"3px",gridRowSpacing:"0px",gridColumnSpacing:"14px",colorBackground:A("colorBg",r,e),colorText:A("colorText",r,e),colorTextPlaceholder:A("colorTextSecondary",r,e),colorDanger:A("colorTextDanger",r,e),colorIcon:A("colorIcon",r,e),colorIconCardError:A("colorIconDanger",r,e),colorIconCardCvcError:A("colorIconDanger",r,e),colorIconTab:A("colorIconSecondary",r,e),colorIconTabHover:A("colorIconSecondary",r,e),colorIconTabSelected:A("colorIconSecondary",r,e)},rules:{".Input":{padding:"0 16px",marginTop:"6px",marginBottom:"10px",lineHeight:"28px",boxShadow:"none",borderColor:A("colorBorder",r,e)},".Input:focus":{border:`1px solid ${A("colorBorderSelected",r,e)}`,boxShadow:`0 0 0 1px ${A("colorBorderSelected",r,e)}`},".Input--invalid, .Input--invalid:focus":{color:A("colorText",r,e),border:`1px solid ${A("colorBorderDanger",r,e)}`,boxShadow:`0 0 0 1px ${A("colorBorderDanger",r,e)}`},".Label":{transition:"none"},".Label--invalid":{color:A("colorTextDanger",r,e)},".Label--floating":{color:A("colorTextSecondary",r,e),opacity:1,margin:"5px 0 2px",fontSize:"9px"},".Label--resting":{color:A("colorTextSecondary",r,e)},".Tab":{padding:"12px",marginBottom:"10px",borderColor:A("colorBorder",r,e),color:A("colorTextDisabled",r,e),boxShadow:"none",transition:"none"},".Tab:hover":{backgroundColor:A("colorBgSelected",r,e),borderColor:A("colorBorderBrand",r,e),color:A("colorTextDisabled",r,e)},".Tab:focus, .Tab:active, .Tab--selected, .Tab--selected:hover,, .Tab--selected:focus, .Tab--selected:active":{backgroundColor:A("colorBgSelected",r,e),border:`1px solid ${A("colorBorderSelected",r,e)}`,boxShadow:`0 0 0 1px ${A("colorBorderSelected",r,e)}`,color:A("colorTextBrand",r,e)},".TabLabel":{paddingTop:"4px",lineHeight:1.5,letterSpacing:"0.055px",fontWeight:500}}}}}(),z=function(e){return{layout:{type:"tabs",defaultCollapsed:!1},fields:{billingDetails:{address:"never"}},terms:{auBecsDebit:"never",bancontact:"never",card:"never",ideal:"never",sepaDebit:"never",sofort:"never",usBankAccount:"never"},wallets:{applePay:"never",googlePay:"never"},defaultValues:{billingDetails:{name:e?.name,email:e?.email}}}}(Y),[Q,q]=(0,a.useState)(void 0);async function K(){let r=await O(e.setupIntentParams);return U(r.clientSecret),(0,o.sx)("setup_intent_creation_attempted",Z(),{forwardToDatadog:!0}),r}async function X(){if(V.current)return V.current;try{let[r,t]=await Promise.all([(0,I.eV)(),K()]),a=r.elements({clientSecret:t.clientSecret,currency:e.currency,...H});return V.current=a,t.paymentMethods&&e.setPaymentMethods&&e.setPaymentMethods(t.paymentMethods),a}catch(e){(0,o.sx)("setup_intent_creation_failed",Z(),{forwardToDatadog:!0}),W({error:e,code:"uninitialized-stripe-elements-error",message:(0,l.t)("payments.errors.error_loading_payment_form")})}}function W({error:e,code:r,message:t,extra:a={}}){P({code:r,message:t}),"currency-validation-error"===r||h(e)||f(e)||S(e)||(0,c.$D)(n.e.BILLING_EXPERIENCE,Error(`[Billing] ${"string"==typeof e?e:e.code??"StripeError"}`),r=>{let t="object"==typeof e?{stripe_error_details:(0,c.V5)((0,I.pV)(e)),...a}:a;return r.setExtras(t),g(e)&&(r.setTag("stripe_error_type",e.type),h(e)&&r.setLevel("warning")),r})}function Z(){return{...e.customerInfo,paymentFlowSource:e.paymentFlowSource,currency:e.currency,isCampfireCart:!!e.isCampfireCart}}async function ee(){if(e.canSeeBillingAddressExp&&!F)return P({code:"name-on-payment-method-required",message:(0,l.t)("payments.errors.name_on_payment_method_required")}),!0;if(e.canSeeBillingAddressExp)try{await N.$.validateAddresses({billingAddress:r,shippingAddress:T,teamId:e.customerInfo.teamId,isCheckout:e.isCheckout})}catch(e){return P({code:"address-validation-error",message:(0,_.J)(e)||e.message}),!0}else{let e=await d();if(e)return P({code:"address-validation-error",message:e}),!0}if(M&&!await (0,D.V)(M,r.country,()=>{},e=>{P({code:"vat-gst-id-verification-error",message:e})})||k&&!await (0,D.V)(k,r.country,()=>{},e=>{P({code:"vat-gst-id-verification-error",message:e})},r.region))return!0;if(e.canSeeBillingAddressExp){if(e.currency)try{await N.$.validateCurrency({teamId:e.customerInfo.teamId,currency:e.currency,billingAddress:r,shippingAddress:T,isCheckout:e.isCheckout})}catch(t){return W({error:"Currency/Address Mismatch",code:"currency-validation-error",message:(0,l.t)("payments.errors.currency_mismatch_with_country_error",{selected_currency:e.currency.toUpperCase()}),extra:{country:r.country,currency:e.currency}}),!0}else if(e.shouldCheckIpCurrency)try{await N.$.validateCurrency({teamId:e.customerInfo.teamId,currency:(0,E.LN)(),billingAddress:r,shippingAddress:T,isCheckout:e.isCheckout})}catch(t){return W({error:`Currency & IP address mismatch error: ${JSON.stringify(e.customerInfo)}, country: ${r.country}, currency: ${(0,E.LN)()}`,code:"currency-validation-error",message:(0,l.t)("payments.errors.currency_ip_mismatch_error")}),!0}}else{if(e.currency&&!(0,E.bu)(e.currency,r.country))return W({error:"Currency/Address Mismatch",code:"currency-validation-error",message:(0,l.t)("payments.errors.currency_mismatch_error",{selected_currency:e.currency.toUpperCase()}),extra:{country:r.country,currency:e.currency}}),!0;if(e.shouldCheckIpCurrency&&(0,E.ub)()!==r.country)return W({error:`Currency & IP address mismatch error: ${JSON.stringify(e.customerInfo)}, country: ${r.country}, currency: ${(0,E.LN)()}`,code:"currency-validation-error",message:(0,l.t)("payments.errors.currency_ip_mismatch_error")}),!0}return!1}return(0,a.useEffect)(()=>{let r=V.current;r&&r.update({currency:e.currency})},[e.currency]),{createPaymentElement:async(e={})=>{let r=await X();if(!r){W({error:"Failed to get stripe elements",code:"uninitialized-stripe-elements-error",message:(0,l.t)("payments.errors.error_loading_payment_form")});return}let t=r.getElement("payment")??r.create("payment",z);t.on("ready",r=>{(0,o.sx)("Payment Form Loaded",{...Z(),paymentMethod:Q??I.lB.CARD,availableCurrencies:(0,E.B9)()}),Q||q(I.lB.CARD),e.ready?.(r)}),t.on("change",r=>{let t=r.value?.type;(0,o.sx)("Choose Payment Method Type",{...Z(),paymentMethod:t}),q(t),e.change?.(r)}),t.mount(`#${v}`)},unmountPaymentElement:async()=>{let e=await X();e?.getElement("payment")?.unmount()},savePayment:async()=>{if(P(null),await ee())return;if(!V.current){W({error:"Cannot save payment without Stripe elements",code:"confirm-setup-error",message:(0,l.t)("payments.errors.confirm_setup_error")});return}s(),R();let t=()=>document.querySelectorAll("[name*=privateStripeFrame]").length,a=t(),n=setInterval(()=>{let r=!1;if(a!==t()&&((0,o.sx)("Stripe Authentication Modal"),clearInterval(n),r=!0),Y){let t=(0,p.lX)({teamId:e.customerInfo.teamId,userId:Y.id});if(t){let e={...t,is3DS:r};(0,p.dT)(Y.id,e)}}},1e3);(0,o.sx)("Add payment method",{...Z(),paymentMethod:Q},{forwardToDatadog:!0});let i=e.canSeeBillingAddressExp&&!(0,u.$V)(T)?{shipping_line1:T.line1||null,shipping_line2:T.line2||null,shipping_country:e.canSeeBillingAddressExp&&T.country||null,shipping_city:T.city||null,shipping_state:T.region||null,shipping_postal_code:T.postal_code||null}:null,c=await (0,I.eV)(),{error:d}=await c.confirmSetup({elements:V.current,confirmParams:{return_url:w({customerInfo:e.customerInfo,currency:e.currency,billingPeriod:e.billingPeriod,teamName:e.teamName,userId:Y?.id,isCheckout:e.isCheckout}),payment_method_data:{billing_details:{name:F,address:{line1:r.line1,line2:r.line2,country:r.country,city:r.city,state:r.region,postal_code:r.postal_code}},metadata:{vat_gst_id:M,regional_vat_gst_id:k||null,...i,customer_legal_name:J||null}}}});if(clearInterval(n),d){let e=(0,l.t)("payments.errors.confirm_setup_error");W({error:d,code:"confirm-setup-error",message:h(d)||f(d)||S(d)?d.message??e:e})}},saveWithPaymentMethod:async({id:r,type:t})=>{let a;let n=(0,l.t)("payments.errors.saved_payment_error");if(!B){W({error:"Setup intent secret is not set",code:"confirm-setup-error",message:n});return}let s=await (0,I.eV)();if(t===I.lB.CARD)a=await s.confirmCardSetup(B,{payment_method:r});else if(t===I.lB.SEPA)a=await s.confirmSepaDebitSetup(B,{payment_method:r});else{W({error:"Invalid payment method type",code:"confirm-setup-error",message:n});return}let{setupIntent:i,error:c}=a,d=h(c)||f(c)||S(c)?c?.message??n:n;if(c){W({error:c,code:"confirm-setup-error",message:d});return}(0,o.sx)("confirm_setup_with_saved_payment_method",{...Z(),savedPaymentMethodId:r},{forwardToDatadog:!0});let _=w({customerInfo:e.customerInfo,currency:e.currency,billingPeriod:e.billingPeriod,teamName:e.teamName,userId:Y?.id,isCheckout:e.isCheckout,setupIntentId:i.id});window.location.href=_},billingAddress:r,updateBillingAddress:t,shippingAddress:T,updateShippingAddress:y,customerLegalName:J,setCustomerLegalName:$,nameOnPaymentMethod:F,setNameOnPaymentMethod:L,vatGstId:M,setVatGstId:G,regionalVatGstId:k,setRegionalVatGstId:j,paymentMethodType:Q,error:b}});var M=(e=>(e.PRO_UPGRADE="pro_upgrade",e.PRO_CHANGE_PAYMENT="pro_change_payment",e.PRO_REACTIVATE="pro_reactivate",e.ORG_UPGRADE="org_upgrade",e.ORG_CHANGE_PAYMENT="org_change_payment",e.COMMUNITY_CHECKOUT="community_checkout",e))(M||{}),G=(e=>(e.ADDRESS_VALIDATION_ERROR="address-validation-error",e.CONFIRM_SETUP_ERROR="confirm-setup-error",e.CURRENCY_VALIDATION_ERROR="currency-validation-error",e.UNINITIALIZED_STRIPE_ELEMENTS_ERROR="uninitialized-stripe-elements-error",e.VAT_GST_ID_VERIFICATION_ERROR="vat-gst-id-verification-error",e.NAME_ON_PAYMENT_METHOD_REQUIRED="name-on-payment-method-required",e))(G||{});async function O({teamId:e,redirect_url:r,error_redirect_url:t,success_message:a,subtotal_estimate:n,currency:o}){let{data:{meta:{client_secret:s,payment_methods:i}}}=await d.Ay.post("/api/subscriptions-2018-11-08/setup_intent",{team_id:e,redirect_url:r,error_redirect_url:t,subtotal_estimate:n,currency:o,...a?{success_message:a}:{}});return{clientSecret:s,paymentMethods:i}}function w({customerInfo:{teamId:e,orgId:r},currency:t,billingPeriod:a,teamName:n,userId:o,isCheckout:i,setupIntentId:c}){let d,l;let _=new URLSearchParams;if(n&&_.append("team_name",n),a&&_.append("billing_period",`${a}`),t&&_.append("selected_currency",t),o&&_.append("fuid",o),i&&_.append("is_checkout",i.toString()),c&&_.append("setup_intent",c),e)d="team",l=e;else if(r)d="org",l=r;else{if(null==e&&void 0!==e)return`https://${window.location.host}/team/validate_payment_method?${_.toString()}`;s.k.error("No valid ID was passed")}return`https://${window.location.host}/${d}/${l}/set_payment_method?${_.toString()}`}},394825:(e,r,t)=>{t.d(r,{Al:()=>T,dT:()=>I,kt:()=>p,lX:()=>m,nt:()=>h,pI:()=>E});var a=t(7378),n=t(514228),o=t(382883),s=t(657224),i=t(39751),c=t(191312),d=t(347702),l=t(372672),_=t(345997);let u=e=>`SAVED_CART::${e}`;function m({teamId:e,userId:r}){if(!r)return null;let t=g(r);return t?.teamId===e?t:null}let p=443==t.j?["","",""]:null;function E({loadingPaidEditors:e,teamId:r,teamName:t,setTeamName:s,collaborators:d,setCollaborators:u}){let m=(0,l.iZ)(),E=(0,n.d4)(e=>(r?e.teamUserByTeamId[r]:{})||{}),T=(0,n.d4)(e=>e.payment.numDesignEditors),y=(0,n.d4)(e=>e.payment.numWhiteboardEditors),h=(0,n.d4)(e=>e.payment.editorStatusChanges),f=(0,n.d4)(e=>e.payment.cartSelections),S=(0,i.ZC)(e),R=(0,_.BR)(E,m),D=(0,_.O1)(T,(0,_.Ky)(R,h,c._Y.DESIGN)),N=(0,_.O1)(y,(0,_.Ky)(R,h,c._Y.WHITEBOARD)),b=(0,a.useCallback)(()=>{let e=g(m?.id);if(!e)return null;let{createdAt:r,updatedAt:t,...a}=e;return a},[m?.id]);(0,a.useEffect)(()=>{let a=b(),n=null!==r||t?t:a?.newTeamName,i=null===r&&!d||(0,o.c2)(d,p)?a?.newCollaborators??p:d,c={teamId:r,editorStatusChanges:h,numEmptyDesignSeats:D,numEmptyWhiteboardSeats:N,newTeamName:n,newCollaborators:i,is3DS:a?.is3DS,cartSelections:f};!e&&m&&((0,o.he)(a,c)||I(m.id,c),S&&(s&&n!==t&&s(n||""),u&&!(0,o.c2)(d,i)&&u(i||p)))},[e,S,m,r,h,D,N,b,t,s,d,u,f])}let I=(0,d.D)((e,r)=>{try{let t=new Date().toISOString(),a={...r,createdAt:t,updatedAt:t};s.TQ()?.setItem(u(e),y(a))}catch(e){console.error("Failed to save cart state to Local Storage")}});function T(e){if(e)try{s.TQ()?.removeItem(u(e))}catch(e){}}let y=e=>JSON.stringify(e),g=e=>{if(!e)return null;try{let r=s.TQ()?.getItem(u(e));if(r)return JSON.parse(r);return null}catch(e){return null}};function h(e,r){let t=r.map(e=>e.id),a=e=>e?.filter(e=>t.includes(e))??[];return{upgrade:{design:a(e.upgrade.design),slides:a(e.upgrade.slides),sites:a(e.upgrade.sites),whiteboard:a(e.upgrade.whiteboard),cooper:a(e.upgrade.cooper),figmake:a(e.upgrade.figmake)},downgrade:{design:a(e.downgrade.design),slides:a(e.downgrade.slides),sites:a(e.downgrade.sites),whiteboard:a(e.downgrade.whiteboard),cooper:a(e.downgrade.cooper),figmake:a(e.downgrade.figmake)}}}},724099:(e,r,t)=>{t.d(r,{S:()=>N});var a=t(486106),n=t(7378),o=t(274480),s=t(270045),i=t(449184),c=t(207101),d=t(637027),l=t(490799),_=t(858013),u=t(714743),m=t(589278),p=t(303541),E=t(941192),I=t(795870),T=t(712094),y=t(148137),g=t(831101),h=t(33014),f=t(289352);let S="stripe_payment_and_address--error--z-IbH",R="stripe_payment_and_address--paymentDetailsCheckbox--34fJx";var D=t(433566);function N({createPaymentElement:e,unmountPaymentElement:r,billingAddress:t,updateBillingAddress:N,legalCompanyName:b,updateLegalCompanyName:x,nameOnPaymentMethod:C,updateNameOnPaymentMethod:A,shippingAddress:v,updateShippingAddress:P,error:M,paymentError:G,paymentMethodType:O,paymentElementEventHandlers:w,vatGstId:B,onVatGstIdChange:U,regionalVatGstId:k,onRegionalVatGstIdChange:j,paymentFlow:J,canSeeBillingAddressExp:$,isCampfireCart:F,hide:L}){let[V,Y]=(0,n.useState)(!1),[H,z]=n.useState(!!v&&!(0,g.$V)(v)),[Q,q]=n.useState(!!b),K=(J===I.wn.PRO_UPGRADE||J===I.wn.ORG_UPGRADE)&&$,X={paymentFlow:J,paymentMethodType:O,isCampfireCart:!!F};return(0,c.h)(()=>((async function(){await e({ready:e=>{Y(!0),w?.ready?.(e)},change:w?.change})})(),()=>{r()})),(0,n.useEffect)(()=>{M&&i.az.trackDefinedEvent("monetization_upgrades.checkout_payment_error",{...X,message:M.message})},[M]),(0,n.useEffect)(()=>{G&&i.az.trackDefinedEvent("monetization_upgrades.checkout_payment_error",{...X,message:G})},[G]),M?.code===I.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR?(0,a.jsxs)("div",{className:"stripe_payment_and_address--errorContainer--vjs9-",children:[(0,a.jsx)(u.B,{svg:D.A,className:"stripe_payment_and_address--errorIcon--vMQyn"}),(0,a.jsx)("p",{className:"stripe_payment_and_address--errorMessage--eZnrd",children:M.message})]}):(0,a.jsxs)("div",{style:E.sx.if(L,{height:"0px",overflow:"hidden",opacity:0}).$,className:"stripe_payment_and_address--container--1Xdbp",children:[G&&(0,a.jsx)("div",{className:S,children:(0,a.jsx)(l._,{color:l.S.ERROR,text:G})}),M&&(0,a.jsx)("div",{className:S,children:(0,a.jsx)(l._,{color:l.S.ERROR,text:M.message})}),(0,a.jsx)("div",{id:I.Ix}),V?(0,a.jsxs)("div",{style:E.sx.add({marginTop:"7px"}).if(O&&y.d2.includes(O),{marginTop:"15px"}).$,children:[$&&A&&(0,a.jsx)(d.Lf,{value:C||"",htmlName:"name_on_card",label:(0,p.t)("pro_cart.payment.name_on_payment_method_label"),placeholder:(0,p.t)("pro_cart.payment.name_on_payment_method"),onChange:e=>{A(e.target.value.trim())},autoCompleteName:"name on payment method",trackingFieldName:"Name On Payment Method",dataTestId:"name-on-payment-method"}),(0,a.jsx)(h.X,{address:t,updateAddress:N,canSeeBillingAddressExp:$,isBillingAddress:!0}),!!U&&(0,a.jsx)(f.A,{onChange:U,country:t.country,vatId:B,isCommunityCheckout:J===I.wn.COMMUNITY_CHECKOUT}),!!j&&(0,a.jsx)(f.A,{onChange:j,country:t.country,region:t.region,vatId:k,isCommunityCheckout:J===I.wn.COMMUNITY_CHECKOUT,variant:"regional"}),O===y.lB.SEPA&&(0,a.jsx)("p",{className:"stripe_payment_and_address--mandateText--hH8C3",children:(0,p.tx)("pro_cart.payment.sepa_direct_debit_mandate")}),K&&(0,a.jsx)("div",{className:R,style:E.sx.if(Q,{marginBottom:"24px"}).$,"data-testid":"stripe-payment-legal-name-checkbox",children:(0,a.jsx)(o.S,{label:(0,a.jsx)(s.J,{children:(0,a.jsx)("span",{className:m.s.font13.$,children:(0,p.tx)("checkout.i_have_a_different_legal_name")})}),checked:Q,onChange:e=>{q(e),!e&&x&&x("")}})}),Q&&(0,a.jsx)(T.E,{canSeeBillingAddressExp:$,legalCompanyName:b,updateLegalCompanyName:x}),K&&(0,a.jsx)("div",{className:R,style:E.sx.if(H,{marginBottom:"24px"}).$,"data-testid":"stripe-payment-shipping-address-checkbox",children:(0,a.jsx)(o.S,{label:(0,a.jsx)(s.J,{children:(0,a.jsx)("span",{className:m.s.font13.$,children:(0,p.tx)("checkout.i_have_a_different_shipping_address")})}),checked:H,onChange:e=>{z(e),!e&&P&&P((0,g.EB)())}})}),H&&(0,a.jsx)(T.E,{canSeeBillingAddressExp:$,shippingAddress:v,updateShippingAddress:P})]}):(0,a.jsx)("div",{className:"stripe_payment_and_address--spinnerContainer--hg5Vy",children:(0,a.jsx)(_.kt,{})})]})}},381913:(e,r,t)=>{t.d(r,{X:()=>o});var a=t(486106),n=t(632989);let o=(0,t(831799).tf)(function(e){return(0,a.jsx)(n.E,{onClick:e.onClick,children:e.children})})},998877:(e,r,t)=>{t.d(r,{O:()=>n});var a=t(486106);function n(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"full_width_page--closeMenu--M8Pvm",children:e.menu}),(0,a.jsx)("div",{ref:e.pageRef,className:"full_width_page--fullWidthPage--aQfdt overflow--overflowYAuto--nfK38 overflow--momentumScroll--qtsu7",...e})]})}},975542:(e,r,t)=>{t.d(r,{On:()=>s,Kh:()=>d,JR:()=>c});var a=t(486106),n=t(7378),o=t(465776);class s extends n.PureComponent{render(){(0,o.KF)(Number.isInteger(this.props.number),"breadcrumb step must be an integer"),(0,o.KF)(this.props.number>=1&&this.props.number<=20,"breadcrumb step is out of expected range");let e="";return this.props.selected?(e+="step_breadcrumb--stepSelected--aaq-4 step_breadcrumb--step--h0dTR",this.props.lightText&&(e+=" step_breadcrumb--whiteText--TeOgy")):(e+="step_breadcrumb--step--h0dTR",this.props.lightText&&(e+=" step_breadcrumb--greyText--Xid8Q")),this.props.canClick&&(this.props.lightText?e+=" step_breadcrumb--stepClickableLight--e7tX-":e+=" step_breadcrumb--stepClickable--t001q step_breadcrumb--step--h0dTR step_breadcrumb--stepClickable-on-hover---oTm4"),(0,a.jsxs)("div",{"data-testid":this.props.number+this.props.text,className:e,onClick:()=>this.props.canClick&&this.props.onClick&&this.props.onClick(),children:[(0,a.jsx)("span",{className:"step_breadcrumb--stepNumber--0A5tz",children:String.fromCharCode(9311+this.props.number)}),this.props.text]})}}s.displayName="StepBreadcrumb";class i extends n.PureComponent{render(){return(0,a.jsx)("div",{className:"step_breadcrumb--stepBreadcrumbSpacer--baFNr"})}}i.displayName="StepBreadcrumbSpacer";class c extends n.PureComponent{render(){return(0,a.jsx)("div",{className:`step_breadcrumb--stepTitle--kyggE text--fontPos22--4H4Fc text--_fontBase--QdLsd ${this.props.className||""}`,children:this.props.children})}}c.displayName="StepTitle";class d extends n.PureComponent{render(){return(0,a.jsx)("div",{className:"step_breadcrumb--stepInstructions--gjSRc text--fontPos14--OL9Hp text--_fontBase--QdLsd",...this.props})}}d.displayName="StepInstructions"}}]);

//# debugId=269ce345-46da-5a63-9d33-3221447b8716

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/c72262df8133a47d172da5a826b53ed65050157d/9420-377eca9ca65e3d94.min.js.map