"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="cb8919af-b03e-5d10-8192-da83ae97dacf")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[2677],{180390:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="m17.122 11.64-.012-.003-6.666-1.9 4.91 4.91c.195-.095.414-.147.646-.147.828 0 1.5.672 1.5 1.5 0 .828-.672 1.5-1.5 1.5-.828 0-1.5-.672-1.5-1.5 0-.232.053-.45.146-.647L9.743 10.45l1.832 6.39.01.037.008.037C12.015 18.961 13.829 20.5 16 20.5c.494 0 .968-.08 1.411-.225l.585-.193.435.435 1.847 1.847 2.122-2.121-1.865-1.865-.43-.43.184-.58c.137-.43.211-.89.211-1.368 0-2.093-1.43-3.854-3.366-4.356l-.012-.003zm5.985 7.895.707.708-.707.707-2.122 2.121-.707.707-.707-.707-1.847-1.847c-.542.18-1.122.276-1.724.276-2.655 0-4.871-1.882-5.387-4.384L8.325 9.132 8 8l1.133.323 8.252 2.353C19.752 11.29 21.5 13.44 21.5 16c0 .582-.09 1.144-.258 1.67z"/></svg>'},302396:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M2 3h5v2H2zM1 5V2h7v3h7v9H1zm7 1H2v7h12V6z"/></svg>'},731272:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M13.5 9h1V7.5c0-.828.672-1.5 1.5-1.5.828 0 1.5.672 1.5 1.5V9H23v15H9V9zm5-1H24v17H8V8h5.5v-.5C13.5 6.12 14.62 5 16 5c1.38 0 2.5 1.12 2.5 2.5zM16 12.5c-1.105 0-2 .895-2 2 0 1.105.895 2 2 2 1.105 0 2-.895 2-2 0-1.105-.895-2-2-2m-3 2c0-1.657 1.343-3 3-3 1.657 0 3 1.343 3 3 0 1.212-.718 2.255-1.752 2.729 1.317.503 2.252 1.778 2.252 3.271v.5h-1v-.5c0-1.38-1.12-2.5-2.5-2.5-1.38 0-2.5 1.12-2.5 2.5v.5h-1v-.5c0-1.493.935-2.768 2.252-3.271C13.718 16.755 13 15.712 13 14.5"/></svg>'},858457:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#000" fill-opacity=".9" fill-rule="evenodd" stroke="none" d="M14 10.443c0-.35.349-.59.676-.468l2 .75c.195.073.324.26.324.468v3.614c0 .208-.13.395-.324.468l-2 .75c-.327.123-.676-.119-.676-.468zm4 3.057v1.307c0 .625-.388 1.185-.973 1.405l-2 .75c-.98.367-2.027-.358-2.027-1.405v-5.114c0-1.047 1.046-1.772 2.027-1.404l1.973.74V9c0-4.418-3.582-8-8-8-4.418 0-8 3.582-8 8v.778l1.973-.74C3.953 8.671 5 9.396 5 10.443v5.114c0 1.047-1.046 1.772-2.027 1.405l-2-.75c-.585-.22-.973-.78-.973-1.405V9c0-4.97 4.03-9 9-9 4.97 0 9 4.03 9 9zm-17 0v-2.307c0-.208.13-.395.324-.468l2-.75c.327-.123.676.119.676.468v5.114c0 .35-.349.59-.676.468l-2-.75c-.195-.073-.324-.26-.324-.468z"/></svg>'},690182:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity=".8" fill-rule="evenodd" stroke="none" d="M15.373 22h1.258c.28-.32.616-.597.995-.819 1.479-.862 4.005-.909 5.386.109H24.5v-9.2c0 0-.797-2.25-4.42-2.25-1.875 0-2.902.602-3.456 1.184-.389.407-.545.804-.6.976h-.049c-.054-.172-.21-.57-.599-.976-.554-.582-1.581-1.184-3.456-1.184-3.623 0-4.42 2.25-4.42 2.25v9.19h1.488c1.382-1.019 3.91-.97 5.388-.105.38.223.717.502.997.825m1.127-9.711v8.457q.293-.236.622-.428c.927-.541 2.115-.796 3.241-.787 1.006.008 2.081.227 2.952.759h.185v-7.973l-.03-.05c-.086-.138-.236-.339-.474-.545-.461-.397-1.33-.882-2.916-.882-1.586 0-2.34.483-2.694.835-.189.186-.296.367-.354.49-.029.061-.045.108-.052.131l-.005.017.001-.006.002-.008v-.005l.001-.002v-.002l-.005-.001zm-1 0h-.475l-.005.001v.002l.001.002.001.005.002.008.001.006q.001.001-.005-.017c-.007-.023-.024-.07-.053-.131-.057-.123-.164-.303-.353-.49-.354-.352-1.108-.835-2.694-.835-1.585 0-2.455.485-2.916.882-.238.206-.388.407-.474.545l-.03.05v7.963h.185c.872-.533 1.948-.752 2.954-.759 1.128-.008 2.316.249 3.243.792q.326.191.618.426z"/></svg>'},1757:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="m13 10.098.765.478 8 5 .678.424-.678.424-8 5-.765.478zm1 1.804v8.196L20.557 16z"/></svg>'},809027:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><path fill="#b3b3b3" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M8 14h15v1H8z"/></svg>'},97605:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30"><path fill="#b3b3b3" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M15 15v7h1v-7h7v-1h-7V7h-1v7H8v1z"/></svg>'},100203:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M16.708 6.895c-1.39 0-2.518 1.127-2.518 2.518 0 1.391 1.127 2.52 2.518 2.52 1.391 0 2.52-1.129 2.52-2.52 0-1.39-1.129-2.518-2.52-2.518m-3.314 2.518c0-1.83 1.484-3.314 3.314-3.314 1.83 0 3.315 1.484 3.315 3.314 0 1.65-1.205 3.017-2.781 3.272 2.76.246 4.968 2.38 4.968 5.04v1.565H2.458v-1.565c0-2.66 2.207-4.794 4.968-5.04-1.577-.255-2.781-1.623-2.781-3.272 0-1.83 1.484-3.314 3.314-3.314 1.83 0 3.314 1.484 3.314 3.314 0 1.65-1.204 3.017-2.78 3.272 1.554.138 2.933.875 3.841 1.968.907-1.093 2.283-1.83 3.84-1.968-1.576-.255-2.78-1.623-2.78-3.272M3.253 17.725c0-2.325 2.073-4.268 4.706-4.268 2.633 0 4.706 1.943 4.706 4.268v.77H3.253zm10.207.77h7.954v-.77c0-2.325-2.072-4.268-4.706-4.268-1.63 0-3.055.75-3.897 1.876.414.71.65 1.523.65 2.392v.77zM5.44 9.412c0-1.39 1.128-2.518 2.52-2.518 1.39 0 2.518 1.127 2.518 2.518 0 1.391-1.128 2.52-2.519 2.52-1.391 0-2.519-1.129-2.519-2.52"/></svg>'},817229:(e,t,a)=>{a.d(t,{A:()=>s});let s='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#000" fill-opacity="1" fill-rule="nonzero" stroke="none" d="M.2 9h17.6l.2.4v.6H0v-.6zm0 0h17.6l.2.4v.6H0v-.6zM0 17h18v1H0zm0 0h18v1H0zM7 6h4v1H7zm0 0h4v1H7zm0-6h4v1H7zm0 0h4v1H7zm5 3h2.8l3 6h-1.105L14.2 4H12zM6 3H3.2l-3 6h1.105L3.8 4H6zm-6 7h1v7H0zm0 0h1v7H0zm17 0h1v7h-1zm0 0h1v7h-1zM6 0h1v7H6zm0 0h1v7H6zm5 0h1v7h-1zm0 0h1v7h-1z"/></svg>'},859355:(e,t,a)=>{a.d(t,{$P:()=>p,Dz:()=>i,E8:()=>g,G8:()=>S,Jh:()=>d,Mm:()=>c,Ms:()=>y,Q$:()=>T,QB:()=>v,VA:()=>f,Vf:()=>_,W2:()=>m,_R:()=>u,b:()=>n,gt:()=>b,hx:()=>l,jG:()=>x,o:()=>r,oE:()=>h,y3:()=>j,yH:()=>o,yl:()=>s});let s="org_upgrade_single_team_modal--modal--ksTCZ",r="org_upgrade_single_team_modal--planModalHeader--NF9Rm",i="org_upgrade_single_team_modal--planModalHeaderText--ooJle",l="org_upgrade_single_team_modal--planModalTitle--i2U18 text--fontPos24--YppUD text--_fontBase--QdLsd",n="org_upgrade_single_team_modal--closeButton--xlW3E",d="org_upgrade_single_team_modal--planModalHeaderDivider--h1IPt",o="org_upgrade_single_team_modal--planGrid--vjBAw",c="org_upgrade_single_team_modal--planGrid__vertDivided--GAHYl",m="org_upgrade_single_team_modal--seeAllFeatures--86diJ",_="org_upgrade_single_team_modal--teamPlan--K5SN-",u="org_upgrade_single_team_modal--itemList--pQSea",p="org_upgrade_single_team_modal--planItem--BQHfH",h="org_upgrade_single_team_modal--checkIcon--vhgrx",g="org_upgrade_single_team_modal--planSelectButton--CKoDi",x="org_upgrade_single_team_modal--scrollContainer--sufjZ",f="org_upgrade_single_team_modal--subtitle--nt2Dh",v="org_upgrade_single_team_modal--planNameBase--R8WKM text--fontPos16--oMC-G text--_fontBase--QdLsd",y="org_upgrade_single_team_modal--planPriceView--L7aSJ",j="org_upgrade_single_team_modal--priceRow--jzozY text--fontPos11--2LvXf text--_fontBase--QdLsd",S="org_upgrade_single_team_modal--priceFigureWithFigjam--0E8M8 text--fontPos16--oMC-G text--_fontBase--QdLsd",T="org_upgrade_single_team_modal--figmaPriceWithDevMode--k-2WW",b="org_upgrade_single_team_modal--devModeText--EKgJM"},62130:(e,t,a)=>{a.d(t,{$g:()=>c,DI:()=>o,Eh:()=>l,GK:()=>r,J1:()=>d,KV:()=>i,b:()=>s,cr:()=>h,jG:()=>m,kz:()=>_,nW:()=>p,o8:()=>u,u1:()=>n,wv:()=>g});let s="universal_upgrade_sequence--closeButton--Us7fC",r="universal_upgrade_sequence--modalTitle--j-zLx text--fontPos18--rYXJb text--_fontBase--QdLsd",i="universal_upgrade_sequence--modalSubtitle--ucPxW text--fontPos14--OL9Hp text--_fontBase--QdLsd",l="universal_upgrade_sequence--createTeamInput--kWzFx basic_form--labeledInputGroup--aeD6L text--fontPos14--OL9Hp text--_fontBase--QdLsd",n="universal_upgrade_sequence--spinner--CvsHJ",d="universal_upgrade_sequence--tileUpgradeButton--GxMSU",o="universal_upgrade_sequence--nextButtonSmall--tUSIb universal_upgrade_sequence--nextButton--F2XJ4",c="universal_upgrade_sequence--createTeamSection--XhWMJ",m="universal_upgrade_sequence--scrollContainer--BQFbB",_="universal_upgrade_sequence--scrollContainerTopBorder--yuAD-",u="universal_upgrade_sequence--scrollContainerBottomBorder--CwNTV",p="universal_upgrade_sequence--teamTileContainer--kS2oM org_self_serve--teamLargeTileContainer--3M0cY",h="universal_upgrade_sequence--teamTile--WZEIz org_self_serve--teamTileLarge--HawGF text--fontPos14--OL9Hp text--_fontBase--QdLsd",g="universal_upgrade_sequence--lastTeamTile--zfV5W universal_upgrade_sequence--teamTile--WZEIz org_self_serve--teamTileLarge--HawGF text--fontPos14--OL9Hp text--_fontBase--QdLsd"},763339:(e,t,a)=>{a.d(t,{$y:()=>m,Bb:()=>b,ER:()=>w,Ed:()=>x,Et:()=>r,I1:()=>g,Jo:()=>u,K6:()=>C,M7:()=>s,N5:()=>p,Nd:()=>l,O2:()=>S,Qv:()=>h,Uu:()=>o,W:()=>n,Xq:()=>f,aK:()=>d,cc:()=>y,i9:()=>c,iv:()=>v,jg:()=>T,kH:()=>N,li:()=>i,nm:()=>j,uD:()=>_});let s="org_self_serve_figjam--stepContent--PmiVT",r="org_self_serve_figjam--stepContentTeamCreation--aecM6",i="org_self_serve_figjam--menuContainer--2R9vL",l="org_self_serve_figjam--cancelMenuItem--xWgkC",n="org_self_serve_figjam--pageTitle--FnN-D",d="org_self_serve_figjam--summaryDivider--Mcrvf",o="org_self_serve_figjam--flex--zpEBd",c="org_self_serve_figjam--svgText--d64Nk org_self_serve_figjam--flex--zpEBd",m="org_self_serve_figjam--helpIcon--i-O5F",_="org_self_serve_figjam--textLink--oq58H org_self_serve_figjam--billingSubText--0-Z4w",u="org_self_serve_figjam--confirmationBox---MCFL org_self_serve_figjam--stepRect--eHVrW org_self_serve_figjam--boxBorder--AaC8L",p="org_self_serve_figjam--flexBox--wb7nK",h="org_self_serve_figjam--confirmationPageText--OPG5S text--fontPos13--xW8hS text--_fontBase--QdLsd",g="org_self_serve_figjam--confirmationCharge--V8Lpo org_self_serve_figjam--confirmationPageText--OPG5S text--fontPos13--xW8hS text--_fontBase--QdLsd",x="org_self_serve_figjam--confirmationRow--0-0Jf",f="org_self_serve_figjam--confirmationHomeButton--bokpb text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L",v="org_self_serve_figjam--confirmationAmountDue--LoEoe",y="org_self_serve_figjam--confirmationHeading--3108k",j="org_self_serve_figjam--confirmationLoadingText--uJKaf org_self_serve_figjam--msaLabelText--HQg1L",S="org_self_serve_figjam--greenCheck--wvkO-",T="org_self_serve_figjam--confirmationPage---8XoA",b="org_self_serve_figjam--createTeamContainer--o7rw4",N="org_self_serve_figjam--teamsContainer--oOa2W",C="org_self_serve_figjam--teamCheckboxContainer--Mznj-",w="org_self_serve_figjam--selectTeamsIcon--V-xyE"},921966:(e,t,a)=>{a.r(t),a.d(t,{EduReviewPage:()=>N});var s=a(486106),r=a(7378),i=a(514228),l=a(520829),n=a(637027),d=a(381913),o=a(998877),c=a(371580),m=a(211326),_=a(975542),u=a(714743),p=a(589278),h=a(303541),g=a(841217),x=a(278106),f=a(929976),v=a(482142),y=a(584989),j=a(831799),S=a(514043),T=a(821527);let b=e=>{let t=(0,i.d4)(t=>{let a=y.Xw.loadingKeyForPayload({teamId:e});return t.loadingState[a]}),a=(0,i.d4)(t=>t.teamUserByTeamId[e]||{}),s=(0,i.wA)();r.useEffect(()=>{s(y.Xw({teamId:e}))},[s,e]);let n=t!==l.r.SUCCESS;return r.useEffect(()=>{if(!n){let e=Object.keys(a).length;s(v.Az({numWhiteboardEditors:e})),s(v.js({numDesignEditors:e}))}},[s,n,a]),n};function N({selectedView:e}){let{teamId:t}=e,a=b(t),r=(0,i.wA)(),l=()=>{r(v.Nj({teamId:t,onCloseOrComplete:e.onCloseOrComplete}))};return(0,s.jsx)(j.fu,{name:"Edu Review",properties:{teamId:t},children:(0,s.jsx)("div",{children:(0,s.jsxs)(o.O,{menu:(0,s.jsx)(d.X,{onClick:()=>{r(f.sf({view:"team",teamId:t})),e.onCloseOrComplete?.()},children:(0,s.jsx)(u.B,{svg:T.A,className:"edu_review--modalCloseX--PeJlf",dataTestId:"close-button"})}),children:[(0,s.jsx)("span",{className:e.showBreadcrumbs?void 0:"edu_review--hidden--p1Flp",children:(0,s.jsx)(x.J,{index:3})}),(0,s.jsxs)("div",{className:p.s.flex.flexColumn.itemsCenter.alignCenter.$,children:[(0,s.jsx)(_.JR,{children:(0,h.tx)("edu.almost_done_everything_look_good")}),(0,s.jsx)(n.Kz,{multiple:4}),(0,s.jsx)(m.x,{isLoading:a,children:()=>(0,s.jsx)(c.o,{children:(0,s.jsx)(g.d,{selectedView:e,onClickConfirm:l,currency:(0,S.LN)(),canSeeBillingAddressExp:!1})})})]})]})})})}},511255:(e,t,a)=>{a.r(t),a.d(t,{OrgUpgradeMultiTeamModal:()=>er});var s=a(486106),r=a(7378),i=a(514228),l=a(165054),n=a(403855),d=a(169182),o=a(566371),c=a(361869),m=a(17223),_=a(751457),u=a(637027),p=a(347284),h=a(714743),g=a(589278),x=a(303541),f=a(941192),v=a(307841),y=a(929976),j=a(156213),S=a(370443),T=a(831799),b=a(84777),N=a(513035),C=a(332483),w=a(3140),E=a(514043),A=a(598018),I=a(712921),k=a(805373),P=a(809096),M=a(918700),R=a(465776),O=a(95419),D=a(251970),B=a(125190),L=a(617427),V=a(109538),U=a(380801),$=a(261906),z=a(723768),F=a(217457),G=a(191312),H=a(165519);function X({currency:e,hideModal:t,choosePlan:a,TeamIllustration:r,upsellSource:l}){let n=(0,i.wA)();return(0,s.jsxs)("div",{className:g.s.flex.flexColumn.gap8.$,style:f.sx.add({padding:"48px 56px",maxWidth:"650px"}).$,children:[(0,s.jsx)("p",{className:g.s.textHeadingLarge.$,children:(0,x.tx)("org_upgrade.multi_team.bring_your_teams_together")}),(0,s.jsx)("p",{className:g.s.textHeadingMedium.$,style:f.sx.add({fontWeight:400}).$,children:(0,x.tx)("plan_comparison.campfire.org.description")}),(0,s.jsx)(L.e6,{className:"campfire_org_upgrade_multi_team_modal--closeButton--THg83",onClick:t,children:(0,s.jsx)(D.A,{})}),(0,s.jsxs)("div",{className:g.s.flex.gap16.$,children:[(0,s.jsxs)("div",{className:g.s.flex.flexColumn.gap16.flex1.mt16.$,children:[(0,s.jsx)(W,{currency:e}),(0,s.jsxs)("div",{children:[(0,s.jsx)(L.Ih,{onClick:a,children:(0,x.tx)("plan_comparison.campfire.choose_plan")}),(0,s.jsx)("div",{className:g.s.font11.lh16.alignCenter.mt4.$,children:(0,x.tx)("plan_comparison.campfire.or_contact_sales",{contactSalesLink:(0,s.jsx)("button",{className:g.s.colorTextBrand.cursorPointer.$,onClick:()=>n(j.to({type:V.lk,data:{source:U.B.ORG_SELF_SERVE_UPGRADE_MODAL}})),children:(0,x.tx)("plan_comparison.campfire.contact_sales")})})})]}),(0,s.jsx)("div",{className:g.s.bt1.bSolid.colorBorder.$}),(0,s.jsx)(J,{upsellSource:l})]}),(0,s.jsx)("div",{className:g.s.flex.flex1.itemsCenter.justifyCenter.$,children:r})]})]})}function W({currency:e}){let t={currency:e,tier:I.Ju.ORG,renewalTerm:I.IX.YEAR,unit:I.IX.MONTH},a=(0,b.jv)({billableProductKeys:C.N_,baseQuery:t}),[r]=(0,o.mI)(a);if(null===r.data)throw Error("Price data is null");let i=new E.vr(e);return(0,s.jsx)("div",{className:g.s.flex.flexColumn.$,children:C.N_.sort(F.AG).map(e=>(0,O.uy)(r.data[e])?null:(0,s.jsxs)("div",{className:g.s.flex.justifyBetween.$,children:[(0,s.jsxs)("div",{className:g.s.flex.gap4.itemsCenter.$,children:[(0,$.B)({type:e,size:"24",removeBackgroundColor:!0}),(0,s.jsx)("p",{className:g.s.textBodyLarge.$,children:function(e){switch(e){case N.ud.EXPERT:return(0,x.t)("nux.campfire.full_seat");case N.ud.DEVELOPER:return(0,x.t)("nux.campfire.dev_seat");case N.ud.COLLABORATOR:return(0,x.t)("nux.campfire.collab_seat");case N.ud.CONTENT:return(0,x.t)("nux.campfire.content_seat");default:(0,R.xb)(e)}}(e)})]}),(0,s.jsx)("p",{className:g.s.textBodyMedium.$,children:(0,x.tx)("nux.price_per_month",{price:(0,s.jsx)("span",{className:g.s.textBodyLargeStrong.$,children:i.formatMoney(r.data[e].amount)})})})]},e))})}function J(e){let t=e.upsellSource===H.b.CONNECTED_PROJECTS_MAXIMUM_CONNECTIONS,a=[t?(0,x.tx)("plan_comparison.campfire.org.feature.org_connected_projects",{orgConnectionsLimit:z.b[G.Ag.ORG]}):null,(0,x.tx)("plan_comparison.campfire.org.feature.unlimited_teams"),(0,x.tx)("plan_comparison.campfire.org.feature.branching"),(0,x.tx)("plan_comparison.campfire.org.feature.security"),(0,x.tx)("plan_comparison.campfire.org.feature.scim"),(0,x.tx)("plan_comparison.campfire.org.feature.customizations")].filter(Boolean);return(0,s.jsx)("div",{children:a.map((e,a)=>{let r=t&&0===a?(0,s.jsx)("span",{className:g.s.textBodyLargeStrong.$,children:e}):(0,s.jsx)("span",{children:e});return(0,s.jsxs)("div",{className:g.s.flex.$,children:[(0,s.jsx)(B.g,{className:g.s.minW24.$,style:{"--color-icon":"var(--color-icon-secondary)"}}),(0,s.jsx)("p",{className:g.s.textBodyLarge.$,children:r})]},a)})})}let Y="org_upgrade_multi_team_modal--planModalDivider--Rnmy0";var K=a(859355),Z=a(7452);let q=(0,d.ck)("50ae1752a504eea59f2a3efac6b0f2d1ed74435a"),Q=(0,d.ck)("e2148969d5a469e76c053a23b6647d487e6d64ee"),ee=(0,d.ck)("fc0fcfadcfe50c96f4dcf859aabe1952c822ae2a");function et(e){return(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--planItem--P4LRr",children:[(0,s.jsx)(h.B,{svg:Z.A,className:"org_upgrade_multi_team_modal--checkIcon--KnZJe"}),(0,s.jsx)("p",{children:e.text})]})}function ea(e){let t=(0,i.wA)(),a=()=>{t(j.Ce())},l=(0,v.sx)(),d=r.useMemo(()=>[(0,x.t)("org_upgrade.multi_team.plan_items.shared_design_libraries"),(0,x.t)("org_upgrade.multi_team.plan_items.shared_fonts_and_styles"),(0,x.t)("org_upgrade.multi_team.plan_items.centralized_billing_and_admin_controls"),(0,x.t)("org_upgrade.multi_team.plan_items.single_sign_on_sso_integrations")],[]),_=()=>{a(),t(y.sf({view:"orgSelfServe",upsellSource:e.upsellSource}))},T=e=>(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--teamListEntry---bU9i",children:[(0,s.jsx)(k.Ro,{size:10,hideFallbackInitial:!0,entity:e,shape:"SQUARE"}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListEntryName--aJZdJ ellipsis--ellipsis--Tjyfa",children:e.name})]},e.id),w=r.useMemo(()=>{switch(Object.keys(e.teams).length){case 2:return 184;case 3:return 192;default:return 221}},[e.teams]),A=K.G8,P=(0,E.wU)(),R=C.Oq.dict(e=>({currency:P.currency,billableProductKey:e,billableProductVariantKey:null,tier:I.Ju.ORG,renewalTerm:I.IX.YEAR,unit:I.IX.MONTH})),O=(0,b.SK)(R,b.Fq.UPSELL_MODALS),[D]=(0,o.mI)(O);if(null===D.data)throw Error("Price data is null");let B=D.data,L=(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamIllustrationLeftSection--MLN4f",style:f.sx.if(l,f.sx.add({width:"200px"})).$,children:(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--dynamicTeamListSection--KE5ZD",children:[(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--teamListHeader--Eyf-F",children:[(0,s.jsx)("img",{className:"org_upgrade_multi_team_modal--placeholderOrgLogo--vYLRQ",src:ee,draggable:!1,alt:""}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListOrgName--EKk6-",children:(0,x.tx)("org_upgrade.multi_team.acme_inc")}),(0,s.jsx)(h.B,{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="#000" fill-opacity="1" fill-rule="evenodd" stroke="none" d="M12 16.05V9h1v7.05c1.141.232 2 1.24 2 2.45 0 1.21-.859 2.218-2 2.45V23h-1v-2.05c-1.141-.232-2-1.24-2-2.45 0-1.21.859-2.218 2-2.45m2 2.45c0 .828-.672 1.5-1.5 1.5-.828 0-1.5-.672-1.5-1.5 0-.828.672-1.5 1.5-1.5.828 0 1.5.672 1.5 1.5m5 4.5h1v-7.05c1.141-.232 2-1.24 2-2.45 0-1.21-.859-2.218-2-2.45V9h-1v2.05c-1.141.232-2 1.24-2 2.45 0 1.21.859 2.218 2 2.45zm2-9.5c0-.828-.672-1.5-1.5-1.5-.828 0-1.5.672-1.5 1.5 0 .828.672 1.5 1.5 1.5.828 0 1.5-.672 1.5-1.5"/></svg>',className:"org_upgrade_multi_team_modal--multiTeamOrgUpgradeAdjustSvg--V4dem"})]}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamListDivider--A9NYP"}),(()=>{let t=e.unsortedTeamIds,a=[];for(var r=0;r<Math.min(4,t.length);r++){let s=e.teams[t[r]];a.push(T(s))}return(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamList--rzATA",children:a})})(),(0,s.jsxs)("div",{className:l?"org_upgrade_multi_team_modal--campfireTeamIllustrationRightSection--fHW0n":"org_upgrade_multi_team_modal--teamIllustrationRightSection--irt0w",children:[(0,s.jsx)("img",{className:"org_upgrade_multi_team_modal--filesIllustration--teK60",src:Q,draggable:!1,alt:""}),(0,s.jsx)("img",{src:q,draggable:!1,alt:""})]}),l&&(0,s.jsxs)("div",{className:g.s.flex.b1.bRadius3.itemsCenter.absolute.pr4.py4.ml36.$,style:f.sx.add({top:"100%",marginTop:"15px",maxWidth:"100px"}).$,children:[(0,s.jsx)(n.s,{className:g.s.minW16.$}),(0,s.jsx)("p",{className:g.s.textBodySmallStrong.$,children:(0,x.tx)("org_upgrade.illustration.sign_in_with_sso")}),(0,s.jsx)("div",{className:g.s.absolute.mt32.$,style:f.sx.add({right:"-8px"}).$,children:(0,s.jsx)(es,{})})]})]})});return(0,s.jsx)(M.ey,{className:"org_upgrade_multi_team_modal--modal--fVO2l",hide:a,size:"fitContent",useModalViewScroll:!1,children:l?(0,s.jsx)(X,{currency:P.currency,hideModal:a,choosePlan:_,TeamIllustration:L,upsellSource:e.upsellSource}):(0,s.jsxs)(p.P,{className:"org_upgrade_multi_team_modal--scrollContainer--ZL-IQ",children:[(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--planModalHeader--drD3M",style:{height:64,marginBottom:32},children:[(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--planModalTitle--YP3RJ text--fontPos24--YppUD text--_fontBase--QdLsd",style:{fontWeight:600},children:(0,x.tx)("org_upgrade.multi_team.bring_your_teams_together_with_the_figma_organization_plan")}),(0,s.jsx)(m.Jn,{className:"org_upgrade_multi_team_modal--closeButton--x3l-2",onClick:a,innerText:"close"})]}),(0,s.jsx)("div",{className:Y}),(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--planDetails--Fu8GW",children:[(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--planDetailsLeft--mBwlh",children:[(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--billingCadence--WBrj-",children:(0,x.tx)("org_upgrade.multi_team.annual_billing_only")}),(0,s.jsxs)("div",{className:K.y3,children:[(0,s.jsxs)("p",{className:K.Q$,children:[(0,x.tx)("org_upgrade.multi_team.figma"),(0,s.jsx)("div",{className:K.gt,children:(0,s.jsx)(c.G,{})})]}),(0,s.jsx)("div",{children:(0,x.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:(0,s.jsx)("span",{className:K.G8,children:P.formatMoney(B[N.ud.DESIGN].amount)})})})]}),(0,s.jsxs)("div",{className:K.y3,children:[(0,x.tx)("org_upgrade.multi_team.dev_mode"),(0,s.jsx)("div",{children:(0,x.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:(0,s.jsx)("span",{className:K.G8,children:P.formatMoney(B[N.ud.DEV_MODE].amount)})})})]}),(0,s.jsxs)("div",{className:K.y3,children:[(0,x.tx)("org_upgrade.multi_team.fig_jam"),(0,s.jsx)("div",{children:(0,x.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:(0,s.jsx)("span",{className:A,children:P.formatMoney(B[N.ud.FIGJAM].amount)})})})]}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--planText--MQX-G",children:(0,s.jsxs)("div",{className:"org_upgrade_multi_team_modal--itemList--SC-iA",children:[d.map((e,t)=>(0,s.jsx)("div",{children:(0,s.jsx)(et,{text:e})},t)),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--seeAll--8WNIM",children:(0,s.jsx)(u.Us,{href:"https://www.figma.com/pricing/#cid-57mfNh6t0Xo7z8Q95Ww9ZV",target:"_blank",trusted:!0,children:(0,x.tx)("org_upgrade.multi_team.see_all_features")})})]})})]}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--teamIllustrationSection--xl3pT",style:{height:w},children:L})]}),(0,s.jsx)("div",{className:Y}),(0,s.jsx)(u.vd,{onClick:_,className:"org_upgrade_multi_team_modal--continueButton--Zo9V7",trackingProperties:{trackingDescriptor:S.c.UPGRADE_TO_ORGANIZATION,upsellSource:e.upsellSource},children:(0,x.tx)("org_upgrade.multi_team.continue")}),(0,s.jsx)("div",{className:"org_upgrade_multi_team_modal--spaceFiller--f9bwU"})]})})}function es(){return(0,s.jsxs)("svg",{width:"15",height:"17",viewBox:"0 0 15 17",fill:"none",children:[(0,s.jsxs)("mask",{id:"path-1-outside-1_15_11117",maskUnits:"userSpaceOnUse",x:"-0.5",y:"0.5",width:"16",height:"16",fill:"black",children:[(0,s.jsx)("rect",{fill:"white",x:"-0.5",y:"0.5",width:"16",height:"16"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.7753 2.25C4.7753 1.83579 5.11109 1.5 5.5253 1.5C5.93951 1.5 6.2753 1.83579 6.2753 2.25V7C6.2753 7.27614 6.49916 7.5 6.7753 7.5C7.05144 7.5 7.2753 7.27614 7.2753 7V6.25C7.2753 5.83579 7.61109 5.5 8.0253 5.5C8.43951 5.5 8.7753 5.83579 8.7753 6.25V7C8.7753 7.27614 8.99916 7.5 9.2753 7.5C9.55144 7.5 9.7753 7.27614 9.7753 7V6.75C9.7753 6.33579 10.1111 6 10.5253 6C10.9395 6 11.2753 6.33579 11.2753 6.75V6.99997C11.2753 7.27613 11.4992 7.5 11.7753 7.5H12.0254C12.1634 7.5 12.2754 7.38807 12.2754 7.25C12.2754 6.83579 12.6111 6.5 13.0254 6.5C13.4396 6.5 13.7754 6.83579 13.7754 7.25V9.75C13.7754 9.75099 13.7754 9.75197 13.7754 9.75296V11C13.7754 13.4853 11.7606 15.5 9.27535 15.5C7.72857 15.5 6.36406 14.7196 5.55409 13.531C4.83873 12.7173 3.72389 11.8364 2.76078 11.0754L2.76074 11.0754L2.76055 11.0753C2.45467 10.8336 2.16409 10.604 1.90649 10.3925C1.42761 9.99926 1.3593 9.26798 1.7686 8.80273C2.47277 8.00228 3.67449 9.08737 4.40263 9.86608C4.41077 9.87478 4.41894 9.88354 4.42715 9.89237C4.54973 10.0242 4.77535 9.93924 4.77535 9.75922L4.7753 9.75V2.25Z"})]}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.7753 2.25C4.7753 1.83579 5.11109 1.5 5.5253 1.5C5.93951 1.5 6.2753 1.83579 6.2753 2.25V7C6.2753 7.27614 6.49916 7.5 6.7753 7.5C7.05144 7.5 7.2753 7.27614 7.2753 7V6.25C7.2753 5.83579 7.61109 5.5 8.0253 5.5C8.43951 5.5 8.7753 5.83579 8.7753 6.25V7C8.7753 7.27614 8.99916 7.5 9.2753 7.5C9.55144 7.5 9.7753 7.27614 9.7753 7V6.75C9.7753 6.33579 10.1111 6 10.5253 6C10.9395 6 11.2753 6.33579 11.2753 6.75V6.99997C11.2753 7.27613 11.4992 7.5 11.7753 7.5H12.0254C12.1634 7.5 12.2754 7.38807 12.2754 7.25C12.2754 6.83579 12.6111 6.5 13.0254 6.5C13.4396 6.5 13.7754 6.83579 13.7754 7.25V9.75C13.7754 9.75099 13.7754 9.75197 13.7754 9.75296V11C13.7754 13.4853 11.7606 15.5 9.27535 15.5C7.72857 15.5 6.36406 14.7196 5.55409 13.531C4.83873 12.7173 3.72389 11.8364 2.76078 11.0754L2.76074 11.0754L2.76055 11.0753C2.45467 10.8336 2.16409 10.604 1.90649 10.3925C1.42761 9.99926 1.3593 9.26798 1.7686 8.80273C2.47277 8.00228 3.67449 9.08737 4.40263 9.86608C4.41077 9.87478 4.41894 9.88354 4.42715 9.89237C4.54973 10.0242 4.77535 9.93924 4.77535 9.75922L4.7753 9.75V2.25Z",fill:"white"}),(0,s.jsx)("path",{d:"M13.7754 9.75296L12.7754 9.7491V9.75296H13.7754ZM5.55409 13.531L6.38045 12.9679L6.34578 12.917L6.30513 12.8708L5.55409 13.531ZM2.76078 11.0754L3.38075 10.2908L3.37466 10.286L3.36849 10.2813L2.76078 11.0754ZM2.76074 11.0754L2.13996 11.8594L2.14646 11.8645L2.15303 11.8696L2.76074 11.0754ZM2.76055 11.0753L3.38133 10.2913L3.38052 10.2906L2.76055 11.0753ZM1.90649 10.3925L1.27191 11.1653L1.27191 11.1653L1.90649 10.3925ZM1.7686 8.80273L1.01778 8.14221H1.01778L1.7686 8.80273ZM4.40263 9.86608L5.13306 9.18309L5.13306 9.18309L4.40263 9.86608ZM4.7753 9.75H3.77528L3.77532 9.75602L4.7753 9.75ZM4.42715 9.89237L3.69482 10.5733L4.42715 9.89237ZM5.5253 0.5C4.5588 0.5 3.7753 1.2835 3.7753 2.25H5.7753C5.7753 2.38807 5.66337 2.5 5.5253 2.5V0.5ZM7.2753 2.25C7.2753 1.2835 6.4918 0.5 5.5253 0.5V2.5C5.38723 2.5 5.2753 2.38807 5.2753 2.25H7.2753ZM7.2753 7V2.25H5.2753V7H7.2753ZM6.2753 6.25V7H8.2753V6.25H6.2753ZM8.0253 4.5C7.0588 4.5 6.2753 5.2835 6.2753 6.25H8.2753C8.2753 6.38807 8.16337 6.5 8.0253 6.5V4.5ZM9.7753 6.25C9.7753 5.2835 8.9918 4.5 8.0253 4.5V6.5C7.88723 6.5 7.7753 6.38807 7.7753 6.25H9.7753ZM9.7753 7V6.25H7.7753V7H9.7753ZM8.7753 6.75V7H10.7753V6.75H8.7753ZM10.5253 5C9.5588 5 8.7753 5.7835 8.7753 6.75H10.7753C10.7753 6.88807 10.6634 7 10.5253 7V5ZM12.2753 6.75C12.2753 5.7835 11.4918 5 10.5253 5V7C10.3872 7 10.2753 6.88807 10.2753 6.75H12.2753ZM12.2753 6.99997V6.75H10.2753V6.99997H12.2753ZM12.0254 6.5H11.7753V8.5H12.0254V6.5ZM13.2754 7.25C13.2754 7.38807 13.1634 7.5 13.0254 7.5V5.5C12.0589 5.5 11.2754 6.2835 11.2754 7.25H13.2754ZM13.0254 7.5C12.8873 7.5 12.7754 7.38807 12.7754 7.25H14.7754C14.7754 6.2835 13.9919 5.5 13.0254 5.5V7.5ZM12.7754 7.25V9.75H14.7754V7.25H12.7754ZM12.7754 9.75L12.7754 9.7491L14.7753 9.75683C14.7754 9.75455 14.7754 9.75228 14.7754 9.75H12.7754ZM14.7754 11V9.75296H12.7754V11H14.7754ZM9.27535 16.5C12.3129 16.5 14.7754 14.0376 14.7754 11H12.7754C12.7754 12.933 11.2084 14.5 9.27535 14.5V16.5ZM4.72773 14.0942C5.716 15.5444 7.38393 16.5 9.27535 16.5V14.5C8.07321 14.5 7.01213 13.8948 6.38045 12.9679L4.72773 14.0942ZM2.14081 11.8601C3.12768 12.6398 4.1605 13.4604 4.80305 14.1913L6.30513 12.8708C5.51696 11.9742 4.32011 11.033 3.38075 10.2908L2.14081 11.8601ZM2.15303 11.8696L2.15308 11.8696L3.36849 10.2813L3.36845 10.2812L2.15303 11.8696ZM2.13977 11.8592L2.13996 11.8594L3.38152 10.2914L3.38133 10.2913L2.13977 11.8592ZM1.27191 11.1653C1.53818 11.3839 1.83659 11.6197 2.14058 11.8599L3.38052 10.2906C3.07274 10.0474 2.79 9.82399 2.54106 9.61959L1.27191 11.1653ZM1.01778 8.14221C0.225175 9.04318 0.36732 10.4226 1.27191 11.1653L2.54106 9.61959C2.52173 9.60372 2.50406 9.57558 2.50055 9.53613C2.49713 9.49765 2.50911 9.47495 2.51941 9.46324L1.01778 8.14221ZM5.13306 9.18309C4.76 8.78412 4.18894 8.21906 3.5653 7.86975C3.25213 7.69434 2.84133 7.52445 2.38081 7.5217C1.87057 7.51865 1.38659 7.72299 1.01778 8.14221L2.51941 9.46324C2.52177 9.46056 2.50353 9.48113 2.46192 9.49972C2.42048 9.51823 2.385 9.52176 2.36888 9.52166C2.35449 9.52158 2.42166 9.52154 2.58795 9.61468C2.92326 9.80249 3.31712 10.1693 3.6722 10.5491L5.13306 9.18309ZM5.15947 9.21142C5.15063 9.20191 5.14183 9.19247 5.13306 9.18309L3.6722 10.5491C3.6797 10.5571 3.68724 10.5652 3.69482 10.5733L5.15947 9.21142ZM3.77532 9.75602L3.77537 9.76525L5.77534 9.7532L5.77528 9.74398L3.77532 9.75602ZM3.7753 2.25V9.75H5.7753V2.25H3.7753ZM3.69482 10.5733C4.40798 11.3403 5.77535 10.8889 5.77535 9.75922H3.77535C3.77535 8.98963 4.69149 8.70813 5.15947 9.21142L3.69482 10.5733ZM9.2753 8.5C10.1037 8.5 10.7753 7.82843 10.7753 7H8.7753C8.7753 6.72386 8.99916 6.5 9.2753 6.5V8.5ZM6.7753 8.5C7.60373 8.5 8.2753 7.82843 8.2753 7H6.2753C6.2753 6.72386 6.49916 6.5 6.7753 6.5V8.5ZM10.2753 6.99997C10.2753 7.82841 10.9469 8.5 11.7753 8.5V6.5C12.0515 6.5 12.2753 6.72384 12.2753 6.99997H10.2753ZM7.7753 7C7.7753 7.82843 8.44687 8.5 9.2753 8.5V6.5C9.55144 6.5 9.7753 6.72386 9.7753 7H7.7753ZM12.0254 8.5C12.7157 8.5 13.2754 7.94036 13.2754 7.25H11.2754C11.2754 6.83579 11.6111 6.5 12.0254 6.5V8.5ZM5.2753 7C5.2753 7.82843 5.94687 8.5 6.7753 8.5V6.5C7.05144 6.5 7.2753 6.72386 7.2753 7H5.2753Z",fill:"black",fillOpacity:"0.8",mask:"url(#path-1-outside-1_15_11117)"})]})}let er=(0,i.Ng)(e=>{let{teams:t}=e;return{teams:t,unsortedTeamIds:(0,A._L)(e.user,e.roles,e.teams)}})((0,T.kp)(function(e){return(0,s.jsx)(_.tH,{boundaryKey:"OrgUpgradeMultiTeamModal",team:l.e.BILLING_EXPERIENCE,fallback:(0,s.jsx)(w.K,{}),children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(P.N,{hiddenTitle:(0,x.tx)("org_upgrade.multi_team.bring_your_teams_together_with_the_figma_organization_plan"),estimatedWidth:500,estimatedHeight:500}),children:(0,s.jsx)(ea,{...e})})})},"Multi-Team Org Upgrade Modal"))},388990:(e,t,a)=>{a.r(t),a.d(t,{OrgUpgradeSingleTeamModal:()=>z,PlanWithFigjamPriceView:()=>U});var s=a(486106),r=a(7378),i=a(514228),l=a(165054),n=a(536384),d=a.n(n),o=a(566371),c=a(361869),m=a(17223),_=a(751457),u=a(637027),p=a(347284),h=a(714743),g=a(303541),x=a(307841),f=a(929976),v=a(156213),y=a(370443),j=a(831799),S=a(84777),T=a(513035),b=a(332483),N=a(3140),C=a(224),w=a(191312),E=a(514043),A=a(465071),I=a(598018),k=a(712921),P=a(652992),M=a(809096),R=a(918700),O=a(739964),D=a(859355),B=a(871993);function L(e){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.B,{svg:e.isArrow?'<svg xmlns="http://www.w3.org/2000/svg" width="9" height="7" viewBox="0 0 9 7"><path fill="#000" fill-opacity=".8" fill-rule="nonzero" stroke="none" d="m3.586 7 .602-.602L1.71 3.93h6.414v-.86H1.711L4.187.594 3.587 0l-3.5 3.5 3.5 3.5z"/></svg>':B.A,className:D.oE}),(0,s.jsx)("p",{children:e.text})]})}function V(e){return(0,s.jsx)("div",{className:D.Vf,children:(0,s.jsxs)("div",{className:D._R,children:[e.features.map((e,t)=>(0,s.jsx)("div",{className:D.$P,children:(0,s.jsx)(L,{text:e.text,isArrow:e.isArrow})},t)),e.plan===w.Ag.ORG&&(0,s.jsx)("div",{className:D.W2,children:(0,s.jsx)(u.Us,{href:"https://www.figma.com/pricing/#cid-57mfNh6t0Xo7z8Q95Ww9ZV",target:"_blank",trusted:!0,children:(0,g.tx)("org_upgrade.single_team.see_all_features")})}),e.plan===w.Ag.ORG&&(0,s.jsx)(u.vd,{onClick:e.onUpgrade,className:D.E8,trackingProperties:{trackingDescriptor:y.c.UPGRADE_TO_ORGANIZATION,upsellSource:e.upsellSource},children:(0,g.tx)("org_upgrade.single_team.upgrade_to_an_organization")})]})})}function U(e){return(0,s.jsxs)("div",{className:D.Ms,style:{padding:e.padding},"data-testid":e.dataTestId,children:[(0,s.jsx)("h2",{className:D.QB,children:e.name}),(0,s.jsx)("p",{className:D.VA,children:e.subtitle}),(0,s.jsxs)("div",{className:D.y3,children:[(0,s.jsxs)("p",{className:D.Q$,children:[(0,g.tx)("plan_details.figma"),(0,s.jsx)("div",{className:D.gt,children:(0,s.jsx)(c.G,{})})]}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:D.G8,children:e.prices[T.ud.DESIGN]})})]}),e.prices[T.ud.DEV_MODE]&&(0,s.jsxs)("div",{className:D.y3,children:[(0,s.jsx)("p",{children:(0,g.tx)("plan_details.dev_mode_only")}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:D.G8,children:e.prices[T.ud.DEV_MODE]})})]}),(0,s.jsxs)("div",{className:D.y3,children:[(0,s.jsx)("p",{children:(0,g.tx)("plan_details.fig_jam")}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:D.G8,children:e.prices[T.ud.FIGJAM]})})]})]})}function $(e){let t=(0,A.XP)({reportErrorsToTeam:l.e.BILLING_EXPERIENCE}),a={planParentId:t.key.parentId||"",planType:t.key.type},r=(0,S.vK)(a),[n]=(0,o.mI)(r),c=(0,S.vu)(n);if(null===c.data)throw Error("Contract prices currency was null");let _=c.data,u=b.Oq.exclude([T.ud.DEV_MODE]),h=u.dict(e=>({currency:_,billableProductKey:e,billableProductVariantKey:null,tier:k.Ju.PRO,renewalTerm:k.IX.YEAR,unit:k.IX.MONTH})),x=(0,S.ic)(h,a,S.Fq.UPSELL_MODALS_CONTRACT),y=(0,S.jv)({billableProductKeys:b.Oq,baseQuery:{currency:_,tier:k.Ju.ORG,renewalTerm:k.IX.YEAR,unit:k.IX.MONTH}}),[j,N]=(0,o.mI)(x,y),C=(0,S.vu)(j);if(null===C.data)throw Error("Contract price data was null");let I=(0,S.vu)(N);if(null===I.data)throw Error("Sticker price data was null");let P=C.data,M=I.data,O=(0,i.wA)(),B=()=>{O(v.Ce())},L=new E.vr(_);return(0,s.jsx)(R.ey,{className:D.yl,hide:B,size:586,useModalViewScroll:!1,children:(0,s.jsxs)(p.P,{className:D.jG,children:[(0,s.jsxs)("div",{className:D.o,children:[(0,s.jsx)("div",{className:D.Dz,children:(0,s.jsx)("div",{className:D.hx,children:(0,g.tx)("org_upgrade.single_team.get_more_out_of_figma_as_you_grow")})}),(0,s.jsx)(m.Jn,{className:D.b,onClick:B,innerText:"close"})]}),(0,s.jsxs)("div",{className:d()(D.yH,D.Mm),children:[(0,s.jsx)(U,{dataTestId:"pro-prices",name:(0,g.t)("org_upgrade.single_team.professional_plan"),subtitle:(0,g.t)("org_upgrade.single_team.price_when_billed_annually"),prices:u.dict(e=>`${L.formatMoney(P[e].amount)}`),padding:"16px 31px 16px 36px"}),(0,s.jsx)(U,{dataTestId:"org-prices",name:(0,g.t)("org_upgrade.single_team.organization_plan"),subtitle:(0,g.t)("org_upgrade.single_team.annual_billing_only"),prices:b.Oq.dict(e=>`${L.formatMoney(M[e]?.amount??0)}`),padding:"16px 32px 16px 33px"})]}),(0,s.jsx)("div",{className:D.Jh}),(0,s.jsxs)("div",{className:D.yH,children:[(0,s.jsx)(V,{plan:w.Ag.PRO,features:[{text:(0,g.t)("org_upgrade.single_team.unlimited_design_files_and_projects_in_one_team")},{text:(0,g.t)("org_upgrade.single_team.design_library_within_one_team")},{text:(0,g.t)("org_upgrade.single_team.audio_conversations_in_files")}]}),(0,s.jsx)(V,{plan:w.Ag.ORG,features:[{text:(0,g.t)("org_upgrade.single_team.everything_in_professional_plus"),isArrow:!0},{text:(0,g.t)("org_upgrade.single_team.unlimited_teams_and_unlimited_projects")},{text:(0,g.t)("org_upgrade.single_team.cross_team_design_libraries_and_fonts")},{text:(0,g.t)("org_upgrade.single_team.control_file_sharing_inside_and_outside_of_your_organization")},{text:(0,g.t)("org_upgrade.single_team.single_sign_on_sso_integration")},{text:(0,g.t)("org_upgrade.single_team.private_plugins_and_plugin_management")},{text:(0,g.t)("org_upgrade.single_team.full_content_ownership")}],onUpgrade:()=>{B(),O(f.sf({view:"orgSelfServe",upsellSource:e.upsellSource}))},upsellSource:e.upsellSource})]})]})})}let z=(0,j.kp)(function(e){let t=(0,x.sx)(),a=(0,I.ol)();return(0,s.jsx)(_.tH,{boundaryKey:"OrgUpgradeSingleTeamModal",team:l.e.BILLING_EXPERIENCE,fallback:(0,s.jsx)(N.K,{}),children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(M.N,{hiddenTitle:(0,g.tx)("org_upgrade.single_team.get_more_out_of_figma_as_you_grow"),estimatedWidth:586,estimatedHeight:586}),children:t?(0,s.jsx)(O.bP,{team:a,resource:P.Bi.ORG,currentPlan:C.F.Plan.PRO,upsellPlan:C.F.Plan.ORG,editorType:w._Y.DESIGN,upsellSource:e.upsellSource}):(0,s.jsx)($,{...e})})})},"Single-Team Org Upgrade Modal")},657598:(e,t,a)=>{a.r(t),a.d(t,{ResubscribeModal:()=>T});var s=a(486106),r=a(7378),i=a(514228),l=a(521428),n=a(437088),d=a(38914),o=a(272243);a(82433);var c=a(207101),m=a(303541),_=a(692987),u=a(156213),p=a(920435),h=a(370443),g=a(831799),x=a(795870),f=a(386952),v=a(514043),y=a(193867);let j=(0,g.tf)(l.$n),S=(0,g.tf)(l.$n);function T(e){let{upsellSource:t,paymentMethod:a,nextBillDate:l,amount:T,team:b,monthlySub:N=null,annualSub:C=null,currency:w,canSeeBillingAddressExp:E}=e,A=(0,i.wA)(),I=(0,f._6)(),k=(0,i.d4)(e=>(0,y.Np)(e,I)),[P,M]=(0,r.useState)(!1),{saveWithPaymentMethod:R,createPaymentElement:O,unmountPaymentElement:D}=(0,x.lo)({setupIntentParams:{redirect_url:k,subtotal_estimate:T,success_message:(0,m.t)("resubscribe_modal.success_message"),currency:w,teamId:b.id},paymentFlowSource:x.wn.PRO_REACTIVATE,customerInfo:{teamId:b.id,orgId:void 0},defaultCountry:(0,v.ub)(),currency:w,canSeeBillingAddressExp:E,isCheckout:!1});(0,c.h)(()=>(O({ready:()=>{M(!0)}}),()=>{D()}));let B=n.wQ({defaultOpen:!0}),L=a?.object.last4,V=(0,_.up)(T,w??"usd",{showCents:!0});return(0,s.jsxs)(g.fu,{name:"Resubscribe Modal",properties:{upsellSource:t},children:[(0,s.jsx)(d.bL,{manager:B,width:"fit-content",children:(0,s.jsxs)(o.vo,{children:[(0,s.jsx)(o.Y9,{children:(0,s.jsx)(o.hE,{children:(0,m.tx)("resubscribe_modal.title")})}),(0,s.jsx)(o.nB,{className:"x1dc814f",children:(0,s.jsx)("p",{children:(0,m.tx)("resubscribe_modal.body",{last4:L,formattedAmount:V,nextBillDate:l})})}),(0,s.jsx)(o.wi,{children:(0,s.jsxs)(o.jk,{children:[(0,s.jsx)(S,{variant:"secondary",disabled:!P,onClick:()=>{A((0,u.Ce)()),(0,p.C8)({team:b,dispatch:A,cancelling:!0,monthlySub:N,annualSub:C,currency:w,canSeeBillingAddressExp:E,estimatedChargeCents:T})},trackingProperties:{trackingDescriptor:h.c.UPDATE_PAYMENT},children:(0,m.tx)("resubscribe_modal.different_payment_method")}),(0,s.jsx)(j,{variant:"primary",disabled:!P,onClick:e=>{let t=async()=>{e.preventDefault(),await R(a),M(!0)};M(!1),t()},trackingProperties:{trackingDescriptor:h.c.REACTIVATE_YOUR_PROFESSIONAL_PLAN},children:(0,m.tx)("resubscribe_modal.reactivate_plan")})]})})]})}),(0,s.jsx)("div",{id:x.Ix,className:"x1s85apg"})]})}},977400:(e,t,a)=>{a.r(t),a.d(t,{UniversalUpgradeSequence:()=>z});var s=a(486106),r=a(7378),i=a(514228),l=a(876459),n=a(207101),d=a(17223),o=a(637027),c=a(303541),m=a(894125),_=a(976345),u=a(929976),p=a(156213),h=a(482142),g=a(831799),x=a(212807),f=a(386952),v=a(514043),y=a(345997),j=a(831101),S=a(707808),T=a(918700),b=a(915765),N=a(910117),C=a(393403),w=a(408237),E=a(858013),A=a(350402),I=a(98702),k=a(240735),P=a(272488),M=a(314264),R=a(372672),O=a(338617),D=a(66216),B=a(62130);let L=(0,A.nF)((e,{teamName:t,selectedView:a,currency:s,onSuccess:r,onError:i,onBillingCompleteRedirectInfo:l})=>{let n;N.Ay.post("/api/teams/create",{team_name:t}).then(({data:t})=>(n="team"in t.meta?t.meta.team:t.meta,e.dispatch(k.bE({team:n})),(0,M._J)("Team Created",n.id,e.getState()),D.G.getTeam({teamId:n.id}))).then(({data:t})=>{for(let a of t.meta)e.dispatch(I.bE({role:a}));r(),e.dispatch(h.WX({teamId:n.id,selectedView:a,newTeam:!0,currency:s,...l?{onBillingCompleteRedirectInfo:l}:{}}))}).catch(()=>{i()})});function V(e){let t=(0,i.wA)(),a=(0,R.TA)(),l=(0,i.d4)(O.P),n=(0,i.d4)(e=>e.roles.byTeamId),[d,m]=r.useState(!1),[_,u]=r.useState(!1),[h,g]=r.useState(""),x=(0,v.LN)(),f=()=>{t(p.Ce())},y=(0,b.s)(()=>{m(!0),h?t(L({teamName:h,selectedView:e.selectedView,currency:x,onSuccess:f,onError:()=>{m(!1),u(!0)},onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})):(m(!1),u(!0))});return a&&!(0,P.e5)({userId:a,teams:Object.values(l),rolesByTeamId:n})?(0,s.jsxs)("div",{"data-testid":"createTeamToUpgradeView",children:[(0,s.jsx)("p",{className:B.KV,children:(0,c.tx)("universal_upgrade_sequence.subtitle")}),_&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.I,{message:(0,c.t)("universal_upgrade_sequence.error"),marginTop:16}),(0,s.jsx)(o.Kz,{multiple:1})]}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsxs)("div",{className:B.$g,children:[(0,s.jsx)("div",{className:B.Eh,children:(0,s.jsx)(w.L,{dataTestId:"createTeamInput",placeholder:(0,c.t)("universal_upgrade_sequence.team_name.placeholder"),value:h||"",onChange:e=>{g(e.target.value)},required:!0,maxLength:255})}),(0,s.jsx)(o.vd,{dataTestId:"nextButton",className:B.DI,disabled:!h||d,onClick:y,children:d?(0,s.jsx)(E.kt,{className:B.u1}):(0,c.tx)("universal_upgrade_sequence.next")})]})]}):null}var U=a(641938),$=a(718426);function z(e){let[t,a]=r.useState("selectTeam"),b=(0,i.wA)(),N=(0,f._6)(),C=(0,x.FC)(),w=(0,i.d4)(e=>e.payment.promo),E=(0,i.d4)(e=>e.payment.billingPeriod),A=()=>{b(p.Lo())},I=()=>{b(p.Ce()),e.onDone?.()},k=t=>{"teamUpgrade"===N.view?b(u.sf({...N,teamFlowType:S.SC.UPGRADE_EXISTING_TEAM,teamId:t.id,paymentStep:(0,m.kR)(N.paymentStep,S.SC.UPGRADE_EXISTING_TEAM,N.billingPeriod||null,w,N.planType||S.Sc.UNDETERMINED,w?j.tn.CONFIRM_PAY:j.tn.CHOOSE_PLAN),billingPeriod:e.billingPeriod||E,entryPoint:e.entryPoint})):b(h.WX({teamId:t.id,selectedView:N,newTeam:!1,currency:(0,v.LN)(),billingPeriod:e.billingPeriod,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo,entryPoint:e.entryPoint,openInNewTab:e.openInNewTab})),I()},P=()=>{0===(0,y.PS)(C).length?(b(_.Dw({openInNewTab:!l.eD})),a("createTeam")):a("selectTeam")};return((0,n.h)(()=>{e.plan===U.I.PRO&&P()}),"selectTeam"===t)?(()=>{let t=(0,y.PS)(C);return(0,s.jsx)(g.fu,{name:"Upgrade Select Team Modal",children:(0,s.jsxs)(T.ey,{hide:A,size:436,children:[(0,s.jsx)("h1",{"data-testid":"modalTitle",className:B.GK,children:(0,c.tx)("universal_upgrade_sequence.title")}),(0,s.jsx)(d.Jn,{dataTestId:"closeButton",className:B.b,onClick:A,innerText:(0,c.t)("universal_upgrade_sequence.close_modal")}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsx)($.I,{eligibleTeams:t,selectTeam:k}),(0,s.jsx)(o.Kz,{multiple:2}),(0,s.jsx)(V,{selectedView:N,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})]})})})():(0,s.jsx)(s.Fragment,{})}},718426:(e,t,a)=>{a.d(t,{I:()=>u});var s=a(486106),r=a(7378),i=a(637027),l=a(347284),n=a(303541),d=a(370443),o=a(831799),c=a(345997),m=a(805373),_=a(62130);function u({customUpgradeText:e,eligibleTeams:t,selectTeam:a,numDesignFilesPerTeam:u,showEditorCount:p=!0}){let[h,g]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!1);r.useEffect(()=>{g(t.length>=5)},[t]);let v=`${_.jG}`;h&&(v+=` ${_.o8}`),x&&(v+=` ${_.kz}`);let y=t[t.length-1],j=u&&u.length===t.length;return(0,s.jsx)(l.P,{onScroll:(e,a)=>{let s=t.length>=5,r=s&&0!==e,i=s&&e+a.trackHeight!==a.scrollHeight;i!==h&&g(i),r!==x&&f(r)},className:v,scrollingDisabled:!1,children:(0,s.jsx)("div",{className:_.nW,children:t.map((t,r)=>(0,s.jsxs)(o.jm,{className:t===y?_.wv:_.cr,onClick:()=>a(t),trackingProperties:{teamId:t.id,trackingDescriptor:d.c.UPGRADE},innerText:"Upgrade",children:[(0,s.jsxs)("div",{className:"org_self_serve--teamInfo--7YTKY",children:[(0,s.jsx)(m.Ro,{className:"org_self_serve--teamIcon--DqZPm",entity:t,size:40,shape:"SQUARE"}),(0,s.jsxs)("div",{className:"org_self_serve--teamText--Uh2zO",children:[(0,s.jsx)("p",{className:"org_self_serve--teamName--a1LGY text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",children:t.name}),(0,s.jsxs)("p",{className:"org_self_serve--teamEditors--2hBWh text--fontPos11--2LvXf text--_fontBase--QdLsd",children:[!j&&p&&(0,n.tx)("universal_upgrade.select_team.editor_count.seat_rename",{editors:t.editors}),j&&u&&(0,n.tx)("universal_upgrade.select_team.files_per_team_figma_files_used",{numFilesUsed:u[r],numFreeFilesAllowed:c.WW})]})]})]}),(0,s.jsx)(i.nR,{className:_.J1,dataTestId:"select_team.upgrade",children:e??(0,n.tx)("universal_upgrade.select_team.upgrade")})]},t.id))})})}},66718:(e,t,a)=>{a.r(t),a.d(t,{UpgradeContactSalesModal:()=>E});var s=a(486106),r=a(7378),i=a(514228),l=a(915765),n=a(416935),d=a(910117),o=a(17223),c=a(393403),m=a(637027),_=a(714743),u=a(303541),p=a(156213),h=a(831799),g=a(102752),x=a(318279),f=a(918700),v=a(734904);let y="upgrade_contact_sales_modal--closeButton--715WY";var j=a(364616),S=a(933949);let T=()=>[{name:(0,u.t)("contact_sales.topic.request_a_sales_demo_or_talk_to_sales"),value:"request_a_sales_demo_or_talk_to_sales"},{name:(0,u.t)("contact_sales.topic.billing_and_invoicing"),value:"billing_and_invoicing"},{name:(0,u.t)("contact_sales.topic.technical_and_product_support"),value:"technical_and_product_support"},{name:(0,u.t)("contact_sales.topic.educators_and_students"),value:"educators_and_students"}],b=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"",disabled:!0,children:(0,u.t)("contact_sales.which_topic_best_fits_your_needs")}),T().map(e=>(0,s.jsx)("option",{value:e.value,"data-testid":`select-option-${e.value}`,children:e.name},e.value))]}),N=()=>[{name:(0,u.t)("contact_sales.plan.starter"),value:"starter"},{name:(0,u.t)("contact_sales.plan.professional"),value:"professional"},{name:(0,u.t)("contact_sales.plan.organization"),value:"organization"},{name:(0,u.t)("contact_sales.plan.enterprise"),value:"enterprise"},{name:(0,u.t)("contact_sales.plan.figma_for_government"),value:"figma_for_government"},{name:(0,u.t)("contact_sales.plan.not_sure"),value:"not_sure"}],C=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("option",{value:"",disabled:!0,children:(0,u.t)("contact_sales.what_figma_plan_are_you_inquiring_about")}),N().map(e=>(0,s.jsx)("option",{value:e.value,"data-testid":`select-option-${e.value}`,children:e.name},e.value))]}),w=(0,g.Ju)(function({hideModal:e}){return(0,s.jsx)(h.fu,{name:"Upgrade Contact Sales Success Modal",children:(0,s.jsxs)(f.ey,{hide:e,size:480,children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--successModalWrapper--xA5Mp",children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--successModalTitle--Xgt1f upgrade_contact_sales_modal--modalTitle--7k87R text--fontPos13--xW8hS text--_fontBase--QdLsd",children:[(0,s.jsx)(_.B,{className:"upgrade_contact_sales_modal--successIcon---zT4I",svg:S.A}),(0,u.tx)("universal_upgrade.contact_sales.thank_you")]}),(0,s.jsx)(o.Jn,{className:y,onClick:e,innerText:"close"})]}),(0,s.jsx)("div",{className:"upgrade_contact_sales_modal--successModalText--f1aRe text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,u.tx)("universal_upgrade.contact_sales.sales_will_reach_out")})]})})},"ContactSalesSuccessModal");function E(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.user),[g,S]=(0,r.useState)({email:a?.email??"",name:a?.handle??"",overridePlaceholderText:e.overridePlaceholderText,freeText:"",result:void 0,companyName:void 0,companySize:"",jobTitle:"",topic:"",plan:"",product:"",phone:"",formErrors:{}}),T=()=>{t(p.Lo())},N=()=>{t((0,p.to)({type:w,data:{hideModal:()=>t(p.Ce())}}))},E=()=>({email:g.email,name:g.name,company_name:g.companyName,topic:g.topic,plan:g.plan,phone:g.phone,message:g.freeText,source:e.source,form_name:"topic_v1"}),A=(0,l.s)(()=>{let e={},t=(0,u.t)("universal_upgrade.this_field_is_required");if(g.email?(0,n.xf)(g.email)||(e.email=(0,u.t)("universal_upgrade.please_provide_a_valid_email_address")):e.email=t,g.name||(e.name=t),g.companyName||(e.companyName=t),g.topic||(e.topic=t),g.plan||(e.plan=t),S(t=>({...t,formErrors:e,result:void 0})),0===Object.keys(e).length){let e=E();d.Ay.post("/api/form_post/org-lead-gen",e).then(()=>{S(e=>({...e,result:"success"})),N()}).catch(()=>S(e=>({...e,result:"error"})))}}),I=e=>g.formErrors[e]?"upgrade_contact_sales_modal--error--8vAcf basic_form--labeledInputGroup--aeD6L":void 0,k=e=>{let t=g.formErrors[e];return t?(0,s.jsx)("div",{"data-testid":"form-error",className:"upgrade_contact_sales_modal--errorMessage--FfxPx text--fontPos11--2LvXf text--_fontBase--QdLsd",children:t}):null},P=(e,t,a=!1)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Lf,{htmlName:t,label:e,value:g[t]||"",onChange:e=>{let a={[t]:e.target.value};S(e=>({...e,...a}))},disabled:a,className:I(t)}),k(t)]}),M=(e,t,a)=>{let r=I(t)||v.Os;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:r,children:(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--select--sFfZ- address_form--selectRowFull--8DtEB",children:[(0,s.jsx)(m.VE,{name:t,placeholder:e,defaultValue:"","data-testid":`${t}-select`,onChange:e=>{let a={[t]:e.target.value};S(e=>({...e,...a}))},required:!0,children:a}),(0,s.jsx)(_.B,{className:v.nO,svg:j.A})]})}),k(t)]})};return(0,s.jsx)(h.fu,{name:"Upgrade Contact Sales Modal",children:(0,s.jsxs)(f.ey,{className:"upgrade_contact_sales_modal--contactSalesModal--ExFaV",hide:T,size:480,children:[(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--titleWrapper--mKMG2",children:[(0,s.jsx)("h1",{className:"upgrade_contact_sales_modal--modalTitle--7k87R text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,u.tx)("universal_upgrade.contact_sales_title")}),(0,s.jsx)(o.Jn,{className:y,onClick:T,innerText:"close"})]}),(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--modalBody--FTi91",children:["error"===g.result&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.I,{message:(0,u.t)("universal_upgrade.there_was_an_error_processing_your_information_please_try_again")}),(0,s.jsx)(m.Kz,{multiple:.5})]}),(0,s.jsxs)("fieldset",{children:[P((0,u.t)("universal_upgrade.email_address"),"email"),P((0,u.t)("universal_upgrade.full_name"),"name"),P((0,u.t)("universal_upgrade.company_name"),"companyName"),M((0,u.t)("contact_sales.which_topic_best_fits_your_needs"),"topic",b()),M((0,u.t)("contact_sales.what_figma_plan_are_you_inquiring_about"),"plan",C()),P((0,u.t)("contact_sales.phone_number_optional"),"phone")]}),(0,s.jsx)(m.Kz,{multiple:1}),(0,s.jsx)("p",{children:(0,u.tx)("universal_upgrade.how_can_we_help_optional")}),(0,s.jsx)(m.Kz,{multiple:1}),(0,s.jsx)(x.v,{className:"upgrade_contact_sales_modal--freeTextInput--fE033 text--fontPos13--xW8hS text--_fontBase--QdLsd",value:g.freeText,onChange:e=>S(t=>({...t,freeText:e.target.value})),placeholder:g.overridePlaceholderText??(0,u.t)("universal_upgrade.e_g_i_m_looking_to_set_up_a_demo_of_figma"),maxLength:500})]}),(0,s.jsxs)("div",{className:"upgrade_contact_sales_modal--modalFooter--WNk7P",children:[(0,s.jsx)(m.tM,{onClick:T,children:(0,u.tx)("general.cancel")}),(0,s.jsx)(m.vd,{onClick:A,children:(0,u.tx)("universal_upgrade.submit")})]})]})})}},708832:(e,t,a)=>{a.r(t),a.d(t,{OrgHeader:()=>eO,OrgSelfServeBillingRemodelPage:()=>eR,OrgSelfServeBillingRemodelPageInner:()=>eM});var s=a(486106),r=a(7378),i=a(514228),l=a(465776),n=a(165054),d=a(449184),o=a(416935),c=a(612521),m=a(207101),_=a(566371),u=a(11),p=a(910117),h=a(751457),g=a(490799),x=a(714743),f=a(589278),v=a(573154),y=a(160095),j=a(303541),S=a(231762),T=a(941192),b=a(513035),N=a(361035);function C({eligibleTeamsByTeamId:e,selectedTeamIds:t,eligibleUsersByUserId:a,selectedUserSeatTypes:s,currentUpgradingUserId:r}){if(0===t.size&&r)return{[r]:s[r]};let i={},l={};return t.forEach(t=>{e[t].eligibleUsers.forEach(e=>{if(!i[e]){if(s[e])i[e]=s[e];else{let s=a[e];l[e]||(l[e]=[]),l[e].push(s.recommendedSeatTypeByTeamId[t])}}})}),{...i,...Object.keys(l).reduce((e,t)=>(e[t]=(0,N.Up)(l[t]),e),{})}}var w=a(692987),E=a(441925),A=a(109538),I=a(380801),k=a(793139),P=a(173602),M=a(975542),R=a(831799),O=a(712921),D=a(736948),B=a(831101),L=a(707808),V=a(763339);let U=(0,R.tf)(function(e){return(0,s.jsx)("div",{className:V.Nd,onClick:e.onClick,children:(0,j.tx)("org_self_serve.headers.cancel")})});function $(e){if(e.currentStep===D.X1.Confirmation)return null;let t=[],a=null;if(e.newTeamProps){let s={step:D.X1.ChoosePlan,name:(0,j.t)("org_self_serve.headers.choose_plan")},r={step:D.X1.CreateTeam,name:(0,j.t)("org_self_serve.headers.create_team")};switch(e.newTeamProps?.teamFlowType){case L.SC.CREATE:t.push({step:D.X1.PseudoCreateTeam,name:(0,j.t)("org_self_serve.headers.create_team")}),t.push({step:D.X1.AddCollaborators,name:(0,j.t)("org_self_serve.headers.add_team_members")}),t.push(s);break;case L.SC.CREATE_AND_UPGRADE:t.push(s),t.push(r),a=D.X1.CreateTeam;break;case L.SC.UPGRADE_EXISTING_TEAM:t.push(s)}}e.canSeeTeamAndSeatSelectionSteps&&(t.push({step:D.X1.TeamSelect,name:(0,j.t)("org_self_serve.headers.teams_to_upgrade")}),e.isCampfireCart&&t.push({step:D.X1.SeatSelect,name:(0,j.t)("checkout.choose_seats")}),a=a??D.X1.TeamSelect),e.isCampfireCart?a=a??D.X1.Payment:(t.push({step:D.X1.Details,name:(0,j.t)("org_self_serve.headers.organization_details")}),a=a??D.X1.Details),t.push({step:D.X1.Payment,name:(0,j.t)("org_self_serve.headers.payment")}),t.push({step:D.X1.Review,name:(0,j.t)("org_self_serve.headers.review")}),t[t.findIndex(e=>e.step===a)].step=D.X1.Initial;let r=0;for(let a=0;a<t.length;a++)if(t[a].step===e.currentStep){r=a;break}return(0,s.jsxs)("div",{className:V.li,children:[(0,s.jsx)(U,{onClick:e.onFileBrowserClick}),(0,s.jsx)("div",{className:V.Uu,"data-testid":"stepBreadcrumbs",children:t.map((t,a)=>(0,s.jsx)(M.On,{selected:e.currentStep===t.step,number:a+1,text:t.name,onClick:()=>{d.az.trackDefinedEvent("monetization_upgrades.checkout_breadcrumb_navigation",{fromStep:e.currentStep,toStep:t.step,tier:O.Ju.ORG,isCampfireCart:!!e.isCampfireCart});let a=function(e){switch(e){case D.X1.ChoosePlan:return B.tn.PLAN_COMPARISON;case D.X1.AddCollaborators:return B.tn.ADD_COLLABORATORS;case D.X1.PseudoCreateTeam:return B.tn.CREATE_TEAM;default:return null}}(t.step);a&&e.onSelectTeamUpgradeStep?e.onSelectTeamUpgradeStep(a):e.setStep(t.step)},canClick:a<r,lightText:!0},a+1))})]})}var z=a(907085),F=a(282622),G=a(580036),H=a(74041),X=a(279252),W=a(300137),J=a(307841),Y=a(16237),K=a(929976),Z=a(156213),q=a(482142),Q=a(985254),ee=a(272488),et=a(370443),ea=a(84777),es=a(795870),er=a(314264),ei=a(332483),el=a(3140),en=a(394825),ed=a(298277),eo=a(191312),ec=a(514043),em=a(951233),e_=a(351260),eu=a(148137),ep=a(557142),eh=a(696396),eg=a(617654),ex=a(57562),ef=a(861286),ev=a(549791),ey=a(125190),ej=a(637027),eS=a(590952),eT=a(249555);function eb({teams:e,selectedTeamIds:t,onToggle:a,newTeamName:r}){return(0,s.jsx)("div",{"data-testid":"org-select-teams-step",children:(0,s.jsxs)("div",{className:V.kH,children:[r&&(0,s.jsx)(eN,{team:{id:"new-team",name:r,numMembers:1},isSelected:!0,onToggle:a},"new-team"),e.map(e=>(0,s.jsx)(eN,{team:e,isSelected:t.has(e.id),onToggle:a},e.id))]})})}function eN({team:e,isSelected:t,onToggle:a}){return(0,s.jsxs)("div",{"data-testid":`select_team--${e.id}`,children:[(0,s.jsx)(ev.F,{className:eT.Q,checked:t,onChange:()=>a(e.id),id:`select-team-${e.id}`,disabled:"new-team"===e.id,"aria-disabled":"new-team"===e.id}),(0,s.jsxs)("label",{htmlFor:`select-team-${e.id}`,className:V.K6,style:T.sx.if(t,T.sx.colorBorderSelected.colorBgSelectedTertiary,T.sx.colorBg.add({borderColor:"var(--color-bg)"})).$,children:[(0,s.jsx)(eS.nl,{team:e}),(0,s.jsxs)("span",{className:f.s.maxWFull.$,children:[(0,s.jsx)("span",{className:f.s.block.maxWFull.font14.fpl__textBodyLargeLineHeight.colorText.truncate.$,children:e.name}),(0,s.jsx)("span",{className:f.s.block.font11.colorTextSecondary.ellipsis.$,children:(0,j.tx)("checkout.org_select_teams_member_count",{count:e.numMembers})})]}),t&&(0,s.jsx)("div",{className:V.ER,children:(0,s.jsx)(ey.g,{})})]})]},e.id)}function eC({orgDetails:e,onChangeFormInput:t}){return(0,s.jsx)(z.x,{title:(0,j.t)("checkout.organization_details"),children:(0,s.jsxs)("div",{className:f.s.font13.$,children:[(0,s.jsx)(ej.Lf,{htmlName:"legal_org_name",label:(0,j.t)("org_self_serve.details_step.legal_company_name"),value:e.legalOrgName,onChange:t}),(0,s.jsx)(ej.Lf,{htmlName:"org_name",label:(0,j.t)("org_self_serve.details_step.company_display_name"),placeholder:(0,j.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"),value:e.orgName,onChange:t})]})})}var ew=a(142901),eE=a(705272),eA=a(45116);let eI=({selectedTeamIds:e,selectedUserSeatTypes:t,additionalSeatsCount:a,onChangeSeat:s,onChangeAdditionalSeats:i})=>{let l=(0,eE.wh)(e,t,a),[n,d]=(0,r.useState)(l),o=(0,r.useCallback)(e=>{try{d(t=>(function(e,t){let a=(0,eE.n5)(e,t);switch(a.type){case"success":return a.value;case"validation":throw Error("failed validation");case"error":throw Error("sent error")}})(t,e))}catch(e){}},[]);return{changeUserSeatType:(0,r.useCallback)((e,t)=>{o({type:"changeSeatType",userId:e,seatType:t}),s(e,t)},[s,o]),setAdditionalSeats:(0,r.useCallback)(e=>{o({type:"setAdditionalSeats",additionalSeatCounts:e}),i(e)},[i,o]),selectSeatsState:n}};function ek({users:e,selectedUserSeatTypes:t,selectedTeamIds:a,additionalSeatsCount:r,onChangeSeat:i,onChangeAdditionalSeats:l,currency:n}){let d=(0,ew.G)({currency:n,tier:O.Ju.ORG,renewalTerm:O.IX.YEAR,showCents:!1}),[o]=(0,_.mI)(d);if(null===o.data)throw Error("No seat types data");let c=o.data,{changeUserSeatType:m,selectSeatsState:u,setAdditionalSeats:p}=eI({selectedTeamIds:a,selectedUserSeatTypes:t,additionalSeatsCount:r,onChangeSeat:i,onChangeAdditionalSeats:l});return(0,s.jsx)("div",{"data-testid":"select-seats-step-org",children:(0,s.jsx)(eA.T,{users:e,seatTypes:c,changeUserSeatType:m,selectSeatsState:u,setAdditionalSeats:p,tier:O.Ju.ORG})})}var eP=a(388041);class eM extends r.Component{constructor(e){super(e),this.canSeeTeamAndSeatSelectionSteps=()=>Object.keys(this.state.eligibleTeamsByTeamId).length>0||this.state.loading||!!this.props.newTeamProps,this.effectiveStep=()=>this.props.step===D.X1.Initial||this.props.step===D.X1.ChoosePlan?this.props.newTeamProps?.teamFlowType===L.SC.CREATE_AND_UPGRADE?D.X1.CreateTeam:this.canSeeTeamAndSeatSelectionSteps()?D.X1.TeamSelect:D.X1.Payment:this.props.step,this.setStep=e=>{this.props.dispatch(K.sf({view:"orgSelfServe",step:e,orgMigrated:!1,newTeamProps:this.props.newTeamProps,upsellSource:this.props.upsellSource})),this.setState(e=>({payment:{...e.payment,card:null}}))},this.trackError=e=>{d.az.trackDefinedEvent("monetization_upgrades.checkout_payment_error",{message:e,paymentFlow:es.wn.ORG_UPGRADE,paymentMethodType:eu.lB.CARD,isCampfireCart:!0})},this.onSubmit=()=>{let e=this.effectiveStep();switch(e){case D.X1.CreateTeam:this.state.newTeamName?.trim()&&this.setStep(D.X1.TeamSelect);break;case D.X1.AddCollaborators:this.setStep(D.X1.Payment);break;case D.X1.PseudoCreateTeam:this.setStep(D.X1.TeamSelect);break;case D.X1.TeamSelect:let t=C({eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:this.state.selectedTeamIds,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes});this.setState({selectedUserSeatTypes:t}),this.setStep(D.X1.SeatSelect);break;case D.X1.SeatSelect:this.setStep(D.X1.Payment);break;case D.X1.Payment:this.onSubmitPaymentAndAddress();break;case D.X1.Review:this.onSubmitPurchaseOrder();break;case D.X1.Confirmation:break;default:(0,l.wc)(e)}},this.getNextButtonText=()=>{let e=this.effectiveStep();switch(e){case D.X1.CreateTeam:case D.X1.PseudoCreateTeam:case D.X1.AddCollaborators:return(0,j.t)("org_self_serve.create_team_step.next_select_team");case D.X1.TeamSelect:return(0,j.t)("checkout.org_self_serve.next_select_seats");case D.X1.SeatSelect:return(0,j.t)("org_self_serve.payment_step.next_payment");case D.X1.Payment:return(0,j.t)("org_self_serve.review_step.next_review");case D.X1.Review:case D.X1.Confirmation:return"";default:(0,l.wc)(e)}},this.getIsNextButtonDisabled=()=>{let e=this.effectiveStep();switch(e){case D.X1.CreateTeam:case D.X1.PseudoCreateTeam:return!this.state.newTeamName;case D.X1.TeamSelect:return this.state.loading;case D.X1.Payment:return this.state.apiPending||!this.state.orgDetails.legalOrgName;case D.X1.Review:case D.X1.Confirmation:case D.X1.AddCollaborators:case D.X1.SeatSelect:return!1;default:(0,l.wc)(e)}},this.getIsNextButtonLoading=()=>this.state.loading||this.state.apiPending,this.onTeamToggle=e=>{let t=!this.state.selectedTeamIds.has(e);d.az.trackDefinedEvent("monetization_upgrades.checkout_change_team_selection",{teamId:e,selectedTeam:t}),t?this.setState(t=>({selectedTeamIds:t.selectedTeamIds.add(e)})):this.setState(t=>(t.selectedTeamIds.delete(e),{selectedTeamIds:t.selectedTeamIds}))},this.onCardReady=e=>{let t={...this.state.payment,card:e};this.setState({payment:t})},this.onAddressChange=e=>{let t={...this.state.payment,address:e};this.setState({payment:t})},this.onShippingAddressChange=e=>{this.setState({shippingAddress:e})},this.onNameOnPaymentMethodChange=e=>{this.setState({nameOnPaymentMethod:e.trim()})},this.onClearToken=()=>{let e={...this.state.payment,token:null};this.setState({payment:e})},this.onVatIdChange=e=>{this.setState({vatId:e})},this.onRegionalVatIdChange=e=>{this.setState({regionalVatId:e})},this.onVatValidationFail=e=>{this.trackError(e),this.setState({apiPending:!1,paymentError:e})},this.onChangeNewTeamName=e=>{this.setState({newTeamName:e.trim()})},this.onChangeOrgDetails=e=>{let t=e.target.name,a=e.target.value;if(!t){e.preventDefault(),console.error("HTMLInputElement is missing name attribute:",e.target);return}let s=this.state.orgDetails;switch(t){case"actor_name":s.actorName=a.trim();break;case"legal_org_name":s.legalOrgName=a.trim();break;case"org_name":s.orgName=a.trim()}this.setState({orgDetails:s})},this.contactSales=()=>{this.props.dispatch((0,Z.to)({type:A.lk,data:{source:I.B.ORG_SELF_SERVE_UPGRADE_MODAL}}))},this.onFileBrowserClick=()=>{this.props.newTeamProps&&(0,en.Al)(this.props.user.id),c.Ay.redirect("/files/recent")},this.updateAdditionalEmptySeats=e=>{this.setState({additionalSeatCounts:e})},this.renderPurchaseSummary=()=>{let e=this.effectiveStep()===D.X1.TeamSelect?null:(0,N.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts);return(0,s.jsx)(G.z,{billingInterval:B.NW.YEAR,buttonText:this.getNextButtonText(),canEnforcePaidSeatMinimum:this.effectiveStep()===D.X1.SeatSelect,countByBillableProductKey:e,currency:this.state.currency,footer:(0,s.jsxs)("div",{className:V.i9,children:[(0,s.jsx)(x.B,{svg:eP.A,className:V.$y}),(0,s.jsx)("p",{children:(0,j.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:(0,s.jsx)("span",{className:V.uD,onClick:this.contactSales,children:(0,j.tx)("org_self_serve.purchase_summary.contact_our_sales_team")})})})]}),isButtonDisabled:this.getIsNextButtonDisabled(),isLoading:this.getIsNextButtonLoading(),onClickNext:this.onSubmit,onSwitchCurrency:e=>{this.props.dispatch(q.MN({currency:e})),this.setState({currency:e})},tier:O.Ju.ORG,title:(0,j.t)("checkout.your_organization_plan"),trackingProperties:{selectedTeamIds:(0,E.gu)(Array.from(this.state.selectedTeamIds)),selectedUserSeatTypes:(0,E.Tj)(this.state.selectedUserSeatTypes),countBySeatType:(0,E.gS)(e)}})},this.state={loading:!0,eligibleTeamsByTeamId:{},selectedTeamIds:new Set,eligibleUsersByUserId:{},selectedUserSeatTypes:{},additionalSeatCounts:{collaborator:0,developer:0,expert:0},payment:{card:null,last4:null,address:(0,B.EB)((0,ec.aE)())},apiPending:!1,stripeCustomerId:null,taxRate:0,orgDetails:{actorName:"",actorEmail:this.props.user.email,legalOrgName:"",orgName:""},paymentError:null,currency:this.props.currency,shippingAddress:(0,B.EB)((0,ec.aE)()),nameOnPaymentMethod:"",vatId:null,regionalVatId:null,newTeamName:this.props.newTeamProps?.newTeamName||null,inviteEmails:this.props.newTeamProps?.inviteEmails||[]}}componentDidMount(){this.fetchTeamEligibleUpgrades()}fetchTeamEligibleUpgrades(){return eg.Eh.getEligibleUpgrades().catch(e=>{let t=e.data.message;return this.props.dispatch(K.sf({view:"recentsAndSharing"})),this.props.dispatch(v.s.error(t||(0,j.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again"))),this.setState({loading:!1}),Promise.reject()}).then(({data:e})=>{(0,E.R9)({eligibleTeamIds:e.meta.eligible_teams.map(e=>e.id),eligibleTeamUsers:e.meta.eligible_team_users,tier:O.Ju.ORG,step:this.effectiveStep()});let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r}=function(e,t,a){e.length;let s=e.reduce((e,t)=>(e[t.id]={...t,eligibleUsers:new Set},e),{}),r=new Set(Object.keys(s)),i={};t.forEach(e=>{let t=e.user,a=t.id;i[a]||(i[a]={id:t.id,email:t.email,handle:t.handle,img_url:t.img_url,recommendedSeatTypeByTeamId:{},teamIds:[]}),i[a].recommendedSeatTypeByTeamId[e.team_id]=e.recommended_seat_type?.key??b.Gu.VIEW,i[a].teamIds.push(e.team_id),s[e.team_id]&&s[e.team_id].eligibleUsers.add(a)});let l=C({eligibleTeamsByTeamId:s,selectedTeamIds:r,eligibleUsersByUserId:i,selectedUserSeatTypes:{},currentUpgradingUserId:void 0});return{eligibleTeamsByTeamId:s,selectedTeamIds:r,eligibleUsersByUserId:i,selectedUserSeatTypes:l}}(e.meta.eligible_teams,e.meta.eligible_team_users);this.setState({loading:!1,eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:s,selectedUserSeatTypes:r})})}componentDidUpdate(e,t){(0,o.zN)(e.user.email)!==(0,o.zN)(this.props.user.email)&&c.Ay.redirect("/purchase-organization")}getSubtotal(){let e=(0,N.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||ei.N_.dict(e=>0);return(0,w.Vh)(e,(0,N.s$)(this.props.productPriceBySeatType))}getTaxTotal(){let e=(0,N.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||ei.N_.dict(e=>0);return(0,w.kV)(e,(0,N.s$)(this.props.productPriceBySeatType),this.state.taxRate)}getTotal(){let e=(0,N.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||ei.N_.dict(e=>0);return(0,w.N9)(e,(0,N.s$)(this.props.productPriceBySeatType),this.state.taxRate)}getDisplayedCostBreakdown(){let e=this.getSubtotal(),t=this.getTaxTotal(),a=this.getTotal();return(0,N.GL)({subtotal:e,taxTotal:t,total:a})}async onSubmitPaymentAndAddress(){let e=this.state.payment.address,t=this.state.payment.card,a=this.state.vatId,s=this.state.regionalVatId;if(null===t){let e=(0,j.t)("org_self_serve.payment_step.sorry_please_wait");this.trackError(e),this.setState({paymentError:e});return}if(this.setState({apiPending:!0}),a&&!await (0,ex.V)(a,e.country,()=>{},this.onVatValidationFail))return;if(this.props.canSeeBillingAddressExp&&!this.state.nameOnPaymentMethod){let e=(0,j.t)("org_self_serve.payment_step.name_on_payment_method_is_required");this.trackError(e),this.setState({apiPending:!1,paymentError:e});return}if(s&&!await (0,ex.V)(s,e.country,()=>{},this.onVatValidationFail,e.region))return;let r=this.props.canSeeBillingAddressExp?{name:this.state.nameOnPaymentMethod,address_line1:e.line1,address_line2:e.line2,address_country:e.country,address_city:e.city,address_state:e.region,address_zip:e.postal_code}:void 0;(0,eu.Ey)(t,r).then(t=>{if(!t.error&&t.token)return(0,eu.To)(t.token.id,this.getSubtotal(),this.state.currency).then(t=>this.props.canSeeBillingAddressExp?p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,billing_address:e,shipping_address:(0,B.$V)(this.state.shippingAddress)?null:this.state.shippingAddress,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null}):p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,address:e,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null})).catch(e=>{let t=e.data?.message||e.message;return this.trackError(t),this.setState({apiPending:!1,paymentError:t}),Promise.reject()}).then(({data:e})=>{this.setState(a=>({payment:{...a.payment,last4:t.token?.card?.last4||null},stripeCustomerId:e.meta.stripe_customer_id,taxRate:e.meta.tax_percent,apiPending:!1}),()=>this.setStep(D.X1.Review))});{let e=t.error?.message||(0,j.t)("org_self_serve.payment_step.there_was_an_error_processing_your_payment_please_try_again");this.trackError(e),this.setState({apiPending:!1,paymentError:e})}})}onSubmitPurchaseOrder(){this.props.dispatch(Q.b({completed_org_cart_flow:!0}));let e=(0,N.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts),t=this.getDisplayedCostBreakdown(),a=(0,N.vm)(this.props.productPriceBySeatType),s={legal_org_name:this.state.orgDetails.legalOrgName,org_name:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,team_ids:Array.from(this.state.selectedTeamIds),requested_seats:e,selected_user_seat_types:(0,N.VB)(this.state.selectedUserSeatTypes),stripe_customer_id:this.state.stripeCustomerId,selected_currency:this.state.currency,vat_gst_id:this.state.vatId||null,regional_vat_gst_id:this.state.regionalVatId||null,displayed_cost_breakdown:t,displayed_price_keys:a};this.state.newTeamName&&(s.new_team_options={team_name:this.state.newTeamName,add_to_org:!0}),this.setState({apiPending:!0}),p.Ay.post("/api/orgs",s).catch(s=>(this.props.dispatch(v.s.error((0,S.J)(s,s.data?.message||(0,j.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again")))),(0,u.$D)(n.e.BILLING_EXPERIENCE,Error(`[Billing] Org checkout API failed: ${s.data?.message}`),{extra:{eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes,selectedTeamIds:Array.from(this.state.selectedTeamIds),userId:this.props.user.id,countBySeatType:e,displayedCostBreakdown:t,displayedPriceKeys:a}}),this.setState({apiPending:!1}),Promise.reject())).then(e=>{this.setState({apiPending:!1},()=>this.setStep(D.X1.Confirmation)),this.state.inviteEmails.length&&e.data.meta.new_team&&this.props.dispatch((0,e_.rq)({emails:this.state.inviteEmails,resourceType:eo.vt.TEAM,resourceIdOrKey:e.data.meta.new_team.id,level:ep.e6.EDITOR,teamId:e.data.meta.new_team.id})),this.state.newTeamName&&e.data.meta.new_team&&(0,en.Al)(this.props.user.id),(0,d.sx)("Self Serve Org Purchased (GTM)"),(0,er.uE)("Self Serve Org Purchased",{user:this.props.user},{org_name:s.org_name,upsellSource:this.props.upsellSource})})}render(){let e;let t=this.effectiveStep(),a=Object.values(this.state.eligibleTeamsByTeamId).map(e=>({id:e.id,name:e.name,img_url:e.img_url,numMembers:e.eligibleUsers.size}));if(t===D.X1.Review){let t=(0,N.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)||{};e=(0,s.jsx)(F.j,{billingAddress:this.state.payment.address,billingInterval:B.NW.YEAR,countByBillableProductKey:t,currency:this.state.currency,displayName:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,isRequestPending:this.state.apiPending,legalName:this.state.orgDetails.legalOrgName,navigateToEditDetails:()=>this.setStep(D.X1.Payment),onSubmit:this.onSubmit,onSubmitTrackingProperties:{selectedTeamIds:(0,E.gu)(Array.from(this.state.selectedTeamIds)),selectedUserSeatTypes:(0,E.Tj)(this.state.selectedUserSeatTypes),countBySeatType:(0,E.gS)((0,N.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts)),domain:(0,o.zN)(this.props.user.email),taxPercent:this.state.taxRate,subtotal:this.getSubtotal(),taxTotal:this.getTaxTotal(),total:this.getTotal()},shippingAddress:this.state.shippingAddress,taxPercent:this.state.taxRate,tier:O.Ju.ORG,title:(0,j.t)("checkout.upgrade_to_an_organization_plan"),userEmail:this.state.orgDetails.actorEmail})}else e=t===D.X1.Confirmation?(0,s.jsx)(P._,{totalCents:this.getTotal(),orgMigrated:this.props.orgMigrated,onFileBrowserClick:this.onFileBrowserClick,orgPayment:this.state.payment,currency:this.state.currency}):(0,s.jsxs)(s.Fragment,{children:[this.props.isOrgAdmin&&(0,s.jsx)(k.wW,{onContactSales:this.contactSales,onFileBrowserClick:this.onFileBrowserClick}),(0,o.qe)(this.props.user.email)&&(0,s.jsx)(k.VE,{onFileBrowserClick:this.onFileBrowserClick}),(0,s.jsxs)("div",{style:T.sx.if(t===D.X1.CreateTeam,T.sx.flex.justifyCenter,T.sx.grid.add({gridTemplateColumns:"1fr 280px",gap:"48px"})).$,children:[t===D.X1.CreateTeam&&(0,s.jsx)("div",{className:V.Bb,children:(0,s.jsx)(H.y,{type:H.I.ORG,teamName:this.state.newTeamName||"",setTeamName:this.onChangeNewTeamName,onNext:this.onSubmit})}),t===D.X1.TeamSelect&&(this.state.loading?(0,s.jsx)(X.f,{}):(0,s.jsx)(eb,{teams:a,selectedTeamIds:this.state.selectedTeamIds,onToggle:this.onTeamToggle,newTeamName:this.state.newTeamName})),t===D.X1.SeatSelect&&(this.state.loading?(0,s.jsx)(X.f,{}):(0,s.jsx)(ek,{users:function({eligibleUsersByUserId:e,eligibleTeamsByTeamId:t,selectedTeamIds:a}){let s=[];return Object.values(e).filter(e=>e.teamIds.some(e=>a.includes(e))).forEach(e=>{let r=e.teamIds,i=a.filter(e=>r.includes(e)).map(e=>t[e]),l=1===i.length?i[0].name:(0,j.t)("checkout.multiple_teams_label");s.push({id:e.id,handle:e.handle,email:e.email,img_url:e.img_url,teams:l})}),s}({eligibleUsersByUserId:this.state.eligibleUsersByUserId,eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:Array.from(this.state.selectedTeamIds)}),selectedTeamIds:Array.from(this.state.selectedTeamIds),selectedUserSeatTypes:this.state.selectedUserSeatTypes,additionalSeatsCount:this.state.additionalSeatCounts,currency:this.state.currency,onChangeSeat:(e,t)=>{this.setState({selectedUserSeatTypes:{...this.state.selectedUserSeatTypes,[e]:t}})},onChangeAdditionalSeats:this.updateAdditionalEmptySeats})),t===D.X1.Payment&&(0,s.jsxs)("form",{"data-testid":"org-payment-and-details-step",children:[(0,s.jsx)(eC,{orgDetails:this.state.orgDetails,onChangeFormInput:this.onChangeOrgDetails}),(0,s.jsx)("div",{className:f.s.pt24.$,children:(0,s.jsxs)(z.x,{title:(0,j.t)("checkout.payment_details"),children:[this.state.paymentError&&(0,s.jsx)("div",{className:f.s.mb20.$,children:(0,s.jsx)(g._,{color:g.S.ERROR,text:this.state.paymentError})}),(0,s.jsx)(ef.n,{allowFullWidthForm:!0,billingAddress:this.state.payment.address,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,cardId:"team-upgrade-page-card",id:"team-upgrade-page-form",isCheckoutFlow:!0,isCommunityCheckout:!1,nameOnPaymentMethod:this.state.nameOnPaymentMethod,onBillingAddressChange:this.onAddressChange,onCardReady:this.onCardReady,onClearToken:this.onClearToken,onRegionalVatIdChange:this.onRegionalVatIdChange,onShippingAddressChange:this.onShippingAddressChange,onVatIdChange:this.onVatIdChange,regionalVatId:this.state.regionalVatId,setNameOnPaymentMethod:this.onNameOnPaymentMethodChange,shippingAddress:this.state.shippingAddress,vatId:this.state.vatId})]})})]}),t!==D.X1.CreateTeam&&this.renderPurchaseSummary()]})]});return(0,s.jsxs)(R.fu,{name:eh.e0.ORG_CHECKOUT_FLOW,properties:{step:t,currency:this.state.currency,upsellSource:this.props.upsellSource,entryPoint:this.props.entryPoint,eligibleTeamIds:(0,E.gu)(Object.keys(this.state.eligibleTeamsByTeamId)),prices:(0,E.Jh)(this.props.productPriceBySeatType)},enabled:!this.state.loading,trackingOptions:(0,Y.u)(),children:[t!==D.X1.Confirmation&&(0,s.jsx)("div",{className:f.s.sticky.top0.zIndexTopBar.selectNone.$,children:(0,s.jsx)($,{currentStep:this.props.step,setStep:this.setStep,canSeeTeamAndSeatSelectionSteps:this.canSeeTeamAndSeatSelectionSteps(),onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:e=>{this.props.dispatch(K.sf({teamId:null,...this.props.newTeamProps?.previousView,view:"teamUpgrade",paymentStep:e,teamFlowType:this.props.newTeamProps?.teamFlowType||L.SC.CREATE_AND_UPGRADE}))},isCampfireCart:!0})}),(0,s.jsxs)("div",{className:f.s.selectNone.$,style:T.sx.mxAuto.add({padding:"48px",maxWidth:"1400px"}).$,children:[(0,s.jsx)(eO,{step:t}),e]})]})}}function eR(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.user),r=(0,i.d4)(e=>(0,em.x9)(e.orgUsersByOrgId,e.user.id).some(e=>e.permission===eo._D.ADMIN)),l=(0,ee.Mh)(),d=(0,i.d4)(e=>e.payment).currency||(0,ec.LN)();(0,m.h)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.inset="0",e.style.background="var(--color-bg-secondary)",e.style.zIndex="-1",document.body.appendChild(e),()=>{document.body.removeChild(e)}});let o=(0,ea.jv)({billableProductKeys:ei.N_,baseQuery:{currency:d,tier:O.Ju.ORG,renewalTerm:O.IX.YEAR,unit:O.IX.YEAR}}),[c]=(0,_.mI)(o);if("loaded"!==c.status)return(0,s.jsx)(el.K,{});let u=c.data;return(0,s.jsx)(h.tH,{team:n.e.MONETIZATION_UPGRADES,boundaryKey:"OrgSelfServeBillingRemodelPage",fallback:h.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:ed.y4,children:(0,s.jsx)(eM,{...e,dispatch:t,user:a,isOrgAdmin:r,canSeeBillingAddressExp:l,productPriceBySeatType:u,currency:d})})}function eO({step:e}){let t=function(e){switch(e){case D.X1.TeamSelect:return(0,j.t)("checkout.org_self_serve.select_teams_title");case D.X1.SeatSelect:return(0,j.t)("checkout.org_self_serve.select_seats_header");case D.X1.Payment:return(0,j.t)("checkout.enter_your_payment_details");case D.X1.Review:return(0,j.t)("checkout.everything_look_good");default:return null}}(e),a=function(e){let t=(0,s.jsx)(y.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:et.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,j.tx)("checkout.learn_more_about_seats")});switch(e){case D.X1.TeamSelect:return(0,j.t)("checkout.org_self_serve.select_teams_subtitle");case D.X1.SeatSelect:return(0,j.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:t});case D.X1.Review:return(0,j.t)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set");default:return null}}(e);return t?(0,s.jsxs)("div",{className:f.s.mb32.$,"data-testid":"cart-org-header",children:[(0,s.jsx)("h2",{className:f.s.font15.lh24.fontMedium.$,children:t}),a&&(0,s.jsx)("p",{className:f.s.colorTextSecondary.font13.mt8.$,children:a}),(0,J.UR)()&&(0,s.jsx)(W.W,{billingPeriod:B.tY.ANNUAL,isCampfireCart:!0})]}):null}eM.displayName="OrgSelfServePage"},793139:(e,t,a)=>{a.d(t,{wW:()=>G,VE:()=>F,LJ:()=>H});var s=a(486106),r=a(7378),i=a(514228),l=a(601108),n=a(361869),d=a(341232),o=a(60079),c=a(17223),m=a(637027),_=a(347284),u=a(714743),p=a(589278),h=a(303541),g=a(941192),x=a(830372),f=a(339549),v=a(984674),y=a(681712),j=a(156213),S=a(765855),T=a(831799),b=a(314264),N=a(513035),C=a(332483),w=a(217457),E=a(514043),A=a(129884),I=a(102752),k=a(805373),P=a(136698),M=a(519092),R=a(918700);let O=(0,a(524523).ex)("org_upgrade_user_info_extended",function({teamIds:e,teamNames:t}){return(0,s.jsx)("div",{children:e.map((e,a)=>{let r=(0,P.$L)(e,P.us);return(0,s.jsxs)("div",{className:"org_self_serve_modal_tooltip_content--tooltipRow--CyDdQ",children:[(0,s.jsx)("div",{style:g.sx.add({backgroundColor:r,minWidth:"10px",height:"10px",margin:"8px",borderRadius:"2px"}).$}),(0,s.jsx)("div",{children:t[a]})]},e)})})},e=>{let t=e.getAttribute("data-tooltip-team-names"),a=e.getAttribute("data-tooltip-team-ids");return{teamNames:t.split(","),teamIds:a.split(",")}}),D="org_self_serve_modals--modalContainer--dX-kq",B="org_self_serve_modals--modalWrapperSmall--A6JUB org_self_serve_modals--modalWrapper--swqMp",L="org_self_serve_modals--modalHeader--nTa0e",V="org_self_serve_modals--modalText--VYdf5";var U=a(433566),$=a(927263);function z(e){return(0,s.jsx)("div",{style:{height:e.height||12}})}function F(e){return(0,s.jsx)(M.OJ,{containerClassName:D,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349,children:(0,s.jsxs)("div",{className:B,children:[(0,s.jsx)("div",{className:L,children:(0,h.tx)("org_self_serve.modals.invalid_email.figma_organization_only_allows_work_emails")}),(0,s.jsx)("div",{className:V,children:(0,h.tx)("org_self_serve.modals.invalid_email.change_email_address_to_proceed")}),(0,s.jsx)(z,{height:12}),(0,s.jsx)("a",{onClick:e.onFileBrowserClick,children:(0,h.tx)("org_self_serve.modals.invalid_email.go_to_the_file_browser")})]})})}function G(e){return(0,s.jsx)(M.OJ,{containerClassName:D,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349,children:(0,s.jsxs)("div",{className:B,children:[(0,s.jsx)("div",{className:L,children:(0,h.tx)("org_self_serve.modals.existing_org_admin.figma_organization_already_purchased")}),(0,s.jsx)("div",{className:V,children:(0,h.tx)("org_self_serve.modals.existing_org_admin.if_you_need_another_organization",{contactSales:(0,s.jsx)("a",{onClick:e.onContactSales,children:(0,h.tx)("org_self_serve.modals.existing_org_admin.contact_sales")})})}),(0,s.jsx)(z,{height:4}),(0,s.jsx)(z,{height:12}),(0,s.jsx)("a",{onClick:e.onFileBrowserClick,children:(0,h.tx)("org_self_serve.modals.existing_org_admin.go_to_the_file_browser")})]})})}function H(e){return(0,s.jsx)(M.OJ,{containerClassName:D,headerSize:"hidden",onClose:e.onClose,title:"",minWidth:580,maxWidth:580,dataTestId:"true-up-edu-modal",children:(0,s.jsxs)("div",{className:"org_self_serve_modals--modalWrapper--swqMp",children:[(0,s.jsx)(u.B,{className:"org_self_serve_modals--modalClose--XbMl2",svg:$.A,onClick:e.onClose}),(0,s.jsx)("div",{className:L,children:(0,h.tx)("org_self_serve.modals.true_up_edu.figma_grows_with_your_team")}),(0,s.jsx)("div",{className:V,children:(0,h.tx)("org_self_serve.modals.true_up_edu.members_can_add_new_editors.seat_rename")}),(0,s.jsx)(z,{height:8}),(0,s.jsx)("div",{className:"org_self_serve_modals--modalSubHeader--FtC-9",children:(0,h.tx)("org_self_serve.modals.true_up_edu.what_to_expect_at_true_up")}),(0,s.jsx)("div",{className:V,children:(0,h.tx)("org_self_serve.modals.true_up_edu.true_up_explanation.seat_rename",{seeFullDetails:(0,s.jsx)("a",{href:"https://help.figma.com/hc/articles/360040328293",target:"_blank",children:(0,h.tx)("org_self_serve.modals.true_up_edu.see_full_details")})})})]})})}(0,I.Ju)(function(e){let t=e.isProTeam?C.Oq.exclude([N.ud.DEV_MODE]):C.Oq,[a,i]=(0,r.useState)(t.dict(t=>e.seatDataByLicenseType[t]?.currentSeats||0)),[o,c]=(0,r.useState)(null),m=e=>{let t=a[e];void 0!==t&&t<99&&i({...a,[e]:t+1})},_=t=>{let s=e.seatDataByLicenseType[t],r=a[t];null!=s&&null!=r&&r>s.minSeats&&i({...a,[t]:r-1})},p=(e,t)=>{if(""===e.target.value){t(0);return}let a=parseInt(e.target.value);isNaN(a)||t(a)},g=new E.vr(e.currency),x=a[N.ud.FIGJAM],f={[N.ud.DESIGN]:{headerString:(0,h.t)("all_carts.figma_design_editors.seat_rename"),totalSeatCount:a[N.ud.DESIGN],shouldShowDevModeIncludedText:!0},[N.ud.FIGJAM]:{headerString:(0,h.t)("all_carts.figjam_editors.seat_rename"),totalSeatCount:x,shouldShowDevModeIncludedText:!1},[N.ud.DEV_MODE]:{headerString:(0,h.t)("all_carts.dev_mode_only_seats"),totalSeatCount:a[N.ud.DEV_MODE]??0,shouldShowDevModeIncludedText:!1}};return(0,s.jsxs)(M.Dd,{onSubmit:()=>{let s=!1;if(t.forEach(t=>{let r=a[t],i=e.seatDataByLicenseType[t]?.minSeats||0;void 0!==r&&!1===s&&(r<i||r>99)&&(c(t),s=!0)}),s)return;let r=t.reduce((e,t)=>e+(a[t]||0),0);e.minTotalSeats&&r<e.minTotalSeats?c("total"):(e.dispatch(j.Ce()),e.updateAdditionalSeats(a))},confirmText:(0,h.t)("all_carts.save"),cancelText:(0,h.t)("all_carts.cancel"),title:(0,h.t)("all_carts.add_additional_editors.seat_rename"),children:[(0,s.jsx)("div",{className:"org_self_serve_modals--bannerContainer--ly-u-",children:o&&(0,s.jsxs)("div",{className:"org_self_serve_modals--errorBanner--EeUdZ",children:[(0,s.jsx)(u.B,{className:"org_self_serve_modals--errorSvg--h8gsO",svg:U.A}),(0,s.jsxs)("div",{className:"org_self_serve_modals--errorBannerText--srvT- org_self_serve_modals--headerModalText--h0Go9",children:[o===N.ud.DESIGN&&(0,h.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.ud.DESIGN].minSeats}),o===N.ud.FIGJAM&&(0,h.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.ud.FIGJAM].minSeats}),o===N.ud.DEV_MODE&&(0,h.tx)("all_carts.you_need_a_minimum_n_dev_mode_seats",{minSeatsCount:e.seatDataByLicenseType[N.ud.DEV_MODE]?.minSeats||0}),"total"===o&&!!e.minTotalSeats&&((0,l.k)().org_checkout_min_seat_info_copy?(0,h.tx)("all_carts.minimum_seats",{minTotalSeats:e.minTotalSeats,minDesignSeats:e.seatDataByLicenseType[N.ud.DESIGN].minSeats,seatsText:(0,h.tx)("checkout.seats_text",{numOfSeats:e.minTotalSeats}),designSeatsText:(0,h.tx)("checkout.seats_text",{numOfSeats:e.seatDataByLicenseType[N.ud.DESIGN].minSeats})}):(0,h.tx)("all_carts.you_need_a_minimum_n_editors.seat_rename",{minSeatsCount:e.minTotalSeats}))]})]})}),t.sort(w.AG).map(t=>{let r=f[t],l=e.seatDataByLicenseType[t],o=a[t];return void 0===r||void 0===l||void 0===o?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("div",{children:[(0,s.jsx)(z,{height:16}),(0,s.jsx)("div",{className:"org_self_serve_modals--headerModalBoldText--uhAfp org_self_serve_modals--headerModalText--h0Go9",children:r.headerString}),r.shouldShowDevModeIncludedText&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z,{height:4}),(0,s.jsx)(n.G,{})]}),(0,s.jsx)(z,{height:12}),(0,s.jsx)(d.s,{"data-testid":t+"-seat_counter",billableProductKey:(0,w.Zx)(t),incrementSeats:()=>m(t),decrementSeats:()=>_(t),numSeats:o,minSeatsCount:l.minSeats,headerText:g.formatMoney(r.totalSeatCount*l.seatUnitCostInCents*(e.showAnnualPrice?12:1)),headerSubText:(0,y.mx)(e.showAnnualPrice,r.totalSeatCount,!0,l.seatUnitCostInCents,e.currency),updateAdditionalSeatsText:e=>p(e,e=>{i({...a,[t]:e})})})]},t)}),(0,s.jsx)(z,{height:18}),(0,s.jsx)("div",{className:"org_self_serve_modals--divider--cY9-m"})]})},"AdditionalEditorsModal");var X=(e=>(e[e.NONE=0]="NONE",e[e.DESIGN=1]="DESIGN",e[e.WHITEBOARD=2]="WHITEBOARD",e[e.TOTAL=3]="TOTAL",e))(X||{});function W({userData:e,checkboxHandler:t}){let[a,l]=(0,r.useState)(0),n=(0,i.wA)(),d=({rect:e,designChecked:s,...r})=>{if(t(r),r.newVal&&a<3){l(e=>e+1);let t=s?(0,h.t)("checkout.switch_seat_from_design_to_devmode"):(0,h.t)("checkout.enabled_devmode");n(S.eB({target:{kind:A.Ui.TEXT,text:t},targetRect:{top:e.top,right:e.right+8,bottom:e.bottom,left:e.left+8,width:e.width,height:e.height},textAlign:"left",position:A.Zj.RIGHT,hideAfterDelay:1e3}))}};return(0,s.jsx)(s.Fragment,{children:e.map((a,r)=>(0,s.jsxs)("div",{"data-testid":"user-data-row",children:[(0,s.jsxs)(J,{rowType:"data",children:[(0,s.jsx)(k.az,{entity:a.user,includeUserEmailAddress:!0,size:24}),(0,s.jsx)(Z,{userInfo:a}),(0,s.jsx)(f.S,{checked:a.designEditor,onChange:e=>{t({userId:a.user.id,type:"designEditor",newVal:e.currentTarget.checked})}}),(0,s.jsx)(m.tB,{checked:a.devMode,className:"org_self_serve_modals--devModeCheckbox--M-CsB",onChange:e=>{d({designChecked:a.designEditor,userId:a.user.id,type:"devMode",newVal:e.currentTarget.checked,rect:e.currentTarget.getBoundingClientRect()})}}),(0,s.jsx)(m.tB,{checked:a.figjamEditor,className:"org_self_serve_modals--figjamCheckbox---FJmg",onChange:e=>{t({userId:a.user.id,type:"figjamEditor",newVal:e.currentTarget.checked})}})]}),r!==e.length-1&&(0,s.jsx)(Y,{})]},a.user.id))})}function J({rowType:e,children:t}){let a="footer"===e?["55%","15%","15%","15%"]:["35%","20%","15%","15%","15%"];return(0,s.jsx)(x.Y,{dataTestId:"seat-table-row",verticalAlignItems:"center",horizontalAlignItems:"start",padding:{top:"data"===e?14:16,right:16,bottom:"data"===e?14:16,left:16},backgroundColor:"header"===e?"hover":"default",spacing:0,children:t.map((e,t)=>(0,s.jsx)(x.Y,{width:a[t],horizontalAlignItems:"start",verticalAlignItems:"center",padding:{right:16},children:e},t))})}function Y(){return(0,s.jsx)("div",{className:p.s.wFull.colorBgTertiary.h1.$})}function K({teamId:e}){return(0,s.jsx)("div",{className:p.s.w8.h8.bRadius2.minW8.$,style:g.sx.add({backgroundColor:(0,P.$L)(e,P.us)}).$})}function Z({userInfo:e}){return e.teams.length>1?(0,s.jsx)("div",{"data-tooltip-show-immediately":!0,"data-tooltip-type":A.Ib.SPECIAL,"data-tooltip":O,"data-tooltip-team-names":e.teams.map(e=>e.name).join(","),"data-tooltip-team-ids":e.teams.map(e=>e.id).join(","),"data-tooltip-show-right":!0,"data-tooltip-light-mode":!0,children:(0,s.jsx)(v.E,{color:"default",children:(0,h.tx)("all_carts.editor_table.multiple_teams")})}):(0,s.jsxs)(x.Y,{spacing:8,verticalAlignItems:"center",horizontalAlignItems:"start",children:[(0,s.jsx)(K,{teamId:e.teamIds[0]}),(0,s.jsx)("div",{className:p.s.noWrap.ellipsis.overflowHidden.$,children:(0,s.jsx)(v.E,{color:"default",children:e.teams[0]?.name})})]})}(0,I.Ju)(function({users:e,updateSelectedEditors:t,updateAdditionalEmptySeats:a,currency:i,minTotalSeats:l,dispatch:n,seatInfo:u,monthlyPriceByProduct:p}){let[g,f]=(0,r.useState)(e),[y,S]=(0,r.useState)({design:u.design.additionalSeatCount,figjam:u.figjam.additionalSeatCount,dev_mode:u.dev_mode.additionalSeatCount}),C=(0,r.useMemo)(()=>{let e=0,t=0,a=0;for(let s of Object.values(g))s.designEditor&&e++,s.devMode&&a++,s.figjamEditor&&t++;return(e+=y.design,a+=y.dev_mode,t+=y.figjam,l&&e+t+a<l)?3:e<u.design.minCount||e>99?1:t<u.figjam.minCount||t>99?2:0},[y,g,l,u]),w=e=>{y[e]>=99||S(t=>({...t,[e]:t[e]+1}))},A=e=>{y[e]<=0||S(t=>({...t,[e]:t[e]-1}))},I=(e,t)=>{let a=""===e.target.value?0:parseInt(e.target.value);isNaN(a)||S(e=>({...e,[t]:a}))},k=new E.vr(i),P=()=>{n(j.Ce())};return(0,s.jsx)(T.fu,{name:"Select Editors Modal",children:(0,s.jsxs)(R.ey,{size:864,maxHeight:672,hide:()=>n(j.Ce()),className:"org_self_serve_modals--selectEditorsModal--D0yWS",children:[(0,s.jsxs)("div",{className:"org_self_serve_modals--selectEditorModalHeader--wPo15 org_self_serve_modals--headerModalText--h0Go9",children:[(0,h.tx)("checkout.add_or_remove_editors"),(0,s.jsx)(c.s_,{customStyle:{position:"initial"},dispatch:n,onClose:P})]}),(0,s.jsx)(Y,{}),(0,s.jsxs)(J,{rowType:"header",children:[(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,h.tx)("all_carts.editor_table.Name")}),(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,h.tx)("all_carts.editor_table.Teams")}),(0,s.jsxs)(x.Y,{direction:"vertical",spacing:0,horizontalAlignItems:"start",verticalAlignItems:"center",children:[(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,h.tx)("general.figma_design")}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.E,{color:"handoff",fontWeight:"medium",children:(0,h.tx)("general.dev_mode")}),"\xa0",(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,h.tx)("checkout.dev_mode_included_text_formatted.included")})]})]}),(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,h.tx)("general.dev_mode")}),(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,h.tx)("general.figjam")})]}),(0,s.jsx)(Y,{}),(0,s.jsx)(_.P,{maxHeight:426,children:(0,s.jsx)(W,{userData:Object.values(g),checkboxHandler:({userId:e,type:t,newVal:a})=>{let s={...g[e],[t]:a};"devMode"===t&&a&&(s.designEditor=!1),"designEditor"===t&&a&&(s.devMode=!1),f(t=>({...t,[e]:s})),(0,b.Cu)({name:"org_checkout_select_editors_checkbox",licenseType:t,checked:a})}})}),(0,s.jsx)(Y,{}),(0,s.jsxs)(J,{rowType:"footer",children:[(0,s.jsxs)(x.Y,{spacing:0,direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",children:[(0,s.jsx)(v.E,{color:"default",fontWeight:"medium",children:(0,h.tx)("all_carts.add_additional_editors.seat_rename")}),(0,s.jsx)(v.E,{fontWeight:"regular",color:"secondary",children:(0,h.tx)("all_carts.add_additional_editors_description.seat_rename")})]}),(0,s.jsx)(d.s,{billableProductKey:N.ud.DESIGN,incrementSeats:()=>w(N.ud.DESIGN),decrementSeats:()=>A(N.ud.DESIGN),numSeats:y.design,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,N.ud.DESIGN)}),(0,s.jsx)(d.s,{billableProductKey:N.ud.DEV_MODE,incrementSeats:()=>w(N.ud.DEV_MODE),decrementSeats:()=>A(N.ud.DEV_MODE),numSeats:y.dev_mode,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,N.ud.DEV_MODE)}),(0,s.jsx)(d.s,{billableProductKey:N.ud.FIGJAM,incrementSeats:()=>w(N.ud.FIGJAM),decrementSeats:()=>A(N.ud.FIGJAM),numSeats:y.figjam,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,N.ud.FIGJAM)})]}),(0,s.jsxs)("div",{className:"org_self_serve_modals--selectEditorModalActions--ng3b0 org_self_serve_modals--selectEditorModalFooter--8vKi7",children:[0!==C?(()=>{switch(C){case 0:default:return;case 1:return(0,s.jsx)(v.E,{color:"danger",children:(0,h.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:u.design.minCount})});case 2:return(0,s.jsx)(v.E,{color:"danger",children:(0,h.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:u.figjam.minCount})});case 3:return(0,s.jsx)(v.E,{color:"danger",children:(0,h.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:l})})}})():(0,s.jsx)(v.E,{fontWeight:"regular",color:"secondary",children:(0,h.tx)("all_carts.new_total",{total:k.formatMoney(function(e,t,a){let s=t.design,r=t.figjam,i=t.dev_mode;for(let t in e)e[t].designEditor?s++:e[t].devMode&&i++,e[t].figjamEditor&&r++;return s*a[N.ud.DESIGN]*12+r*a[N.ud.FIGJAM]*12+i*a[N.ud.DEV_MODE]*12}(g,y,p),{showCents:!0})})}),(0,s.jsxs)("div",{className:"org_self_serve_modals--buttonGroup--U5iQn",children:[(0,s.jsx)(o.nR,{onClick:P,children:(0,h.t)("general.cancel")}),(0,s.jsx)(m.$$,{onClick:()=>{0===C&&(a(y),t(g),n(j.Ce()))},disabled:0!==C,children:(0,h.t)("checkout.update_seats")})]})]})]})})},"SelectEditorsModal")},173602:(e,t,a)=>{a.d(t,{W:()=>p,_:()=>h});var s=a(486106),r=a(536384),i=a.n(r),l=a(637027),n=a(858013),d=a(714743),o=a(303541),c=a(514043),m=a(763339);if(443==a.j)var _=a(933949);function u(e){return(0,s.jsx)("div",{style:{height:e.height||12}})}function p(){return(0,s.jsx)("span",{children:(0,o.tx)("org_self_serve.review_step.i_agree_to_msa_and_renewal_links",{msaLink:(0,s.jsx)(l.CY,{href:"/ssa",target:"_blank",trusted:!0,children:(0,o.tx)("org_self_serve.review_step.software_services_agreement")}),renewalLink:(0,s.jsx)(l.CY,{href:(0,o.dS)("/renewal-and-cancellation"),target:"_blank",trusted:!0,children:(0,o.tx)("org_self_serve.review_step.renewal_and_cancellation_terms")})})})}function h(e){let t=new c.vr(e.currency);return(0,s.jsx)("div",{className:m.jg,children:(0,s.jsxs)("div",{className:i()(m.M7,m.Et),children:[(0,s.jsxs)("div",{className:m.cc,children:[(0,s.jsx)(d.B,{svg:_.A,className:m.O2,useOriginalSrcFills_DEPRECATED:!0,autosize:!0,width:"32px",height:"32px"}),(0,s.jsx)("div",{className:m.W,children:(0,o.tx)("org_self_serve.confirmation_step.you_re_all_set")})]}),(0,s.jsxs)("div",{className:m.Jo,children:[(0,s.jsx)("div",{className:m.Qv,children:(0,o.tx)("org_self_serve.confirmation_step.order_confirmation_message")}),(0,s.jsx)(u,{height:24}),(0,s.jsx)("div",{className:m.aK}),(0,s.jsx)(u,{height:24}),(0,s.jsxs)("div",{className:m.N5,children:[(0,s.jsxs)("div",{className:m.I1,children:[(0,o.tx)("org_self_serve.confirmation_step.total_amount_to_be_charged_to_card_ending_in_last4",{last4:e.orgPayment.last4}),(0,s.jsx)("span",{className:m.iv,children:t.formatMoney(e.totalCents,{showCents:!1})})]}),(0,s.jsx)(u,{height:24}),(0,s.jsx)("div",{className:m.aK}),(0,s.jsx)(u,{height:32}),(0,s.jsxs)("div",{className:m.Ed,children:[!e.orgMigrated&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.kt,{}),(0,s.jsx)("div",{className:m.nm,children:(0,o.tx)("org_self_serve.confirmation_step.we_re_setting_up_your_organization")})]}),(0,s.jsx)(l.$$,{disabled:!e.orgMigrated,className:m.Xq,onClick:e.onFileBrowserClick,dataTestId:"go-to-file-browser-button",children:(0,o.tx)("org_self_serve.confirmation_step.go_to_the_file_browser")})]})]})]})]})})}},104815:(e,t,a)=>{a.r(t),a.d(t,{PromoReviewPage:()=>g});var s=a(486106),r=a(514228),i=a(598111),l=a(371580),n=a(211326),d=a(303541),o=a(841217),c=a(929976),m=a(482142),_=a(925885),u=a(831799),p=a(514043),h=a(2942);function g(e){let{selectedView:t,promo:a}=e,g=(0,r.wA)(),x=(0,h.Ud)({teamId:t.teamId}),f=()=>{(0,i._H)(),g(m.Ay({promo:null})),g(c.sf(e.selectedView.previousView||{view:"team",teamId:t.teamId}))},v=()=>{g(_.S_({teamId:t.teamId,teamName:t.teamName,promoCode:a?.code||"",onSuccess:f,onError:f}))};return a?(0,s.jsx)(u.fu,{name:"Redeem Promo Code > Confirm",properties:{teamId:t.teamId},children:(0,s.jsxs)("div",{className:"promo_modals--promoReviewInner--O81Uu",children:[(0,s.jsx)("div",{className:"promo_modals--cancelRow--Zrs8S",children:(0,s.jsx)("button",{type:"button",className:"promo_modals--cancelButton--ho2Ks text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:f,children:(0,d.tx)("promo.promo_review.cancel")})}),(0,s.jsx)("div",{className:"promo_modals--promoReviewTitle--fatmf text--fontPos20--Bcz97 text--_fontBase--QdLsd",children:(0,d.tx)("promo.promo_review.redeem_your_days_of_free_professional_plan",{days:a.promo_value})}),(0,s.jsx)("div",{className:"promo_modals--promoReviewDescription--uLn0D text--fontPos13--xW8hS text--_fontBase--QdLsd",children:(0,d.tx)("promo.promo_review.any_additional_editors_invited_to_selected_view_team_name_will_also_be_free_of_charge_for_the_next_days.seat_rename",{teamName:t.teamName,days:a.promo_value})}),(0,s.jsx)("div",{children:(0,s.jsx)(n.x,{isLoading:x,children:()=>(0,s.jsx)(l.o,{children:(0,s.jsx)(o.d,{selectedView:t,onClickConfirm:v,currency:(0,p.LN)(),canSeeBillingAddressExp:!1})})})})]})}):(f(),null)}},907085:(e,t,a)=>{a.d(t,{x:()=>l});var s=a(486106),r=a(589278),i=a(941192);function l({title:e,children:t,dataTestId:a}){return(0,s.jsxs)("div",{style:i.sx.p24.colorBg.add({borderRadius:"13px",height:"fit-content"}).$,"data-testid":a,children:[e&&(0,s.jsx)("h3",{className:r.s.mb16.fontMedium.font15.$,children:e}),t]})}},282622:(e,t,a)=>{a.d(t,{j:()=>R});var s=a(486106),r=a(941192),i=a(637027),l=a(589278),n=a(303541),d=a(370443),o=a(712921),c=a(831101),m=a(907085);function _(e){let t=e.shippingAddress&&!(0,c.$V)(e.shippingAddress);return(0,s.jsxs)(m.x,{title:(0,n.t)("checkout.cart_plan_details.subtitle"),dataTestId:"cart-plan-details",children:[(0,s.jsx)(u,{header:e.tier===o.Ju.ORG?(0,n.t)("checkout.cart_plan_details.organization_name"):(0,n.t)("checkout.cart_plan_details.team_name"),value:e.displayName,dataTestId:"cart-plan-details-plan-name"}),e.legalName&&(0,s.jsx)(u,{header:(0,n.t)("checkout.cart_plan_details.legal_name"),value:e.legalName,dataTestId:"cart-plan-details-legal-name"}),(0,s.jsx)(u,{header:(0,n.t)("checkout.cart_plan_details.invoice_email"),value:e.userEmail,dataTestId:"cart-plan-details-invoice-email"}),e.billingAddress&&(0,s.jsx)(u,{header:(0,n.t)("checkout.cart_plan_details.billing_address"),value:p(e.billingAddress),dataTestId:"cart-plan-details-billing-address"}),t&&(0,s.jsx)(u,{header:(0,n.t)("checkout.cart_plan_details.shipping_address"),value:p(e.shippingAddress),dataTestId:"cart-plan-details-shipping-address"}),(0,s.jsx)(i.Ph,{onClick:e.navigateToEditDetails,className:l.s.font13.py12.$,trackingProperties:{trackingDescriptor:d.c.EDIT_PLAN_DETAILS},"data-testid":"cart-plan-details-edit-details",trusted:!0,children:(0,n.tx)("checkout.cart_plan_details.edit_details")})]})}function u({header:e,value:t,dataTestId:a}){return(0,s.jsxs)("div",{className:l.s.flex.flexColumn.py16.bb1.bSolid.colorBorder.itemsStart.$,"data-testid":a,children:[(0,s.jsx)("p",{className:l.s.font13.lh24.spacingWide.colorTextSecondary.pb4.$,children:e}),(0,s.jsx)("p",{className:l.s.font13.lh24.colorText.breakWord.$,children:t})]})}function p(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}var h=a(7378),g=a(465776),x=a(274480),f=a(270045),v=a(443820),y=a(800369),j=a(617427),S=a(793139),T=a(173602),b=a(681712),N=a(307841),C=a(57596),w=a(648208);let E=(0,s.jsx)(i.Us,{target:"_blank",trusted:!0,href:"/pricing",children:(0,n.tx)("checkout.monthly_price")});function A({title:e,countByBillableProductKey:t,billingInterval:a,currency:i,taxPercent:_,isRequestPending:u,tier:p,onSubmit:g,onSubmitTrackingProperties:y}){let[S,N]=h.useState(!1),E=u||!S,A=(0,s.jsx)(x.S,{label:(0,s.jsx)(f.J,{children:(0,s.jsx)("span",{className:l.s.font13.$,children:p===o.Ju.ORG?(0,s.jsx)(T.W,{}):(0,s.jsx)(b.Um,{})})}),checked:S,onChange:N}),k=(0,s.jsx)("div",{className:l.s.flex.justifyCenter.itemsCenter.$,"data-testid":"cart-review-submit-loading",children:(0,s.jsx)(v.k,{})});return(0,s.jsxs)(m.x,{title:e,dataTestId:"cart-review",children:[(0,s.jsx)("div",{className:l.s.mt16.$,children:(0,s.jsx)(w.O,{countByBillableProductKey:t,billingInterval:a,currency:i,taxPercent:_??0,isCartReviewSummary:!0,tier:p})}),(0,s.jsx)(I,{tier:p,isAnnual:a===c.NW.YEAR}),(0,s.jsx)(C._,{}),(0,s.jsx)("div",{className:l.s.my24.$,style:r.sx.add({marginLeft:"-10px"}).$,"data-testid":"cart-review-terms-checkbox",children:A}),(0,s.jsx)(j.lR,{onClick:g,disabled:E,htmlAttributes:{"data-testid":"cart-review-submit-button"},trackingProperties:{trackingDescriptor:d.c.COMPLETE_PURCHASE,...y},children:u?k:(0,n.tx)("checkout.complete_purchase")})]})}function I({tier:e,isAnnual:t}){return(0,N.IP)()?(0,s.jsx)(k,{tier:e,isAnnual:t}):e===o.Ju.ORG?(0,s.jsx)(P,{}):null}function k({tier:e,isAnnual:t}){let a=e===o.Ju.ORG?"https://help.figma.com/hc/articles/360040328293-Manage-billing-on-the-Organization-and-Enterprise-plans":"https://help.figma.com/hc/articles/360041061034-Manage-billing-on-the-Professional-plan";return(0,s.jsx)("div",{className:l.s.mt24.$,"data-testid":"cart-review-upgrade-information-banner",children:(0,s.jsxs)("div",{className:l.s.py8.px16.colorBgSecondary.bRadius5.flex.flexColumn.gap4.$,children:[(0,s.jsx)("p",{className:l.s.textBodyMediumStrong.$,children:(0,n.tx)("checkout.how_do_new_seat_additions_and_upgrades_work")}),(0,s.jsx)("p",{children:function(e,t){switch(e){case o.Ju.ORG:return(0,n.tx)("checkout.cart_review_upgrade_info_org");case o.Ju.PRO:return t?(0,n.tx)("checkout.cart_review_upgrade_info_pro_annual",{monthlyPriceLink:E}):(0,n.tx)("checkout.cart_review_upgrade_info_pro_monthly");default:(0,g.wc)(e)}}(e,t)}),(0,s.jsx)(i.Ph,{className:l.s.textBodyMediumStrong.$,style:r.sx.add({height:"16px"}).$,target:"_blank",href:a,trusted:!0,children:(0,n.tx)("checkout.learn_more")})]})})}function P(){let[e,t]=h.useState(!1),a=new Date().getMonth(),d=new Date().setMonth(a+3);return(0,s.jsxs)("div",{className:l.s.mt24.$,"data-testid":"cart-review-org-true-up-banner",children:[e&&(0,s.jsx)(S.LJ,{onClose:()=>t(!1)}),(0,s.jsxs)("div",{className:l.s.flexColumn.pt4.pb8.px8.colorBgSecondary.bRadius5.$,children:[(0,s.jsx)(y.G,{}),(0,s.jsxs)("div",{className:l.s.px8.$,children:[(0,s.jsx)("p",{className:l.s.pt4.fontMedium.$,children:(0,n.tx)("org_self_serve.review_step.next_quarterly_true_up_on_date",{trueUpDate:new Date(d)})}),(0,s.jsx)("p",{className:l.s.pt4.$,children:(0,n.tx)("org_self_serve.review_step.what_is_a_true_up")}),(0,s.jsxs)("ul",{style:r.sx.ml16.mt4.add({listStyle:"disc"}).$,children:[(0,s.jsx)("li",{children:(0,n.tx)("org_self_serve.review_step.true_up_description.seat_rename")}),(0,s.jsx)("li",{children:(0,n.tx)("checkout.org_self_serve.true_up_description2_seat_rename")}),(0,s.jsx)("li",{children:(0,n.tx)("checkout.org_self_serve.true_up_description3_seat_rename")}),(0,s.jsx)("li",{children:(0,n.tx)("checkout.org_self_serve.true_up_description4_seat_rename")})]}),(0,s.jsx)(i.Ph,{className:l.s.pt8.fontMedium.inline.$,onClick:()=>t(!0),trusted:!0,children:(0,n.tx)("org_self_serve.review_step.learn_more_about_true_ups")})]})]})]})}var M=a(279252);function R(e){return(0,s.jsxs)("div",{style:r.sx.grid.add({gridTemplateColumns:"400px 1fr",gap:"48px"}).$,"data-testid":"cart-review-step",children:[(0,s.jsx)(_,{...e}),e.hasUpgradeSucceeded?(0,s.jsx)(M.f,{}):(0,s.jsx)(A,{...e})]})}},705272:(e,t,a)=>{a.d(t,{$$:()=>h,Ed:()=>g,MZ:()=>c,WQ:()=>d,f8:()=>n,md:()=>o,n5:()=>p,wh:()=>m});var s=a(128080),r=a.n(s),i=a(513035),l=a(332483);let n=1,d=1;function o(e,t){let a={};for(let s of Object.keys(e)){let r=e[s]||"";t.includes(s)&&(0,i.dA)(r)&&(a[s]=r)}return a}function c(e,t,a){return{minimumPaidSeats:1,defaultAdditionalSeatType:i.ud.EXPERT,selectedTeamIds:[e],selectedUserSeatTypes:t,additionalSeatCounts:a}}function m(e,t,a){return{minimumPaidSeats:1,defaultAdditionalSeatType:i.ud.EXPERT,selectedTeamIds:e,selectedUserSeatTypes:t,additionalSeatCounts:a}}function _(e){return{type:"error",message:e}}function u(e){return{type:"success",value:e}}function p(e,t){var a,s,r;switch(t.type){case"changeSeatType":return a=t.userId,s=t.seatType,a in e.selectedUserSeatTypes?u({...e,selectedUserSeatTypes:{...e.selectedUserSeatTypes,[a]:s}}):_(`Tried to change seat for not-present user ${a}`);case"setAdditionalSeats":return Object.values(r=t.additionalSeatCounts).some(e=>e<0)?_("Blocked attempt to set negative additional seats"):u({...e,additionalSeatCounts:r})}}function h(e,t,a){return{...e,[t]:Math.max(0,(e[t]||0)+a)}}function g(e){let t=new Set(l.N_.toArray()),a=new Set(Object.keys(e));return!(!r()(t,a)||Object.values(e).find(e=>Number.isNaN(e)||e<0))}},580036:(e,t,a)=>{a.d(t,{z:()=>N});var s=a(486106),r=a(7378),i=a(521428);if(443==a.j)var l=a(443820);if(443==a.j)var n=a(308099);if(443==a.j)var d=a(932270);if(443==a.j)var o=a(270045);var c=a(490799),m=a(589278),_=a(303541),u=a(941192),p=a(54359),h=a(251759),g=a(370443),x=a(831799),f=a(848862),v=a(514043),y=a(831101),j=a(907085),S=a(57596),T=a(648208);let b=(0,x.tf)(i.Pw);function N({title:e,countByBillableProductKey:t,tier:a,billingInterval:i,currency:c,buttonText:x,isButtonDisabled:N,isLoading:w,onClickNext:E,onSwitchCurrency:A,onSwitchBillingInterval:I,footer:k,canEnforcePaidSeatMinimum:P,trackingProperties:M}){let R=!!t,O=(0,v._Z)(),D=(0,f.Um)(),[B,L]=function(e,t,a,s){let[i,l]=r.useState(!1),n=r.useCallback((e,t)=>!!(s&&e&&!(0,p.A)(e,t)),[s]);r.useEffect(()=>{i&&!n(t,a)&&l(!1)},[t,a,s,i,n]);let d=r.useCallback(s=>{if(!i){if(n(t,a)){l(!0);return}e(s)}},[t,a,i,n,e]);return[i,d]}(E,t,a,P),V=(0,s.jsx)("div",{className:m.s.flex.justifyCenter.itemsCenter.$,"data-testid":"cart-sidebar-loading",children:(0,s.jsx)(l.k,{})});return(0,s.jsxs)(j.x,{title:e,dataTestId:"cart-sidebar",children:[(0,s.jsx)("div",{className:m.s.mt16.$,children:R?(0,s.jsxs)(s.Fragment,{children:[O&&(0,s.jsxs)("div",{className:m.s.flex.justifyBetween.itemsCenter.pb16.bb1.bSolid.colorBorder.$,"data-testid":"cart-sidebar-currency-switcher",children:[(0,s.jsx)("p",{children:(0,_.tx)("checkout.sidebar.currency_label")}),(0,s.jsx)(h.D,{currency:c,dropdownShown:D,supportedCurrencies:(0,v.B9)(),changeCurrency:e=>{A(e)},shortFormDisplay:!0,paddingOverride:0})]}),I&&R&&(0,s.jsx)("div",{className:m.s.my16.$,style:u.sx.add({marginLeft:"-8px"}).$,"data-testid":"cart-sidebar-billing-interval",children:(0,s.jsxs)(n.b,{legend:(0,s.jsx)(d.q,{children:(0,_.tx)("checkout.sidebar.switch_your_billing_interval")}),value:i,onChange:e=>I(e),children:[(0,s.jsx)(n.c,{value:y.NW.YEAR,label:(0,s.jsxs)(o.J,{className:m.s.flex.itemsCenter.gap16.$,children:[(0,_.tx)("checkout.sidebar.annual")," ",(0,s.jsx)("b",{className:m.s.colorTextSuccess.fontSemiBold.colorBgSuccessTertiary.bRadius2.px4.block.$,style:u.sx.add({fontSize:"10px"}).$,children:(0,_.tx)("checkout.sidebar.save_up_to_20")})]})}),(0,s.jsx)(n.c,{value:y.NW.MONTH,label:(0,s.jsx)(o.J,{children:(0,_.tx)("checkout.sidebar.monthly")})})]})}),(0,s.jsxs)("div",{className:m.s.pt16.$,children:[(0,s.jsx)(T.O,{countByBillableProductKey:t,billingInterval:i,currency:c,isCartReviewSummary:!1,tier:a}),(0,s.jsx)(S._,{})]})]}):(0,s.jsx)("p",{className:m.s.colorTextSecondary.$,children:(0,_.tx)("checkout.sidebar.cannot_calculate_subtotal")})}),(0,s.jsxs)("div",{style:u.sx.add({marginTop:"80px"}).$,children:[B&&(0,s.jsx)(C,{}),(0,s.jsx)(b,{onClick:L,disabled:N||w,htmlAttributes:{"data-testid":"cart-sidebar-button"},trackingProperties:{trackingDescriptor:g.c.CART_SIDEBAR,...M},children:w?V:x}),k&&(0,s.jsx)("div",{className:m.s.mt16.$,"data-testid":"cart-sidebar-footer",children:k})]})]})}function C(){return(0,s.jsx)("div",{className:m.s.my8.$,"data-testid":"cart-sidebar-paid-seat-minimum-banner",children:(0,s.jsx)(c._,{color:c.S.WARNING,text:(0,s.jsx)("p",{style:u.sx.lh14.add({fontSize:"9px"}).$,children:(0,_.tx)("checkout.sidebar.paid_seat_minimum_banner")})})})}},841217:(e,t,a)=>{a.d(t,{d:()=>E});var s=a(486106),r=a(7378),i=a(514228),l=a(612521),n=a(637027),d=a(858013),o=a(303541),c=a(339549),m=a(681712),_=a(307841),u=a(272488),p=a(589278),h=a(929976),g=a(156213),x=a(262856),f=a(831101);function v(e){return"org"===e.variant?(0,s.jsx)(y,{...e}):(0,s.jsx)(j,{...e})}function y(e){let t=e.canSeeBillingAddressExp&&e.billingAddress,a=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,f.$V)(e.shippingAddress);return(0,s.jsxs)("div",{children:[(0,s.jsx)(S,{subtitle:(0,o.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.details":"org_self_serve.review_step.organization_details")}),(0,s.jsx)(T,{header:(0,o.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.company_legal_name":"org_self_serve.review_step.company_name"),value:e.legalName}),(0,s.jsx)(T,{header:(0,o.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.display_name":"org_self_serve.review_step.company_display_name"),value:e.displayName}),!e.canSeeBillingAddressExp&&(0,s.jsx)(T,{header:(0,o.tx)("org_self_serve.review_step.domain"),value:e.domain}),!e.canSeeBillingAddressExp&&e.totalTeams>0&&(0,s.jsx)(T,{header:(0,o.tx)("org_self_serve.review_step.teams"),value:e.totalTeams.toString()}),e.canSeeBillingAddressExp&&(0,s.jsx)(T,{header:(0,o.tx)("org_self_serve.review_step.billing_email"),value:e.userEmail}),e.canSeeBillingAddressExp&&(0,s.jsx)(n.Ph,{onClick:e.navigateToEditOrganizationDetails,trackingEventName:"Edit organization details - checkout flow",trusted:!0,children:(0,o.tx)("org_self_serve.review_step.edit_organization")}),t&&(0,s.jsx)(T,{header:(0,o.tx)("org_self_serve.review_step.billing_address"),value:b(e.billingAddress)}),a&&(0,s.jsx)(T,{header:(0,o.tx)("org_self_serve.review_step.shipping_address"),value:b(e.shippingAddress)}),e.canSeeBillingAddressExp&&(0,s.jsx)(n.Ph,{onClick:e.navigateToEditPaymentDetails,trackingEventName:"Edit payment details - checkout flow",trusted:!0,children:(0,o.tx)("org_self_serve.review_step.edit_payment")})]})}function j(e){let t=(0,i.wA)(),a=(0,i.d4)(e=>e.selectedView),r=e.canSeeBillingAddressExp&&e.billingAddress,l=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,f.$V)(e.shippingAddress);return(0,s.jsxs)("div",{children:[(0,s.jsx)(S,{subtitle:(0,o.tx)("pro_cart.review.details")}),(0,s.jsx)(T,{header:(0,o.tx)("pro_cart.review.team_name"),value:e.displayName}),(0,s.jsx)(T,{header:(0,o.tx)("pro_cart.review.company_name"),value:e.legalName}),r&&(0,s.jsx)(T,{header:(0,o.tx)("pro_cart.review.billing_address"),value:b(e.billingAddress)}),l&&(0,s.jsx)(T,{header:(0,o.tx)("pro_cart.review.shipping_address"),value:b(e.shippingAddress)}),(0,s.jsx)(n.Ph,{onClick:e.canSeeBillingAddressExp?()=>{t(h.sf({...a,paymentStep:f.tn.PAYMENT_AND_ADDRESS}))}:()=>{t((0,g.to)({type:x.L,data:{modalTitle:(0,o.t)("pro_cart.review.edit_details_modal_header"),displayName:e.displayName,legalName:e.legalName,updateNameImmediately:!1,canSeeBillingAddressExp:e.canSeeBillingAddressExp}}))},trackingEventName:"Edit team details - checkout flow",trusted:!0,children:(0,o.tx)(e.canSeeBillingAddressExp?"pro_cart.review.edit_details":"pro_cart.review.edit_all_details")})]})}function S({subtitle:e}){return(0,s.jsx)("div",{className:p.s.font15.fontMedium.lh24.colorText.$,children:e})}function T({header:e,value:t}){return(0,s.jsxs)("div",{className:p.s.flex.flexColumn.mt16.$,children:[(0,s.jsx)("p",{className:p.s.font11.lh16.spacingWide.colorText.$,children:e}),(0,s.jsx)("p",{className:p.s.font13.lh24.fontMedium.colorText.breakWord.mb16.$,children:t})]})}function b(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}var N=a(160942),C=a(514043),w=a(81441);function E(e){let[t,a]=r.useState(!1),p=new C.vr(e.currency),[h,g]=r.useState(!1),x=(0,i.d4)(e=>e.payment),y=(0,i.d4)(e=>e.payment,(e,t)=>h||e===t),j=(0,i.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId].name:e.teamName)??"",S=(0,u.Ik)(),T=x.displayName||j,b=x.legalName||j,E=x.billingPeriod===f.tY.STUDENT,A=!!(0,N.p)(e.selectedView,x),I=A||E,k=x.submitPending||!A&&!t,P=(0,_.sx)(),{estimatedDesignCost:M,estimatedWhiteboardCost:R}=(0,N.m)({currency:e.currency}),O=x.numWhiteboardEditors,D=M(x.numDesignEditors,x.billingPeriod),B=R(O,x.billingPeriod),L=I?0:x.taxes?.total||D+B,V=new URLSearchParams(l.Ay.location.search),U=V.get("onCompleteRedirectFileKey"),$=V.get("onCompleteRedirectNodeId"),{trackingDescriptor:z,buttonText:F,finePrint:G}=(0,m.V8)({isPromo:A,isEducationTeam:E,claimsEndAtDate:x.promo?.claims_end_at}),H=async t=>{t.preventDefault(),await g(!0),e.onClickConfirm()};return(0,s.jsxs)("div",{className:w.HX,children:[(0,s.jsx)("div",{className:w.PT,children:(0,s.jsx)(v,{displayName:T??"",legalName:b??"",canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,variant:"team"})}),(0,s.jsxs)("div",{className:w.Bo,children:[(0,s.jsx)("div",{className:w.TV,"data-testid":"review-step-upgrade-title",children:(0,o.tx)(E?"edu.checkout_team_name":S?x.billingPeriod===f.tY.ANNUAL?"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_yearly":"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_monthly":"pro_cart.review.upgrade_team_name_to_a_professional_team",{teamName:j})}),(!P||!I)&&(0,s.jsx)(m.$c,{payment:y,currency:e.currency,isPromo:A,isEducationTeam:E,hasCartStickerShock:S}),(0,s.jsx)("div",{className:w.pV}),(0,s.jsx)(n.Kz,{multiple:2}),y.taxes&&!!e.billingAddress&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Wy,{mainText:(0,o.tx)("pro_cart.info.subtotal"),priceText:p.formatMoney(A?0:y.taxes.sub_total||0,{showCents:!0}),"data-testid":"subtotal-summary"}),(0,s.jsx)(n.Kz,{multiple:1.5}),(0,s.jsx)(m.Wy,{mainText:(0,o.tx)("pro_cart.review.tax"),priceText:p.formatMoney(y.taxes?.tax_total||0,{showCents:!0}),subText:(0,o.tx)("pro_cart.review.tax_percent",{taxPercent:y.taxes.lines[0]?.tax_percent||0}),"data-testid":"tax-summary"}),(0,s.jsx)(n.Kz,{multiple:1.5})]}),(0,s.jsx)(m.Wy,{"data-testid":"confirm-total-summary",mainText:E?(0,o.tx)("pro_cart.review.total"):(0,o.tx)("pro_cart.review.total_due_today"),priceText:p.formatMoney(L,{showCents:!0,showFullFormat:(0,C._Z)()}),subText:A?(0,o.tx)("pro_cart.review.you_will_not_be_charged_during_the_free_period",{days:y.promo.promo_value}):void 0}),(0,s.jsx)(n.Kz,{multiple:2}),(0,s.jsxs)("div",{children:[G,!A&&(0,s.jsxs)("div",{className:w.Gn,children:[(0,s.jsx)(c.S,{checked:t,onChange:e=>{a(e.currentTarget.checked)}}),(0,s.jsxs)("p",{children:[" ",(0,s.jsx)(m.Um,{})]})]})]}),(0,s.jsx)(n.Kz,{multiple:2.5}),(0,s.jsx)(n.Kz,{multiple:2.5}),(0,s.jsx)(n.vd,{className:w.fK,onClick:H,trackingProperties:{teamId:e.selectedView.teamId,inPublishDraftExp:!!($&&U),trackingDescriptor:z},disabled:k,dataTestId:"confirm-purchase-button",children:x.submitPending?(0,s.jsx)(d.kt,{className:w.S}):F})]})]})}},74041:(e,t,a)=>{a.d(t,{I:()=>m,y:()=>_});var s=a(486106),r=a(637027),i=a(408237),l=a(714743),n=a(303541),d=a(370443),o=a(81441);if(443==a.j)var c=a(100203);var m=(e=>(e.STARTER="starter",e.PRO="pro",e.ORG="org",e))(m||{});function _({type:e,teamName:t,setTeamName:a,onNext:m,upgradeExistingTeam:_,promo:u}){let p={starter:{title:(0,n.tx)("all_carts.create_team.create_a_new_team"),subtitle:(0,n.tx)("all_carts.create_team.after_creating_a_team"),placeholder:(0,n.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:(0,n.tx)("all_carts.create_team.create_team"),trackingDescriptor:d.c.SEND_INVITES},pro:{title:(0,n.tx)("pro_cart.create_team.create_a_professional_team"),subtitle:(0,n.tx)("pro_cart.create_team.itll_have_unlimited_files_and_collaborative_features"),placeholder:(0,n.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:u?(0,n.tx)("pro_cart.sidebar.next_review"):(0,n.tx)("pro_cart.create_team.next_set_editors.seat_rename"),trackingDescriptor:u?d.c.REVIEW:d.c.SET_EDITORS},org:{title:(0,n.tx)("org_self_serve.create_team_step.create_an_org_team"),subtitle:(0,n.tx)("org_self_serve.create_team_step.itll_have_unlimited_files_and_advanced_security"),placeholder:(0,n.t)("org_self_serve.create_team_step.enter_a_name_for_your_team"),next:(0,n.tx)("org_self_serve.create_team_step.next_select_team"),trackingDescriptor:d.c.SELECT_TEAM}}[e];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:o.Fb,children:p.title}),(0,s.jsx)(r.Kz,{multiple:.5}),(0,s.jsx)("div",{className:o.b0,children:p.subtitle}),(0,s.jsxs)("div",{className:o.F0,children:[(0,s.jsx)(l.B,{svg:c.A,className:o.Pr}),(0,s.jsx)(i.L,{className:o.Zy,onChange:e=>a(e.target.value),value:t,placeholder:p.placeholder})]}),(0,s.jsx)(r.vd,{className:o.eA,onClick:m,trackingProperties:{trackingDescriptor:p.trackingDescriptor},disabled:!t.trim(),children:p.next}),!!_&&(0,s.jsx)(r.Us,{className:o.x,onClick:_,trusted:!0,trackingProperties:{trackingDescriptor:d.c.UPGRADE_EXISTING_TEAM},children:(0,n.tx)("pro_cart.create_team.upgrade_an_existing_team_instead")})]})}},279252:(e,t,a)=>{a.d(t,{f:()=>d});var s=a(486106);if(443==a.j)var r=a(443820);var i=a(589278),l=a(941192),n=a(907085);function d(){return(0,s.jsx)(n.x,{title:null,dataTestId:"loading-cart-card",children:(0,s.jsx)("div",{className:i.s.flex.flexColumn.itemsCenter.justifyCenter.wFull.$,style:l.sx.add({height:"208px"}).$,children:(0,s.jsx)(r.k,{})})})}},57596:(e,t,a)=>{a.d(t,{_:()=>o});var s=a(486106),r=a(589278),i=a(160095),l=a(303541),n=a(307841),d=a(370443);function o(){return(0,n.UR)()?(0,s.jsx)("p",{className:r.s.mt8.colorTextSecondary.$,children:(0,l.tx)("checkout.purchase_summary.price_change.text",{link:(0,s.jsx)(i.Ph,{href:"https://help.figma.com/hc/articles/27468498501527#localized-currency",trackingProperties:{trackingDescriptor:d.c.UPDATED_PRICING_FOR_FULL_SEATS},newTab:!0,children:(0,l.tx)("checkout.purchase_summary.price_change.link")})})}):null}},648208:(e,t,a)=>{a.d(t,{O:()=>E});var s=a(486106);if(443==a.j)var r=a(465776);if(443==a.j)var i=a(95419);var l=a(165054);if(443==a.j)var n=a(59973);var d=a(566371),o=a(11),c=a(589278),m=a(303541),_=a(941192),u=a(984674),p=a(692987),h=a(361035),g=a(441925),x=a(847597),f=a(307841),v=a(831799),y=a(84777),j=a(513035),S=a(332483),T=a(217457),b=a(514043),N=a(712921),C=a(831101),w=a(696396);function E({countByBillableProductKey:e,billingInterval:t,currency:a,isCartReviewSummary:r,taxPercent:i,tier:l}){let o=(0,f.UR)(),x=(0,y.jv)({billableProductKeys:S.N_,baseQuery:{currency:a,tier:l,renewalTerm:t,unit:t}}),b=(0,y.jv)({billableProductKeys:S.N_,baseQuery:{currency:a,tier:l,renewalTerm:t,unit:C.NW.MONTH}}),[N,E]=(0,d.mI)(x,b);if(!N.data||!E.data)throw Error("Price data is null");let P=(0,h.s$)(N.data),M=(0,h.s$)(E.data),R=i||0,O=e=>(0,p.up)(e,a,{showCents:r}),D=(0,p.Vh)(e,P),B=(0,p.kV)(e,P,R),L=(0,p.N9)(e,P,R),V=O(D),U=O(B),$=O(L),z=(0,s.jsx)(u.E,{fontWeight:"medium",color:"tertiary",fontSize:11,children:(0,m.tx)("checkout.review_in_tax_disclaimer")}),F=t===C.NW.YEAR;return(0,s.jsx)(v.fu,{name:w.e0.CART_REVIEW_PURCHASE_SUMMARY,properties:{tier:l,billingInterval:t,countBySeatType:(0,g.gS)(e),currency:a,taxPercent:R,subtotal:D,taxTotal:B,total:L},enabled:r,children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:_.sx.add({marginBottom:"24px"}).$,children:Object.keys(e).sort(T.AG).map(t=>(0,s.jsx)(A,{billableProductKey:t,count:e[t]||0,currency:a,isAnnual:F,isCartReviewSummary:r,paymentPrices:P,lineItemPrices:M,hasPriceAsterisk:o&&t===j.ud.EXPERT},t))}),(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.$,"data-testid":"purchase-summary-subtotal",children:[(0,s.jsx)("h3",{className:c.s.fontMedium.if(r,c.s.font13.lh24).$,children:(0,m.tx)("checkout.subtotal")}),(0,s.jsx)("p",{className:c.s.if(r,c.s.font13.lh24).$,children:k({price:V,isCartReviewSummary:r,isAnnual:F})})]}),!r&&(0,s.jsx)(u.E,{fontWeight:"regular",color:"tertiary",fontSize:11,children:(0,m.tx)("checkout.tax_disclaimer_revised",{checkoutStep:z})}),r&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.itemsCenter.$,"data-testid":"purchase-summary-taxes",children:[(0,s.jsxs)("div",{className:c.s.flexColumn.$,children:[(0,s.jsx)("h3",{className:c.s.font13.lh24.$,children:(0,m.tx)("checkout.purchase_summary.tax")}),(0,s.jsx)("h3",{className:c.s.colorTextSecondary.font13.lh24.$,children:(0,m.tx)("pro_cart.review.tax_percent",{taxPercent:R})})]}),(0,s.jsx)("p",{className:c.s.font13.lh24.$,children:k({price:U,isAnnual:F,isCartReviewSummary:r})})]}),(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.py4.$,"data-testid":"purchase-summary-total-due",children:[(0,s.jsx)("h3",{className:c.s.fontMedium.font13.lh24.$,children:(0,m.tx)("checkout.purchase_summary.total_due_today")}),(0,s.jsx)("p",{className:c.s.font13.lh24.$,children:k({price:$,isAnnual:F,isCartReviewSummary:r})})]}),(0,s.jsx)("div",{"data-testid":"purchase-summary-plan-renewal",children:(0,s.jsxs)("p",{className:c.s.font13.lh24.flex.$,children:[(0,s.jsx)(n.w,{className:c.s.minW24.$}),(0,s.jsx)(I,{tier:l,isAnnual:F})]})})]})]})})}function A({billableProductKey:e,count:t,currency:a,isAnnual:r,isCartReviewSummary:n,paymentPrices:d,lineItemPrices:_,hasPriceAsterisk:u}){if(!(0,j.dA)(e))return(0,o.$D)(l.e.MONETIZATION_UPGRADES,Error(`Received invalid billable product key ${e}`)),null;let p=d[e];if((0,i.uy)(p))return(0,o.$D)(l.e.BILLING_EXPERIENCE,Error(`Received null payment price on purchase summaryfor ${e}`)),null;let h=_[e];if((0,i.uy)(h))return(0,o.$D)(l.e.BILLING_EXPERIENCE,Error(`Received null line item price on purchase summary for ${e}`)),null;let g=new b.vr(a),f=g.formatMoney(p*t,{showCents:n}),v=c.s.font13.lh24,y=(0,m.t)("checkout.price_per_month",{price:g.formatMoney(h)});return(0,s.jsxs)("div",{"data-testid":`purchase-summary-${e}-row`,className:c.s.flex.justifyBetween.py8.bb1.bSolid.colorBorder.if(n,c.s.itemsCenter,c.s.itemsStart).$,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:c.s.if(n,v).$,children:(0,m.tx)("checkout.purchase_summary.cart_line_item",{quantity:t,productLabel:(0,x.tI)(e)})}),(0,s.jsx)("p",{className:c.s.colorTextSecondary.if(n,v).$,children:(0,m.tx)(r?"checkout.product_cost_breakdown_annually":"checkout.product_cost_breakdown_monthly",{price:y,quantity:t})})]}),(0,s.jsx)("p",{className:c.s.if(n,v).$,children:k({price:f,isCartReviewSummary:n,isAnnual:r,hasPriceAsterisk:u})})]})}function I({tier:e,isAnnual:t}){switch(e){case N.Ju.ORG:return(0,m.tx)("checkout.purchase_summary.plan_renewal_org");case N.Ju.PRO:return t?(0,m.tx)("checkout.purchase_summary.plan_renewal_pro_annual"):(0,m.tx)("checkout.purchase_summary.plan_renewal_pro_monthly");default:(0,r.wc)(e)}}function k({price:e,isAnnual:t,isCartReviewSummary:a,hasPriceAsterisk:s}){let r=a?e:t?(0,m.t)("checkout.price_per_year",{price:e}):(0,m.t)("checkout.price_per_month",{price:e});return s?(0,m.t)("checkout.purchase_summary.asterisked_price",{price:r}):r}},45116:(e,t,a)=>{a.d(t,{T:()=>q});var s=a(486106),r=a(7378),i=a(656233),l=a(443068),n=a(368426),d=a(553231),o=a(449184),c=a(347284),m=a(589278),_=a(303541),u=a(361035),p=a(441925),h=a(16237),g=a(272488),x=a(831799),f=a(712921),v=a(696396),y=a(514228),j=a(95419),S=a(437088),T=a(38914),b=a(272243),N=a(521428),C=a(891805),w=a(341232),E=a(617427),A=a(830372),I=a(156213),k=a(217457),P=a(102752),M=a(705272);let R=(0,P.Ju)(function(e){let{seatTypes:t,additionalSeatCounts:a,setAdditionalSeats:i,open:l,onClose:n}=e,d=S.hS({open:l,onClose:n}),[c,u]=(0,r.useState)(a),p=e=>t=>{u((0,M.$$)(c,t,e))},h=p(1),g=p(-1),x=r.useCallback(e=>t=>u((0,M.$$)(c,e,t-(c[e]||0))),[c]);return(0,s.jsx)(T.bL,{manager:d,width:264,htmlAttributes:{"data-testid":"additional-seats--modal"},children:(0,s.jsxs)(b.vo,{children:[(0,s.jsx)(b.Y9,{children:(0,s.jsx)(b.hE,{children:(0,_.tx)("checkout.additional_seats.add_or_remove_unassigned_seats")})}),(0,s.jsxs)(b.nB,{children:[(0,s.jsx)("div",{className:m.s.pt8.pb24.colorTextSecondary.$,children:(0,s.jsx)("p",{children:(0,_.tx)("checkout.additional_seats.pre_purchase_seats_for_your_team_to_help_you_budget_and_save_time_later_on")})}),(0,s.jsx)(A.Y,{direction:"vertical",spacing:16,padding:{bottom:16},children:Object.keys(c).sort(k.AG).map(e=>(0,j.uy)(t[e])||(0,j.uy)(c[e])?null:(0,s.jsx)("div",{"data-testid":`additional-seats--${e}`,children:(0,s.jsx)(w.s,{billableProductKey:e,numSeats:c[e],minSeatsCount:0,headerText:(0,_.t)("checkout.additional_seats.seat_label",{seatType:t[e].displayName}),headerSubText:(0,_.t)("checkout.price_per_month",{price:t[e].displayPrice}),incrementSeats:()=>h(e),decrementSeats:()=>g(e),updateAdditionalSeatsText:(0,w.K)(x(e))})},e))})]}),(0,s.jsx)(b.wi,{children:(0,s.jsxs)(b.jk,{children:[(0,s.jsx)(N.$n,{variant:"secondary",onClick:n,htmlAttributes:{"data-testid":"additional-seats--cancel"},children:(0,_.tx)("checkout.additional_seats.cancel")}),(0,s.jsx)(N.$n,{variant:"primary",onClick:()=>{o.az.trackDefinedEvent("monetization_upgrades.cart_additional_seats_changed_in_checkout",{additionalSeatCountsBefore:JSON.stringify(a),additionalSeatCountsAfter:JSON.stringify(c),tier:e.tier}),i(c),n()},htmlAttributes:{"data-testid":"additional-seats--confirm"},children:(0,_.tx)("checkout.additional_seats.confirm")})]})})]})})},"AdditionalSeatsModal");function O({seatTypes:e,additionalSeatCounts:t,setAdditionalSeats:a,tier:r}){let i=(0,y.wA)(),l=(0,h.u)();return(0,s.jsx)(E.$z,{variant:"ghost","aria-label":(0,_.t)("checkout.additional_seats.add_seats_to_assign_later"),htmlAttributes:{"data-testid":"additional-seats--button"},trackingOptions:l,onClick:()=>{i((0,I.to)({type:R,data:{seatTypes:e,additionalSeatCounts:t,setAdditionalSeats:a,tier:r}}))},iconPrefix:(0,s.jsx)(C.A,{}),children:(0,_.tx)("checkout.additional_seats.add_seats_to_assign_later")})}var D=a(632989),B=a(969533),L=a(44647);a(82433);var V=a(261906),U=a(372672),$=a(805373),z=a(602189),F=a(584270),G=a(513035);let H=(0,P.Ju)(function(e){let t=(0,h.u)(),{user:a,seatTypes:r,selectedSeatType:i,setSelectedSeatType:l,open:n,onClose:d,tier:o,teamId:c}=e,u=S.hS({open:n,onClose:d});return(0,s.jsx)(x.fu,{name:"Select User Seat Type Modal",properties:{teamId:c},trackingOptions:t,children:(0,s.jsx)(T.bL,{manager:u,width:480,htmlAttributes:{"data-testid":"select-user-seat-type--modal"},children:(0,s.jsx)(b.vo,{children:(0,s.jsx)(b.nB,{children:(0,s.jsxs)(A.Y,{direction:"vertical",spacing:0,padding:{horizontal:8,vertical:16},children:[(0,s.jsx)("div",{className:m.s.mb24.$,children:(0,s.jsx)(F.j,{user:a,text:(0,_.t)("modify_plan_user_seat_modal.choose_seat",{name:a.handle})})}),(0,s.jsx)(z.m,{currentSeatType:i,setNextSeatType:e=>{l(e),d()},availableSeatCounts:null,pricing:Object.fromEntries(Object.entries(r).filter(([e,t])=>e!==G.Gu.VIEW&&!!t).map(([e,t])=>[e,t.displayPrice])),learnMoreLinkHref:"/pricing",displayPricing:!0,canSetCurrentSeatType:!0,tier:o})]})})})})})},"SelectUserSeatTypeModal"),X="select_seats_table--sidePadding--rdwOD",W="select_seats_table--userColumn--0bg1B",J="select_seats_table--seatColumn--dUkDj",Y="select_seats_table--teamColumn--kxWk-",K="select_seats_table--descriptionColumn--nvbAl";function Z({user:e,seatTypes:t,selectedSeatType:a,changeSeatType:r,tier:i,teamId:l}){let n=(0,y.wA)(),d=(0,U.TA)(),o=e.id===d,c=(0,g.Dj)(),u=i===f.Ju.PRO&&c(),p=()=>{n((0,I.to)({type:H,data:{user:e,seatTypes:t,selectedSeatType:a,setSelectedSeatType:r,tier:i,teamId:l}}))};if((0,j.uy)(t[a]))return null;let h=(0,s.jsxs)(D.E,{className:"xh8yej3 x1whlmpv x133fa97 x19y5rnk x1bamp8i xkezfkh","aria-label":(0,_.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:p,children:[(0,s.jsx)("span",{className:"x1db2dqx",children:(0,s.jsx)(V.B,{type:a,size:"24"})}),(0,s.jsx)("span",{children:t[a].displayName}),(0,s.jsx)(B.O,{className:"x8x9d4c"})]});return(0,s.jsxs)("tr",{"data-testid":`select_seat_row--${e.id}`,children:[(0,s.jsx)("td",{"aria-hidden":!0,className:X}),(0,s.jsx)("td",{className:W,"data-testid":"select_seats_table_user_cell",children:(0,s.jsx)($.az,{entity:e,includeUserEmailAddress:!0,size:24,showIsMe:o})}),(0,s.jsx)("td",{className:J,children:u?h:(0,s.jsx)(N.IK,{variant:"ghost","aria-label":(0,_.t)("checkout.edit_user_seat_name",{name:e.handle}),onClick:p,iconPrefix:(0,s.jsx)(V.B,{type:a,size:"24"}),children:(0,s.jsxs)("span",{className:m.s.flex.justifyBetween.ml2.$,children:[t[a].displayName,(0,s.jsx)(L.k,{})]})})}),i===f.Ju.ORG&&(0,s.jsx)("td",{className:Y,children:e.teams}),(0,s.jsx)("td",{className:K,children:t[a].description}),(0,s.jsx)("td",{"aria-hidden":!0,className:X})]})}function q({users:e,seatTypes:t,selectSeatsState:a,changeUserSeatType:y,setAdditionalSeats:j,tier:S}){let T=(0,r.useRef)(null),b=(0,h.u)(),N=function({tableContainerRef:e}){let[t,a]=r.useState(window.innerHeight),s=()=>{a(window.innerHeight)};r.useEffect(()=>(window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}),[]);let i=e.current?.getBoundingClientRect();return Math.max(t-(i?.top||0)-49-8-56,150)}({tableContainerRef:T}),[C,w]=r.useState(a),[E,A]=r.useState(!1),I=r.useMemo(()=>{let t=[...e];return(0,i.v7)(t,e=>e.handle,{isDescending:E}),t},[e,E]),k=(0,u.UL)((0,u.iB)(a.selectedUserSeatTypes)),P=(0,u.UL)(a.additionalSeatCounts),M=(0,g.Dj)(),R=S===f.Ju.PRO&&M();return(0,s.jsx)(x.fu,{name:v.e0.SELECT_SEATS_TABLE,properties:{selectedUserSeatTypes:(0,p.Tj)(C.selectedUserSeatTypes),countBySeatType:(0,p.gS)((0,u.O$)(C.selectedUserSeatTypes,C.additionalSeatCounts)),selectedTeamIds:(0,p.gu)(C.selectedTeamIds),userIds:(0,p.gu)(e.map(e=>e.id))},trackingOptions:b,children:(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"select_seats_table--tableContainer--ft8tm",ref:T,"data-testid":"select-seats-table",children:[(0,s.jsx)(c.P,{maxHeight:N,className:"select_seats_table--scrollContainer--HMiGx",hideScrollbar:!0,horizontalScrollingDisabled:!0,children:(0,s.jsxs)("table",{className:"select_seats_table--table--hBe3G",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{"aria-hidden":!0,className:X}),(0,s.jsxs)("th",{className:W,children:[(0,_.tx)("checkout.select_seats_table.user_column")," ",(0,s.jsx)("div",{className:m.s.inlineBlock.$,"data-testid":"select-seats-table-sort-users-button",children:(0,s.jsx)(l.K,{onClick:()=>A(e=>!e),"aria-label":(0,_.t)("checkout.select_seats_table.sort"),children:E?(0,s.jsx)(n.d,{"data-testid":"select-seats-table-icon-arrow-up"}):(0,s.jsx)(d.Q,{"data-testid":"select-seats-table-icon-arrow-down"})})})]}),(0,s.jsx)("th",{className:J,children:R?(0,_.tx)("checkout.select_seats_table.seat_column_exp"):(0,_.tx)("checkout.select_seats_table.seat_column")}),S===f.Ju.ORG&&(0,s.jsx)("th",{className:Y,children:(0,_.tx)("checkout.select_seats_table.team_column")}),(0,s.jsx)("th",{className:K,children:(0,_.tx)("checkout.select_seats_table.description_column")}),(0,s.jsx)("th",{"aria-hidden":!0,className:X})]})}),(0,s.jsx)("tbody",{children:I.map(e=>(0,s.jsx)(Z,{user:e,seatTypes:t,selectedSeatType:a.selectedUserSeatTypes[e.id],changeSeatType:t=>{o.az.trackDefinedEvent("monetization_upgrades.user_seat_selection_changed_in_checkout",{targetUserId:e.id,previousSeatType:a.selectedUserSeatTypes[e.id],newSeatType:t,tier:S,teamId:S===f.Ju.PRO?C.selectedTeamIds[0]:void 0}),y(e.id,t)},tier:S,teamId:S===f.Ju.PRO?C.selectedTeamIds[0]:void 0},e.id))})]})}),(0,s.jsxs)("div",{className:m.s.py12.px24.bt1.bSolid.colorBorder.flex.itemsCenter.justifyBetween.$,children:[(0,s.jsx)(O,{tier:S,seatTypes:t,additionalSeatCounts:a.additionalSeatCounts,setAdditionalSeats:j}),(0,s.jsx)("p",{children:(0,_.tx)("checkout.select_seats_table.team_members_count",{assignedSeatsText:(0,_.tx)("checkout.select_seats_table.assigned_seats",{count:k}),unassignedSeatsText:(0,_.tx)("checkout.select_seats_table.unassigned_seats",{count:P})})})]})]})})})}},894125:(e,t,a)=>{a.d(t,{kR:()=>b,vU:()=>N});var s=a(486106),r=a(514228),i=a(465776),l=a(449184),n=a(169182),d=a(975542),o=a(303541);if(443==a.j)var c=a(976345);var m=a(929976),_=a(370443),u=a(831799),p=a(394825),h=a(372672),g=a(2942),x=a(712921),f=a(831101),v=a(707808),y=a(81441);function j(e){return(0,s.jsx)(u.$z,{type:"button",className:y.Nd,trackingProperties:{trackingDescriptor:_.c.CANCEL},onClick:e.onClick,dataTestId:"upgrade-breadcrumb-menu-cancel",children:(0,o.tx)("pro_cart.breadcrumbs.cancel")})}var S=(e=>(e[e.PLAN_COMPARISON=0]="PLAN_COMPARISON",e[e.CREATE_TEAM=1]="CREATE_TEAM",e[e.ADD_COLLABORATORS=2]="ADD_COLLABORATORS",e[e.ADJUST_EDITORS=3]="ADJUST_EDITORS",e[e.SET_EDITORS=4]="SET_EDITORS",e[e.PAYMENT_AND_ADDRESS=5]="PAYMENT_AND_ADDRESS",e[e.CONFIRM_PAY=6]="CONFIRM_PAY",e))(S||{});function T(e,t,a,s){let r=t===f.tY.STUDENT,l=[];switch(e){case v.SC.CREATE_AND_UPGRADE:l.push(0),l.push(1),r?l.push(4):a||(l.push(4),l.push(5)),l.push(6);break;case v.SC.UPGRADE_EXISTING_TEAM:s===v.Sc.TEAM?(l.push(3),r||l.push(5)):r?(l.push(0),l.push(3)):a?l.push(0):(l.push(0),l.push(4),l.push(5)),l.push(6);break;case v.SC.CREATE:l.push(1),l.push(2),l.push(0),s===v.Sc.TEAM&&(r?l.push(4):a||(l.push(4),l.push(5)),l.push(6));break;default:(0,i.xb)(e)}return l.map(e=>(function(e){switch(e){case 0:return{step:f.tn.PLAN_COMPARISON,text:(0,o.t)("pro_cart.breadcrumbs.choose_plan")};case 1:return{step:f.tn.CREATE_TEAM,text:(0,o.t)("pro_cart.breadcrumbs.create_team")};case 2:return{step:f.tn.ADD_COLLABORATORS,text:(0,o.t)("pro_cart.breadcrumbs.add_team_members")};case 3:return{step:f.tn.CHOOSE_PLAN,text:(0,o.t)("pro_cart.breadcrumbs.adjust_editors.seat_rename")};case 4:return{step:f.tn.CHOOSE_PLAN,text:(0,o.t)("pro_cart.breadcrumbs.set_editors.seat_rename")};case 5:return{step:f.tn.PAYMENT_AND_ADDRESS,text:(0,o.t)("pro_cart.breadcrumbs.payment_information")};case 6:return{step:f.tn.CONFIRM_PAY,text:(0,o.t)("pro_cart.breadcrumbs.review")}}})(e))}function b(e,t,a,s,r,i){let l=T(t,a,s,r).map(e=>e.step),n=l.indexOf(e);return i=i||l[0],-1===n?i:l[n+1]}function N(e){let{selectedView:t}=e,{teamId:a,paymentStep:i,teamFlowType:o}=t,_=(0,r.wA)(),u=(0,r.d4)(e=>e.payment.billingPeriod),S=h.iZ()?.id,b=T(o,u,(0,r.d4)(e=>e.payment.promo),e.selectedView.planType||v.Sc.UNDETERMINED),N=b.findIndex(e=>e.step===i);return(0,s.jsxs)("div",{className:y.N6,"data-testid":"cart-breadcrumb-menu-pro",children:[(0,s.jsx)(j,{onClick:()=>{((0,n.sj)(),e.isCampfireCart?(0,g.OI)(_):(0,g.Mt)(_),(0,v.h5)(o)&&null===a&&(0,p.Al)(S),S)?a&&(!t.previousView||"fullscreen"!==t.previousView.view)?_(c._l({workspace:{userId:S,teamId:a,orgId:null},view:{view:"recentsAndSharing"}})):_(m.sf(t.previousView||{view:"recentsAndSharing"})):_(m.sf(t.previousView||(a?{view:"team",teamId:a}:{view:"recentsAndSharing"}))),t.callbackOnClose?.()}}),b.map((r,n)=>(0,s.jsx)(d.On,{selected:i===r.step,number:n+1,text:r.text,canClick:n<N,lightText:!0,onClick:()=>{l.az.trackDefinedEvent("monetization_upgrades.checkout_breadcrumb_navigation",{fromStep:i,toStep:r.step,tier:x.Ju.PRO,isCampfireCart:!!e.isCampfireCart,teamId:a??void 0}),_(m.sf({...t,paymentStep:r.step,billingPeriod:u===f.tY.UNSPECIFIED?void 0:u,planType:(0,v.ck)(o,r.step)?v.Sc.UNDETERMINED:t.planType,teamFlowType:(0,v.jX)(o)&&r.step===f.tn.PLAN_COMPARISON?v.SC.CREATE_AND_UPGRADE:t.teamFlowType}))}},r.text))]})}},93177:(e,t,a)=>{a.r(t),a.d(t,{TeamUpgradePageBillingRemodel:()=>eK});var s=a(486106),r=a(7378),i=a(514228),l=a(465776),n=a(165054),d=a(449184),o=a(416935),c=a(612521),m=a(207101),_=a(39751),u=a(169182),p=a(566371),h=a(598111),g=a(141320),x=a(751457),f=a(490799),v=a(589278),y=a(573154),j=a(160095),S=a(303541),T=a(941192),b=a(692987),N=a(361035),C=a(441925),w=a(109538),E=a(641938),A=a(282622),I=a(580036),k=a(74041),P=a(279252),M=a(894125),R=a(637027),O=a(81441);function D({disableInviteButton:e,collaborators:t,setCollaborators:a,willSendInvites:r,skipInviteStep:i}){let l=(e,s)=>{s>=t.length||a(t.map((t,a)=>a===s?e:t))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:O.Fb,children:(0,S.tx)("pro_cart.add_collaborators.add_collaborators_to_your_team")}),(0,s.jsx)(R.Kz,{multiple:.5}),(0,s.jsx)("h2",{className:O.b0,children:(0,S.tx)("pro_cart.add_collaborators.well_add_them_to_your_team")}),(0,s.jsx)(R.Kz,{multiple:4}),(0,s.jsxs)("div",{style:T.sx.flex.flexColumn.add({maxWidth:"400px"}).mlAuto.mrAuto.gap12.$,children:[t.map((e,t)=>(0,s.jsx)(R.il,{value:e,onChange:e=>l(e.target.value,t),placeholder:(0,S.t)("pro_cart.add_collaborators.email")},`collaborator-email-input-${t}`)),(0,s.jsx)(R.Us,{onClick:()=>{a([...t,""])},trusted:!0,style:T.sx.alignLeft.font14.fontMedium.$,children:(0,S.tx)("pro_cart.add_collaborators.add_another")})]}),(0,s.jsxs)("div",{style:T.sx.flex.flexColumn.itemsCenter.mlAuto.mrAuto.mt24.gap24.fontMedium.font14.$,children:[(0,s.jsx)(R.vd,{disabled:!!e,style:T.sx.font14.add({height:"44px",width:"110px"}).$,onClick:r,children:(0,S.tx)("pro_cart.add_collaborators.sent_invites")}),(0,s.jsx)(R.Ph,{trusted:!0,onClick:i,style:T.sx.colorTextSecondary.alignCenter.$,children:(0,S.tx)("pro_cart.add_collaborators.skip_for_now")})]})]})}var B=a(300137),L=a(815805),V=a(950641),U=a(61587),$=a(191312),z=a(211706);function F({chooseStarterPlan:e,chooseEduPlan:t,chooseProPlan:a,chooseOrgPlan:r,currency:i,updateCurrency:l,upgradeExistingTeam:n}){let d=(0,L.U)(i);return(0,s.jsxs)("div",{style:T.sx.grid.gap16.p36.pb24.selectNone.mxAuto.add({width:"945px",maxWidth:"1049px"}).$,children:[(0,s.jsx)(V.f,{currency:i,chooseStarterPlan:e,chooseEduPlan:t,chooseProPlan:a,chooseOrgPlan:r,updateCurrency:l,withUpgradeExistingTeamOption:n,prices:d,teamPlan:$.Ag.STARTER}),(0,s.jsx)(z.hK,{height:8}),(0,s.jsx)(U.L,{})]})}var G=a(307841),H=a(16237),X=a(976345),W=a(712384),J=a(929976),Y=a(156213),K=a(482142),Z=a(925885),q=a(985254),Q=a(272488),ee=a(370443),et=a(831799),ea=a(84777),es=a(795870),er=a(513035),ei=a(332483),el=a(394825),en=a(475472),ed=a(298277),eo=a(212807),ec=a(372672),em=a(518077),e_=a(713695),eu=a(514043),ep=a(345997),eh=a(2942),eg=a(642025),ex=a(465071),ef=a(193867),ev=a(165519),ey=a(712921),ej=a(831101),eS=a(707808),eT=a(696396),eb=a(223084),eN=a(113686),eC=a(270045),ew=a(274480),eE=a(714743),eA=a(907085),eI=a(314264),ek=a(148137),eP=a(724099),eM=a(190597),eR=a(364616);let eO=(0,et.h3)(e=>{let{dataTestId:t,children:a,...r}=e;return(0,s.jsx)("select",{...r,"data-testid":t,children:a})});function eD(e){let t=e.paymentMethods.filter(e=>e.type===ek.lB.CARD||e.type===ek.lB.SEPA);return(0,s.jsx)(s.Fragment,{children:t.map(e=>{let t=function(e){if(e.type===ek.lB.CARD)return function(e){let t=e.display_brand in eU?eU[e.display_brand]:(0,S.t)("checkout.other");return`${t} \u2022\u2022\u2022\u2022 ${e.last4}`}(e.object);if(e.type===ek.lB.SEPA)return function(e){let t=e.country?e.country.toUpperCase():(0,S.t)("checkout.other");return`SEPA ${t} \u2022\u2022\u2022\u2022 ${e.last4}`}(e.object);throw Error(`Unknown payment method type: ${e.type}`)}(e),a=(0,N.DS)(e.address);return(0,s.jsxs)("option",{className:v.s.flex.justifyBetween.gap2.$,value:e.id,children:[(0,s.jsx)("span",{className:v.s.font13.$,children:t}),a&&(0,s.jsx)("span",{className:v.s.colorTextSecondary.font13.$,children:` - ${a}`})]},e.id)})})}function eB(e){return(0,s.jsx)("div",{className:eM.ri,children:(0,s.jsxs)("div",{className:v.s.flex.relative.wFull.itemsCenter.$,children:[(0,s.jsx)(eO,{name:"selected_saved_payment_method",trackingFieldName:"SelectExistingPaymentMethod",trackingPopulationLevel:e.selectedPaymentMethod?.id&&e.enableSavedPaymentMethods?eI._R.POPULATED_COMPLETE:eI._R.NOT_POPULATED,onChange:t=>{let a=t.target.value,s=e.paymentMethods.find(e=>e.id===a);s&&e.setSelectedPaymentMethod(s)},value:e.selectedPaymentMethod?.id,children:(0,s.jsx)(eD,{paymentMethods:e.paymentMethods})}),(0,s.jsx)(eE.B,{style:T.sx.add({position:"absolute",right:"16px",pointerEvents:"none",color:"var(--color-icon)",fill:"var(--color-icon)"}).$,svg:eR.A})]})})}function eL(e){let{enableSavedPaymentMethods:t,setEnableSavedPaymentMethods:a}=e,r=(0,s.jsx)(eC.J,{children:(0,s.jsx)("span",{className:v.s.font13.$,children:(0,S.t)("checkout.use_saved_payment_method")})});return(0,s.jsx)("div",{className:v.s.mb6.if(!t,v.s.mb0).$,children:(0,s.jsx)(ew.S,{label:r,onChange:e=>{a(e)},checked:t})})}function eV(e){let{paymentMethods:t,setSelectedPaymentMethod:a,setEnableSavedPaymentMethods:r,enableSavedPaymentMethods:l,selectedPaymentMethod:n}=e,{error:d,errorCode:o}=(0,i.d4)(e=>e.payment),c=!!d&&null===o;return(0,s.jsxs)(eA.x,{title:(0,S.t)("checkout.payment_details"),children:[t.length>0&&(0,s.jsxs)("div",{className:v.s.alignLeft.$,children:[(0,s.jsx)(eL,{enableSavedPaymentMethods:l,setEnableSavedPaymentMethods:r}),l&&(0,s.jsx)(eB,{selectedPaymentMethod:n,enableSavedPaymentMethods:l,setSelectedPaymentMethod:a,paymentMethods:t})]}),(0,s.jsx)("div",{className:v.s.alignLeft.$,children:(0,s.jsx)(eP.S,{billingAddress:e.billingAddress,canSeeBillingAddressExp:e.canSeeBillingAddressExp,createPaymentElement:e.createPaymentElement,error:e.error,hide:e.enableSavedPaymentMethods,isCampfireCart:e.isCampfireCart,legalCompanyName:e.legalCompanyName,nameOnPaymentMethod:e.nameOnPaymentMethod,onRegionalVatGstIdChange:e.onRegionalVatGstIdChange,onVatGstIdChange:e.onVatGstIdChange,paymentError:c?d:void 0,paymentFlow:e.paymentFlow,paymentMethodType:e.paymentMethodType,regionalVatGstId:e.regionalVatGstId,shippingAddress:e.shippingAddress,unmountPaymentElement:e.unmountPaymentElement,updateBillingAddress:e.updateBillingAddress,updateLegalCompanyName:e.updateLegalCompanyName,updateNameOnPaymentMethod:e.updateNameOnPaymentMethod,updateShippingAddress:e.updateShippingAddress,vatGstId:e.vatGstId})})]})}let eU={american_express:"American Express",cartes_bancaires:"Cartes Bancaires",diners_club:"Diners Club",discover:"Discover",eftpos_australia:"Eftpos Australia",interac:"Interac",jcb:"JCB",mastercard:"Mastercard",union_pay:"Union Pay",visa:"Visa"};var e$=a(95419),ez=a(142901),eF=a(705272),eG=a(45116);function eH(e){let t={...e.additionalSeatCounts};return Object.values(e.selectedUserSeatTypes).forEach(e=>{(0,er.a_)(e)&&e in t&&t[e]++}),{countBySeatType:t,selectedUserSeatTypes:e.selectedUserSeatTypes}}let eX=(e,t,a,s)=>{let[i,l]=(0,r.useState)(()=>{let r=function(e,t,a){let s;let{countBySeatType:r,selectedUserSeatTypes:i}=e||{countBySeatType:{},selectedUserSeatTypes:{}},l=t.map(e=>e.user.id),n=(0,eF.md)(i,l);return t.forEach(e=>{let t=e.user.id;n[t]||(n[t]=e.recommended_seat_type?.key??er.Gu.VIEW)}),s=(0,eF.Ed)(r)?{...r}:{developer:0,collaborator:0,expert:0},Object.values(n).forEach(e=>{"view"!==e&&(0,e$.Vq)(s[e])&&s[e]>0&&s[e]--}),(0,eF.MZ)(a,n,s)}(a,t,e);return s(eH(r)),r}),n=(0,r.useCallback)(e=>{try{l(t=>{let a=function(e,t){let a=(0,eF.n5)(e,t);switch(a.type){case"success":return a.value;case"validation":throw Error("failed validation");case"error":throw Error("sent error")}}(t,e);return s(eH(a)),a})}catch(e){}},[s]);return{changeUserSeatType:(0,r.useCallback)((e,t)=>{n({type:"changeSeatType",userId:e,seatType:t})},[n]),setAdditionalSeats:e=>n({type:"setAdditionalSeats",additionalSeatCounts:e}),selectSeatsState:i}};function eW({teamId:e,currency:t,renewalTerm:a,eligibleTeamUsers:r,initCampfireSeats:i,onUpdateCampfireSeats:l}){let n=(0,ez.G)({currency:t,tier:ey.Ju.PRO,renewalTerm:a,showCents:!1}),[d]=(0,p.mI)(n);if(null===d.data)throw Error("Seat types data is null");let o=d.data,{changeUserSeatType:c,selectSeatsState:m,setAdditionalSeats:_}=eX(e,r,i,l),u=r.map(e=>{let t=e.user;return{id:t.id,img_url:t.img_url,handle:t.handle,email:t.email}});return(0,s.jsx)(eG.T,{users:u,seatTypes:o,changeUserSeatType:c,selectSeatsState:m,setAdditionalSeats:_,tier:ey.Ju.PRO})}let eJ=e_.M4.Query({fetch:async e=>(await eb.V.getEligibleUpgradeData(e)).data.meta,stalenessPolicy:"never"});function eY(e){let t;let a=(0,ec.iZ)(),l=a?.id,n=(0,u.DC)(),x=(0,i.d4)(e=>e.payment),j=(0,i.d4)(e=>e.teams),R=e.selectedView.paymentStep,O=(0,i.d4)(e=>e.roles.byTeamId),B=(0,ex.D6)("TeamUpgradeCart"),L=B.data?.permission===$.Xn.ADMIN,[V,U]=(0,r.useState)(n?.team_name??""),[z,G]=(0,r.useState)(el.kt),ee=(0,ep.PS)((0,eo.FC)()),ed=(0,Q.e5)({userId:l,teams:Object.values(j),rolesByTeamId:O}),[e_,eb]=(0,r.useState)(!1),[eC,ew]=(0,r.useState)(n?.currency||x.currency||(0,eu.LN)()),eE=e=>{ew(e),to(K.MN({currency:e}))},eA=x.billingPeriod,{editorStatusChanges:eI}=x,{ignoreCurrentPlan:ek}=e.selectedView,eP=e.selectedView.teamId,eM=(0,i.d4)(t=>(0,ef.Np)(t,{...e.selectedView,paymentStep:ej.tn.CONFIRM_PAY})),eR=(0,i.d4)(t=>(0,ef.Np)(t,{...e.selectedView,paymentStep:ej.tn.PAYMENT_AND_ADDRESS})),eO=(0,Q.Mh)(),eD=void 0===x.cartSelections,eB=(0,_.ZC)(eD),eL=ei.N_.dict(e=>x.cartSelections?.countBySeatType?.[e]||0),eU=eA&&(0,ep.ne)(eA)||ej.NW.YEAR,e$=(0,ea.jv)({billableProductKeys:ei.N_,baseQuery:{currency:eC,tier:ey.Ju.PRO,renewalTerm:eU,unit:eU}}),[ez]=(0,p.mI)(e$),eF=(0,ea.vu)(ez);if(null===eF.data)throw Error("Price data is null");let eG=eF.data,eH=(0,N.s$)(eG),eX=(0,b.Vh)(eL,eH),[eY,eK]=(0,r.useState)([]),[eq,eQ]=(0,r.useState)(null),{createPaymentElement:e0,unmountPaymentElement:e1,savePayment:e5,saveWithPaymentMethod:e2,billingAddress:e7,updateBillingAddress:e3,shippingAddress:e4,updateShippingAddress:e8,customerLegalName:e9,setCustomerLegalName:e6,nameOnPaymentMethod:te,setNameOnPaymentMethod:tt,vatGstId:ta,setVatGstId:ts,regionalVatGstId:tr,setRegionalVatGstId:ti,paymentMethodType:tl,error:tn}=(0,es.lo)({setupIntentParams:{redirect_url:eM,error_redirect_url:eR,subtotal_estimate:eX,currency:eC,teamId:eP??void 0},setPaymentMethods:eK,customerInfo:{teamId:eP},paymentFlowSource:es.wn.PRO_UPGRADE,currency:eC,billingPeriod:eA,defaultCountry:(0,eu.ub)(),initialBillingAddress:n?.billing_address,initialNameOnPaymentMethod:n?.name_on_payment_method,initialShippingAddress:n?.shipping_address,initialCustomerLegalName:n?.customer_legal_name,initialVatGstId:n?.vat_gst_id,initialRegionalVatGstId:n?.regional_vat_gst_id,teamName:n?.team_name||V,canSeeBillingAddressExp:eO,isCheckout:!0,isCampfireCart:!0}),td=tn?.code===es.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,to=(0,i.wA)(),tc=(0,eh.Ud)({teamId:eP,canSeeBillingAddressExp:eO}),[tm]=(0,p.IT)(eJ({teamId:eP}),{enabled:!!eP}),t_="loaded"!==tm.status,tu={user:{id:l,img_url:a.img_url,handle:a.handle,email:a.email},id:"",team_id:eP,recommended_seat_type:{key:er.ud.EXPERT,license_types:[]}};(0,r.useEffect)(()=>{"loaded"===tm.status&&(0,C.R9)({eligibleTeamIds:[eP],eligibleTeamUsers:tm.data.eligible_team_users,tier:ey.Ju.PRO,step:R})},[tm]);let tp=td||x.submitPending,th=r.useCallback(()=>{to(J.sf({...e.selectedView,paymentStep:ej.tn.CHOOSE_PLAN,previousView:e.selectedView.previousView,ignoreCurrentPlan:ek,billingPeriod:eA}))},[to,e.selectedView,ek,eA]),tg=eP?j[eP]?.name:V,tx=x.displayName||tg;(0,el.pI)({loadingPaidEditors:tc,teamId:eP,teamName:eP?void 0:V,setTeamName:eP?void 0:U,collaborators:eP||e.selectedView.teamFlowType!==eS.SC.CREATE?void 0:z,setCollaborators:eP||e.selectedView.teamFlowType!==eS.SC.CREATE?void 0:G});let tf=(0,i.d4)(e=>e.currentUserOrgId),tv=ek?null:tf,ty=(0,i.d4)(e=>tv?e.orgById[tv]:null),tj=(0,eN.Q)({currentOrgId:tv,currentTeamId:null}),tS=tj.data?.currentUser?.baseOrgUser?.workspaceUsers,tT=tS?.find(e=>e?.isMainWorkspace)?.workspaceId,{cannotCreateTeamReason:tb}=(0,em.LM)(ty,tT??null),tN=(0,i.d4)(e=>(0,eg.isOrgUserExternallyRestrictedFromState)(e));(0,m.h)(()=>{to(q.b({entered_pro_cart_flow:!0}))}),(0,m.h)(()=>{let e=document.createElement("div");return e.style.position="fixed",e.style.inset="0",e.style.background="var(--color-bg-secondary)",e.style.zIndex="-1",document.body.appendChild(e),()=>{document.body.removeChild(e)}});let[tC,tw]=(0,r.useState)(!1);(0,r.useEffect)(()=>{R===ej.tn.PAYMENT_AND_ADDRESS&&td&&th()}),(0,r.useEffect)(()=>{R===ej.tn.CONFIRM_PAY&&!tc&&eD&&(0,d.sx)("pro_cart_selections_undefined_on_review_step",{teamId:eP,userId:l})},[eD,tc,R,l,eP]),(0,r.useEffect)(()=>{R===ej.tn.CONFIRM_PAY&&eB&&!eD&&(0,d.sx)("monetization_upgrades.hydrated_pro_cart_selections",{teamId:eP,loadingPaidEditors:tc})},[eD,eB,tc,R,eP]);let tE=(0,i.d4)(e=>!!e.user&&(0,g.cn)(e.user));(0,r.useEffect)(()=>{tE&&e.selectedView.isEduTeam?to(K.Lo({billingPeriod:ej.tY.STUDENT})):e.selectedView.isEduTeam&&to(K.Lo({billingPeriod:ej.tY.UNSPECIFIED}))},[to,e.selectedView.isEduTeam,tE]),(0,r.useEffect)(()=>{e.selectedView.teamFlowType===eS.SC.CREATE_AND_UPGRADE&&(tN||tb===em.z4.TEAM_CREATION_CONTROL)&&(c.Ay.redirect("/"),to(y.s.error((0,S.t)("team_creation.missing_team_creation_controls"))))},[e.selectedView.teamFlowType,tN,tb,to]);let tA=x.currencyToSwitch;(0,r.useEffect)(()=>{tA&&ew(tA)},[ew,tA]),(0,r.useEffect)(()=>{eY[0]&&(eQ(eY[0]),eb(!0))},[eY,eQ,eb]);let tI=eA===ej.tY.STUDENT,tk=z.filter(e=>e&&e.trim()).map(e=>e.trim()),tP=tk.filter(e=>!(0,o.xf)(e)),tM=!!a&&tk.filter(e=>e===a.email).length>0,tR=async t=>{t.preventDefault();let a=new URL(window.location.href).searchParams,s=a.get("onCompleteRedirectFileKey"),r=a.get("onCompleteRedirectNodeId");t.currentTarget&&t.currentTarget.blur();let i=(0,M.kR)(e.selectedView.paymentStep,e.selectedView.teamFlowType,eA,x.promo,e.selectedView.planType||eS.Sc.UNDETERMINED);R===ej.tn.CREATE_TEAM&&(U(V.trim()),to(J.sf({...e.selectedView,teamId:null,paymentStep:i,ignoreCurrentPlan:ek,billingPeriod:eA}))),R===ej.tn.ADD_COLLABORATORS&&(tP.length?to(y.s.error((0,S.t)("pro_cart.add_collaborators.error.email_is_invalid",{string:tP[0]}))):tM?to(y.s.error((0,S.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))):to(J.sf({...e.selectedView,paymentStep:i,ignoreCurrentPlan:ek,billingPeriod:eA}))),R===ej.tn.CHOOSE_PLAN?tI?to(J.sf({...e.selectedView,paymentStep:i,billingPeriod:ej.tY.STUDENT,ignoreCurrentPlan:ek})):(to(K.Je({editorStatusChanges:eI})),to(J.sf({...e.selectedView,paymentStep:i,billingPeriod:x.billingPeriod,...s?{searchParams:{onCompleteRedirectFileKey:s,onCompleteRedirectNodeId:r}}:{},ignoreCurrentPlan:ek}))):R===ej.tn.PAYMENT_AND_ADDRESS&&(to(K.I2({submitPending:!0})),e_&&eq?await e2(eq):await e5(),to(K.I2({submitPending:!1})))},tO=e.selectedView.teamFlowType===eS.SC.CREATE?()=>{to((0,en.KQ)({teamName:V,orgAccess:$.bU.PUBLIC,inviteEmails:tk,teamFlowType:e.selectedView.teamFlowType,onSuccess:()=>{(0,el.Al)(a?.id)},ignoreCurrentPlan:ek}))}:void 0;[eS.SC.CREATE_AND_UPGRADE,eS.SC.UPGRADE_EXISTING_TEAM].includes(e.selectedView.teamFlowType)&&(1===ee.length?t=t=>{t=t||e.selectedView.billingPeriod;let a=eS.SC.UPGRADE_EXISTING_TEAM;to(J.sf({...e.selectedView,teamFlowType:a,teamId:ee[0].id,paymentStep:(0,M.kR)(e.selectedView.paymentStep,a,t||null,x.promo,eS.Sc.TEAM,ej.tn.CHOOSE_PLAN),planType:eS.Sc.UNDETERMINED,billingPeriod:t,ignoreCurrentPlan:ek}))}:ee.length>1&&(t=e=>{e&&to(K.Lo({billingPeriod:e})),to((0,Y.to)({type:w.dR,data:{plan:E.I.PRO,upsellSource:ev.b.UPGRADE_EXISTING_FROM_TEAM_CREATION}}))}));let tD=a&&el.lX({teamId:eP,userId:a.id})?.is3DS;return e.selectedView.teamFlowType===eS.SC.CREATE_AND_UPGRADE&&(tN||tb===em.z4.TEAM_CREATION_CONTROL)?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(et.fu,{name:eT.e0.TEAM_CHECKOUT_FLOW,properties:{teamId:e.selectedView.teamId,planType:e.selectedView.planType,entryPoint:e.selectedView.entryPoint,step:R,currency:eC,renewalTerm:eU,prices:(0,C.Jh)(eG)},enabled:!(tc||t_),trackingOptions:(0,H.u)(),children:(0,s.jsxs)("div",{"data-testid":"team-upgrade-billing-remodel",className:v.s.selectNone.$,children:[(0,s.jsx)(M.vU,{selectedView:e.selectedView,isCampfireCart:!0}),(0,s.jsxs)("div",{style:T.sx.mxAuto.add({padding:"98px 48px 48px",maxWidth:"1400px"}).$,children:[R!==ej.tn.CREATE_TEAM&&(0,s.jsx)(eZ,{step:R,teamName:tg??"",renewalTerm:eU}),R===ej.tn.PLAN_COMPARISON&&(0,s.jsx)(F,{chooseStarterPlan:t?void 0:tO,chooseEduPlan:()=>{eP?to(K.Vm({teamId:eP})):to((0,Y.to)({type:W.q}))},chooseProPlan:t=>{to(K.Lo({billingPeriod:t}));let a=(0,eS.h5)(e.selectedView.teamFlowType)?e.selectedView.teamFlowType:eS.SC.CREATE_AND_UPGRADE;to(J.sf({...e.selectedView,teamFlowType:a,paymentStep:(0,M.kR)(e.selectedView.paymentStep,a,t,x.promo,eS.Sc.TEAM),billingPeriod:t,planType:eS.Sc.TEAM,openInNewTab:!1,ignoreCurrentPlan:ek}))},chooseOrgPlan:()=>{to(K.Bq({currency:eC,newTeamProps:{teamFlowType:e.selectedView.teamFlowType,newTeamName:V,inviteEmails:tk,previousView:e.selectedView},upsellSource:ev.b.UPGRADE_NEW_TEAM_V2}))},currency:eC,updateCurrency:eE,upgradeExistingTeam:t}),R===ej.tn.CREATE_TEAM&&(0,s.jsx)(k.y,{type:e.selectedView.teamFlowType===eS.SC.CREATE?k.I.STARTER:k.I.PRO,teamName:V,setTeamName:U,onNext:tR,upgradeExistingTeam:t?()=>t?.(eA):void 0,promo:x.promo}),R===ej.tn.ADD_COLLABORATORS&&(0,s.jsx)(D,{disableInviteButton:!tk.length,collaborators:z,setCollaborators:G,willSendInvites:tR,skipInviteStep:()=>{if(G(el.kt),l){let e=(0,el.lX)({teamId:null,userId:l});e&&(0,el.dT)(l,{...e,newCollaborators:el.kt})}to(J.sf({...e.selectedView,paymentStep:ej.tn.PLAN_COMPARISON,ignoreCurrentPlan:ek}))}}),R===ej.tn.CONFIRM_PAY?(0,s.jsxs)(s.Fragment,{children:[tD&&(0,s.jsx)("div",{className:v.s.mxAuto.alignLeft.mb16.$,children:(0,s.jsx)(f._,{color:f.S.INFORMATION,text:(0,S.t)("pro_cart.review.extra_validation")})}),tc||eD?(0,s.jsx)(P.f,{}):(0,s.jsx)(A.j,{billingAddress:e7,billingInterval:eU,countByBillableProductKey:eL,currency:eC,displayName:tx??"",hasUpgradeSucceeded:tC,isRequestPending:x.submitPending,legalName:x.legalName,navigateToEditDetails:()=>{to(J.sf({...e.selectedView,paymentStep:ej.tn.PAYMENT_AND_ADDRESS,previousView:e.selectedView.previousView,ignoreCurrentPlan:ek,billingPeriod:eA}))},onSubmit:()=>{let t=()=>{tw(!0),(0,u.sj)(),(0,eh.OI)(to),(0,eS.h5)(e.selectedView.teamFlowType)&&null===eP&&(0,el.Al)(l)};if(e.selectedView.teamId&&tI)to(K.Nj({teamId:e.selectedView.teamId}));else if(e.selectedView.teamId&&x.promo){let a=e.selectedView.teamId;to(Z.S_({teamId:a,teamName:j[a].name,promoCode:x.promo?.code||"",onSuccess:()=>{t(),(0,h._H)(),to(K.Ay({promo:null})),l?e.selectedView.previousView?J.sf(e.selectedView.previousView):X._l({workspace:{userId:l,orgId:null,teamId:a},view:{view:"allProjects"}}):to(J.sf(e.selectedView.previousView||{view:"team",teamId:a}))},onError:()=>{(0,h._H)(),to(K.Ay({promo:null})),to(J.sf({...e.selectedView,paymentStep:ej.tn.PLAN_COMPARISON,ignoreCurrentPlan:ek}))}}))}else{to(q.b({completed_pro_cart_flow:!0}));let{subtotal:a,taxTotal:s,total:r}=(0,N.ZY)({countBySeatType:eL,applicablePrices:eH,taxPercent:x.taxes?.tax_percent??0}),i=(0,N.GL)({subtotal:a,taxTotal:s,total:r});to(K.I2({submitPending:!0})),to((0,Z.gk)({teamId:e.selectedView.teamId,selectedCurrency:eC,teamName:V,teamFlowType:e.selectedView.teamFlowType,invites:tk,hasSelectedStudentTeam:tI,onSuccess:t,displayedCostBreakdown:i,isCampfireCart:!0,inStarterTeamLoopholes:ed,displayedPriceKeys:(0,N.vm)(eG)}))}},onSubmitTrackingProperties:{selectedUserSeatTypes:(0,C.Tj)(x.cartSelections?.selectedUserSeatTypes),countBySeatType:(0,C.gS)(eL),isTeamAdmin:L,...(0,N.ZY)({countBySeatType:eL,applicablePrices:eH,taxPercent:x.taxes?.tax_percent??0})},shippingAddress:e4,taxPercent:x.taxes?.tax_percent,tier:ey.Ju.PRO,title:(0,S.t)("checkout.upgrade_to_a_professional_plan"),userEmail:a?.email||""})]}):(0,s.jsxs)("div",{style:T.sx.grid.add({gridTemplateColumns:"1fr 280px",gap:"48px"}).$,children:[R===ej.tn.CHOOSE_PLAN&&(tc||t_&&!ed?(0,s.jsx)(P.f,{}):(0,s.jsx)(eW,{teamId:e.selectedView.teamId??"",currency:eC,renewalTerm:eU,eligibleTeamUsers:tm.data?.eligible_team_users??[tu],initCampfireSeats:x.cartSelections,onUpdateCampfireSeats:e=>to(K.qU({cartSelections:e}))})),R===ej.tn.PAYMENT_AND_ADDRESS&&(0,s.jsx)(eV,{billingAddress:e7,canSeeBillingAddressExp:eO,createPaymentElement:e0,enableSavedPaymentMethods:e_,error:tn,isCampfireCart:!0,legalCompanyName:e9,nameOnPaymentMethod:te,onRegionalVatGstIdChange:ti,onVatGstIdChange:ts,paymentFlow:es.wn.PRO_UPGRADE,paymentMethodType:tl,paymentMethods:eY,regionalVatGstId:tr,selectedPaymentMethod:eq,setEnableSavedPaymentMethods:eb,setSelectedPaymentMethod:eQ,shippingAddress:e4,unmountPaymentElement:e1,updateBillingAddress:e3,updateLegalCompanyName:e6,updateNameOnPaymentMethod:tt,updateShippingAddress:e8,vatGstId:ta}),[ej.tn.CHOOSE_PLAN,ej.tn.PAYMENT_AND_ADDRESS].includes(R)&&(0,s.jsx)(I.z,{billingInterval:eU,buttonText:R===ej.tn.PAYMENT_AND_ADDRESS?(0,S.t)("pro_cart.sidebar.next_review"):(0,S.t)("pro_cart.sidebar.next_payment_information"),canEnforcePaidSeatMinimum:R===ej.tn.CHOOSE_PLAN,countByBillableProductKey:eL,currency:eC,isButtonDisabled:tp,isLoading:x.submitPending,onClickNext:tR,onSwitchBillingInterval:e=>{d.az.trackDefinedEvent("monetization_upgrades.checkout_change_renewal_term",{teamId:eP??void 0,renewalTerm:e}),to(K.Lo({billingPeriod:(0,ep.JV)(e)}))},onSwitchCurrency:eE,tier:ey.Ju.PRO,title:(0,S.t)("checkout.your_professional_plan"),trackingProperties:{selectedUserSeatTypes:(0,C.Tj)(x.cartSelections?.selectedUserSeatTypes),countBySeatType:(0,C.gS)(eL),savedPaymentMethodId:e_?eq?.id:void 0}})]})]})]})})}function eK(e){return(0,s.jsx)(x.tH,{team:n.e.MONETIZATION_UPGRADES,boundaryKey:"TeamUpgradeBillingRemodel",fallback:x.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:ed.y4,children:(0,s.jsx)(eY,{...e})})}function eZ({step:e,teamName:t,renewalTerm:a}){let r=(0,Q.Dj)(),i=(0,s.jsx)(j.Ph,{href:"/pricing",trackingProperties:{trackingDescriptor:ee.c.LEARN_MORE_ABOUT_SEATS},newTab:!0,trusted:!0,children:(0,S.tx)("checkout.learn_more_about_seats")});return(0,s.jsxs)("div",{className:v.s.mb32.$,"data-testid":"cart-pro-header",children:[(0,s.jsx)("h2",{className:v.s.font15.lh24.fontMedium.$,children:function(e,t,a){switch(t=t||(0,S.t)("checkout.select_seats_header.your_team"),e){case ej.tn.PLAN_COMPARISON:return(0,S.tx)("pro_cart.choose_plan.choose_a_plan_for_your_new_team");case ej.tn.CHOOSE_PLAN:if(a)return(0,S.tx)("checkout.select_seats_header_exp",{teamName:t});return(0,S.tx)("checkout.select_seats_header",{teamName:t});case ej.tn.PAYMENT_AND_ADDRESS:return(0,S.tx)("checkout.enter_your_payment_details");case ej.tn.CONFIRM_PAY:return(0,S.tx)("checkout.everything_look_good");default:(0,l.wc)(e)}}(e,t,r())}),e===ej.tn.CHOOSE_PLAN&&(0,s.jsx)("p",{className:v.s.colorTextSecondary.font13.mt8.$,children:(0,S.tx)("checkout.select_seats_table.seat_types_have_been_suggested",{learnMoreAboutSeatsLink:i})}),e===ej.tn.CONFIRM_PAY&&(0,s.jsx)("p",{className:v.s.colorTextSecondary.font13.mt8.$,children:(0,S.tx)("checkout.confirm_your_plan_seats_and_payment_details_then_you_re_all_set")}),(0,G.UR)()&&(0,s.jsx)(B.W,{billingPeriod:(0,ep.JV)(a)??void 0,isCampfireCart:!0})]})}},300137:(e,t,a)=>{a.d(t,{W:()=>v});var s=a(486106),r=a(946806),i=a(601108),l=a(508367),n=a(920142),d=a(169182),o=a(141320),c=a(589278),m=a(303541),_=a(941192),u=a(831799),p=a(713695),h=a(453906);let g=p.M4.Query({fetch:async()=>(await h.Cn.maintenancePoc1()).data.meta});var x=a(372672),f=a(831101);function v(e){if(!(0,i.k)().campfire_cart_banner)return(0,s.jsx)(s.Fragment,{});let{isProCart:t,isCampfireCart:a}=e;return(0,s.jsx)("div",{style:_.sx.if(t,_.sx.add({marginTop:"-16px"}).mb32,_.sx.mt16).if(a,_.sx.mt16.add({marginBottom:"40px"}),_.sx.flex.justifyCenter.px16).$,children:(0,s.jsx)(y,{...e})})}function y({billingPeriod:e=f.tY.ANNUAL,isProCart:t,isReviewPage:a,isCampfireCart:h}){let v=(0,x.iZ)(),y=function(e){let{data:t,status:a}=function(e){let[t]=(0,p.IT)(g(null),{enabled:(0,i.k)().campfire_i18n_verbiage&&e});return t}(e);if("loaded"===a&&t?.strings.cart_banner)return{info:t.strings.cart_banner.cart_banner_info,edu_info:t.strings.cart_banner.cart_banner_edu_info}}(!0),T=(0,d.tl)().analyze_data_flow_v2_until,b=(0,o.cn)(v)&&t?y?.edu_info.replace(/\[BILLING_REMODEL_GA_DATE\]/g,n.A(T).format("MMMM D, YYYY")):y?.info.replace(/\[NEXT_RENEWAL_DATE\]/g,j(e)),N=(0,m.t)("checkout.banner.price_change",{date:j(e)});return(0,s.jsx)(u.fu,{name:"Campfire Cart Banner",children:(0,s.jsxs)("div",{className:c.s.flex.justifyBetween.itemsCenter.minH40.px8.flexGrow1.colorBgWarningTertiary.$,style:_.sx.add({borderRadius:"13px"}).if(a,_.sx.add({maxWidth:t?"693px":"758px"})).$,"data-testid":"campfire-cart-banner",children:[(0,s.jsxs)("div",{className:c.s.flex.itemsCenter.$,children:[(0,s.jsx)(r.b,{}),(0,s.jsx)("p",{className:c.s.fontMedium.px4.$,children:h?N:b})]}),(0,s.jsx)(S,{onClick:()=>(0,l.FJ)("https://help.figma.com/hc/articles/27468498501527","_blank"),children:(0,m.tx)("campfire_banner.learn_more")})]})})}function j(e){let t=new Date;t.setFullYear(t.getFullYear()+1);let a=new Date;return a.setFullYear(2025),a.getDate()>=11?a.setMonth(2):a.setMonth(3),(0,n.A)(e===f.tY.ANNUAL?t:a).format("MMMM D, YYYY")}let S=(0,u.tf)(function({onClick:e,children:t}){return(0,s.jsx)("button",{className:"campfire_cart_banner--mockUI3Button--Aw9Vz",onClick:e,children:t})})},262856:(e,t,a)=>{a.d(t,{L:()=>S});var s=a(486106),r=a(7378),i=a(514228),l=a(536384),n=a.n(l),d=a(238719),o=a(637027),c=a(589278),m=a(573154),_=a(276031),u=a(303541),p=a(231762),h=a(156213),g=a(482142),x=a(834575),f=a(102752),v=a(519092),y=a(289198);let j=r.memo(function(e){let t=(0,i.wA)(),{displayName:a,legalName:l}=e,[f,j]=r.useState(a||""),[S,T]=r.useState(l||""),{isLoading:b,withLoading:N}=(0,_.R)(),C=()=>{t(h.Ce())},w=async a=>{a.preventDefault(),await N(async()=>{if(e.updateNameImmediately&&e.team)try{e.canSeeBillingAddressExp?await (0,d.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:f}}},x.$.updateDisplayName({teamId:e.team.id,updatedDisplayName:f})):await (0,d.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:f}}},x.$.updateTeamName({teamId:e.team.id,updatedDisplayName:f,updatedLegalName:S}))}catch(s){let a=e.canSeeBillingAddressExp?(0,u.t)("update_company_details_modal.update_display_name.error"):(0,u.t)("update_company_details_modal.update_team_name.error");throw t(m.s.error((0,p.J)(s)||a)),s}else t(g.yy({legalName:S,displayName:f}));C()})};return(0,s.jsx)(v.OJ,{onClose:C,title:e.modalTitle,minWidth:448,maxWidth:448,fixedTop:!0,children:(0,s.jsxs)("form",{onSubmit:w,className:c.s.p16.$,children:[(0,s.jsxs)("div",{className:c.s.mt4.$,children:[(0,s.jsxs)("label",{htmlFor:"teamName",className:c.s.colorTextSecondary.$,children:[(0,s.jsx)("strong",{className:c.s.block.colorText.$,children:(0,u.tx)("pro_cart.review.edit_details.team_name_label")}),(0,u.tx)("pro_cart.review.edit_details.team_name_description")]}),(0,s.jsx)(o.ks,{value:f,id:"teamName",onChange:e=>{j(e.target.value)},dataTestId:"company-team-name",className:c.s.block.mt8.wFull.$})]}),!e.canSeeBillingAddressExp&&(0,s.jsxs)("div",{className:c.s.mt20.$,children:[(0,s.jsxs)("label",{htmlFor:"legalName",className:c.s.colorTextSecondary.$,children:[(0,s.jsx)("strong",{className:c.s.block.colorText.$,children:(0,u.tx)("pro_cart.review.edit_details.company_name_label")}),(0,u.tx)("pro_cart.review.edit_details.company_name_description")]}),(0,s.jsx)(o.ks,{value:S,id:"legalName",onChange:e=>{T(e.target.value)},dataTestId:"company-name",className:c.s.block.mt8.wFull.$})]}),(0,s.jsxs)("div",{className:n()(y.v0,y.hF),children:[(0,s.jsx)(o.tM,{onClick:C,disabled:b,children:(0,u.tx)("pro_cart.review.edit_details.cancel")}),(0,s.jsx)(o.vd,{className:y.pL,disabled:b,type:"submit",children:(0,u.tx)("pro_cart.review.edit_details.save")})]})]})})}),S=(0,f.Ju)(j,"UpdateCompanyDetailsModal")},2942:(e,t,a)=>{a.d(t,{Mt:()=>E,OI:()=>w,Ud:()=>N});var s=a(7378),r=a(514228),i=a(449184),l=a(416935),n=a(39751),d=a(169182),o=a(910117),c=a(573154),m=a(303541),_=a(307841),u=a(929976),p=a(714946),h=a(482142),g=a(584989),x=a(332483),f=a(191312),v=a(831101),y=a(347702),j=a(394825),S=a(372672),T=a(18797),b=a(345997);let N=(0,y.D)(({teamId:e,canSeeBillingAddressExp:t})=>{let a=(0,r.wA)(),p=(0,r.d4)(e=>e.loadingState),x=(0,r.d4)(t=>e?t.teamUserByTeamId[e]:null),y=(0,r.d4)(e=>e.selectedView),N=(0,S.iZ)(),[w,A]=(0,s.useState)(!0),I=(0,n.ZC)(e),k=(0,_.sx)(),P=g.Xw.loadingKeyForPayload({teamId:e}),M=(0,T.GH)(p,P),R=(0,d.DC)();(0,s.useEffect)(()=>{a(g.Xw({teamId:e}))},[a,e]);let O=function(){let e=(0,r.wA)();return(0,s.useCallback)(t=>{(0,i.sx)("Loaded Saved Cart State",{teamId:t.teamId,lastSavedAt:t.updatedAt}),e(h.eK(t))},[e])}();return(0,s.useEffect)(()=>{async function s(t){try{let s=await o.Ay.post("/api/subscriptions/teams/calculate_estimate",{...t,team_id:e});a(h.i({taxes:s.data.meta.estimate}))}catch(e){a(c.s.error((0,m.t)("payments.errors.estimate_calculation_error"))),a(u.sf({...y,paymentStep:v.tn.PAYMENT_AND_ADDRESS}))}A(!1)}if(void 0===I||I===e||w||(E(a),A(!0)),(!e||M)&&w){let n=(0,b.BR)(x,N),d=Object.entries(n).map(([e,t])=>{if((0,l.nD)(t.email||""))return e}).filter(e=>!!e);a(h.M2({figmaEmailTeamUsers:d}));let o=(0,j.lX)({teamId:e,userId:N?.id});if(o){o.editorStatusChanges=(0,j.nt)(o.editorStatusChanges,n);let l=(0,b.Ky)(n,o.editorStatusChanges,f._Y.DESIGN),c=(0,b.Ky)(n,o.editorStatusChanges,f._Y.WHITEBOARD),m=l+o.numEmptyDesignSeats,_=c+o.numEmptyWhiteboardSeats;if(O({numDesignEditors:m,numWhiteboardEditors:_,editorStatusChanges:o.editorStatusChanges,teamId:e,updatedAt:o.updatedAt,cartSelections:o.cartSelections}),R){var r;let e=(r=R.billing_period,v.tY[v.tY[r]]),i=t?{billing_address:R.billing_address,shipping_address:R.shipping_address||R.billing_address}:null;a(h.Lo({billingPeriod:e})),a(h.$h({vatGstId:R.vat_gst_id})),a(h.yy({legalName:R.customer_legal_name||R.company_name,displayName:R.display_name})),a(h.Ef({regionalVatGstId:R.regional_vat_gst_id})),s({address:R.address,editor_status_changes:o.editorStatusChanges,figma_email_team_users:d,selected_currency:R.currency,annual_quantity:(0,b.fD)(e,m),monthly_quantity:(0,b.Rq)(e,m),annual_whiteboard_quantity:(0,b.fD)(e,_),monthly_whiteboard_quantity:(0,b.Rq)(e,_),vat_gst_id:R.vat_gst_id,regional_vat_gst_id:R.regional_vat_gst_id,...i})}else"teamUpgrade"===y.view&&y.paymentStep===v.tn.CONFIRM_PAY&&y.billingPeriod!==v.tY.STUDENT&&i.az.trackDefinedEvent("monetization_upgrades.pro_checkout_confirmation_without_payment_flow_data",{isCampfireCart:k,teamId:e??void 0}),A(!1)}else A(!1)}},[a,M,x,I,e,N,w,R,y,O,t,k]),(0,s.useEffect)(()=>()=>{e&&C(a,e)},[a,e]),w}),C=(0,y.D)((e,t)=>{let a=g.Xw.loadingKeyForPayload({teamId:t});e(p.yH({key:a}))});function w(e){e(h.qU({cartSelections:{countBySeatType:x.N_.dict(e=>0),selectedUserSeatTypes:{}}}))}function E(e){e(h.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[],figmake:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[],figmake:[]}}})),e(h.js({numDesignEditors:0})),e(h.Az({numWhiteboardEditors:0}))}},453906:(e,t,a)=>{a.d(t,{Cn:()=>m,JO:()=>o,UI:()=>l,X4:()=>i,by:()=>d,fm:()=>n});var s=a(239603),r=a(181241),i=(e=>(e.DAILY="daily",e.WEEKLY="weekly",e.MONTHLY="monthly",e))(i||{}),l=(e=>(e.ALL_ADMINS="all_admins",e.SPECIFIC_ADMINS="specific_admins",e))(l||{}),n=(e=>(e.TEAM="team",e.ORGANIZATION="organization",e))(n||{}),d=(e=>(e.NEW_EDITOR_NOTIFICATION="new_editor_notification",e))(d||{}),o=(e=>(e.VIEWER="viewer",e.VIEWER_RESTRICTED="viewer_restricted",e.FULL="full",e))(o||{});let c=s.z.object({strings:s.z.object({team_admin_billing_cost_banner:s.z.object({banner_description:s.z.string()}),cart_banner:s.z.object({cart_banner_info:s.z.string(),cart_banner_edu_info:s.z.string()})}).partial()}).optional(),m=new class{constructor(){this.NotificationSettingsSchemaValidator=(0,r.vh)(),this.MaintenancePoc1Validator=(0,r.YV)("MaintenancePoc1",c,null),this.PlanPropertiesSchemaValidator=(0,r.vh)()}getNotificationSettings(e){return this.NotificationSettingsSchemaValidator.validate(async({xr:t})=>await t.get("/api/billing/notification_settings",r.td.toAPIParameters({plan_id:e.planId,plan_type:e.planType,notification_type:e.notificationType}))??null)}getPlanProperties(e){return this.PlanPropertiesSchemaValidator.validate(async({xr:t})=>await t.get(`/api/billing/${e.planType}/${e.planId}/plan_properties`,r.td.toAPIParameters({desired_properties:["default_paid_status_design","default_paid_status_whiteboard"].toString()}))??null)}updatePlanProperties(e){return this.PlanPropertiesSchemaValidator.validate(async({xr:t})=>await t.put(`/api/billing/${e.planType}/${e.planId}/plan_properties`,e.properties)??null)}maintenancePoc1(){return this.MaintenancePoc1Validator.validate(async({xr:e})=>await e.get("/api/billing/maintenance_846b4c12"))}}},341232:(e,t,a)=>{a.d(t,{s:()=>m,K:()=>_});var s=a(486106),r=a(714743),i=a(589278),l=a(941192),n=a(831799),d=a(809027),o=a(97605);let c=e=>e.maxSeatsCount?Math.min(e.maxSeatsCount,99):99;function m(e){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:i.s.flex.itemsCenter.$,children:[(0,s.jsxs)("div",{className:"seat_counter--seatCounter--DiuEb",children:[(0,s.jsx)(n.$z,{disabled:e.numSeats<=e.minSeatsCount,innerText:`remove additional ${e.billableProductKey} seat`,className:"seat_counter--minusButton--e0dEs",onClick:e.decrementSeats,dataTestId:`remove-additional-${e.billableProductKey}`,children:(0,s.jsx)(r.B,{svg:d.A})}),(0,s.jsx)("input",{value:e.numSeats,maxLength:2,onChange:e.updateAdditionalSeatsText,className:"seat_counter--additionalSeatsInput--pOPr1",onFocus:e=>e.target.select()}),(0,s.jsx)(n.$z,{disabled:e.numSeats>=c(e),innerText:`add additional ${e.billableProductKey} seat`,className:"seat_counter--plusButton--ZEWEz",onClick:e.incrementSeats,dataTestId:`add-additional-${e.billableProductKey}`,children:(0,s.jsx)(r.B,{svg:o.A})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"seat_counter--headerText--xIHXf",children:e.headerText}),e.headerSubText&&(0,s.jsx)("div",{className:"seat_counter--headerSubText--c9SXC seat_counter--headerText--xIHXf",children:e.headerSubText}),e.clarificationText&&(0,s.jsx)("span",{style:l.sx.colorText.colorBgSecondary.h16.pl4.pr4.mt8.bRadius1.inlineBlock.add({fontSize:"9px"}).$,children:e.clarificationText})]})]})})}function _(e,t){return a=>{if(""===a.target.value){e(0);return}let s=parseInt(a.target.value);isNaN(s)||(s>99?e(99):t&&s>t?e(t):e(s))}}},393403:(e,t,a)=>{a.d(t,{I:()=>i});var s=a(486106),r=a(7378);class i extends r.Component{render(){return(0,s.jsxs)("div",{className:"persisted_error--container--ls5K4",style:{marginTop:this.props.marginTop??32},children:[(0,s.jsx)("div",{className:"persisted_error--sideBar--C-abH"}),(0,s.jsx)("div",{className:"persisted_error--message--EiciR",children:this.props.message})]})}}},371580:(e,t,a)=>{a.d(t,{o:()=>l});var s=a(486106),r=a(7378);if(443==a.j)var i=a(443820);function l(e){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(i.k,{}),children:e.children})}},276031:(e,t,a)=>{a.d(t,{R:()=>r});var s=a(7378);function r(){let[e,t]=s.useState(!1);return{isLoading:e,withLoading:async e=>{try{t(!0),await e()}finally{t(!1)}}}}},368426:(e,t,a)=>{a.d(t,{d:()=>r});var s=a(486106);let r=(0,a(7378).memo)(function(e){return(0,s.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,s.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 12a.5.5 0 0 1-.5-.5V4.707L4.354 7.854a.5.5 0 1 1-.708-.707l4-4a.5.5 0 0 1 .708 0l4 4a.5.5 0 0 1-.708.707L8.5 4.707V11.5a.5.5 0 0 1-.5.5",clipRule:"evenodd"})})})},59973:(e,t,a)=>{a.d(t,{w:()=>r});var s=a(486106);let r=(0,a(7378).memo)(function(e){return(0,s.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,s.jsx)("path",{fill:"var(--color-icon)",d:"M17.523 12.036a.5.5 0 0 1 .449.546A5.999 5.999 0 0 1 7 15.314V17.5a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1H8.002q.066.089.137.175a5 5 0 0 0 8.838-2.69.5.5 0 0 1 .546-.45M17.5 6a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H16a5 5 0 0 0-8.977 2.515.5.5 0 1 1-.995-.097A6 6 0 0 1 17 8.685V6.5a.5.5 0 0 1 .5-.5"})})})}}]);

//# debugId=cb8919af-b03e-5d10-8192-da83ae97dacf

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/03584d68094ef67d664086eefa3ab23602f30257/c5e2cae0-8b575dee194e4735.min.js.map